(()=>{"use strict";var e={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{e.exports=require("assert")},50852:e=>{e.exports=require("async_hooks")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},98188:e=>{e.exports=require("module")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},26144:e=>{e.exports=require("vm")},71267:e=>{e.exports=require("worker_threads")},83926:(e,r,t)=>{t.d(r,{j:()=>getLogger});var i=t(27789),o=t.n(i),a=t(94369),n=t(99027),l=t(46164);let send=async function(e,r){n.u.clientLog.mutate({level:e,logEvent:l.s.parse(r)})},d=null,getLogger=()=>null!=d?d:d=o()({...a.N,browser:{transmit:{send}}})},30839:(e,r,t)=>{var i,o,a=t(253),n=t(12530),l=t(6704),d=t(95754),p=t(63969),s=t(75427),c=t(22212),u=t(328),_=t(39940),b=t(52485),g=t(16350);!function(e){e.START="START",e.STOP="STOP",e.START_ACCUMULATION="START_ACCUMULATION",e.STOP_ACCUMULATION="STOP_ACCUMULATION"}(i||(i={})),function(e){e.STARTED="STARTED",e.STOPPED="STOPPED",e.ACCUMULATING="ACCUMULATING",e.ACCUMULATED="ACCUMULATED",e.SIGNAL="SIGNAL",e.PSD="PSD",e.RX_RATE="RX_RATE",e.SAMPLE_RATE="SAMPLE_RATE",e.SPEC_SAMPLE_RATE="SPEC_SAMPLE_RATE"}(o||(o={}));let mapToWorkerOutput=e=>(0,_.UI)(e),m=new n.x,x=(0,a.p)(()=>new Worker(new URL(t.p+t.u(9352),t.b)),m).pipe((0,_.BN)()),k=x.pipe((0,_.hX)(e=>"psd"===e.type),mapToWorkerOutput(e=>({type:"PSD",payload:e.psd})),(0,_.BN)());(0,a.YX)(class{work(e){return e.pipe((0,_.zg)(e=>{switch(e.type){case"START":{if(null!=this.stream)throw Error("Stream already started");this.stream=(0,g.z)(e.payload.url,e.payload.sensor);let setup=async()=>{if(null==this.stream)throw Error("Stream not initialized");this.signalProcessor=await (0,b.q)(this.stream.dataStream$),this.signalProcessor.signal$.subscribe(e=>m.next({command:"sampleInput",payload:[e[0].toNumber(),e[1],e[2],e[3]]})),this.signalProcessor.specSampleRate$.subscribe(e=>m.next({command:"specSampleRateInput",payload:e}));let e=(0,l.x)((0,d.D)([(0,p.of)({type:"STARTED",payload:this.signalProcessor.timeStamp}),this.signalProcessor.timeMappedSignal$.pipe(mapToWorkerOutput(e=>{let r=new Float64Array([e[0].toNumber(),...e.slice(1)]);return{type:"SIGNAL",payload:r.buffer}})),this.signalProcessor.sampleRate$.pipe(mapToWorkerOutput(e=>({type:"SAMPLE_RATE",payload:e}))),this.signalProcessor.specSampleRate$.pipe(mapToWorkerOutput(e=>({type:"SPEC_SAMPLE_RATE",payload:e}))),this.psdSubscribed?s.E:k]),c.z).pipe((0,_.Jn)());return this.psdSubscribed||(this.psdSubscribed=!0),e};return(0,d.D)(setup()).pipe((0,_.Jn)())}case"STOP":return null!=this.stream&&(this.stream.close(),this.stream=null),(0,p.of)({type:"STOPPED"});case"START_ACCUMULATION":if(null==this.signalProcessor)throw Error("Stream not initialized");if(null==x)throw Error("PSD worker not initialized");return m.next({command:"accumulate",payload:!0}),(0,l.x)((0,d.D)([(0,p.of)({type:"ACCUMULATING"}),(0,l.x)((0,d.D)((0,u.z)(x.pipe((0,_.hX)(e=>"accumulation_finished"===e.type)))).pipe(mapToWorkerOutput(e=>({type:"ACCUMULATED",payload:e.psd}))),c.z)]),c.z).pipe((0,_.Jn)());case"STOP_ACCUMULATION":if(null==x)throw Error("Stream not initialized");if(null==x)throw Error("PSD process not initialized");return m.next({command:"accumulate",payload:!1}),s.E;default:throw this.stream?.close(),this.stream=null,Error("Invalid command")}}))}selectTransferables(e){switch(e.type){case"SIGNAL":return[e.payload];case"PSD":case"ACCUMULATED":return[e.payload.x.estimates.buffer,e.payload.x.frequencies.buffer,e.payload.y.estimates.buffer,e.payload.y.frequencies.buffer,e.payload.z.estimates.buffer,e.payload.z.frequencies.buffer,e.payload.total.estimates.buffer,e.payload.total.frequencies.buffer];default:return[]}}constructor(){this.stream=null,this.signalProcessor=null,this.psdSubscribed=!1}})},61331:(e,r,t)=>{t.d(r,{Bd:()=>a}),t(96603);var i=t(61709),o=t(13728);let a=o.z.union([o.z.literal("rose"),o.z.literal("red"),o.z.literal("yellow"),o.z.literal("orange"),o.z.literal("green"),o.z.literal("lime"),o.z.literal("blue"),o.z.literal("sky"),o.z.literal("indigo"),o.z.literal("purple"),o.z.literal("pink"),o.z.literal("brand"),o.z.literal("gray"),o.z.literal("plain")]),n=(0,i.j)("",{variants:{color:{rose:"text-rose-700 dark:text-rose-400",red:"text-red-700 dark:text-red-400",yellow:"text-yellow-800 dark:text-yellow-500",orange:"text-orange-800 dark:text-orange-500",green:"text-green-700 dark:text-green-400",lime:"text-lime-700 dark:text-lime-400",blue:"text-blue-700 dark:text-blue-400",sky:"text-sky-700 dark:text-sky-400",indigo:"text-indigo-700 dark:text-indigo-400",purple:"text-purple-700 dark:text-purple-400",pink:"text-pink-700 dark:text-pink-400",brand:"text-brand-700 dark:text-brand-400",gray:"text-zinc-600 dark:text-zinc-400",plain:"text-zinc-900 dark:text-zinc-100"}}}),l=(0,i.j)("",{variants:{color:{rose:"bg-rose-50 dark:bg-rose-400/10",red:"bg-red-50 dark:bg-red-400/10",yellow:"bg-yellow-50 dark:bg-yellow-400/10",orange:"bg-orange-50 dark:bg-orange-400/10",green:"bg-green-50 dark:bg-green-500/10",lime:"bg-lime-50 dark:bg-lime-500/10",blue:"bg-blue-50 dark:bg-blue-400/10",sky:"bg-sky-50 dark:bg-sky-400/10",indigo:"bg-indigo-50 dark:bg-indigo-400/10",purple:"bg-purple-50 dark:bg-purple-400/10",pink:"bg-pink-50 dark:bg-pink-400/10",brand:"bg-brand-100 dark:bg-brand-400/10",gray:"bg-zinc-50 dark:bg-zinc-400/10",plain:"bg-zinc-900/10 dark:bg-zinc-100/10"}}}),d=(0,i.j)("",{variants:{color:{rose:"border-rose-600/10 dark:border-rose-400/20 ring-rose-600/10 dark:ring-rose-400/20",red:"border-red-600/10 dark:border-red-400/20 ring-red-600/10 dark:ring-red-400/20",yellow:"border-yellow-600/20 dark:border-yellow-400/20 ring-yellow-600/20 dark:ring-yellow-400/20",orange:"border-orange-600/20 dark:border-orange-400/20 ring-orange-600/20 dark:ring-orange-400/20",green:"border-green-600/20 dark:border-green-500/20 ring-green-600/20 dark:ring-green-500/20",lime:"border-lime-600/20 dark:border-lime-500/20 ring-lime-600/20 dark:ring-lime-500/20",blue:"border-blue-700/10 dark:border-blue-400/30 ring-blue-700/10 dark:ring-blue-400/30",sky:"border-sky-700/10 dark:border-sky-400/30 ring-sky-700/10 dark:ring-sky-400/30",indigo:"border-indigo-700/10 dark:border-indigo-400/30 ring-indigo-700/10 dark:ring-indigo-400/30",purple:"border-purple-700/10 dark:border-purple-400/30 ring-purple-700/10 dark:ring-purple-400/30",pink:"border-pink-700/10 dark:border-pink-400/20 ring-pink-700/10 dark:ring-pink-400/20",brand:"border-brand-600/40 dark:border-brand-400/30 ring-brand-600/40 dark:ring-brand-400/30",gray:"border-zinc-500/10 dark:border-zinc-400/20 ring-zinc-500/10 dark:ring-zinc-400/20",plain:"border-zinc-900 dark:border-zinc-100 ring-zinc-900 dark:ring-zinc-100"}}});(0,i.j)("flex-0 inline-flex w-auto items-center rounded-md font-medium ring-1 ring-inset",{variants:{size:{sm:"px-1.5 gap-1.5 py-1 text-2xs leading-3",md:"px-2 gap-2 py-1 text-xs leading-4",lg:"px-2 gap-2 py-1 text-xs leading-6"},color:{rose:[l({color:"rose"}),d({color:"rose"}),n({color:"rose"})],red:[l({color:"red"}),d({color:"red"}),n({color:"red"})],yellow:[l({color:"yellow"}),d({color:"yellow"}),n({color:"yellow"})],orange:[l({color:"orange"}),d({color:"orange"}),n({color:"orange"})],green:[l({color:"green"}),d({color:"green"}),n({color:"green"})],lime:[l({color:"lime"}),d({color:"lime"}),n({color:"lime"})],blue:[l({color:"blue"}),d({color:"blue"}),n({color:"blue"})],sky:[l({color:"sky"}),d({color:"sky"}),n({color:"sky"})],indigo:[l({color:"indigo"}),d({color:"indigo"}),n({color:"indigo"})],purple:[l({color:"purple"}),d({color:"purple"}),n({color:"purple"})],pink:[l({color:"pink"}),d({color:"pink"}),n({color:"pink"})],brand:[l({color:"brand"}),d({color:"brand"}),n({color:"brand"})],gray:[l({color:"gray"}),d({color:"gray"}),n({color:"gray"})],plain:[l({color:"plain"}),d({color:"plain"}),n({color:"plain"})]}},defaultVariants:{size:"md",color:"gray"}})},99027:(e,r,t)=>{t.d(r,{u:()=>i.uF});var i=t(76461)},76461:(e,r,t)=>{t.d(r,{uF:()=>o});var i=t(68445);function getBaseUrl(){return process.env.RENDER_INTERNAL_HOSTNAME?`http://${process.env.RENDER_INTERNAL_HOSTNAME}:${process.env.PORT}/configure`:`http://127.0.0.1:${process.env.PORT??3e3}/configure`}(0,t(9122).t)({config:()=>({links:[(0,i.N8)({url:`${getBaseUrl()}/api/trpc`,maxURLLength:2083})]}),overrides:{useMutation:{async onSuccess(e){await e.originalFn(),await e.queryClient.invalidateQueries()}}},ssr:!1});let o=(0,i.K5)({links:[(0,i.N8)({url:`${getBaseUrl()}/api/trpc`,maxURLLength:2083})]})},89799:(e,r,t)=>{t.d(r,{NI:()=>n});var i=t(13728),o=t(43700);let a=i.z.union([i.z.literal("time"),i.z.literal("x_acceleration"),i.z.literal("y_acceleration"),i.z.literal("z_acceleration")]),n=i.z.object({header:i.z.tuple([a,a,a,a])});i.z.object({data:i.z.array(i.z.tuple([i.z.number(),i.z.number(),i.z.number(),i.z.number()])),overflows:i.z.number().optional(),errors:i.z.number().optional()});let l=i.z.object({frequencies:i.z.array(i.z.number()),estimates:i.z.array(i.z.number()),powerRange:i.z.object({max:i.z.number(),min:i.z.number()})}),d=i.z.object({x:l,y:l,z:l,total:l}),p=i.z.string().brand("MacroID"),s=i.z.string().brand("MacroSequenceID"),c=i.z.string().brand("MacroRecordingID"),u=i.z.string().brand("MacroRecordingRunID"),_=i.z.object({capturePSD:i.z.boolean().default(!1),accelerometer:o.Yx.optional(),color:i.z.string().optional()}).superRefine((e,r)=>(e.capturePSD&&null==e.accelerometer&&r.addIssue({code:i.z.ZodIssueCode.custom,message:"Required when recording resonance data",path:["accelerometer"]}),e));i.z.object({id:c,macroRecordingRunId:u,macroId:p,sequenceId:s,startTimeStamp:i.z.number(),endTimeStamp:i.z.number(),accelerometer:o.Yx,recordingHardwareName:i.z.string(),psd:d,name:i.z.string()});let b=i.z.object({id:s,name:i.z.string(),recording:_.nullable(),gcode:i.z.string().min(2)}),g=i.z.object({id:p,name:i.z.string(),description:i.z.string(),createdAtTimeStamp:i.z.number(),updatedAtTimeStamp:i.z.number().nullable(),recordingCount:i.z.record(s,i.z.number()),sequences:i.z.array(b)});g.omit({recordingCount:!0,createdAtTimeStamp:!0,updatedAtTimeStamp:!0})},43700:(e,r,t)=>{t.d(r,{Yx:()=>s});var i=t(13728),o=t(17561),a=t(30819),n=t(61331);let l=["EPCOS 100K B57560G104F","ATC Semitec 104GT-2","ATC Semitec 104NT-4-R025H42G","Generic 3950","Honeywell 100K 135-104LAG-J01","NTC 100K MGB18-104F39050L32","SliceEngineering 450","TDK NTCG104LH104JT1","PT1000"],d="";if(process.env.RATOS_CONFIGURATION_PATH){let e=o.Rz.parse(process.env);d=e.RATOS_CONFIGURATION_PATH}let p=i.z.object({path:i.z.string().startsWith(d).endsWith(".cfg"),id:i.z.string()});i.z.enum(l),p.extend({type:i.z.literal("hotend"),title:i.z.string(),thermistor:i.z.enum(l),flowType:i.z.union([i.z.literal("sf"),i.z.literal("hf"),i.z.literal("uhf")])}),i.z.object({type:i.z.enum(["Regular","CHT"]),diameter:i.z.number().min(.2).max(1.8)}),p.extend({type:i.z.literal("extruder"),stepper:a.vF.shape.id.optional(),current:a.P6.shape.current.optional(),title:i.z.string()}),p.extend({type:i.z.literal("static-probe").or(i.z.literal("stowable-probe")),title:i.z.string()}),i.z.object({id:i.z.enum(["endstop","endstop-toolboard","sensorless"]),title:i.z.string(),badge:i.z.array(i.z.object({children:i.z.string(),color:n.Bd})).optional()});let s=i.z.union([i.z.literal("toolboard_t0"),i.z.literal("toolboard_t1"),i.z.literal("controlboard"),i.z.literal("rpi"),i.z.literal("beacon")]),c=i.z.union([i.z.literal("adxl345"),i.z.literal("lis2dw"),i.z.literal("beacon")]),u=i.z.object({id:i.z.enum(["toolboard","controlboard","sbc","none","beacon"]),title:i.z.string(),accelerometerType:c.default("adxl345").optional()});i.z.object({name:s,type:c}),u.extend({accelerometerType:c}),i.z.object({id:i.z.enum(["2pin","4pin","4pin-dedicated","2pin-toolboard","4pin-toolboard","4pin-dedicated-toolboard","none"]),title:i.z.string(),badge:i.z.array(i.z.object({children:i.z.string(),color:n.Bd})).optional()})},30819:(e,r,t)=>{t.d(r,{P6:()=>_,vF:()=>c});var i,o,a=t(13728);!function(e){e[e["24V"]=24]="24V",e[e["36V"]=36]="36V",e[e["48V"]=48]="48V",e[e["56V"]=56]="56V",e[e["60V"]=60]="60V"}(i||(i={}));let n=a.jb(i),l=a.Z_(),d=a.Ry({id:l,title:a.Z_(),protocol:a.Km(["SPI","UART"]),coolingCurrentThreshold:a.Rx(),voltages:n.array(),maxCurrent:a.Rx().min(0),external:a.O7().optional()}).and(a.Ry({type:a.Km(["TMC2209","TMC2226","TMC5160","TMC2130"]),senseResistor:a.Rx().min(0)}).or(a.Ry({type:a.Km(["TMC2240"])}))),p=a.Ry({voltage:n,run_current:a.Rx(),driver:l}),s=p.extend({driver_MSLUT0:a.Rx().optional(),driver_MSLUT1:a.Rx().optional(),driver_MSLUT2:a.Rx().optional(),driver_MSLUT3:a.Rx().optional(),driver_MSLUT4:a.Rx().optional(),driver_MSLUT5:a.Rx().optional(),driver_MSLUT6:a.Rx().optional(),driver_MSLUT7:a.Rx().optional(),driver_W0:a.Rx().optional(),driver_W1:a.Rx().optional(),driver_W2:a.Rx().optional(),driver_W3:a.Rx().optional(),driver_X1:a.Rx().optional(),driver_X2:a.Rx().optional(),driver_X3:a.Rx().optional(),driver_START_SIN:a.Rx().optional(),driver_START_SIN90:a.Rx().optional(),driver_IHOLDDELAY:a.Rx().optional(),driver_TPOWERDOWN:a.Rx().optional(),driver_TBL:a.Rx().optional(),driver_TOFF:a.Rx().optional(),driver_HEND:a.Rx().optional(),driver_HSTRT:a.Rx().optional(),driver_PWM_AUTOSCALE:a.O7().optional(),driver_PWM_FREQ:a.Rx().optional(),driver_PWM_GRAD:a.Rx().optional(),driver_PWM_AMPL:a.Rx().optional(),driver_SGT:a.Rx().optional()}),c=a.Ry({id:a.Z_(),title:a.Z_(),fullStepsPerRotation:a.Rx().default(200),maxPeakCurrent:a.Rx().min(0),presets:a.IX(a.VK("driver",[s.extend({driver:a.Km(["TMC2130","TMC5160"]),sense_resistor:a.Rx()}),s.extend({driver:a.Km(["TMC2240"])}),p.extend({driver:a.Km(["TMC2209"]),driver_TBL:a.Rx().optional(),driver_TOFF:a.Rx().optional(),driver_HEND:a.Rx().optional(),driver_HSTRT:a.Rx().optional(),sense_resistor:a.Rx()})])).optional().describe("Stepper presets are tightly coupled to the driver type, sense_resistor, stepper, voltage and current.")});!function(e){e.x="x",e.dual_carriage="dual_carriage",e.x1="x1",e.y="y",e.y1="y1",e.y2="y2",e.z="z",e.z1="z1",e.z2="z2",e.z3="z3",e.extruder="extruder",e.extruder1="extruder1"}(o||(o={}));let u=a.Ry({axis:a.jb(o).describe("Axis of the rail"),axisDescription:a.Z_().optional().describe("Description of the axis"),driver:d.describe("Stepper driver used on this axis"),voltage:n.default(24).describe("Voltage of the stepper driver"),stepper:c.describe("Stepper motor connected to this axis"),invertStepperDirection:a.O7().default(!1).describe("Invert the default direction of the stepper motor"),axisMinimum:a.Rx().optional().describe("Minimum position of the axis in mm"),axisMaximum:a.Rx().optional().describe("Maximum position of the axis in mm"),axisEndstop:a.Rx().optional().describe("Endstop position of the axis in mm"),motorSlot:a.Z_().optional().describe("Optional board motor slot of the stepper driver"),current:a.Rx().min(0),rotationDistance:a.Rx().min(0).describe("Distance in mm the axis travels per stepper rotation"),gearRatio:a.Z_().regex(/^\d+:\d+$/).optional().describe("Optional gear ratio of the axis"),homingSpeed:a.Rx().min(0).default(10).describe("Axis speed during homing in mm/s"),microstepping:a.Rx().min(16).max(256).default(64).describe("Microstepping of the stepper driver, higher values increase resolution and lower noise but increases load on the MCU")}),_=u.extend({motorSlot:a.S1(),performanceMode:a.Ry({current:a.Rx().min(0),voltage:n.default(24).describe("Voltage of the stepper driver in performance mode"),homingSpeed:a.Rx().min(0).optional().describe("Axis speed during homing in mm/s in performance mode")}).optional()});_.extend({driver:l,stepper:c.shape.id}),u.refine(e=>e.current<=e.driver.maxCurrent,"Current must be less than max current of the driver"),u.extend({driver:l,stepper:c.shape.id}),a.Ry({min:a.Rx(),max:a.Rx(),endstop:a.Rx()})}},r={};function __webpack_require__(t){var i=r[t];if(void 0!==i)return i.exports;var o=r[t]={exports:{}},a=!0;try{e[t].call(o.exports,o,o.exports,__webpack_require__),a=!1}finally{a&&delete r[t]}return o.exports}__webpack_require__.m=e,__webpack_require__.x=()=>{var e=__webpack_require__.O(void 0,[4430,513,5005,4620,8105,6603,7340,2041],()=>__webpack_require__(30839));return __webpack_require__.O(e)},(()=>{var e=[];__webpack_require__.O=(r,t,i,o)=>{if(t){o=o||0;for(var a=e.length;a>0&&e[a-1][2]>o;a--)e[a]=e[a-1];e[a]=[t,i,o];return}for(var n=1/0,a=0;a<e.length;a++){for(var[t,i,o]=e[a],l=!0,d=0;d<t.length;d++)n>=o&&Object.keys(__webpack_require__.O).every(e=>__webpack_require__.O[e](t[d]))?t.splice(d--,1):(l=!1,o<n&&(n=o));if(l){e.splice(a--,1);var p=i();void 0!==p&&(r=p)}}return r}})(),__webpack_require__.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(r,{a:r}),r},(()=>{var e,r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(t,i){if(1&i&&(t=this(t)),8&i||"object"==typeof t&&t&&(4&i&&t.__esModule||16&i&&"function"==typeof t.then))return t;var o=Object.create(null);__webpack_require__.r(o);var a={};e=e||[null,r({}),r([]),r(r)];for(var n=2&i&&t;"object"==typeof n&&!~e.indexOf(n);n=r(n))Object.getOwnPropertyNames(n).forEach(e=>a[e]=()=>t[e]);return a.default=()=>t,__webpack_require__.d(o,a),o}})(),__webpack_require__.d=(e,r)=>{for(var t in r)__webpack_require__.o(r,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce((r,t)=>(__webpack_require__.f[t](e,r),r),[])),__webpack_require__.u=e=>""+e+".js",__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/configure/_next/",(()=>{__webpack_require__.b=require("url").pathToFileURL(__filename);var e={2214:1};__webpack_require__.O.require=r=>e[r];var installChunk=r=>{var t=r.modules,i=r.ids,o=r.runtime;for(var a in t)__webpack_require__.o(t,a)&&(__webpack_require__.m[a]=t[a]);o&&o(__webpack_require__);for(var n=0;n<i.length;n++)e[i[n]]=1;__webpack_require__.O()};__webpack_require__.f.require=(r,t)=>{e[r]||installChunk(require("./"+__webpack_require__.u(r)))}})(),(()=>{var e=__webpack_require__.x;__webpack_require__.x=()=>(__webpack_require__.e(4430),__webpack_require__.e(513),__webpack_require__.e(5005),__webpack_require__.e(4620),__webpack_require__.e(8105),__webpack_require__.e(6603),__webpack_require__.e(7340),__webpack_require__.e(2041),e())})();var t=__webpack_require__.x();module.exports=t})();