"use strict";exports.id=8328,exports.ids=[8328],exports.modules={73057:(e,r,t)=>{t.d(r,{DN:()=>g,NI:()=>f});var a=t(72628),i=t.n(a),n=t(97101),s=t.n(n),o=t(46922),l=t(33496),u=t.n(l),c=t(32228),d=t.n(c);let p={darkMode:"class",content:["./pages/**/*.{js,ts,jsx,tsx}","./components/**/*.{js,ts,jsx,tsx}","./helpers/**/*.{js,ts,jsx,tsx}","./app/**/*.{js,ts,jsx,tsx}","./data/**/*.{js,ts,jsx,tsx}"],theme:{container:{center:!0,padding:"2rem",screens:{"2xl":"1400px"}},extend:{fontFamily:{sans:["var(--inter-font)",...s().fontFamily.sans]},keyframes:{ping:{"0%":{opacity:"100"},"75%, 100%":{transform:"scale(2)",opacity:"0"}},"accordion-down":{from:{height:"0"},to:{height:"var(--radix-accordion-content-height)"}},"accordion-up":{from:{height:"var(--radix-accordion-content-height)"},to:{height:"0"}}},animation:{"spin-fast":"spin 0.5s linear infinite","accordion-down":"accordion-down 0.2s ease-out","accordion-up":"accordion-up 0.2s ease-out"},colors:{brand:{50:"#f2ffe1",100:"#deffcc",200:"#bdff99",300:"#9cff66",400:"#7bff33",500:"#5aff00",600:"#48cc00",700:"#369900",800:"#246600",900:"#123300"},border:"hsl(var(--border))",input:"hsl(var(--input))",ring:"hsl(var(--ring))",background:"hsl(var(--background))",foreground:"hsl(var(--foreground))",primary:{DEFAULT:"hsl(var(--brand-400) / 50%)",foreground:"hsl(var(--white))"},secondary:{DEFAULT:"hsl(var(--secondary))",foreground:"hsl(var(--white))"},destructive:{DEFAULT:"hsl(var(--red-400))",foreground:"hsl(var(--black))"},muted:{DEFAULT:"hsl(var(--muted))",foreground:"hsl(var(--muted-foreground))"},accent:{DEFAULT:"hsl(var(--accent))",foreground:"hsl(var(--white))"},popover:{DEFAULT:"hsl(var(--popover))",foreground:"hsl(var(--popover-foreground))"},card:{DEFAULT:"hsl(var(--card))",foreground:"hsl(var(--card-foreground))"}},borderRadius:{lg:"var(--radius)",md:"calc(var(--radius) - 2px)",sm:"calc(var(--radius) - 4px)"},fontSize:{"2xs":"0.6rem",s:"0.8125rem"},containers:{"screen-sm":"640px","screen-md":"768px","screen-lg":"1024px","screen-xl":"1280px","screen-2xl":"1536px"}}},plugins:[t(96842),t(65481),t(44379),t(92743)({nocompatible:!0}),function({addBase:e,theme:r}){e({":root":Object.fromEntries(Object.entries((0,o.default)(r("colors"))).map(([e,r])=>{let t=u().hex.hsl(r);return[`--${e}`,r.startsWith("#")?`${t[0]} ${t[1]}% ${t[2]}%`:r]}))})},function({matchUtilities:e,theme:r}){e({"bg-grid":e=>({backgroundImage:`url("${d()(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32" fill="none" stroke="${e}"><path d="M0 .5H31.5V32"/></svg>`)}")`}),"bg-grid-small":e=>({backgroundImage:`url("${d()(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="8" height="8" fill="none" stroke="${e}"><path d="M0 .5H31.5V32"/></svg>`)}")`}),"bg-dot":e=>({backgroundImage:`url("${d()(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="16" height="16" fill="none"><circle fill="${e}" id="pattern-circle" cx="10" cy="10" r="1.6257413380501518"></circle></svg>`)}")`})},{values:(0,o.default)(r("backgroundColor")),type:"color"})}]},m=i()(p),f=m.theme.colors,g=Object.fromEntries(Object.keys(f).filter(e=>{let r=f[e];return null!=r&&"string"!=typeof r&&!("DEFAULT"in r)}).map(e=>[e,f[e]]))},30839:(e,r,t)=>{t.d(r,{AQ:()=>a,G0:()=>i});var a,i,n=t(253),s=t(12530),o=t(6704),l=t(95754),u=t(63969),c=t(75427),d=t(22212),p=t(328),m=t(39940),f=t(52485),g=t(16350);(function(e){e.START="START",e.STOP="STOP",e.START_ACCUMULATION="START_ACCUMULATION",e.STOP_ACCUMULATION="STOP_ACCUMULATION"})(a||(a={})),function(e){e.STARTED="STARTED",e.STOPPED="STOPPED",e.ACCUMULATING="ACCUMULATING",e.ACCUMULATED="ACCUMULATED",e.SIGNAL="SIGNAL",e.PSD="PSD",e.RX_RATE="RX_RATE",e.SAMPLE_RATE="SAMPLE_RATE",e.SPEC_SAMPLE_RATE="SPEC_SAMPLE_RATE"}(i||(i={}));let mapToWorkerOutput=e=>(0,m.UI)(e),y=new s.x,h=(0,n.p)(()=>new Worker(new URL(t.p+t.u(4965),t.b)),y).pipe((0,m.BN)()),b=h.pipe((0,m.hX)(e=>"psd"===e.type),mapToWorkerOutput(e=>({type:"PSD",payload:e.psd})),(0,m.BN)());(0,n.YX)(class{work(e){return e.pipe((0,m.zg)(e=>{switch(e.type){case"START":{if(null!=this.stream)throw Error("Stream already started");this.stream=(0,g.z)(e.payload.url,e.payload.sensor);let setup=async()=>{if(null==this.stream)throw Error("Stream not initialized");this.signalProcessor=await (0,f.q)(this.stream.dataStream$),this.signalProcessor.signal$.subscribe(e=>y.next({command:"sampleInput",payload:[e[0].toNumber(),e[1],e[2],e[3]]})),this.signalProcessor.specSampleRate$.subscribe(e=>y.next({command:"specSampleRateInput",payload:e}));let e=(0,o.x)((0,l.D)([(0,u.of)({type:"STARTED",payload:this.signalProcessor.timeStamp}),this.signalProcessor.timeMappedSignal$.pipe(mapToWorkerOutput(e=>{let r=new Float64Array([e[0].toNumber(),...e.slice(1)]);return{type:"SIGNAL",payload:r.buffer}})),this.signalProcessor.sampleRate$.pipe(mapToWorkerOutput(e=>({type:"SAMPLE_RATE",payload:e}))),this.signalProcessor.specSampleRate$.pipe(mapToWorkerOutput(e=>({type:"SPEC_SAMPLE_RATE",payload:e}))),this.psdSubscribed?c.E:b]),d.z).pipe((0,m.Jn)());return this.psdSubscribed||(this.psdSubscribed=!0),e};return(0,l.D)(setup()).pipe((0,m.Jn)())}case"STOP":return null!=this.stream&&(this.stream.close(),this.stream=null),(0,u.of)({type:"STOPPED"});case"START_ACCUMULATION":if(null==this.signalProcessor)throw Error("Stream not initialized");if(null==h)throw Error("PSD worker not initialized");return y.next({command:"accumulate",payload:!0}),(0,o.x)((0,l.D)([(0,u.of)({type:"ACCUMULATING"}),(0,o.x)((0,l.D)((0,p.z)(h.pipe((0,m.hX)(e=>"accumulation_finished"===e.type)))).pipe(mapToWorkerOutput(e=>({type:"ACCUMULATED",payload:e.psd}))),d.z)]),d.z).pipe((0,m.Jn)());case"STOP_ACCUMULATION":if(null==h)throw Error("Stream not initialized");if(null==h)throw Error("PSD process not initialized");return y.next({command:"accumulate",payload:!1}),c.E;default:throw this.stream?.close(),this.stream=null,Error("Invalid command")}}))}selectTransferables(e){switch(e.type){case"SIGNAL":return[e.payload];case"PSD":case"ACCUMULATED":return[e.payload.x.estimates.buffer,e.payload.x.frequencies.buffer,e.payload.y.estimates.buffer,e.payload.y.frequencies.buffer,e.payload.z.estimates.buffer,e.payload.z.frequencies.buffer,e.payload.total.estimates.buffer,e.payload.total.frequencies.buffer];default:return[]}}constructor(){this.stream=null,this.signalProcessor=null,this.psdSubscribed=!1}})},11004:(e,r,t)=>{t.d(r,{b:()=>ChartTheme});var a=t(10265);let ChartTheme=class ChartTheme extends a.SciChartJSDarkv2Theme{constructor(){super(),this.sciChartBackground="transparent",this.loadingAnimationBackground="transparent",this.axisBandsFill="#20212333",this.majorGridLineBrush="#AAAAAA37",this.minorGridLineBrush="#77777719",this.strokePalette=["#F48420","#AE408E","#209FD9","#264B93"],this.fillPalette=["#F4842077","#AE408E77","#209FD977","#264B9377"],this.isLightBackground=!1}}},27334:(e,r,t)=>{t.d(r,{Mg:()=>isXyDataSeries,OH:()=>y,QR:()=>useADXLSignalChart,ZA:()=>usePSDChart,as:()=>g,ck:()=>f,jh:()=>isXyyDataSeries,to:()=>getPSDTooltipLegendTemplate});var a=t(10265),i=t(32519),n=t(11004),s=t(35220),o=t.n(s),l=t(73057),u=t(51495);a.SciChartSurface.configure({wasmUrl:"/configure/scichart2d.wasm",dataUrl:"/configure/scichart2d.data"}),a.SciChartSurface.UseCommunityLicense();let c=new n.b,d="signal",p="history",m="amplitude",isXyyDataSeries=e=>e.type===a.EDataSeriesType.Xyy,isXyDataSeries=e=>e.type===a.EDataSeriesType.Xy,getAxisColorName=e=>{switch(e){case"x":return"yellow";case"y":return"sky";case"z":return"rose";default:return"brand"}},getAxisColor=e=>l.NI[getAxisColorName(e)];new a.NumberRange(-1e4,1e4);let useADXLSignalChart=e=>(0,i.Q8)(null,(0,u.useCallback)(r=>{let t=getAxisColor(e),i=new a.NumericAxis(r.webAssemblyContext2D,{id:d+e,autoRange:a.EAutoRange.Always,maxAutoTicks:128,drawLabels:!1,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1,drawMinorGridLines:!1,drawMajorGridLines:!1});r.xAxes.add(i);let n=new a.NumericAxis(r.webAssemblyContext2D,{id:p+e,autoRange:a.EAutoRange.Always,drawLabels:!1,drawMinorGridLines:!1,drawMajorTickLines:!1});r.xAxes.add(n);let s=new a.NumericAxis(r.webAssemblyContext2D,{autoRange:a.EAutoRange.Never,visibleRange:new a.NumberRange(-5e3,5e3),drawLabels:!1,id:m+e,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1,drawMinorGridLines:!1,drawMajorGridLines:!1,axisAlignment:a.EAxisAlignment.Left});r.yAxes.add(s);let o=new a.XyDataSeries(r.webAssemblyContext2D,{fifoCapacity:128,containsNaN:!1,isSorted:!0,dataSeriesName:e.toLocaleUpperCase(),dataIsSortedInX:!0,xValues:Array(128).fill(0).map((e,r)=>r),yValues:Array(128).fill(0)}),l=new a.FastLineRenderableSeries(r.webAssemblyContext2D,{xAxisId:d+e,yAxisId:m+e,stroke:t[400],strokeThickness:2,dataSeries:o,effect:new a.GlowEffect(r.webAssemblyContext2D,{intensity:1,range:1})});r.renderableSeries.add(l);let u=new a.XyDataSeries(r.webAssemblyContext2D,{fifoCapacity:25600,containsNaN:!1,isSorted:!0,dataSeriesName:e.toLocaleUpperCase()+" History",dataIsSortedInX:!0}),c=new a.FastLineRenderableSeries(r.webAssemblyContext2D,{stroke:t[500]+"22",strokeThickness:1,opacity:.6,yAxisId:m+e,xAxisId:p+e,dataSeries:u});return r.renderableSeries.add(c),l.animation=new a.WaveAnimation({duration:500}),c.animation=new a.WaveAnimation({duration:500}),{signalData:o,signalSeries:l,historyData:u,historySeries:c,xAxis:i,xHistoryAxis:n,yAxis:s}},[e])),f="amplitude",g=new a.NumberRange(0,1500),y={surface:{theme:c,padding:a.Thickness.fromNumber(0)},xAxes:[{type:a.EAxisType.NumericAxis,options:{visibleRange:new a.NumberRange(0,200),labelStyle:{...o().style,fontSize:13,fontWeight:"600",padding:new a.Thickness(15,15,15,15)},labelPostfix:"Hz",drawMinorGridLines:!0,minorsPerMajor:10,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1}}],yAxes:[{type:a.EAxisType.NumericAxis,options:{id:f,axisAlignment:a.EAxisAlignment.Left,growBy:new a.NumberRange(0,.1),visibleRange:g,labelFormat:a.ENumericFormat.Exponential,labelStyle:{...o().style,fontSize:13,fontWeight:"600",padding:new a.Thickness(15,15,15,15)},autoRangeAnimation:{duration:140,animateInitialRanging:!1,animateSubsequentRanging:!0,easing:a.easing.inOutCubic},drawMinorGridLines:!0,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1,axisTitleStyle:{fontSize:10}}}]},h={...y,series:[{type:a.ESeriesType.MountainSeries,options:{id:"total",yAxisId:f,strokeThickness:3,fill:l.NI.brand[500]+"22",stroke:l.NI.brand[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(128).fill(0).map((e,r)=>Math.floor(r/128*200)),yValues:Array(128).fill(0).map((e,r)=>0)}},{type:a.ESeriesType.LineSeries,options:{id:"z",yAxisId:f,strokeThickness:3,stroke:getAxisColor("z")[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(128).fill(0).map((e,r)=>Math.floor(r/128*200)),yValues:Array(128).fill(0).map((e,r)=>0)}},{type:a.ESeriesType.LineSeries,options:{id:"y",yAxisId:f,strokeThickness:3,stroke:getAxisColor("y")[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(128).fill(0).map((e,r)=>Math.floor(r/128*200)),yValues:Array(128).fill(0).map((e,r)=>0)}},{type:a.ESeriesType.LineSeries,options:{id:"x",yAxisId:f,strokeThickness:3,stroke:getAxisColor("x")[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(128).fill(0).map((e,r)=>Math.floor(r/128*200)),yValues:Array(128).fill(0).map((e,r)=>0)}}]},getPSDTooltipLegendTemplate=(e,r)=>{let t="",i=32,n=[];e.forEach((e,r)=>{let s=e.renderableSeries.rolloverModifierProps.tooltipColor;if(n.push(`${e.renderableSeries.rolloverModifierProps.tooltipTitle}: ${(e.yValue/1e3).toFixed(2)} g^2/Hz @ ${e.formattedXValue}`),t+=`<text x="16" y="${i}" class="text-sm text-medium font-sans" fill="${l.DN[s][400]}">
		<tspan class="font-bold">${e.renderableSeries.rolloverModifierProps.tooltipTitle}</tspan>: ${(e.yValue/1e3).toFixed(2)} g<tspan y="${i-4}" class="sup">2</tspan><tspan y=${i}>/Hz</tspan> @ ${e.formattedXValue}
		</text>`,i+=20,e.dataSeriesType===a.EDataSeriesType.Xyy){let r=e.renderableSeries.rolloverModifierProps1.tooltipColor;n.push(`${e.renderableSeries.rolloverModifierProps1.tooltipTitle}: ${(e.y1Value/1e3).toFixed(2)} g^2/Hz @ ${e.formattedXValue}`),t+=`<text x="16" y="${i}" class="text-sm text-medium font-sans" fill="${l.DN[r][400]}">
				<tspan class="font-bold">${e.renderableSeries.rolloverModifierProps1.tooltipTitle}</tspan>: ${(e.y1Value/1e3).toFixed(2)} g<tspan y="${i-4}" class="sup">2</tspan><tspan y=${i}>/Hz</tspan> @ ${e.formattedXValue}
			</text>`,i+=20,t+=`<text x="16" y="${i}" class="text-sm text-medium font-sans" fill="${l.DN.zinc[400]}">
				<tspan class="font-bold">Amplitude Difference</tspan>: ${Math.abs((e.y1Value-e.yValue)/1e3).toFixed(2)} g<tspan y="${i-4}" class="sup">2</tspan><tspan y=${i}>/Hz</tspan>
			</text>`,i+=20}});let s=0===e.length?0:16+1.7*calcTooltipWidth(n.reduce(function(e,r){return r.length>e?r.length:e},0)),o=0===e.length?0:i;return`<svg width="${s}" height="${o}">
				<rect rx="8" ry="8" width="100%" height="100%" class="stroke-zinc-400/10 fill-zinc-900/70 stroke-1" />
                ${t}
            </svg>`},psdRolloverTooltipTemplate=(e,r,t)=>{let i="",n=t.tooltipProps,s=n.tooltipTitle,o=n.tooltipColor,u=l.NI[o][100],c=(0,a.parseColorToTArgb)(l.NI[o][400]),d=(0,a.parseColorToTArgb)(l.NI[o][600]),p=n.tooltipLabelX,m=n.tooltipLabelY,f=l.NI[o][900];c.opacity=Math.round(204),d.opacity=Math.round(51);let g=t.tooltipProps.tooltipDataTemplate??t.tooltipProps.rolloverModifier.tooltipDataTemplate,y=g(r,s,p,m),h=n.width??calcTooltipWidth(y.reduce(function(e,r){return r.length>e?r.length:e},0)),b=n.height??calcTooltipHeight(y.length);t.updateSize(h,b),y.forEach(function(e,r){i+=`<tspan x="8" dy="1.2em">${e}</tspan>`});let A='<feGaussianBlur result="blurOut" in="offOut" stdDeviation="3" />';if(void 0!==f){var x=(0,a.parseColorToTArgb)(f);A=`
			<feColorMatrix result="matrixOut" in="offOut" type="matrix"
				values="0 0 0 0 
				${x.red/255}
				0 0 0 0
				${x.green/255}
				0 0 0 0
				${x.blue/255}
				0 0 0 
				${x.opacity/255}
				0 0" 
			/>
			<feGaussianBlur result="blurOut" in="matrixOut" stdDeviation="3" />`}return`
		<svg class="scichart__rollover-tooltip transition-all" width="${h}" height="${b}">
			<defs>
				<filter id="${e}" x="0" y="0" width="200%" height="200%">
					<feOffset result="offOut" in="SourceAlpha" dx="3" dy="3" />
						
						${A}
					<feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
				</filter>
			</defs>
			<rect rx="8" ry="8" width="100%" height="100%" fill="${(0,a.parseTArgbToHtmlColor)(d)}" stroke="${(0,a.parseTArgbToHtmlColor)(c)}" stroke-width="2"  filter="url(#${e}" />
			<svg width="100%">
				<text x="8" y="3" class="text-sm font-sans font-semibold" dy="0" fill="${u}">
				${i}
				</text>
			</svg>
		</svg>`},usePSDChart=()=>(0,i.Q8)(h,(0,u.useCallback)(e=>{let r=new a.XyDataSeries(e.webAssemblyContext2D,{id:"xAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});e.addDeletable(r);let t=new a.XyDataSeries(e.webAssemblyContext2D,{id:"yAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});e.addDeletable(t);let i=new a.XyDataSeries(e.webAssemblyContext2D,{id:"zAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});e.addDeletable(i);let n=new a.XyDataSeries(e.webAssemblyContext2D,{id:"totalAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});return e.addDeletable(n),e.renderableSeries.asArray().forEach(e=>{e.rolloverModifierProps.tooltipColor=getAxisColorName(e.id),e.rolloverModifierProps.tooltipTemplate=psdRolloverTooltipTemplate,e.rolloverModifierProps.tooltipTitle=e.id.substring(0,1).toUpperCase()+e.id.substring(1)+" Power Spectral Density",e.animation=new a.WaveAnimation({duration:500})}),e.chartModifiers.add(new a.CursorModifier({crosshairStroke:l.NI.sky[400],crosshairStrokeThickness:1,showXLine:!0,showYLine:!0,showTooltip:!1,tooltipLegendTemplate:getPSDTooltipLegendTemplate,tooltipLegendOffsetX:16,tooltipLegendOffsetY:16,yAxisId:f,axisLabelFill:l.NI.zinc[900],axisLabelStroke:l.NI.zinc[100]})),{animationSeries:{x:r,y:t,z:i,total:n}}},[]));var calcTooltipWidth=function(e=20,r=4){return e*r+20},calcTooltipHeight=function(e=2,r=15){return r*e+16}},32519:(e,r,t)=>{t.d(r,{Q8:()=>useChart,Tv:()=>useDynamicAxisRange,ck:()=>useWorker});var a=t(96603),i=t(51495),n=t(10265),s=t(11004),o=t(61418),l=t(72016),u=t(43700),c=t(36986),d=t(86053),p=t(82251),m=t(30839),f=t(253),g=t(12530),y=t(46891),h=t(90345),b=t(1458),A=t(22663),x=t(328),S=t(76520),w=t(41620);function transformPSD(e){let r={frequencies:Array.from(e.frequencies),estimates:Array.from(e.estimates),powerRange:e.powerRange};return r}let getWsURL=()=>{let e=(0,w.X)();return null==e||e.trim(),null},T=new g.x,D=(0,f.p)(()=>new Worker(new URL(t.p+t.u(2214),t.b)),T).pipe((0,y.B)()),C=D.pipe((0,h.h)(e=>e.type===m.G0.SIGNAL),(0,b.U)(e=>new Float64Array(e.payload)),(0,A.e)(1e3/60),(0,h.h)(e=>e.length>0),(0,b.U)(e=>{let r=new Float64Array(e.length),t=new Float64Array(e.length),a=new Float64Array(e.length),i=new Float64Array(e.length);return e.forEach((e,n)=>{r[n]=e[0],t[n]=e[1],a[n]=e[2],i[n]=e[3]}),[r,t,a,i]}),(0,y.B)()),R=D.pipe((0,h.h)(e=>e.type===m.G0.PSD),(0,b.U)(e=>e.payload),(0,y.B)()),useWorker=(e,r,t,a,n)=>{let s=useAccelerometerWithType(r),[o,l]=(0,i.useState)(getWsURL()),u=(0,i.useRef)(!1),c=(0,i.useRef)(!1),d=(0,i.useRef)(t);d.current=t;let p=(0,i.useRef)(a);p.current=a;let f=(0,i.useCallback)(async()=>{if(c.current)throw Error("Already accumulating");let e=(0,x.z)(D.pipe((0,h.h)(e=>e.type===m.G0.PSD),(0,S.V)(5e3))),r=(0,x.z)(D.pipe((0,h.h)(e=>e.type===m.G0.ACCUMULATING),(0,b.U)(()=>!0),(0,S.V)(5e3)));await e,T.next({type:m.AQ.START_ACCUMULATION}),await r},[]),g=(0,i.useCallback)(async()=>{if(!c.current)throw Error("Not accumulating, cannot stop");let e=(0,x.z)(D.pipe((0,h.h)(e=>e.type===m.G0.ACCUMULATED),(0,b.U)(e=>({x:transformPSD(e.payload.x),y:transformPSD(e.payload.y),z:transformPSD(e.payload.z),total:transformPSD(e.payload.total)})),(0,S.V)(6e4)));return T.next({type:m.AQ.STOP_ACCUMULATION}),await e},[]),y=(0,i.useCallback)(async()=>{if(await new Promise(e=>setTimeout(e,10)),u.current)return;let e=(0,x.z)(D.pipe((0,h.h)(e=>e.type===m.G0.STARTED),(0,S.V)(5e3)));await e},[]);return(0,i.useEffect)(()=>{l(getWsURL())},[]),(0,i.useEffect)(()=>{let e=C.subscribe(e=>{d.current(e)}),r=R.subscribe(e=>{p.current(e)});return()=>{e.unsubscribe(),r.unsubscribe()}},[]),(0,i.useEffect)(()=>{if(e&&null!=o){let e=D.subscribe({next:e=>{switch(e.type){case m.G0.STARTED:u.current=!0;break;case m.G0.STOPPED:u.current=!1;break;case m.G0.ACCUMULATING:c.current=!0;break;case m.G0.ACCUMULATED:c.current=!1;case m.G0.SAMPLE_RATE:case m.G0.SPEC_SAMPLE_RATE:}},error:n});return T.next({type:m.AQ.START,payload:{url:o,sensor:s}}),()=>{u.current=!1,T.next({type:m.AQ.STOP}),e.unsubscribe()}}},[e,n,s,r,o]),{streamStarted:y,startAccumulation:f,stopAccumulation:g}},useAccelerometerWithType=e=>{let r=(0,c.useRecoilValue)(d.OS),t=(0,p.YC)(),a="adxl345";if("controlboard"===e&&(r?.ADXL345SPI!=null&&(a="adxl345"),r?.LIS2DW!=null&&(a="lis2dw")),"toolboard_t0"===e||"toolboard_t1"===e){let r=t.find(r=>r.getToolboardName()===e)?.getToolboard();if(null==r)throw Error("No toolboard found for T0");null!=r.ADXL345SPI&&(a="adxl345"),null!=r.LIS2DW&&(a="lis2dw")}return"beacon"===e&&(a="beacon"),(0,i.useMemo)(()=>u.U9.parse({name:e,type:a}),[e,a])},L=new s.b,useChart=(e,r,t=!0)=>{let s=(0,i.useRef)(null),[u,c]=(0,i.useState)(!1),d=(0,i.useRef)(null);return(0,i.useMemo)(()=>({forwardProps:{initChart:async a=>{let i=null;if(null!=e){let r=e.surface?.padding,s={...e,surface:{...e.surface,padding:new n.Thickness(r?.top??0,r?.right??0,r?.bottom??0,(r?.left??0)+(t?300:0))}};i=await (0,n.build2DChart)(a,s)}else i=await n.SciChartSurface.create(a,{theme:L,padding:new n.Thickness(0,0,0,t?300:0)});return i.sciChartSurface.watermarkPosition=n.EWatermarkPosition.BottomLeft,i.sciChartSurface.watermarkRelativeToCanvas=!0,s.current=i.sciChartSurface,r&&(d.current=r(i.sciChartSurface)),{sciChartSurface:i.sciChartSurface}},onInit:()=>c(!0),style:{marginLeft:t?-300:0},fallback:a.jsx(l.I,{className:(0,o.dV)(t&&"ml-[150px]","bg-zinc-900")})},surface:s,isInitialized:u,data:d}),[t,u,e,r])},maximumRangeUnion=e=>Array.isArray(e)?e.reduce((e,r)=>{if(null==r)return e;let t=r.getMaximumRange();return e.union(t)},new n.NumberRange):e.getMaximumRange(),visibleRangeUnion=e=>Array.isArray(e)?e.reduce((e,r)=>{if(null==r)return e;let t=r.visibleRange;return e.union(t)},new n.NumberRange):e.visibleRange,growByUnion=e=>Array.isArray(e)?e.reduce((e,r)=>{if(null==r)return e;let t=r.growBy??new n.NumberRange;return e.union(t)},new n.NumberRange):e.growBy;function useDynamicAxisRange(e,r=new n.NumberRange(0,0),t){let a=(0,i.useRef)(e?maximumRangeUnion(e):null),s=(0,i.useRef)(new Date().getTime()),o=(0,i.useRef)(new Date().getTime()),l=(0,i.useCallback)((i=r)=>{if(null==e)return;let l=Array.isArray(e)?e:[e];null==a.current&&(a.current=visibleRangeUnion(e));let u=new Date().getTime()-s.current,c=new Date().getTime()-o.current;s.current=new Date().getTime();let d=maximumRangeUnion(e);i&&(d=d.union(i));let p=growByUnion(e);p&&d.growBy(p);let m=null,f=null;if(d.max>a.current.max&&(m=d.max),d.min<a.current.min&&(f=d.min),(null!=m||null!=f)&&c>u){let e=Math.min(f??a.current.min,r.min),i=Math.max(m??a.current.max,r.max);(e!==a.current.min||i!==a.current.max)&&(a.current=new n.NumberRange(e,i),l.forEach(r=>{if(null==a.current||null==r)return;let s=new n.NumberRange(e,i);r.animateVisibleRange(s,t??u,n.easing.inOutQuad)}),o.current=new Date().getTime())}if(c>3e3){d.max<a.current.max&&(m=a.current.max-(a.current.max-d.max)),d.min>a.current.min&&(f=a.current.min+(d.min-a.current.min));let e=Math.min(f??a.current.min,r.min),t=Math.max(m??a.current.max,r.max);if(t!=a.current.max||e!=a.current.min){l.forEach(r=>{if(null==a.current||null==r)return;let i=new n.NumberRange(e,t);r.animateVisibleRange(i,c/2,n.easing.inOutQuad)}),a.current=new n.NumberRange(e,t),o.current=new Date().getTime();return}}},[t,e,r]);return l}},89799:(e,r,t)=>{t.d(r,{NI:()=>s,Xz:()=>y});var a=t(13728),i=t(43700);let n=a.z.union([a.z.literal("time"),a.z.literal("x_acceleration"),a.z.literal("y_acceleration"),a.z.literal("z_acceleration")]),s=a.z.object({header:a.z.tuple([n,n,n,n])});a.z.object({data:a.z.array(a.z.tuple([a.z.number(),a.z.number(),a.z.number(),a.z.number()])),overflows:a.z.number().optional(),errors:a.z.number().optional()});let o=a.z.object({frequencies:a.z.array(a.z.number()),estimates:a.z.array(a.z.number()),powerRange:a.z.object({max:a.z.number(),min:a.z.number()})}),l=a.z.object({x:o,y:o,z:o,total:o}),u=a.z.string().brand("MacroID"),c=a.z.string().brand("MacroSequenceID"),d=a.z.string().brand("MacroRecordingID"),p=a.z.string().brand("MacroRecordingRunID"),m=a.z.object({capturePSD:a.z.boolean().default(!1),accelerometer:i.Yx.optional(),color:a.z.string().optional()}).superRefine((e,r)=>(e.capturePSD&&null==e.accelerometer&&r.addIssue({code:a.z.ZodIssueCode.custom,message:"Required when recording resonance data",path:["accelerometer"]}),e));a.z.object({id:d,macroRecordingRunId:p,macroId:u,sequenceId:c,startTimeStamp:a.z.number(),endTimeStamp:a.z.number(),accelerometer:i.Yx,recordingHardwareName:a.z.string(),psd:l,name:a.z.string()});let f=a.z.object({id:c,name:a.z.string(),recording:m.nullable(),gcode:a.z.string().min(2)}),g=a.z.object({id:u,name:a.z.string(),description:a.z.string(),createdAtTimeStamp:a.z.number(),updatedAtTimeStamp:a.z.number().nullable(),recordingCount:a.z.record(c,a.z.number()),sequences:a.z.array(f)}),y=g.omit({recordingCount:!0,createdAtTimeStamp:!0,updatedAtTimeStamp:!0})},3747:(e,r,t)=>{t.d(r,{r:()=>o});var a=t(97175);let i=(0,a.createProxy)(String.raw`/home/runner/work/RatOS-configurator/RatOS-configurator/src/components/common/no-ssr.tsx`),{__esModule:n,$$typeof:s}=i;i.default;let o=i.NoSSR}};