"use strict";exports.id=1642,exports.ids=[1642],exports.modules={1642:(t,e,r)=>{r.d(e,{klipperRestart:()=>klipperRestart,z:()=>queryPrinterState});var a=r(38316),s=r(49013);let o=a.z.object({eventtime:a.z.number()}),l=o.extend({status:a.z.object({print_stats:a.z.object({state:a.z.union([a.z.literal("paused"),a.z.literal("printing"),a.z.literal("complete"),a.z.literal("error"),a.z.literal("canceled"),a.z.literal("standby")])})})}),n=a.z.object({result:o.passthrough()}),parseMoonrakerHTTPResponse=async(t,e)=>{let r=await t.json();try{let t=n.parse(r);return{...t,result:e.parse(t.result)}}catch(t){throw(0,s.getLogger)().error("Error parsing moonraker response"),(0,s.getLogger)().error(r),t}},queryPrinterState=async()=>(await parseMoonrakerHTTPResponse(await fetch("http://localhost:7125/printer/objects/query?print_stats"),l)).result.status.print_stats.state,klipperRestart=async(t=!1)=>!!(t||["error","complete","canceled","standby"].includes(await queryPrinterState()))&&(await fetch("http://localhost:7125/printer/restart",{method:"POST"}),!0)}};