"use strict";exports.id=1642,exports.ids=[1642],exports.modules={1642:(t,e,r)=>{r.d(e,{klipperRestart:()=>klipperRestart});var s=r(38316),a=r(49013);let o=s.z.object({eventtime:s.z.number()}),l=o.extend({status:s.z.object({print_stats:s.z.object({state:s.z.union([s.z.literal("paused"),s.z.literal("printing"),s.z.literal("complete"),s.z.literal("error"),s.z.literal("canceled"),s.z.literal("standby")])})})}),n=s.z.object({result:o.passthrough()}),parseMoonrakerHTTPResponse=async(t,e)=>{let r=await t.json();try{let t=n.parse(r);return{...t,result:e.parse(t.result)}}catch(t){throw(0,a.getLogger)().error("Error parsing moonraker response"),(0,a.getLogger)().error(r),t}},klipperRestart=async(t=!1)=>{let e=(await parseMoonrakerHTTPResponse(await fetch("http://localhost:7125/printer/objects/query?print_stats"),l)).result.status.print_stats.state;return!!(t||["error","complete","canceled","standby"].includes(e))&&(await fetch("http://localhost:7125/printer/restart",{method:"POST"}),!0)}}};