"use strict";(()=>{var e={};e.id=118,e.ids=[118,2888],e.modules={97123:(e,r,t)=>{t.r(r),t.d(r,{register:()=>register});let register=async()=>{{let{getLogger:e}=await Promise.all([t.e(1641),t.e(9013)]).then(t.bind(t,49013)),{existsSync:r,mkdirSync:i}=await Promise.resolve().then(t.t.bind(t,57147,23)),{regenerateKlipperConfiguration:o}=await Promise.all([t.e(1641),t.e(1473),t.e(1618),t.e(1642),t.e(878)]).then(t.bind(t,20878)),{serverSchema:s}=await t.e(1641).then(t.bind(t,11641)),{symlinkKlippyExtensions:a}=await Promise.all([t.e(1641),t.e(1473),t.e(1538),t.e(3238)]).then(t.bind(t,93238)),{symlinkMoonrakerExtensions:n}=await Promise.all([t.e(1641),t.e(1473),t.e(1538),t.e(3789)]).then(t.bind(t,93789)),{klipperRestart:p}=await Promise.all([t.e(1641),t.e(1642),t.e(439)]).then(t.bind(t,1642)),l=await Promise.resolve().then(t.t.bind(t,9523,23));l.setDefaultResultOrder("ipv4first");let c=e(),u=s.parse(process.env),d=u.RATOS_DATA_DIR;r(d)||(c.info("Creating RatOS data directory.."),i(d));try{c.info("Symlinking klippy extensions..."),c.info((await a()).report)}catch(e){e instanceof Error&&c.error(`Failed to symlink klippy extensions: ${e.message}`)}try{c.info("Symlinking moonraker extensions..."),c.info((await n()).report)}catch(e){e instanceof Error&&c.error(`Failed to symlink moonraker extensions: ${e.message}`)}try{c.info("Regenerating last known config...");let e=await o();if(e.some(e=>"created"===e.action||"overwritten"===e.action)){e.forEach(e=>{("created"===e.action||"overwritten"===e.action)&&c.info(`File ${e.fileName} ${e.action}.`)}),c.info("Configuration changed, restarting klipper..");try{let e=await p();e?c.info("Klipper restarted!"):c.info("Klipper was in a busy state. Please restart manually.")}catch(e){e instanceof Error&&c.error(`Failed to restart klipper: ${e.message}`)}}else c.info("No configuration changes detected.")}catch(e){e instanceof Error&&c.error(`Failed to regenerate config: ${e.message}`);return}}}},18910:e=>{e.exports=require("@tanstack/react-query")},85337:e=>{e.exports=require("@trpc/client")},4129:e=>{e.exports=require("@trpc/next")},56368:e=>{e.exports=require("@trpc/server")},56988:e=>{e.exports=require("deep-equal")},54230:e=>{e.exports=require("glob")},24580:e=>{e.exports=require("node-cache")},71569:e=>{e.exports=require("object-hash")},58545:e=>{e.exports=require("pino")},80666:e=>{e.exports=require("pino-pretty-browser")},16689:e=>{e.exports=require("react")},7636:e=>{e.exports=require("react-use-websocket")},20997:e=>{e.exports=require("react/jsx-runtime")},29755:e=>{e.exports=require("recoil")},44101:e=>{e.exports=require("recoil-sync")},53489:e=>{e.exports=require("ts-deepmerge")},38316:e=>{e.exports=require("zod")},15140:e=>{e.exports=require("zod-refine")},32081:e=>{e.exports=require("child_process")},9523:e=>{e.exports=require("dns")},57147:e=>{e.exports=require("fs")},73292:e=>{e.exports=require("fs/promises")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},14521:e=>{e.exports=require("readline")},73837:e=>{e.exports=require("util")}};var r=require("./webpack-runtime.js");r.C(e);var t=r(r.s=97123);module.exports=t})();