{"version":3,"file":"static/chunks/4186-07aa05c07cd971c9.js","mappings":"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","sources":["webpack://_N_E/ignored|/home/runner/work/RatOS-configurator/RatOS-configurator/src/node_modules/.pnpm/object-inspect@1.13.1/node_modules/object-inspect|./util.inspect","webpack://_N_E/./helpers/logger.ts","webpack://_N_E/./zods/util.tsx","webpack://_N_E/./app/_helpers/logger.ts","webpack://_N_E/./app/_hooks/debounce.ts","webpack://_N_E/./components/ui/textarea.tsx","webpack://_N_E/./components/common/fieldset.tsx","webpack://_N_E/./components/ui/switch.tsx","webpack://_N_E/./components/ui/resizable.tsx","webpack://_N_E/./app/analysis/macros/components/macro-chart-preview.tsx","webpack://_N_E/./app/analysis/macros/components/macro-form.tsx","webpack://_N_E/./app/_helpers/signal.ts","webpack://_N_E/./components/ui/menubar.tsx","webpack://_N_E/./components/common/mutation-modal.tsx","webpack://_N_E/./components/common/help-actions.tsx","webpack://_N_E/./app/topmenu.tsx","webpack://_N_E/./components/common/animated-container.tsx","webpack://_N_E/./components/common/button.tsx","webpack://_N_E/./components/common/card.tsx","webpack://_N_E/./components/common/scroll-container.tsx","webpack://_N_E/./components/common/spinner.tsx","webpack://_N_E/./components/ui/form.tsx","webpack://_N_E/./components/ui/input.tsx","webpack://_N_E/./components/ui/label.tsx","webpack://_N_E/./components/ui/select.tsx","webpack://_N_E/./helpers/trpc.ts","webpack://_N_E/./helpers/util.ts","webpack://_N_E/./moonraker/migrations.ts","webpack://_N_E/./moonraker/hooks.tsx","webpack://_N_E/./utils/trpc.ts","webpack://_N_E/./public/logo-white.svg","webpack://_N_E/<anon>"],"sourcesContent":["/* (ignored) */","import { LoggerOptions } from 'pino';\n\nexport const globalPinoOpts: LoggerOptions = {\n\ttimestamp: true,\n\tlevel: process.env.NODE_ENV === 'development' ? 'debug' : 'info',\n};\n","import { z } from 'zod';\n\nexport const PinoLogLevel = z.enum(['trace', 'debug', 'info', 'warn', 'error', 'fatal']);\n\nexport const PinoLogEvent = z.object({\n\tts: z.number(),\n\tmessages: z.array(z.any()),\n\tbindings: z.array(z.record(z.string(), z.any())),\n\tlevel: z.object({\n\t\tlabel: PinoLogLevel,\n\t\tvalue: z.number(),\n\t}),\n});\n","import pino from 'pino';\nimport { globalPinoOpts } from '@/helpers/logger';\nimport { trpcClient } from '@/helpers/trpc';\nimport { PinoLogEvent } from '@/zods/util';\nimport { prettyFactory, write } from 'pino-pretty-browser';\n\nconst send = async function (level: pino.Level, logEvent: pino.LogEvent) {\n\ttrpcClient.clientLog.mutate({ level, logEvent: PinoLogEvent.parse(logEvent) });\n};\n\nlet logger: pino.Logger | null = null;\nexport const getLogger = () => {\n\tif (logger != null) {\n\t\treturn logger;\n\t}\n\tlogger = pino({\n\t\t...globalPinoOpts,\n\t\tbrowser: {\n\t\t\ttransmit: {\n\t\t\t\tsend,\n\t\t\t},\n\t\t},\n\t});\n\treturn logger;\n};\n","import { useRef, useCallback, useEffect } from 'react';\n\nexport const useDebounce = <T extends Function>(fn: T, delay: number, refreshTimeout: boolean = false) => {\n\tconst timeoutRef = useRef<ReturnType<typeof setTimeout>>();\n\tconst argsRef = useRef<any[]>([]);\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (timeoutRef.current) {\n\t\t\t\tclearTimeout(timeoutRef.current);\n\t\t\t}\n\t\t};\n\t}, []);\n\treturn useCallback(\n\t\t(...args: any[]) => {\n\t\t\targsRef.current = args;\n\t\t\tif (timeoutRef.current) {\n\t\t\t\tif (refreshTimeout) {\n\t\t\t\t\tclearTimeout(timeoutRef.current);\n\t\t\t\t\ttimeoutRef.current = undefined;\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttimeoutRef.current = setTimeout(() => {\n\t\t\t\tfn(...argsRef.current);\n\t\t\t\ttimeoutRef.current = undefined;\n\t\t\t}, delay);\n\t\t},\n\t\t[delay, refreshTimeout, fn],\n\t) as unknown as T;\n};\n","import * as React from 'react';\n\nimport { cn, setDisplayName } from '@/helpers/utils';\n\nexport interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(({ className, ...props }, ref) => {\n\treturn (\n\t\t<textarea\n\t\t\tclassName={cn(\n\t\t\t\t'flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground',\n\t\t\t\t'focus:border-brand-400/70 focus:outline-none focus:ring-1 focus:ring-transparent disabled:cursor-not-allowed disabled:opacity-50',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\tref={ref}\n\t\t\t{...props}\n\t\t/>\n\t);\n});\nsetDisplayName(Textarea, 'Textarea');\n\nexport { Textarea };\n","import { cva } from 'class-variance-authority';\nimport React from 'react';\n\nconst fieldsetVariants = cva([\n\t'relative rounded-lg p-4 bg-white dark:bg-zinc-900/60',\n\t'shadow-[0px_0px_0px_1px_rgba(9,9,11,0.07),0px_2px_2px_0px_rgba(9,9,11,0.05)] dark:shadow-[0px_0px_0px_1px_rgba(255,255,255,0.05)]',\n\t'dark:before:-inset-px dark:before:rounded-xl dark:before:-mt-2.5',\n\t'dark:before:pointer-events-none dark:before:absolute dark:before:shadow-[0px_2px_8px_0px_rgba(0,_0,_0,_0.20),_0px_1px_0px_0px_rgba(255,_255,_255,_0.09)_inset]',\n]);\n\ntype FieldsetProps = React.FieldsetHTMLAttributes<HTMLFieldSetElement> &\n\tReact.PropsWithChildren<{\n\t\tclassName?: string;\n\t}>;\n\nexport const Fieldset: React.FC<FieldsetProps> = (props) => {\n\treturn (\n\t\t<fieldset {...props} className={fieldsetVariants({ className: props.className })}>\n\t\t\t{props.children}\n\t\t</fieldset>\n\t);\n};\n","'use client';\n\nimport * as React from 'react';\nimport * as SwitchPrimitives from '@radix-ui/react-switch';\n\nimport { cn, setDisplayName } from '@/helpers/utils';\n\nconst Switch = React.forwardRef<\n\tReact.ElementRef<typeof SwitchPrimitives.Root>,\n\tReact.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n\t<SwitchPrimitives.Root\n\t\tclassName={cn(\n\t\t\t'peer relative inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-all data-[state=checked]:bg-brand-400/80 data-[state=unchecked]:bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50',\n\t\t\t'dark:before:pointer-events-none dark:before:absolute dark:before:-inset-[2px] dark:before:rounded-full dark:before:transition-all',\n\t\t\t'dark:before:shadow-[0px_-1px_0px_0px_hsl(var(--zinc-400)_/_15%)_inset,_inset_0px_1px_2px_0px_rgba(0,0,0,0.55)]',\n\t\t\t'data-[state=checked]:dark:before:shadow-[inset_0px_-1px_0px_0px_hsl(var(--brand-200)_/_50%),_inset_0px_1px_2px_0px_rgba(0,0,0,0.55)]',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t\tref={ref}\n\t>\n\t\t<SwitchPrimitives.Thumb\n\t\t\tclassName={cn(\n\t\t\t\t'pointer-events-none block h-4 w-4 rounded-full bg-zinc-800 shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0',\n\t\t\t\t'shadow-[0px_0px_0px_1px_rgba(9,9,11,0.07),0px_2px_2px_0px_rgba(9,9,11,0.05)] dark:shadow-[0px_0px_0px_1px_rgba(255,255,255,0.03)]',\n\t\t\t\t'dark:before:inset-px dark:before:rounded-full',\n\t\t\t\t'dark:before:pointer-events-none dark:before:absolute dark:before:shadow-[0px_2px_8px_0px_hsl(var(--zinc-900)),_0px_1px_0px_0px_hsl(var(--zinc-400)_/_20%)_inset]',\n\t\t\t)}\n\t\t/>\n\t</SwitchPrimitives.Root>\n));\nsetDisplayName(Switch, SwitchPrimitives.Root.displayName);\n\nexport { Switch };\n","'use client';\n\nimport { DragHandleDots2Icon } from '@radix-ui/react-icons';\nimport * as ResizablePrimitive from 'react-resizable-panels';\n\nimport { cn } from '@/helpers/utils';\n\nconst ResizablePanelGroup = ({ className, ...props }: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n\t<ResizablePrimitive.PanelGroup\n\t\tclassName={cn('flex h-full w-full data-[panel-group-direction=vertical]:flex-col', className)}\n\t\t{...props}\n\t/>\n);\n\nconst ResizablePanel = ResizablePrimitive.Panel;\n\nconst ResizableHandle = ({\n\twithHandle,\n\tclassName,\n\t...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n\twithHandle?: boolean;\n}) => (\n\t<ResizablePrimitive.PanelResizeHandle\n\t\tclassName={cn(\n\t\t\t'relative flex w-px items-center justify-center bg-zinc-400/20 after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 [&[data-panel-group-direction=vertical]>div]:rotate-90',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t>\n\t\t{withHandle && (\n\t\t\t<div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n\t\t\t\t<DragHandleDots2Icon className=\"h-2.5 w-2.5\" />\n\t\t\t</div>\n\t\t)}\n\t</ResizablePrimitive.PanelResizeHandle>\n);\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle };\n","import { macroSequenceSchema } from '@/zods/analysis';\nimport {\n\tPSDChartNoSeriesDefinition,\n\tPSD_CHART_AXIS_AMPLITUDE_ID,\n\tgetPSDTooltipLegendTemplate,\n\tpsdRolloverTooltipTemplate,\n} from '@/app/analysis/charts';\nimport { useChart } from '@/app/analysis/hooks';\nimport { z } from 'zod';\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport {\n\tCursorModifier,\n\tFastBandRenderableSeries,\n\tFastLineRenderableSeries,\n\tNumberRange,\n\tRolloverModifier,\n\tSciChartSurface,\n\tSeriesInfo,\n\tWaveAnimation,\n\tXyDataSeries,\n\tXyyDataSeries,\n} from 'scichart';\nimport { shadableTWColors } from '@/app/_helpers/colors';\nimport { SciChartReact } from 'scichart-react';\nimport deepEqual from 'deep-equal';\n\nSciChartSurface.configure({\n\twasmUrl: '/configure/scichart2d.wasm',\n\tdataUrl: '/configure/scichart2d.data',\n});\n\ninterface MacroChartPreviewProps {\n\tsequences?: z.input<typeof macroSequenceSchema>[];\n}\n\nconst getBandTooltipDataTemplate = (\n\tseriesInfo: SeriesInfo,\n\ttooltipTitle: string,\n\ttooltipLabelX: string,\n\ttooltipLabelY: string,\n) => {\n\t// Lines here are returned to the tooltip and displayed as text-line per tooltip\n\tconst lines: string[] = [];\n\tlines.push(tooltipTitle);\n\tlines.push(\n\t\t`<tspan class=\"opacity-70 font-medium\">${seriesInfo.formattedYValue} @ ${seriesInfo.formattedXValue}</tspan>`,\n\t);\n\treturn lines;\n};\nconst getTooltipDataTemplate = (\n\tseriesInfo: SeriesInfo,\n\ttooltipTitle: string,\n\ttooltipLabelX: string,\n\ttooltipLabelY: string,\n) => {\n\t// Lines here are returned to the tooltip and displayed as text-line per tooltip\n\tconst lines: string[] = [];\n\tlines.push(tooltipTitle);\n\tlines.push(\n\t\t`<tspan class=\"opacity-70 font-medium\">${seriesInfo.formattedYValue} @ ${seriesInfo.formattedXValue}</tspan>`,\n\t);\n\treturn lines;\n};\n\nexport const MacroChartPreview: React.FC<MacroChartPreviewProps> = ({ sequences }) => {\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tconst sequenceData =\n\t\tsequences\n\t\t\t?.map((seq) => {\n\t\t\t\treturn seq.recording?.capturePSD\n\t\t\t\t\t? {\n\t\t\t\t\t\t\taccel: seq.recording.accelerometer,\n\t\t\t\t\t\t\tcolor: seq.recording.color,\n\t\t\t\t\t\t\tname: seq.name,\n\t\t\t\t\t\t}\n\t\t\t\t\t: null;\n\t\t\t})\n\t\t\t.filter(Boolean) ?? [];\n\n\tconst prevSequenceData = useRef(sequenceData);\n\n\tconst setupChart = useCallback(\n\t\t(surface: SciChartSurface) => {\n\t\t\tif (sequenceData.length === 2) {\n\t\t\t\tconst randMul1 = 10 * Math.random() * 50 + 184;\n\t\t\t\tconst randAdd1 = 10 * Math.random() * 400 + 900;\n\t\t\t\tconst randMul2 = 10 * Math.random() * 50 + 184;\n\t\t\t\tconst randAdd2 = 10 * Math.random() * 400 + 900;\n\t\t\t\tconst step1 = 2 + Math.random() * 3;\n\t\t\t\tconst step2 = 2 + Math.random() * 3;\n\t\t\t\tconst rs = new FastBandRenderableSeries(surface.webAssemblyContext2D, {\n\t\t\t\t\tdataSeries: new XyyDataSeries(surface.webAssemblyContext2D, {\n\t\t\t\t\t\tcontainsNaN: false,\n\t\t\t\t\t\tisSorted: true,\n\t\t\t\t\t\txValues: Array(130)\n\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t.map((_, i) => (200 / 130) * i),\n\t\t\t\t\t\tyValues: Array(130)\n\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t.map((_, i) =>\n\t\t\t\t\t\t\t\tMath.max(\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t(i < 50 && i > 25) || i > 70\n\t\t\t\t\t\t\t\t\t\t? (140 - i) * 5 * (Math.cos(i / step1) * randMul1 + randAdd1)\n\t\t\t\t\t\t\t\t\t\t: i * 30 * (Math.sin(i / step1) * randMul1 + randAdd1),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\ty1Values: Array(130)\n\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t.map((_, i) =>\n\t\t\t\t\t\t\t\tMath.max(\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t(i < 50 && i > 25) || i > 70\n\t\t\t\t\t\t\t\t\t\t? (140 - i) * 5 * (Math.cos(i / step2) * randMul2 + randAdd2)\n\t\t\t\t\t\t\t\t\t\t: i * 10 * (Math.sin(i / step2) * randMul2 * 3 + randAdd2),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t}),\n\t\t\t\t\tfill: shadableTWColors[(sequenceData[1].color ?? 'sky') as keyof typeof shadableTWColors][600] + 22,\n\t\t\t\t\tfillY1: shadableTWColors[(sequenceData[0].color ?? 'rose') as keyof typeof shadableTWColors][600] + 22,\n\t\t\t\t\tstroke: shadableTWColors[(sequenceData[0].color ?? 'rose') as keyof typeof shadableTWColors][400],\n\t\t\t\t\tstrokeY1: shadableTWColors[(sequenceData[1].color ?? 'sky') as keyof typeof shadableTWColors][400],\n\t\t\t\t\tstrokeThickness: 3,\n\t\t\t\t\tyAxisId: PSD_CHART_AXIS_AMPLITUDE_ID,\n\t\t\t\t});\n\t\t\t\trs.rolloverModifierProps.tooltipColor = sequenceData[0].color ?? 'zinc';\n\t\t\t\trs.rolloverModifierProps.tooltipTitle = sequenceData[0].name + ' Power';\n\t\t\t\trs.rolloverModifierProps1.tooltipColor = sequenceData[1].color ?? 'zinc';\n\t\t\t\trs.rolloverModifierProps1.tooltipTitle = sequenceData[1].name + ' Power';\n\t\t\t\trs.animation = new WaveAnimation({\n\t\t\t\t\tduration: 500,\n\t\t\t\t});\n\t\t\t\tsurface.renderableSeries.add(rs);\n\t\t\t} else {\n\t\t\t\tsequenceData.forEach((seq) => {\n\t\t\t\t\tconst randMul1 = 1000 * Math.random() * 50 + 184;\n\t\t\t\t\tconst randAdd1 = 1000 * Math.random() * 400 + 900;\n\t\t\t\t\tconst step1 = 2 + Math.random() * 3;\n\t\t\t\t\tconst rs = new FastLineRenderableSeries(surface.webAssemblyContext2D, {\n\t\t\t\t\t\tdataSeries: new XyDataSeries(surface.webAssemblyContext2D, {\n\t\t\t\t\t\t\tcontainsNaN: false,\n\t\t\t\t\t\t\tisSorted: true,\n\t\t\t\t\t\t\txValues: Array(130)\n\t\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t\t.map((_, i) => (200 / 130) * i),\n\t\t\t\t\t\t\tyValues: Array(130)\n\t\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t\t.map((_, i) =>\n\t\t\t\t\t\t\t\t\tMath.max(\n\t\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t\t(i < 50 && i > 25) || i > 70\n\t\t\t\t\t\t\t\t\t\t\t? (140 - i) * 5 * (Math.cos(i / step1) * randMul1 + randAdd1)\n\t\t\t\t\t\t\t\t\t\t\t: i * 30 * (Math.sin(i / step1) * randMul1 + randAdd1),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tstroke: shadableTWColors[(seq.color ?? 'brand') as keyof typeof shadableTWColors][400],\n\t\t\t\t\t\tstrokeThickness: 3,\n\t\t\t\t\t\tyAxisId: PSD_CHART_AXIS_AMPLITUDE_ID,\n\t\t\t\t\t});\n\t\t\t\t\trs.rolloverModifierProps.tooltipColor = seq.color ?? 'zinc';\n\t\t\t\t\trs.rolloverModifierProps.tooltipTitle = seq.name + ' Power';\n\t\t\t\t\trs.animation = new WaveAnimation({\n\t\t\t\t\t\tduration: 500,\n\t\t\t\t\t});\n\t\t\t\t\tsurface.renderableSeries.add(rs);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst yAxis = surface.yAxes.getById(PSD_CHART_AXIS_AMPLITUDE_ID);\n\t\t\tif (yAxis) {\n\t\t\t\tlet range = new NumberRange(0, 0);\n\t\t\t\tsurface.renderableSeries.asArray().forEach((rs) => {\n\t\t\t\t\tconst series = rs as FastLineRenderableSeries | FastBandRenderableSeries;\n\t\t\t\t\trange = range.union(series.getYRange(series.getXRange(), false));\n\t\t\t\t});\n\t\t\t\trange = range.growBy(new NumberRange(0.0, 0.1));\n\t\t\t\tyAxis.visibleRange = range;\n\t\t\t}\n\n\t\t\tsurface.chartModifiers.add(\n\t\t\t\tnew RolloverModifier({\n\t\t\t\t\t// Defines if rollover vertical line is shown\n\t\t\t\t\tshowRolloverLine: true,\n\t\t\t\t\t// Shows the default tooltip\n\t\t\t\t\tshowTooltip: false,\n\t\t\t\t\tyAxisId: PSD_CHART_AXIS_AMPLITUDE_ID,\n\t\t\t\t\t// Optional: Overrides the content of the tooltip\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tsurface.chartModifiers.add(\n\t\t\t\tnew CursorModifier({\n\t\t\t\t\t// Defines if crosshair is shown\n\t\t\t\t\tcrosshairStroke: shadableTWColors.sky[400],\n\t\t\t\t\tcrosshairStrokeThickness: 1,\n\t\t\t\t\tshowXLine: true,\n\t\t\t\t\tshowYLine: true,\n\t\t\t\t\ttooltipLegendTemplate: getPSDTooltipLegendTemplate,\n\t\t\t\t\ttooltipLegendOffsetX: 16,\n\t\t\t\t\ttooltipLegendOffsetY: 16,\n\t\t\t\t\tyAxisId: PSD_CHART_AXIS_AMPLITUDE_ID,\n\t\t\t\t\t// Shows the default tooltip\n\t\t\t\t\tshowTooltip: false,\n\t\t\t\t\taxisLabelFill: shadableTWColors.zinc[900],\n\t\t\t\t\taxisLabelStroke: shadableTWColors.zinc[100],\n\t\t\t\t}),\n\t\t\t);\n\t\t},\n\t\t[sequenceData],\n\t);\n\n\tconst chart = useChart(PSDChartNoSeriesDefinition, setupChart);\n\n\tuseEffect(() => {\n\t\tif (sequenceData.length != 0 && deepEqual(sequenceData, prevSequenceData.current) === false) {\n\t\t\tif (chart.surface.current) {\n\t\t\t\tchart.surface.current?.renderableSeries.clear();\n\t\t\t\tchart.surface.current?.chartModifiers.clear();\n\t\t\t\tsetupChart(chart.surface.current);\n\t\t\t\tchart.surface.current.invalidateElement();\n\t\t\t}\n\t\t\tprevSequenceData.current = sequenceData;\n\t\t}\n\t}, [chart.surface, sequenceData, setupChart]);\n\n\treturn <SciChartReact {...chart.forwardProps} className=\"flex-1\"></SciChartReact>;\n};\n","'use client';\nimport { ArrowDownToDot, Check, CircleFadingPlus, Cpu, Cross, Server, Target, X } from 'lucide-react';\n\nimport { Button } from '@/components/common/button';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Fieldset } from '@/components/common/fieldset';\nimport { Badge } from '@/components/common/badge';\nimport { Card } from '@/components/common/card';\nimport React, { PointerEvent, PropsWithChildren, useCallback, useMemo } from 'react';\nimport { TWShadeableColorName, shadableTWColors } from '@/app/_helpers/colors';\nimport { Switch } from '@/components/ui/switch';\nimport { FormField, FormItem, FormLabel, FormDescription, FormControl, Form, FormMessage } from '@/components/ui/form';\nimport { UseFormReturn, useFieldArray, useFormContext, useWatch } from 'react-hook-form';\nimport { createMacroSchema } from '@/zods/analysis';\nimport { z } from 'zod';\nimport * as uuid from 'uuid';\nimport { AnimatedContainer } from '@/components/common/animated-container';\nimport { AnimatePresence, motion, Reorder, useDragControls } from 'framer-motion';\nimport { ResizableHandle, ResizablePanel, ResizablePanelGroup } from '@/components/ui/resizable';\nimport { MacroChartPreview } from '@/app/analysis/macros/components/macro-chart-preview';\nimport { ScrollContainer } from '@/components/common/scroll-container';\nimport { KlipperAccelSensorName } from '@/zods/hardware';\n\nconst colorOptions = Object.keys(shadableTWColors).map((c) => {\n\treturn {\n\t\tlabel: c,\n\t\tvalue: c,\n\t\tcolor: shadableTWColors[c as TWShadeableColorName][500] as string,\n\t};\n});\n\ntype AccelOptions = {\n\tlabel: string;\n\tvalue: KlipperAccelSensorName;\n\tdescription: string;\n\ticon: React.ComponentType<React.SVGAttributes<SVGElement>>;\n};\n\ninterface MacroFormProps {\n\tform: UseFormReturn<z.input<typeof createMacroSchema>>;\n\tisNew?: boolean;\n\tsubmit: (e?: React.BaseSyntheticEvent) => Promise<void>;\n}\n\ninterface SequenceFormProps extends PropsWithChildren {\n\tvalue: unknown;\n}\n\nconst MacroSequence: React.FC<SequenceFormProps> = ({ value, children }) => {\n\tconst controls = useDragControls();\n\tconst onPointerDown = useCallback(\n\t\t(e: PointerEvent<HTMLFieldSetElement>) => {\n\t\t\tif (['input', 'textarea'].includes((e.target as HTMLElement)?.tagName?.toLowerCase())) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\tcontrols.start(e);\n\t\t},\n\t\t[controls],\n\t);\n\treturn (\n\t\t<Reorder.Item\n\t\t\tas=\"div\"\n\t\t\tclassName=\"grid w-full items-start gap-6\"\n\t\t\tdragListener={false}\n\t\t\tdragControls={controls}\n\t\t\tvalue={value}\n\t\t\texit={{\n\t\t\t\topacity: 0,\n\t\t\t\tscale: 1,\n\t\t\t\ty: -10,\n\t\t\t\ttransition: { duration: 0.2 },\n\t\t\t}}\n\t\t\tinitial={{ opacity: 0, scale: 1, y: -10 }}\n\t\t\tanimate={{\n\t\t\t\topacity: 1,\n\t\t\t\tscale: 1,\n\t\t\t\ty: 0,\n\t\t\t\ttransition: { delay: 0.2, staggerChildren: 0.2 },\n\t\t\t}}\n\t\t>\n\t\t\t<Fieldset className=\"grid gap-6 p-4\" onPointerDown={onPointerDown}>\n\t\t\t\t{children}\n\t\t\t</Fieldset>\n\t\t</Reorder.Item>\n\t);\n};\n\nconst useFormValues = () => {\n\tconst { getValues } = useFormContext<z.input<typeof createMacroSchema>>();\n\n\treturn {\n\t\t...useWatch(), // subscribe to form value updates\n\n\t\t...getValues(), // always merge with latest form values\n\t};\n};\n\nexport const MacroForm: React.FC<MacroFormProps> = ({ form, submit, isNew }) => {\n\tlet labels: AccelOptions[] = useMemo(() => {\n\t\treturn [\n\t\t\t{\n\t\t\t\tlabel: 'Control Board',\n\t\t\t\tvalue: 'controlboard',\n\t\t\t\tdescription: 'Record data with an ADXL345 connected to the main control board',\n\t\t\t\ticon: Cpu,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: 'Host',\n\t\t\t\tvalue: 'rpi',\n\t\t\t\tdescription: 'Record data with an ADXL345 connected to the Raspberry Pi or other host computer',\n\t\t\t\ticon: Server,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: 'Tool Board T0',\n\t\t\t\tvalue: 'toolboard_t0',\n\t\t\t\tdescription: 'Record data with an ADXL345 on the toolboard on toolhead T0',\n\t\t\t\ticon: ArrowDownToDot,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: 'Tool Board T1',\n\t\t\t\tvalue: 'toolboard_t1',\n\t\t\t\tdescription: 'Record data with an ADXL345 on the toolboard on toolhead T1',\n\t\t\t\ticon: ArrowDownToDot,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: 'Beacon',\n\t\t\t\tvalue: 'beacon',\n\t\t\t\tdescription: 'Record data with the Beacon accelerometer',\n\t\t\t\ticon: Target,\n\t\t\t},\n\t\t] satisfies AccelOptions[];\n\t}, []);\n\tconst sequences = useFieldArray({\n\t\tcontrol: form.control,\n\t\tname: 'sequences',\n\t\tkeyName: 'key',\n\t\tshouldUnregister: true,\n\t});\n\tconst onReorder = useCallback(\n\t\t(seqs: typeof sequences.fields) => {\n\t\t\tseqs.forEach((seq, i) => sequences.update(i, seq));\n\t\t},\n\t\t[sequences],\n\t);\n\tconst formValues = useFormValues();\n\tif (sequences.fields == null) {\n\t\treturn;\n\t}\n\treturn (\n\t\t<div className=\"flex max-h-[calc(100vh_-_56px)] min-h-full w-full flex-col\">\n\t\t\t<header className=\"sticky top-14 z-10 flex flex-grow-0 items-center gap-1 border-b border-zinc-100/10 bg-zinc-700/25 px-4 py-4 backdrop-blur-sm\">\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<FormField\n\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t<FormItem className=\"flex flex-row items-center justify-between\">\n\t\t\t\t\t\t\t\t<FormControl className=\"flex flex-1\">\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\tclassName=\"dark:focus-ring-0 flex h-auto flex-1 border-none p-0 text-xl font-medium focus:ring-0 focus:ring-offset-0\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\t\taria-autocomplete=\"none\"\n\t\t\t\t\t\t\t\t\t\tautoCapitalize=\"on\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter macro name...\"\n\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<FormField\n\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t<FormItem className=\"flex flex-row items-center justify-between\">\n\t\t\t\t\t\t\t\t<FormControl className=\"flex flex-1\">\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter a description...\"\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\t\taria-autocomplete=\"none\"\n\t\t\t\t\t\t\t\t\t\tautoCapitalize=\"off\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"font-regular dark:focus-ring-0 flex h-auto flex-1 border-none p-0 text-base text-muted-foreground focus:ring-0 focus:ring-offset-0 dark:text-muted-foreground\"\n\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"ml-auto flex flex-row flex-nowrap items-center gap-2\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tclassName=\"ml-auto text-sm\"\n\t\t\t\t\t\tonClick={submit}\n\t\t\t\t\t\tdisabled={!form.formState.isDirty}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Check className=\"size-3.5\" />\n\t\t\t\t\t\t{isNew ? 'Create' : 'Save'}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<ResizablePanelGroup direction=\"horizontal\" className=\"flex max-h-full flex-1\">\n\t\t\t\t<ResizablePanel defaultSize={35} className=\"flex\" minSize={20}>\n\t\t\t\t\t<ScrollContainer className=\"flex-1 overflow-y-scroll p-4\">\n\t\t\t\t\t\t<Reorder.Group\n\t\t\t\t\t\t\taxis=\"y\"\n\t\t\t\t\t\t\tas=\"div\"\n\t\t\t\t\t\t\tclassName=\"relative flex flex-col items-start gap-4\"\n\t\t\t\t\t\t\tvalues={sequences.fields ?? []}\n\t\t\t\t\t\t\tonReorder={onReorder}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{sequences.fields.map((sequence, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MacroSequence key={sequence.id ?? sequence.key} value={sequence}>\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<legend className=\"-ml-1 px-1 text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t{formValues.sequences[index]?.name ?? sequence.name ?? `Sequence ${index + 1}`}\n\t\t\t\t\t\t\t\t\t\t\t</legend>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"absolute -right-2 -top-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"danger\" size=\"icon-xs\" onClick={() => sequences.remove(index)}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<X className=\"size-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" {...form.register(`sequences.${index}.id`)} />\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"grid gap-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\t\t\t\t\t\t\t\tname={`sequences.${index}.name`}\n\t\t\t\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel className=\"text-base\">Sequence name</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input type=\"text\" {...field} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"grid gap-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\t\t\t\t\t\t\t\tname={`sequences.${index}.gcode`}\n\t\t\t\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel className=\"text-base\">G-code</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"temperature\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={'; Example \\nOSCILLATE FREQ=60 TIME=1'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"grid gap-3 rounded-lg border p-4 @container\">\n\t\t\t\t\t\t\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\t\t\t\t\t\t\t\tname={`sequences.${index}.recording.capturePSD`}\n\t\t\t\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormItem className=\"flex flex-row items-center justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"space-y-0.5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel className=\"text-base\">Record resonances</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormDescription className=\"font-medium\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tEnable the calculation and persistence of power spectral density.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FormDescription>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Switch checked={field.value} onCheckedChange={field.onChange} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<AnimatedContainer>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<AnimatePresence>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{sequence.recording?.capturePSD && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<motion.div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texit={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscale: 1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ty: -10,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransition: { duration: 0.2 },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitial={{ opacity: 0, scale: 1, y: -10 }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimate={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscale: 1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransition: { delay: 0.2, staggerChildren: 0.2 },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"grid gap-3 @xs:grid-cols-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`sequences.${index}.recording.accelerometer`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>Accelerometer</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Select onValueChange={field.onChange} value={field.value}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectTrigger\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"model\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"items-start [&_[data-description]]:hidden\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectValue placeholder=\"Select an accelerometer...\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{labels.map(({ label, value, icon: Icon, description }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectItem value={value} key={label}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-1 text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon className=\"size-5 shrink-0\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"grid gap-0.5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium text-foreground\">{label}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm\" data-description>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`sequences.${index}.recording.color`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>Sequence Color</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Select onValueChange={field.onChange} value={field.value}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectTrigger id=\"sequence-color\" className=\"items-start\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectValue placeholder=\"Select a color...\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{colorOptions.map(({ label, color, value }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectItem value={value} key={value}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-2 text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"size-5 rounded\" style={{ backgroundColor: color }} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"grid gap-0.5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium capitalize text-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</motion.div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</AnimatePresence>\n\t\t\t\t\t\t\t\t\t\t\t\t</AnimatedContainer>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t</MacroSequence>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Reorder.Group>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\tclassName=\"mt-4 w-full justify-center text-center\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tconst toAppend = {\n\t\t\t\t\t\t\t\t\tgcode: '',\n\t\t\t\t\t\t\t\t\tname: `Sequence ${sequences.fields.length}`,\n\t\t\t\t\t\t\t\t\trecording: { capturePSD: false },\n\t\t\t\t\t\t\t\t\tid: uuid.v4(),\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tsequences.append(toAppend);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CircleFadingPlus className=\"flex size-4\" />\n\t\t\t\t\t\t\t<span>Add new sequence</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ScrollContainer>\n\t\t\t\t</ResizablePanel>\n\t\t\t\t<ResizableHandle withHandle={true} />\n\t\t\t\t<ResizablePanel className=\"mt-[9px] flex p-4\" defaultSize={65} minSize={20}>\n\t\t\t\t\t<Card className=\"sticky top-0 flex min-h-72 w-full flex-1\">\n\t\t\t\t\t\t<Badge color=\"sky\" className=\"absolute right-3 top-3\">\n\t\t\t\t\t\t\tGraph Example Preview\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t<div className=\"flex flex-1\">\n\t\t\t\t\t\t\t<MacroChartPreview sequences={formValues.sequences} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Card>\n\t\t\t\t</ResizablePanel>\n\t\t\t</ResizablePanelGroup>\n\t\t</div>\n\t);\n};\n","import { useCallback, useEffect, useRef } from 'react';\n\n/**\n * Usage:\n *\n * const clickedSave = createSignal<Doc>();\n *\n * clickedSave(doc => {\n *   // do something to save the doc, or when the doc is saved\n * })\n *\n * clickedSave(doc);\n */\nexport interface SignalListener<T> {\n\t(event: T): void;\n}\nexport interface SignalUnsubscriber {\n\t(): void;\n}\nexport interface SignalSubscriber<T> {\n\t(listener: SignalListener<T>): SignalUnsubscriber;\n}\nexport interface SignalDispatcher<T> {\n\t(event: T): void;\n}\nexport type Signal<T> = SignalSubscriber<T> & SignalDispatcher<T>;\nexport type SignalReturn = SignalUnsubscriber & void;\n\nexport function useNewSignal<T = void>(): Signal<T> {\n\tconst subscribers = useRef(new Set<SignalListener<T>>());\n\treturn useCallback((eventOrListener: any): any => {\n\t\tif (typeof eventOrListener === 'function') {\n\t\t\tsubscribers.current.add(eventOrListener);\n\t\t\treturn () => {\n\t\t\t\tsubscribers.current.delete(eventOrListener);\n\t\t\t};\n\t\t} else {\n\t\t\tsubscribers.current.forEach((listener) => listener(eventOrListener));\n\t\t}\n\t}, []);\n}\n\nexport function useSignal<T = void>(signal: Signal<T>, listener: SignalListener<T>): void {\n\tuseEffect(() => {\n\t\tconst unsubscribe = signal(listener);\n\t\treturn unsubscribe;\n\t}, [signal, listener]);\n}\n","'use client';\n\nimport * as React from 'react';\nimport { CheckIcon, ChevronRightIcon, DotFilledIcon } from '@radix-ui/react-icons';\nimport * as MenubarPrimitive from '@radix-ui/react-menubar';\n\nimport { cn, setDisplayName } from '@/helpers/utils';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { twJoin } from 'tailwind-merge';\nimport { Check, LucideIcon } from 'lucide-react';\nimport { Slot } from '@radix-ui/react-slot';\n\ntype MenuBarContextValue = {\n\tvalue: null | string;\n};\n\nconst MenubarContext = React.createContext<MenuBarContextValue>({\n\tvalue: null,\n});\n\nconst MenubarGroup = MenubarPrimitive.Group;\n\nconst MenubarPortal = MenubarPrimitive.Portal;\n\nconst MenubarSub = MenubarPrimitive.Sub;\n\nconst MenubarRadioGroup = MenubarPrimitive.RadioGroup;\n\nconst Menubar = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.Root>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, children, ...props }, ref) => {\n\tconst [value, setValue] = React.useState<string | null>(null);\n\n\treturn (\n\t\t<MenubarContext.Provider value={{ value: value }}>\n\t\t\t<MenubarPrimitive.Root\n\t\t\t\tref={ref}\n\t\t\t\tvalue={value ?? undefined}\n\t\t\t\tclassName={cn('flex items-center space-x-1 rounded-md shadow-sm', className)}\n\t\t\t\tonValueChange={setValue}\n\t\t\t\t{...props}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</MenubarPrimitive.Root>\n\t\t</MenubarContext.Provider>\n\t);\n});\nsetDisplayName(Menubar, MenubarPrimitive.Root.displayName);\n\ntype MenubarMenuContextValue = {\n\tid: string;\n};\n\nconst MenubarMenuContext = React.createContext<MenubarMenuContextValue>({\n\tid: '',\n});\n\nconst MenubarMenu = (props: React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Menu>) => {\n\tconst id = React.useId();\n\treturn (\n\t\t<MenubarMenuContext.Provider value={{ id }}>\n\t\t\t<MenubarPrimitive.Menu {...props} value={id} />\n\t\t</MenubarMenuContext.Provider>\n\t);\n};\n\nconst MenubarIcon = React.forwardRef<\n\tReact.ElementRef<LucideIcon>,\n\tReact.ComponentPropsWithoutRef<LucideIcon> & { Icon: LucideIcon }\n>(({ className, Icon, ...props }, ref) =>\n\tReact.cloneElement<LucideIcon>(\n\t\t<Icon\n\t\t\tref={ref}\n\t\t\tclassName={cn(\n\t\t\t\t'size-4 text-white transition-colors group-data-[state=open]:text-white lg:text-white/60',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\t{...props}\n\t\t/>,\n\t),\n);\n\nconst MenubarTrigger = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.Trigger>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, children, asChild, ...props }, ref) => {\n\tconst { value } = React.useContext(MenubarContext);\n\tconst { id } = React.useContext(MenubarMenuContext);\n\tconst Comp = asChild ? Slot : 'div';\n\treturn (\n\t\t<MenubarPrimitive.Trigger\n\t\t\tref={ref}\n\t\t\tclassName={cn(\n\t\t\t\t'group relative flex cursor-default select-none items-center outline-none data-[state=open]:text-accent-foreground focus:text-accent-foreground',\n\t\t\t\t!props.disabled ? 'cursor-pointer' : 'cursor-not-allowed opacity-50',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\t{...props}\n\t\t>\n\t\t\t<AnimatePresence>\n\t\t\t\t{value?.replace('radix-', '') == id && !props.disabled && (\n\t\t\t\t\t<motion.div\n\t\t\t\t\t\tlayoutId=\"menubarTrigger\"\n\t\t\t\t\t\tinitial={{ opacity: 0 }}\n\t\t\t\t\t\tanimate={{\n\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t\ttransition: { duration: 0.1, ease: 'easeOut' },\n\t\t\t\t\t\t}}\n\t\t\t\t\t\texit={{\n\t\t\t\t\t\t\topacity: 0,\n\t\t\t\t\t\t\ttransition: { duration: 0.1, delay: 0.1, ease: 'easeIn' },\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttransition={{ type: 'spring', damping: 20, mass: 0.5, stiffness: 450 }}\n\t\t\t\t\t\tclassName={twJoin('pointer-events-none absolute inset-0 rounded-sm bg-brand-700')}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</AnimatePresence>\n\t\t\t<Comp className=\"relative z-20 flex flex-1 items-center gap-2 rounded-sm p-3 text-sm font-medium text-accent-foreground\">\n\t\t\t\t{children}\n\t\t\t</Comp>\n\t\t</MenubarPrimitive.Trigger>\n\t);\n});\nsetDisplayName(MenubarTrigger, MenubarPrimitive.Trigger.displayName);\n\nconst MenubarContentIcon = React.forwardRef<\n\tReact.ElementRef<LucideIcon>,\n\tReact.ComponentPropsWithoutRef<LucideIcon> & { Icon: LucideIcon }\n>(({ className, Icon, ...props }, ref) =>\n\tReact.cloneElement<LucideIcon>(<Icon ref={ref} className={cn('size-4 text-white/60', className)} {...props} />),\n);\n\nconst MenubarSubTrigger = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n\t\tinset?: boolean;\n\t}\n>(({ className, inset, children, ...props }, ref) => (\n\t<MenubarPrimitive.SubTrigger\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent data-[state=open]:text-accent-foreground focus:bg-accent focus:text-accent-foreground',\n\t\t\tinset && 'pl-8',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t>\n\t\t{children}\n\t\t<ChevronRightIcon className=\"ml-auto h-4 w-4\" />\n\t</MenubarPrimitive.SubTrigger>\n));\nsetDisplayName(MenubarSubTrigger, MenubarPrimitive.SubTrigger.displayName);\n\nconst MenubarSubContent = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.SubContent>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n\t<MenubarPrimitive.SubContent\n\t\tref={ref}\n\t\tsideOffset={4}\n\t\talignOffset={-5}\n\t\tclassName={cn(\n\t\t\t'z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t/>\n));\nsetDisplayName(MenubarSubContent, MenubarPrimitive.SubContent.displayName);\n\nconst MenubarContent = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.Content>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(({ className, align = 'start', alignOffset = -4, sideOffset = 8, ...props }, ref) => (\n\t<MenubarPrimitive.Portal>\n\t\t<MenubarPrimitive.Content\n\t\t\tref={ref}\n\t\t\talign={align}\n\t\t\talignOffset={alignOffset}\n\t\t\tsideOffset={sideOffset}\n\t\t\tclassName={cn(\n\t\t\t\t'z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\t{...props}\n\t\t/>\n\t</MenubarPrimitive.Portal>\n));\nsetDisplayName(MenubarContent, MenubarPrimitive.Content.displayName);\n\nconst MenubarItem = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.Item>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n\t\tinset?: boolean;\n\t}\n>(({ className, inset, ...props }, ref) => (\n\t<MenubarPrimitive.Item\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground',\n\t\t\tinset && 'pl-8',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t/>\n));\nsetDisplayName(MenubarItem, MenubarPrimitive.Item.displayName);\n\nconst MenubarCheckboxItem = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n\t<MenubarPrimitive.CheckboxItem\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground',\n\t\t\tclassName,\n\t\t)}\n\t\tchecked={checked}\n\t\t{...props}\n\t>\n\t\t<span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n\t\t\t<MenubarPrimitive.ItemIndicator>\n\t\t\t\t<CheckIcon className=\"h-4 w-4\" />\n\t\t\t</MenubarPrimitive.ItemIndicator>\n\t\t</span>\n\t\t{children}\n\t</MenubarPrimitive.CheckboxItem>\n));\nsetDisplayName(MenubarCheckboxItem, MenubarPrimitive.CheckboxItem.displayName);\n\nconst MenubarRadioItem = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.RadioItem>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n\t<MenubarPrimitive.RadioItem\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'relative flex cursor-default select-none items-center gap-2 rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t>\n\t\t<span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n\t\t\t<MenubarPrimitive.ItemIndicator>\n\t\t\t\t<Check className=\"h-4 w-4 text-brand-400\" />\n\t\t\t</MenubarPrimitive.ItemIndicator>\n\t\t</span>\n\t\t{children}\n\t</MenubarPrimitive.RadioItem>\n));\nsetDisplayName(MenubarRadioItem, MenubarPrimitive.RadioItem.displayName);\n\nconst MenubarLabel = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.Label>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n\t\tinset?: boolean;\n\t}\n>(({ className, inset, ...props }, ref) => (\n\t<MenubarPrimitive.Label\n\t\tref={ref}\n\t\tclassName={cn('px-2 py-1.5 text-sm font-semibold', inset && 'pl-8', className)}\n\t\t{...props}\n\t/>\n));\nsetDisplayName(MenubarLabel, MenubarPrimitive.Label.displayName);\n\nconst MenubarSeparator = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.Separator>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n\t<MenubarPrimitive.Separator ref={ref} className={cn('-mx-1 my-1 h-px bg-muted', className)} {...props} />\n));\nsetDisplayName(MenubarSeparator, MenubarPrimitive.Separator.displayName);\n\nconst MenubarShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {\n\treturn <span className={cn('ml-auto text-xs tracking-widest text-muted-foreground', className)} {...props} />;\n};\nMenubarShortcut.displayname = 'MenubarShortcut';\n\nexport {\n\tMenubar,\n\tMenubarIcon,\n\tMenubarContentIcon,\n\tMenubarMenu,\n\tMenubarTrigger,\n\tMenubarContent,\n\tMenubarItem,\n\tMenubarSeparator,\n\tMenubarLabel,\n\tMenubarCheckboxItem,\n\tMenubarRadioGroup,\n\tMenubarRadioItem,\n\tMenubarPortal,\n\tMenubarSubContent,\n\tMenubarSubTrigger,\n\tMenubarGroup,\n\tMenubarSub,\n\tMenubarShortcut,\n};\n","'use client';\nimport { Fragment } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { CheckIcon, XMarkIcon } from '@heroicons/react/24/outline';\nimport clsx from 'clsx';\n\ninterface ModalProps {\n\ttitle: string;\n\tchildren: React.ReactNode;\n\tisLoading: boolean;\n\tisFailed?: boolean;\n\tdismissText: string;\n\tsetOpen: (open: boolean) => void;\n\topen: boolean;\n}\n\nexport const MutationModal: React.FC<ModalProps> = (props) => {\n\tconst { open, setOpen } = props;\n\n\tconst icon = props.isFailed ? (\n\t\t<div className=\"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-800\">\n\t\t\t<XMarkIcon className=\"h-6 w-6 text-red-600 dark:text-red-300\" aria-hidden=\"true\" />\n\t\t</div>\n\t) : (\n\t\t<div className=\"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100 dark:bg-green-700\">\n\t\t\t<CheckIcon className=\"h-6 w-6 text-green-600 dark:text-green-100\" aria-hidden=\"true\" />\n\t\t</div>\n\t);\n\n\tconst buttonClass = clsx(\n\t\t'inline-flex w-full justify-center rounded-md border border-transparent px-4 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 focus:ring-offset-zinc-900 sm:text-sm',\n\t\tprops.isLoading\n\t\t\t? 'bg-brand-600 text-base font-medium text-white opacity-50 cursor-not-allowed'\n\t\t\t: 'bg-brand-600 text-base font-medium text-white hover:bg-brand-700',\n\t);\n\n\treturn (\n\t\t<Transition.Root show={open} as={Fragment} appear={true}>\n\t\t\t<Dialog as=\"div\" className=\"relative z-10\" onClose={setOpen}>\n\t\t\t\t<Transition.Child\n\t\t\t\t\tas={Fragment}\n\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"fixed inset-0 bg-zinc-500 bg-opacity-75 transition-opacity dark:bg-zinc-800 dark:bg-opacity-75\" />\n\t\t\t\t</Transition.Child>\n\n\t\t\t\t<div className=\"fixed inset-0 z-10 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-400 scrollbar-thumb-rounded-md dark:scrollbar-thumb-zinc-600\">\n\t\t\t\t\t<div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n\t\t\t\t\t\t<Transition.Child\n\t\t\t\t\t\t\tas={Fragment}\n\t\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\t\tenterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\t\tenterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\t\tleaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\t\tleaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Dialog.Panel className=\"dark relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all dark:bg-zinc-900 sm:my-8 sm:w-full sm:max-w-sm sm:p-6 md:max-w-lg lg:max-w-xl xl:max-w-3xl\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{props.isLoading ? (\n\t\t\t\t\t\t\t\t\t\t<div className=\"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800\">\n\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx('h-6 w-6 animate-spin text-zinc-800 dark:text-zinc-200')}\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"opacity-25\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcx=\"12\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcy=\"12\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tr=\"10\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\t\t\t\t></circle>\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"opacity-75\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n\t\t\t\t\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\ticon\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-5\">\n\t\t\t\t\t\t\t\t\t\t<Dialog.Title as=\"h3\" className=\"text-lg font-medium leading-6 text-zinc-900 dark:text-zinc-100\">\n\t\t\t\t\t\t\t\t\t\t\t{props.title}\n\t\t\t\t\t\t\t\t\t\t</Dialog.Title>\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm text-zinc-500 dark:text-zinc-400\">{props.children}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-5 sm:mt-6\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName={buttonClass}\n\t\t\t\t\t\t\t\t\t\tonClick={props.isLoading ? undefined : () => setOpen(false)}\n\t\t\t\t\t\t\t\t\t\tdisabled={props.isLoading}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{props.dismissText}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Dialog.Panel>\n\t\t\t\t\t\t</Transition.Child>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Dialog>\n\t\t</Transition.Root>\n\t);\n};\n","'use client';\nimport { useCallback, useState } from 'react';\nimport { trpc } from '@/helpers/trpc';\nimport { MutationModal } from '@/components/common/mutation-modal';\nimport { MenubarItem } from '@/components/ui/menubar';\nimport { Link2, Zap } from 'lucide-react';\n\nexport const HelpActions = ({ className }: { className?: string }) => {\n\tconst [isSymlinkModalOpen, setIsSymlinkModalOpen] = useState(false);\n\tconst [isFlashModalOpen, setIsFlashModalOpen] = useState(false);\n\tconst [flashModalContent, setFlashModalContent] = useState({\n\t\ttitle: '',\n\t\tchildren: null as React.ReactNode,\n\t\tdismissText: 'OK',\n\t});\n\tconst [symlinkModalContent, setSymlinkModalContent] = useState({\n\t\ttitle: '',\n\t\tchildren: null as React.ReactNode,\n\t\tdismissText: 'OK',\n\t});\n\n\tconst symlinkExtensions = trpc['klippy-extensions'].symlink.useMutation();\n\tconst flashFirmware = trpc.mcu.flashAllConnected.useMutation();\n\n\tconst symlinkModal = isSymlinkModalOpen ? (\n\t\t<MutationModal\n\t\t\t{...symlinkModalContent}\n\t\t\tsetOpen={setIsSymlinkModalOpen}\n\t\t\topen={isSymlinkModalOpen}\n\t\t\tisFailed={symlinkExtensions.isError}\n\t\t\tisLoading={symlinkExtensions.isLoading}\n\t\t/>\n\t) : null;\n\tconst flashModal = isFlashModalOpen ? (\n\t\t<MutationModal\n\t\t\t{...flashModalContent}\n\t\t\tsetOpen={setIsFlashModalOpen}\n\t\t\topen={isFlashModalOpen}\n\t\t\tisFailed={flashFirmware.isError}\n\t\t\tisLoading={flashFirmware.isLoading}\n\t\t/>\n\t) : null;\n\n\tconst onClickFlash = useCallback(() => {\n\t\tsetFlashModalContent({\n\t\t\ttitle: 'Flash Firmware',\n\t\t\tchildren: <p>Please wait while RatOS is flashing your connected boards...</p>,\n\t\t\tdismissText: 'Please wait...',\n\t\t});\n\t\tsetIsFlashModalOpen(true);\n\t\tflashFirmware.mutateAsync().then(\n\t\t\t(value) => {\n\t\t\t\tsetFlashModalContent({\n\t\t\t\t\ttitle: 'Flashing Complete',\n\t\t\t\t\tchildren: <p dangerouslySetInnerHTML={{ __html: value.report.replace(/\\n/g, '<br />') }} />,\n\t\t\t\t\tdismissText: 'OK',\n\t\t\t\t});\n\t\t\t},\n\t\t\t(value) => {\n\t\t\t\tsetFlashModalContent({\n\t\t\t\t\ttitle: 'Flashing Failed',\n\t\t\t\t\tchildren:\n\t\t\t\t\t\ttypeof value === 'string' || value instanceof String ? (\n\t\t\t\t\t\t\t<p dangerouslySetInnerHTML={{ __html: value.replace(/\\n/g, '<br />') }} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<p>Something wen't wrong while flashing the connected boards, please try again.</p>\n\t\t\t\t\t\t),\n\t\t\t\t\tdismissText: 'OK',\n\t\t\t\t});\n\t\t\t},\n\t\t);\n\t}, [flashFirmware]);\n\n\tconst onClickSymlink = useCallback(() => {\n\t\tsetSymlinkModalContent({\n\t\t\ttitle: 'Symlink Extensions',\n\t\t\tchildren: <p>Please wait while RatOS is symlinking klippy extensions...</p>,\n\t\t\tdismissText: 'Please wait...',\n\t\t});\n\t\tsetIsSymlinkModalOpen(true);\n\t\tsymlinkExtensions.mutateAsync({}).then(\n\t\t\t(value) => {\n\t\t\t\tsetSymlinkModalContent({\n\t\t\t\t\ttitle: 'Symlink Complete',\n\t\t\t\t\tchildren: <p dangerouslySetInnerHTML={{ __html: value.report.replace(/\\n/g, '<br />') }} />,\n\t\t\t\t\tdismissText: 'OK',\n\t\t\t\t});\n\t\t\t},\n\t\t\t(value) => {\n\t\t\t\tsetSymlinkModalContent({\n\t\t\t\t\ttitle: 'Symlink Failed',\n\t\t\t\t\tchildren:\n\t\t\t\t\t\ttypeof value === 'string' || value instanceof String ? (\n\t\t\t\t\t\t\t<p dangerouslySetInnerHTML={{ __html: value.replace(/\\n/g, '<br />') }} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<p>Something wen't wrong while symlinking the extensions, please try again.</p>\n\t\t\t\t\t\t),\n\t\t\t\t\tdismissText: 'OK',\n\t\t\t\t});\n\t\t\t},\n\t\t);\n\t}, [symlinkExtensions]);\n\n\treturn (\n\t\t<>\n\t\t\t<MenubarItem onClick={onClickSymlink} className=\"gap-2\">\n\t\t\t\t<Link2 className=\"h-4 w-4 text-zinc-400\" /> Symlink Extensions\n\t\t\t</MenubarItem>\n\t\t\t<MenubarItem onClick={onClickFlash} className=\"gap-2\">\n\t\t\t\t<Zap className=\"h-4 w-4 text-zinc-400\" /> Flash Connected Boards\n\t\t\t</MenubarItem>\n\t\t\t{symlinkModal}\n\t\t\t{flashModal}\n\t\t</>\n\t);\n};\n","import { XMarkIcon, Bars3Icon, BookOpenIcon } from '@heroicons/react/24/outline';\nimport { motion } from 'framer-motion';\nimport React, { createContext, useCallback, useContext, useEffect, useState } from 'react';\nimport { twJoin } from 'tailwind-merge';\nimport Image from 'next/image';\nimport logoWhite from '@/public/logo-white.svg';\nimport { Signal, useNewSignal, useSignal } from '@/app/_helpers/signal';\nimport * as Menu from '@/components/ui/menubar';\nimport Link from 'next/link';\nimport { CircleHelp, ExternalLink } from 'lucide-react';\nimport { HelpActions } from '@/components/common/help-actions';\n\ntype MenuId = Nominal<string, 'MenuId'>;\ntype MenuEntryRenderer = (menu: typeof Menu) => React.ReactNode;\ntype RegisterMenu = (id: MenuId, renderFn: MenuEntryRenderer) => void;\ntype UnregisterMenu = (id: MenuId) => void;\ntype MenusChangedSignal = Signal<void>;\ntype MenuOptions = {\n\tid: MenuId;\n\trender: MenuEntryRenderer;\n};\ntype MenusMap = Map<MenuId, MenuOptions>;\ntype MenuBarContextValue = { registerMenu: RegisterMenu; unregisterMenu: UnregisterMenu; changed: MenusChangedSignal };\ntype TopMenuProps = {\n\tsidebarOpen: boolean;\n\tsetSidebarOpen: React.Dispatch<React.SetStateAction<boolean>>;\n\tmenus: React.MutableRefObject<MenusMap>;\n\tmenusChanged: MenusChangedSignal;\n};\n\nconst MenuBarContext = createContext<MenuBarContextValue>({\n\tregisterMenu: () => {\n\t\tthrow new Error('No menu registered in context');\n\t},\n\tunregisterMenu: () => {\n\t\tthrow new Error('No menu registered in context');\n\t},\n\tchanged: () => {\n\t\treturn () => {};\n\t},\n});\n\nexport const useMenuBarProvider = () => {\n\tconst menus = React.useRef<MenusMap>(new Map());\n\tconst menusChanged = useNewSignal() satisfies MenusChangedSignal;\n\tconst registerMenu = useCallback(\n\t\t(id: MenuId, renderFn: MenuEntryRenderer) => {\n\t\t\tif (menus.current.has(id) && renderFn === menus.current.get(id)?.render) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tmenus.current = new Map(menus.current).set(id, { render: renderFn, id: id });\n\t\t\tmenusChanged();\n\t\t},\n\t\t[menusChanged],\n\t);\n\n\tconst unregisterMenu = useCallback(\n\t\t(id: MenuId) => {\n\t\t\tmenus.current.delete(id);\n\t\t\tmenusChanged();\n\t\t},\n\t\t[menusChanged],\n\t);\n\n\treturn {\n\t\ttopMenuProps: { menus, menusChanged },\n\t\tproviderProps: { registerMenu, unregisterMenu, changed: menusChanged } satisfies MenuBarContextValue,\n\t};\n};\n\nexport const MenuBarProvider: React.FC<React.PropsWithChildren<MenuBarContextValue>> = (props) => {\n\treturn <MenuBarContext.Provider value={props}>{props.children}</MenuBarContext.Provider>;\n};\n\nexport const useTopMenu = (id: string, renderReactCallback: ReactCallback<MenuEntryRenderer>) => {\n\tconst { registerMenu, unregisterMenu } = useContext(MenuBarContext);\n\tuseEffect(() => {\n\t\tregisterMenu(id as MenuId, renderReactCallback);\n\t\treturn () => unregisterMenu(id as MenuId);\n\t}, [id, registerMenu, renderReactCallback, unregisterMenu]);\n};\n\nexport const TopMenu: React.FC<TopMenuProps> = ({ sidebarOpen, setSidebarOpen, menus, menusChanged }) => {\n\tconst [, setMenu] = useState(Array.from(menus.current.values()));\n\tuseSignal(\n\t\tmenusChanged,\n\t\tuseCallback(() => {\n\t\t\tsetMenu(Array.from(menus.current.values()));\n\t\t}, [menus]),\n\t);\n\treturn (\n\t\t<motion.div\n\t\t\tclassName={twJoin(\n\t\t\t\t'fixed inset-0 z-50 flex h-14 items-center justify-between gap-12 transition lg:left-72 lg:z-30',\n\t\t\t\t'border-b border-zinc-900/10 backdrop-blur-sm dark:border-white/10 dark:backdrop-blur lg:left-72',\n\t\t\t\t!sidebarOpen && 'backdrop-blur-sm dark:backdrop-blur lg:left-72',\n\t\t\t\tsidebarOpen ? 'bg-background' : 'bg-background/80 dark:bg-background/50',\n\t\t\t)}\n\t\t>\n\t\t\t<div className=\"mx-auto flex-1\">\n\t\t\t\t<div className=\"flex h-16 items-center px-4 lg:justify-between\">\n\t\t\t\t\t<div className=\"flex flex-1 items-center justify-between space-x-4 lg:hidden\">\n\t\t\t\t\t\t<div className=\"flex h-16 shrink-0 items-center\">\n\t\t\t\t\t\t\t<Image width={160} height={40} className=\"h-8 w-auto\" src={logoWhite} alt=\"Workflow\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Menu.Menubar className=\"lg:flex-1\">\n\t\t\t\t\t\t{menus.current.size > 0 &&\n\t\t\t\t\t\t\tArray.from(menus.current.values()).map(({ id, render }) => (\n\t\t\t\t\t\t\t\t<React.Fragment key={id}>{render(Menu)}</React.Fragment>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t<Menu.MenubarSeparator className=\"flex-1 bg-transparent\" />\n\t\t\t\t\t\t<Menu.MenubarMenu>\n\t\t\t\t\t\t\t<Menu.MenubarTrigger className=\"flex-nowrap whitespace-nowrap text-nowrap\">\n\t\t\t\t\t\t\t\t<Menu.MenubarIcon Icon={CircleHelp} /> <span className=\"hidden lg:inline\">Help</span>\n\t\t\t\t\t\t\t</Menu.MenubarTrigger>\n\t\t\t\t\t\t\t<Menu.MenubarContent onCloseAutoFocus={(e) => e.preventDefault()}>\n\t\t\t\t\t\t\t\t<HelpActions />\n\t\t\t\t\t\t\t\t<Menu.MenubarSeparator />\n\t\t\t\t\t\t\t\t<Menu.MenubarItem asChild={true} className=\"gap-2\">\n\t\t\t\t\t\t\t\t\t<Link href=\"https://os.ratrig.com/docs/introduction\" target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\t\t\t\t\t\t<Menu.MenubarContentIcon Icon={ExternalLink} /> Docs\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Menu.MenubarItem>\n\t\t\t\t\t\t\t\t<Menu.MenubarItem asChild={true} className=\"gap-2\">\n\t\t\t\t\t\t\t\t\t<Link href=\"https://github.com/sponsors/miklschmidt\" target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\t\t\t\t\t\t<Menu.MenubarContentIcon Icon={ExternalLink} /> Donate\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Menu.MenubarItem>\n\t\t\t\t\t\t\t</Menu.MenubarContent>\n\t\t\t\t\t\t</Menu.MenubarMenu>\n\n\t\t\t\t\t\t<Menu.MenubarMenu>\n\t\t\t\t\t\t\t<Menu.MenubarTrigger\n\t\t\t\t\t\t\t\tonClick={() => setSidebarOpen((old) => !old)}\n\t\t\t\t\t\t\t\tclassName=\"flex-nowrap whitespace-nowrap text-nowrap lg:hidden\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span className=\"sr-only\">Open main menu</span>\n\t\t\t\t\t\t\t\t{sidebarOpen ? (\n\t\t\t\t\t\t\t\t\t<XMarkIcon className={twJoin('block', '-m-0.5 h-5 w-5')} aria-hidden=\"true\" />\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Bars3Icon className={twJoin('block', '-m-0.5 h-5 w-5')} aria-hidden=\"true\" />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Menu.MenubarTrigger>\n\t\t\t\t\t\t</Menu.MenubarMenu>\n\t\t\t\t\t</Menu.Menubar>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</motion.div>\n\t);\n};\n","import { useDebounce } from '@/app/_hooks/debounce';\nimport useResizeObserver from '@react-hook/resize-observer';\nimport { motion } from 'framer-motion';\nimport { useState, useRef, PropsWithChildren, useCallback, useLayoutEffect, useEffect } from 'react';\nimport { twJoin, twMerge } from 'tailwind-merge';\n\nexport const AnimatedContainer = (props: PropsWithChildren<{ containerClassName?: string; className?: string }>) => {\n\tconst [height, setHeight] = useState(0);\n\tconst heightRef = useRef(height);\n\theightRef.current = height;\n\tconst [isOverflowVisible, setIsOverflowVisible] = useState(false);\n\tconst isOverflowVisibleRef = useRef(isOverflowVisible);\n\tisOverflowVisibleRef.current = isOverflowVisible;\n\tconst containerRef = useRef<HTMLDivElement>(null);\n\n\tuseResizeObserver(containerRef, (entry) => {\n\t\tif (entry.contentRect.height === heightRef.current) {\n\t\t\treturn;\n\t\t}\n\t\tsetHeight(entry.contentRect.height);\n\t});\n\n\tconst onComplete = useDebounce(\n\t\tuseCallback(() => {\n\t\t\tsetIsOverflowVisible(true);\n\t\t}, []),\n\t\t200,\n\t\ttrue,\n\t);\n\tconst onStart = useDebounce(\n\t\tuseCallback(() => {\n\t\t\tsetIsOverflowVisible(false);\n\t\t}, []),\n\t\t200,\n\t\ttrue,\n\t);\n\n\treturn (\n\t\t<motion.div\n\t\t\tclassName={twMerge(isOverflowVisible ? 'overflow-visible' : 'overflow-hidden', props.containerClassName)}\n\t\t\tstyle={{ height }}\n\t\t\tonAnimationComplete={onComplete}\n\t\t\tonAnimationStart={onStart}\n\t\t\tanimate={{ height }}\n\t\t>\n\t\t\t<div ref={containerRef} className={props.className}>\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t</motion.div>\n\t);\n};\n","'use client';\nimport Link, { LinkProps } from 'next/link';\nimport { twJoin, twMerge } from 'tailwind-merge';\nimport React, { Fragment, forwardRef } from 'react';\nimport { VariantProps, cva } from 'class-variance-authority';\nimport { Menu, Transition } from '@headlessui/react';\nimport { ChevronDownIcon } from '@heroicons/react/20/solid';\nimport { Route } from 'next';\n\nexport const buttonVariants = cva(\n\t'inline-flex items-center justify-center border font-semibold rounded-md shadow-sm focus:outline-none focus:ring-2 capitalize relative active:translate-y-px active:scale-[99%] active:outline-none transition-all',\n\t{\n\t\tvariants: {\n\t\t\tvariant: {\n\t\t\t\tdanger: twJoin(\n\t\t\t\t\t'text-red-50 bg-red-500/70 hover:bg-red-600 border-transparent focus:ring-offset-2 focus:ring-red-400 dark:focus:ring-offset-zinc-900',\n\n\t\t\t\t\t'shadow-[0px_0px_0px_1px_rgba(9,9,11,0.07),0px_2px_2px_0px_rgba(9,9,11,0.05)] dark:shadow-[0px_0px_0px_1px_rgba(255,255,255,0.05)]',\n\t\t\t\t\t'dark:before:-inset-px dark:before:rounded-lg',\n\t\t\t\t\t'dark:before:pointer-events-none dark:before:absolute dark:before:shadow-[0px_2px_8px_0px_hsl(var(--red-900)),_0px_1px_0px_0px_hsl(var(--red-400)_/_50%)_inset]',\n\t\t\t\t),\n\t\t\t\twarning: twJoin(\n\t\t\t\t\t'text-yellow-50 bg-yellow-400/70 hover:bg-yellow-600 border-transparent focus:ring-offset-2 focus:ring-yellow-400 dark:focus:ring-offset-zinc-900',\n\t\t\t\t\t'shadow-[0px_0px_0px_1px_rgba(9,9,11,0.07),0px_2px_2px_0px_rgba(9,9,11,0.05)] dark:shadow-[0px_0px_0px_1px_rgba(255,255,255,0.05)]',\n\t\t\t\t\t'dark:before:-inset-px dark:before:rounded-lg',\n\t\t\t\t\t'dark:before:pointer-events-none dark:before:absolute dark:before:shadow-[0px_2px_8px_0px_hsl(var(--yellow-900)),_0px_1px_0px_0px_hsl(var(--yellow-400)_/_50%)_inset]',\n\t\t\t\t),\n\t\t\t\tinfo: twJoin(\n\t\t\t\t\t'text-blue-50 bg-sky-400/70 hover:bg-sky-600 border-transparent focus:ring-offset-2 focus:ring-sky-400 dark:focus:ring-offset-zinc-900',\n\t\t\t\t\t'shadow-[0px_0px_0px_1px_rgba(9,9,11,0.07),0px_2px_2px_0px_rgba(9,9,11,0.05)] dark:shadow-[0px_0px_0px_1px_rgba(255,255,255,0.05)]',\n\t\t\t\t\t'dark:before:-inset-px dark:before:rounded-lg',\n\t\t\t\t\t'dark:before:pointer-events-none dark:before:absolute dark:before:shadow-[0px_2px_8px_0px_hsl(var(--sky-900)),_0px_1px_0px_0px_hsl(var(--sky-400)_/_50%)_inset]',\n\t\t\t\t),\n\t\t\t\tprimary: twJoin(\n\t\t\t\t\t'text-white bg-brand-400/50 hover:bg-brand-700 border-transparent focus:ring-offset-2 focus:ring-brand-400 dark:focus:ring-offset-zinc-900',\n\t\t\t\t\t'shadow-[0px_0px_0px_1px_rgba(9,9,11,0.07),0px_2px_2px_0px_rgba(9,9,11,0.05)] dark:shadow-[0px_0px_0px_1px_rgba(255,255,255,0.05)]',\n\t\t\t\t\t'dark:before:-inset-px dark:before:rounded-lg',\n\t\t\t\t\t'dark:before:pointer-events-none dark:before:absolute dark:before:shadow-[0px_2px_8px_0px_hsl(var(--brand-900)),_0px_1px_0px_0px_hsl(var(--brand-400)_/_50%)_inset]',\n\t\t\t\t),\n\t\t\t\tsuccess:\n\t\t\t\t\t'text-green-100 bg-green-500 hover:bg-green-600 border-transparent focus:ring-offset-2 focus:ring-brand-400 dark:focus:ring-offset-zinc-900',\n\t\t\t\tindeterminate: twJoin(\n\t\t\t\t\t'border-transparent bg-zinc-100 hover:bg-zinc-200 text-black dark:text-zinc-300 dark:bg-zinc-800 dark:transparent dark:hover:bg-zinc-700 dark:hover:text-zinc-100 dark:hover:transparent focus:ring-offset-2 focus:ring-brand-400 dark:focus:ring-offset-zinc-900',\n\t\t\t\t\t'shadow-[0px_0px_0px_1px_rgba(9,9,11,0.07),0px_2px_2px_0px_rgba(9,9,11,0.05)] dark:shadow-[0px_0px_0px_1px_rgba(255,255,255,0.05)]',\n\t\t\t\t\t'dark:before:-inset-px dark:before:rounded-lg',\n\t\t\t\t\t'dark:before:pointer-events-none dark:before:absolute dark:before:shadow-[0px_2px_8px_0px_hsl(var(--zinc-900)),_0px_1px_0px_0px_hsl(var(--zinc-400)_/_20%)_inset]',\n\t\t\t\t),\n\t\t\t\toutline:\n\t\t\t\t\t'border-zinc-700 shadow-none bg-transparent text-zinc-700 dark:text-zinc-300 hover:bg-zinc-500/30 hover:border-zinc-500/50 hover:text-zinc-800 dark:hover:text-zinc-200 focus:ring-offset-2 focus:ring-brand-400 dark:focus:ring-offset-zinc-900',\n\t\t\t\tplain:\n\t\t\t\t\t'border-transparent shadow-none bg-transparent text-zinc-700 dark:text-zinc-300 hover:underline hover:text-zinc-800 dark:hover:text-zinc-200 focus:ring-offset-2 focus:ring-brand-400 dark:focus:ring-offset-zinc-900',\n\t\t\t},\n\t\t\tdisabled: {\n\t\t\t\ttrue: 'opacity-60 cursor-not-allowed',\n\t\t\t},\n\t\t\tsize: {\n\t\t\t\tsm: 'px-2 py-1 text-xs gap-2',\n\t\t\t\tlg: 'px-6 py-3 text-lg gap-4',\n\t\t\t\tdefault: 'px-3 py-2 text-sm gap-2',\n\t\t\t\ticon: 'h-9 w-9',\n\t\t\t\t'icon-sm': 'h-6 w-6',\n\t\t\t\t'icon-xs': 'h-4 w-4',\n\t\t\t},\n\t\t},\n\t\tcompoundVariants: [\n\t\t\t{\n\t\t\t\tvariant: 'primary',\n\t\t\t\tdisabled: true,\n\t\t\t\tclass: 'hover:bg-brand-400/50',\n\t\t\t},\n\t\t\t{\n\t\t\t\tvariant: 'danger',\n\t\t\t\tdisabled: true,\n\t\t\t\tclass: 'hover:bg-red-500/70',\n\t\t\t},\n\t\t\t{\n\t\t\t\tvariant: 'warning',\n\t\t\t\tdisabled: true,\n\t\t\t\tclass: 'hover:bg-yellow-500',\n\t\t\t},\n\t\t\t{\n\t\t\t\tvariant: 'indeterminate',\n\t\t\t\tdisabled: true,\n\t\t\t\tclass: 'hover:bg-zinc-100 dark:hover:bg-zinc-800',\n\t\t\t},\n\t\t\t{\n\t\t\t\tvariant: 'info',\n\t\t\t\tdisabled: true,\n\t\t\t\tclass: 'hover:bg-sky-400/70',\n\t\t\t},\n\t\t],\n\t\tdefaultVariants: {\n\t\t\tvariant: 'primary',\n\t\t\tsize: 'default',\n\t\t\tdisabled: false,\n\t\t},\n\t},\n);\n\nexport type ButtonVariantProps = VariantProps<typeof buttonVariants>;\nexport type Intents = NonNullable<Required<ButtonVariantProps>['variant']>;\n\nexport interface ButtonProps<T extends string>\n\textends React.PropsWithChildren<ButtonVariantProps & React.ButtonHTMLAttributes<HTMLButtonElement>> {\n\tonClick?: () => void;\n\tclassName?: string;\n\ttarget?: string;\n\tasChild?: boolean;\n\thref?: Route<T> | URL;\n\ttitle?: string;\n\trel?: string;\n\tdropdownItems?: {\n\t\tonClick: () => void;\n\t\ttitle: string;\n\t}[];\n}\n\nexport const Button = forwardRef(function Button<T extends string>(\n\tprops: ButtonProps<T>,\n\tref: React.ForwardedRef<HTMLButtonElement & HTMLAnchorElement>,\n) {\n\tconst {\n\t\tvariant,\n\t\tdisabled,\n\t\tsize,\n\t\thref,\n\t\ttarget,\n\t\tonClick,\n\t\ttitle,\n\t\trel,\n\t\tdropdownItems,\n\t\tclassName,\n\t\tchildren,\n\t\t...forwardProps\n\t} = props;\n\tconst buttonClasses = twMerge(buttonVariants({ variant: variant, disabled: disabled, size: size }), className);\n\tif (href) {\n\t\treturn (\n\t\t\t<Link<T>\n\t\t\t\thref={href}\n\t\t\t\tref={ref}\n\t\t\t\tclassName={buttonClasses}\n\t\t\t\ttarget={target}\n\t\t\t\tonClick={onClick}\n\t\t\t\ttitle={title}\n\t\t\t\trel={rel}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</Link>\n\t\t);\n\t}\n\tif (dropdownItems && dropdownItems.length && onClick == null) {\n\t\treturn (\n\t\t\t<Menu as=\"span\" className=\"relative inline-block text-left\">\n\t\t\t\t<Menu.Button className={buttonClasses} title={title} disabled={!!disabled}>\n\t\t\t\t\t{children}\n\t\t\t\t\t<ChevronDownIcon className=\"-mr-2 h-5 w-5\" aria-hidden=\"true\" />\n\t\t\t\t</Menu.Button>\n\n\t\t\t\t<Transition\n\t\t\t\t\tas={Fragment}\n\t\t\t\t\tenter=\"transition ease-out duration-100\"\n\t\t\t\t\tenterFrom=\"transform opacity-0 scale-95\"\n\t\t\t\t\tenterTo=\"transform opacity-100 scale-100\"\n\t\t\t\t\tleave=\"transition ease-in duration-75\"\n\t\t\t\t\tleaveFrom=\"transform opacity-100 scale-100\"\n\t\t\t\t\tleaveTo=\"transform opacity-0 scale-95\"\n\t\t\t\t>\n\t\t\t\t\t<Menu.Items className=\"absolute right-0 z-10 mt-2 w-56 origin-top-right divide-y divide-zinc-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none dark:divide-zinc-800 dark:bg-zinc-900 dark:shadow-black dark:ring-zinc-800\">\n\t\t\t\t\t\t{dropdownItems.map((item) => (\n\t\t\t\t\t\t\t<div className=\"py-1\" key={item.title}>\n\t\t\t\t\t\t\t\t<Menu.Item>\n\t\t\t\t\t\t\t\t\t{({ active }) => (\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tonClick={item.onClick}\n\t\t\t\t\t\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t\t\t\t\t\tactive\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'text-zinc-700 dark:text-zinc-300',\n\t\t\t\t\t\t\t\t\t\t\t\t'block cursor-pointer break-words px-4 py-2 text-sm',\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{item.title}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Menu.Items>\n\t\t\t\t</Transition>\n\t\t\t</Menu>\n\t\t);\n\t}\n\treturn (\n\t\t<button\n\t\t\tref={ref}\n\t\t\tclassName={buttonClasses}\n\t\t\tonClick={disabled ? undefined : onClick}\n\t\t\ttitle={title}\n\t\t\t{...forwardProps}\n\t\t>\n\t\t\t{children}\n\t\t</button>\n\t);\n});\n","'use client';\nimport { cva } from 'class-variance-authority';\nimport React from 'react';\nimport { type MotionProps, motion } from 'framer-motion';\n\nconst cardVariants = cva([\n\t'relative rounded-lg  bg-white dark:bg-zinc-900/60',\n\t'shadow-[0px_0px_0px_1px_rgba(9,9,11,0.07),0px_2px_2px_0px_rgba(9,9,11,0.05)] dark:shadow-[0px_0px_0px_1px_rgba(255,255,255,0.05)]',\n\t'dark:before:-inset-px dark:before:rounded-xl',\n\t'dark:before:pointer-events-none dark:before:absolute dark:before:shadow-[0px_2px_8px_0px_rgba(0,_0,_0,_0.20),_0px_1px_0px_0px_rgba(255,_255,_255,_0.07)_inset]',\n]);\n\ntype CardProps = React.PropsWithChildren<\n\t{\n\t\tclassName?: string;\n\t} & MotionProps\n>;\n\nexport const Card: React.FC<CardProps> = (props) => {\n\treturn (\n\t\t<motion.div {...props} className={cardVariants({ className: props.className })}>\n\t\t\t{props.children}\n\t\t</motion.div>\n\t);\n};\n","import { twMerge } from 'tailwind-merge';\n\nexport const scrollClasses =\n\t'scroll-smooth scrollbar-thin scrollbar-track-zinc-800/15 scrollbar-thumb-zinc-400 scrollbar-thumb-rounded-md dark:scrollbar-thumb-zinc-600';\nexport const ScrollContainer = (props: JSX.IntrinsicElements['div']) => {\n\treturn <div {...props} className={twMerge(scrollClasses, props.className)} />;\n};\n","import { twMerge } from 'tailwind-merge';\n\nexport const Spinner: React.FC<{ className?: string; noMargin?: boolean; strokeWidth?: number }> = (props) => {\n\treturn (\n\t\t<svg\n\t\t\tclassName={twMerge(\n\t\t\t\t'h-5 w-5 animate-spin text-black/50 dark:text-white/50',\n\t\t\t\t!props.noMargin ? '-ml-1 mr-3' : '',\n\t\t\t\tprops.className,\n\t\t\t)}\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tfill=\"none\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t>\n\t\t\t<circle\n\t\t\t\tclassName=\"opacity-20\"\n\t\t\t\tcx=\"12\"\n\t\t\t\tcy=\"12\"\n\t\t\t\tr=\"10\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth={props.strokeWidth ?? 4}\n\t\t\t></circle>\n\t\t\t<circle\n\t\t\t\tclassName=\"opacity-100\"\n\t\t\t\tcx=\"12\"\n\t\t\t\tcy=\"12\"\n\t\t\t\tr=\"10\"\n\t\t\t\tstrokeDasharray={(Math.PI * 10) / 3}\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth={props.strokeWidth ?? 4}\n\t\t\t></circle>\n\t\t</svg>\n\t);\n};\n","import * as React from 'react';\nimport * as LabelPrimitive from '@radix-ui/react-label';\nimport { Slot } from '@radix-ui/react-slot';\nimport { Controller, ControllerProps, FieldPath, FieldValues, FormProvider, useFormContext } from 'react-hook-form';\n\nimport { cn, setDisplayName } from '@/helpers/utils';\nimport { Label } from '@/components/ui/label';\nimport { AnimatePresence, HTMLMotionProps, motion } from 'framer-motion';\n\nconst Form = FormProvider;\n\ntype FormFieldContextValue<\n\tTFieldValues extends FieldValues = FieldValues,\n\tTName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n\tname: TName;\n};\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>({} as FormFieldContextValue);\n\nconst FormField = <\n\tTFieldValues extends FieldValues = FieldValues,\n\tTName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>({\n\t...props\n}: ControllerProps<TFieldValues, TName>) => {\n\treturn (\n\t\t<FormFieldContext.Provider value={{ name: props.name }}>\n\t\t\t<Controller {...props} />\n\t\t</FormFieldContext.Provider>\n\t);\n};\n\nconst useFormField = () => {\n\tconst fieldContext = React.useContext(FormFieldContext);\n\tconst itemContext = React.useContext(FormItemContext);\n\tconst { getFieldState, formState } = useFormContext();\n\n\tconst fieldState = getFieldState(fieldContext.name, formState);\n\n\tif (!fieldContext) {\n\t\tthrow new Error('useFormField should be used within <FormField>');\n\t}\n\n\tconst { id } = itemContext;\n\n\treturn {\n\t\tid,\n\t\tname: fieldContext.name,\n\t\tformItemId: `${id}-form-item`,\n\t\tformDescriptionId: `${id}-form-item-description`,\n\t\tformMessageId: `${id}-form-item-message`,\n\t\t...fieldState,\n\t};\n};\n\ntype FormItemContextValue = {\n\tid: string;\n};\n\nconst FormItemContext = React.createContext<FormItemContextValue>({} as FormItemContextValue);\n\nconst FormItem = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n\t({ className, ...props }, ref) => {\n\t\tconst id = React.useId();\n\n\t\treturn (\n\t\t\t<FormItemContext.Provider value={{ id }}>\n\t\t\t\t<div ref={ref} className={cn('space-y-2', className)} {...props} />\n\t\t\t</FormItemContext.Provider>\n\t\t);\n\t},\n);\nsetDisplayName(FormItem, 'FormItem');\n\nconst FormLabel = React.forwardRef<\n\tReact.ElementRef<typeof LabelPrimitive.Root>,\n\tReact.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n\tconst { error, formItemId } = useFormField();\n\n\treturn <Label ref={ref} className={cn(error && 'text-destructive', className)} htmlFor={formItemId} {...props} />;\n});\nsetDisplayName(FormLabel, 'FormLabel');\n\nconst FormControl = React.forwardRef<React.ElementRef<typeof Slot>, React.ComponentPropsWithoutRef<typeof Slot>>(\n\t({ ...props }, ref) => {\n\t\tconst { error, formItemId, formDescriptionId, formMessageId } = useFormField();\n\n\t\treturn (\n\t\t\t<Slot\n\t\t\t\tref={ref}\n\t\t\t\tid={formItemId}\n\t\t\t\taria-describedby={!error ? `${formDescriptionId}` : `${formDescriptionId} ${formMessageId}`}\n\t\t\t\taria-invalid={!!error}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t);\n\t},\n);\nsetDisplayName(FormControl, 'FormControl');\n\nconst FormDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n\t({ className, ...props }, ref) => {\n\t\tconst { formDescriptionId } = useFormField();\n\n\t\treturn (\n\t\t\t<p\n\t\t\t\tref={ref}\n\t\t\t\tid={formDescriptionId}\n\t\t\t\tclassName={cn('text-[0.8rem] font-medium text-muted-foreground', className)}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t);\n\t},\n);\nsetDisplayName(FormDescription, 'FormDescription');\n\nconst FormMessage = React.forwardRef<HTMLParagraphElement, HTMLMotionProps<'p'>>(\n\t({ className, children, ...props }, ref) => {\n\t\tconst { error, formMessageId } = useFormField();\n\t\tconst body = error ? String(error?.message) : children;\n\n\t\tif (!body) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<AnimatePresence>\n\t\t\t\t<motion.p\n\t\t\t\t\texit={{\n\t\t\t\t\t\topacity: 0,\n\t\t\t\t\t\tscale: 1,\n\t\t\t\t\t\ty: -10,\n\t\t\t\t\t\ttransition: { duration: 0.2 },\n\t\t\t\t\t}}\n\t\t\t\t\tinitial={{ opacity: 0, scale: 1, y: -10 }}\n\t\t\t\t\tanimate={{\n\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\tscale: 1,\n\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\ttransition: { delay: 0.2, staggerChildren: 0.2 },\n\t\t\t\t\t}}\n\t\t\t\t\tref={ref}\n\t\t\t\t\tid={formMessageId}\n\t\t\t\t\t{...props}\n\t\t\t\t\tclassName={cn('text-[0.8rem] font-medium text-destructive', className)}\n\t\t\t\t>\n\t\t\t\t\t{body}\n\t\t\t\t</motion.p>\n\t\t\t</AnimatePresence>\n\t\t);\n\t},\n);\nsetDisplayName(FormMessage, 'FormMessage');\n\nexport { useFormField, Form, FormItem, FormLabel, FormControl, FormDescription, FormMessage, FormField };\n","import * as React from 'react';\n\nimport { cn, setDisplayName } from '@/helpers/utils';\nimport { VariantProps, cva } from 'class-variance-authority';\nimport { twJoin } from 'tailwind-merge';\n\nconst InputVariants = cva(\n\ttwJoin(\n\t\t'flex w-full rounded-md border bg-transparent px-3 py-1.5 text-sm shadow-sm transition-colors',\n\t\t'file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground',\n\t\t'border-zinc-300 text-zinc-900 placeholder-zinc-300 ring-brand-600 dark:border-zinc-100/20 dark:text-zinc-100 dark:placeholder-zinc-100/30 dark:focus:ring-brand-400 ',\n\t\t'focus:ring-offset-zinc-900 block w-full rounded-md border text-left shadow-sm ring-inset ring-offset-zinc-900 transition-all focus:outline-none focus:ring-2 focus:ring-offset-2',\n\t\t'active:translate-y-px active:scale-[99%] active:outline-none active:ring-2 active:ring-offset-2',\n\t\t'disabled:cursor-not-allowed disabled:opacity-50',\n\t),\n\t{\n\t\tvariants: {\n\t\t\tvariant: {\n\t\t\t\tplain: 'shadow-none bg-transparent text-zinc-700 dark:text-zinc-300 dark:bg-transparent',\n\t\t\t\tdefault: 'dark:bg-zinc-800 bg-white',\n\t\t\t\terror:\n\t\t\t\t\t'border-red-300 text-red-900 placeholder-red-300 ring-red-500 dark:ring-red-500 dark:text-red-400 dark:placeholder-red-700',\n\t\t\t},\n\t\t},\n\t\tdefaultVariants: {\n\t\t\tvariant: 'plain',\n\t\t},\n\t},\n);\n\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement>, VariantProps<typeof InputVariants> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(({ className, type, ...props }, ref) => {\n\treturn <input type={type} className={cn(InputVariants(props), className)} ref={ref} {...props} />;\n});\nsetDisplayName(Input, 'Input');\n\nexport { Input };\n","'use client';\n\nimport * as React from 'react';\nimport * as LabelPrimitive from '@radix-ui/react-label';\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nimport { cn, setDisplayName } from '@/helpers/utils';\n\nconst labelVariants = cva('text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70');\n\nconst Label = React.forwardRef<\n\tReact.ElementRef<typeof LabelPrimitive.Root>,\n\tReact.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> & VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n\t<LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />\n));\nsetDisplayName(Label, LabelPrimitive.Root.displayName);\n\nexport { Label };\n","'use client';\n\nimport * as React from 'react';\nimport { CaretSortIcon, CheckIcon, ChevronDownIcon, ChevronUpIcon } from '@radix-ui/react-icons';\nimport * as SelectPrimitive from '@radix-ui/react-select';\n\nimport { cn, setDisplayName } from '@/helpers/utils';\n\nconst Select = SelectPrimitive.Root;\n\nconst SelectGroup = SelectPrimitive.Group;\n\nconst SelectValue = SelectPrimitive.Value;\n\nconst SelectTrigger = React.forwardRef<\n\tReact.ElementRef<typeof SelectPrimitive.Trigger>,\n\tReact.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n\t<SelectPrimitive.Trigger\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-brand-400/80 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1',\n\t\t\t'[&[data-placeholder]]:text-muted-foreground',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t>\n\t\t{children}\n\t\t<SelectPrimitive.Icon asChild>\n\t\t\t<CaretSortIcon className=\"h-4 w-4 opacity-50\" />\n\t\t</SelectPrimitive.Icon>\n\t</SelectPrimitive.Trigger>\n));\nsetDisplayName(SelectTrigger, SelectPrimitive.Trigger.displayName);\n\nconst SelectScrollUpButton = React.forwardRef<\n\tReact.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n\tReact.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n\t<SelectPrimitive.ScrollUpButton\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'absolute left-0 right-0 top-0 z-[60] flex h-9 cursor-default items-center justify-center bg-popover py-1',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t>\n\t\t<ChevronUpIcon className=\"size-6\" />\n\t</SelectPrimitive.ScrollUpButton>\n));\nsetDisplayName(SelectScrollUpButton, SelectPrimitive.ScrollUpButton.displayName);\n\nconst SelectScrollDownButton = React.forwardRef<\n\tReact.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n\tReact.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n\t<SelectPrimitive.ScrollDownButton\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'absolute bottom-0 left-0 right-0 z-[60] flex h-9 cursor-default items-center justify-center bg-popover py-1',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t>\n\t\t<ChevronDownIcon className=\"size-6\" />\n\t</SelectPrimitive.ScrollDownButton>\n));\nsetDisplayName(SelectScrollDownButton, SelectPrimitive.ScrollDownButton.displayName);\n\nconst SelectContent = React.forwardRef<\n\tReact.ElementRef<typeof SelectPrimitive.Content>,\n\tReact.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = 'popper', ...props }, ref) => (\n\t<SelectPrimitive.Portal>\n\t\t<SelectPrimitive.Content\n\t\t\tref={ref}\n\t\t\tclassName={cn(\n\t\t\t\t'relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',\n\t\t\t\tposition === 'popper' &&\n\t\t\t\t\t'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\tposition={position}\n\t\t\t{...props}\n\t\t>\n\t\t\t<SelectScrollUpButton />\n\t\t\t<SelectPrimitive.Viewport\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'p-1',\n\t\t\t\t\tposition === 'popper' &&\n\t\t\t\t\t\t'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]',\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</SelectPrimitive.Viewport>\n\t\t\t<SelectScrollDownButton />\n\t\t</SelectPrimitive.Content>\n\t</SelectPrimitive.Portal>\n));\nsetDisplayName(SelectContent, SelectPrimitive.Content.displayName);\n\nconst SelectLabel = React.forwardRef<\n\tReact.ElementRef<typeof SelectPrimitive.Label>,\n\tReact.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n\t<SelectPrimitive.Label ref={ref} className={cn('px-2 py-1.5 text-sm font-semibold', className)} {...props} />\n));\nsetDisplayName(SelectLabel, SelectPrimitive.Label.displayName);\n\nconst SelectItem = React.forwardRef<\n\tReact.ElementRef<typeof SelectPrimitive.Item>,\n\tReact.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n\t<SelectPrimitive.Item\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t>\n\t\t<span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n\t\t\t<SelectPrimitive.ItemIndicator>\n\t\t\t\t<CheckIcon className=\"h-4 w-4\" />\n\t\t\t</SelectPrimitive.ItemIndicator>\n\t\t</span>\n\t\t<SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n\t</SelectPrimitive.Item>\n));\nsetDisplayName(SelectItem, SelectPrimitive.Item.displayName);\n\nconst SelectSeparator = React.forwardRef<\n\tReact.ElementRef<typeof SelectPrimitive.Separator>,\n\tReact.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n\t<SelectPrimitive.Separator ref={ref} className={cn('-mx-1 my-1 h-px bg-muted', className)} {...props} />\n));\nsetDisplayName(SelectSeparator, SelectPrimitive.Separator.displayName);\n\nexport {\n\tSelect,\n\tSelectGroup,\n\tSelectValue,\n\tSelectTrigger,\n\tSelectContent,\n\tSelectLabel,\n\tSelectItem,\n\tSelectSeparator,\n\tSelectScrollUpButton,\n\tSelectScrollDownButton,\n};\n","import { proxyClient, trpc } from '@/utils/trpc';\nexport { trpc, proxyClient as trpcClient };\n","'use client';\nexport const getHost = () => {\n\treturn process.env.NEXT_PUBLIC_KLIPPER_HOSTNAME != null && process.env.NEXT_PUBLIC_KLIPPER_HOSTNAME.trim() != ''\n\t\t? process.env.NEXT_PUBLIC_KLIPPER_HOSTNAME\n\t\t: typeof window !== 'undefined' && window.location?.hostname != null\n\t\t\t? window.location.hostname\n\t\t\t: null;\n};\n","/* eslint-disable no-console */\nimport { getHost } from '@/helpers/util';\nimport { MoonrakerDBItemResponse } from '@/moonraker/types';\n\ninterface Migration {\n\tversion: number;\n\tdescription: string;\n\tup: () => Promise<{ result: string }>;\n\tdown: () => Promise<{ result: string }>;\n}\n\nexport const migrations: Migration[] = [\n\t{\n\t\tversion: 1,\n\t\tdescription: \"Undo double JSON encoding of RatOS's data\",\n\t\tup: async () => {\n\t\t\tconst res = await window.fetch(`http://${getHost()}/server/database/item?namespace=RatOS`);\n\t\t\tif (res.ok) {\n\t\t\t\tconst data = (await res.json()) as\n\t\t\t\t\t| { result: MoonrakerDBItemResponse<{ [key: string]: unknown }> }\n\t\t\t\t\t| { error: { message: string } };\n\t\t\t\tif ('error' in data) {\n\t\t\t\t\tthrow new Error(data.error.message);\n\t\t\t\t}\n\t\t\t\tconst result: string[] = [];\n\t\t\t\tif (data.result.value == null) {\n\t\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t\t}\n\t\t\t\tfor await (const [key, value] of Object.entries(data.result.value)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst parsed = JSON.parse(value as any);\n\t\t\t\t\t\tconsole.log('Migrating', key, 'from', value, 'to', parsed);\n\t\t\t\t\t\tawait window.fetch(`http://${getHost()}/server/database/item`, {\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\tnamespace: 'RatOS',\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tvalue: parsed,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('Error migrating', key, value, 'clearing key');\n\t\t\t\t\t\tawait window.fetch(\n\t\t\t\t\t\t\t`http://${getHost()}/server/database/item?namespace=RatOS&key=${encodeURIComponent(key)}`,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmethod: 'DELETE',\n\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\t\tnamespace: 'RatOS',\n\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn { result: `Succesfully decoded ${result.length} keys.\\n${result.join('\\n')}` };\n\t\t\t} else {\n\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t}\n\t\t},\n\t\tdown: async () => {\n\t\t\t// drop table\n\t\t\tconst res = await window.fetch(`http://${getHost()}/server/database/item?namespace=RatOS`);\n\t\t\tif (res.ok) {\n\t\t\t\tconst data = (await res.json()) as\n\t\t\t\t\t| { result: MoonrakerDBItemResponse<{ [key: string]: unknown }> }\n\t\t\t\t\t| { error: { message: string } };\n\t\t\t\tif ('error' in data) {\n\t\t\t\t\tthrow new Error(data.error.message);\n\t\t\t\t}\n\t\t\t\tif (data.result.value == null) {\n\t\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t\t}\n\t\t\t\tconst result: string[] = [];\n\t\t\t\tfor await (const [key, value] of Object.entries(data.result.value)) {\n\t\t\t\t\tconst encoded = JSON.stringify(value as any);\n\t\t\t\t\tawait window.fetch(`http://${getHost()}/server/database/item`, {\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\tnamespace: 'RatOS',\n\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\tvalue: encoded,\n\t\t\t\t\t\t}),\n\t\t\t\t\t});\n\t\t\t\t\tresult.push(`Re-encoded ${key}`);\n\t\t\t\t}\n\t\t\t\treturn { result: `Succesfully re-encoded ${result.length} keys.\\n${result.join('\\n')}` };\n\t\t\t}\n\t\t\treturn { result: 'Nothing to migrate' };\n\t\t},\n\t},\n\t{\n\t\tversion: 2,\n\t\tdescription: 'Change caramba printers to v-core-4 / v-chonk',\n\t\tup: async () => {\n\t\t\tconst res = await window.fetch(`http://${getHost()}/server/database/item?namespace=RatOS`);\n\t\t\tif (res.ok) {\n\t\t\t\tconst data = (await res.json()) as\n\t\t\t\t\t| { result: MoonrakerDBItemResponse<{ [key: string]: unknown }> }\n\t\t\t\t\t| { error: { message: string } };\n\t\t\t\tif ('error' in data) {\n\t\t\t\t\tthrow new Error(data.error.message);\n\t\t\t\t}\n\t\t\t\tconst result: string[] = [];\n\t\t\t\tif (data.result.value == null) {\n\t\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t\t}\n\t\t\t\tfor await (const [key, value] of Object.entries(data.result.value)) {\n\t\t\t\t\tif (key === 'Printer' && typeof value === 'string') {\n\t\t\t\t\t\tconst migratedValue = value.replace(/caramba-chonk/g, 'v-chonk').replace(/caramba/g, 'v-core-4');\n\t\t\t\t\t\tif (migratedValue === value) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait window.fetch(`http://${getHost()}/server/database/item`, {\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\tnamespace: 'RatOS',\n\t\t\t\t\t\t\t\tkey: 'Printer',\n\t\t\t\t\t\t\t\tvalue: migratedValue,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresult.push(`Migrated ${value} to ${migratedValue}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn { result: `Succesfully migrated ${result.length} keys.\\n${result.join('\\n')}` };\n\t\t\t} else {\n\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t}\n\t\t},\n\t\tdown: async () => {\n\t\t\tconst res = await window.fetch(`http://${getHost()}/server/database/item?namespace=RatOS`);\n\t\t\tif (res.ok) {\n\t\t\t\tconst data = (await res.json()) as\n\t\t\t\t\t| { result: MoonrakerDBItemResponse<{ [key: string]: unknown }> }\n\t\t\t\t\t| { error: { message: string } };\n\t\t\t\tif ('error' in data) {\n\t\t\t\t\tthrow new Error(data.error.message);\n\t\t\t\t}\n\t\t\t\tconst result: string[] = [];\n\t\t\t\tif (data.result.value == null) {\n\t\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t\t}\n\t\t\t\tfor await (const [key, value] of Object.entries(data.result.value)) {\n\t\t\t\t\tif (key === 'Printer' && typeof value === 'string') {\n\t\t\t\t\t\tconst migratedValue = value.replace(/v-chonk/g, 'caramba-chonk').replace(/v-core-4/g, 'caramba');\n\t\t\t\t\t\tif (migratedValue === value) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait window.fetch(`http://${getHost()}/server/database/item`, {\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\tnamespace: 'RatOS',\n\t\t\t\t\t\t\t\tkey: 'Printer',\n\t\t\t\t\t\t\t\tvalue: migratedValue,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresult.push(`Migrated ${value} to ${migratedValue}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn { result: `Succesfully migrated ${result.length} keys.\\n${result.join('\\n')}` };\n\t\t\t} else {\n\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t}\n\t\t},\n\t},\n];\n\nexport const getCurrentVersion = async (): Promise<number> => {\n\tconst res = await window.fetch(`http://${getHost()}/server/database/item?namespace=RatOS&key=__db_version`);\n\tif (res.ok) {\n\t\tconst data = (await res.json()) as { result: MoonrakerDBItemResponse<number> } | { error: { message: string } };\n\t\tif ('error' in data) {\n\t\t\treturn 0;\n\t\t}\n\t\treturn data.result.value as number;\n\t}\n\treturn 0;\n};\n\nexport const setCurrentVersion = async (version: number) => {\n\tawait window.fetch(`http://${getHost()}/server/database/item`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tnamespace: 'RatOS',\n\t\t\tkey: '__db_version',\n\t\t\tvalue: version,\n\t\t}),\n\t});\n};\n\nlet isMigrating = false;\nexport const migrate = async (from: number, to: number) => {\n\tif (isMigrating) {\n\t\treturn console.log('Already migrating, ignoring..');\n\t}\n\tif (from === to) {\n\t\treturn console.log('Already at target version');\n\t}\n\tisMigrating = true;\n\ttry {\n\t\tconst migrationsToRun = migrations\n\t\t\t.filter((m) => m.version > from && m.version <= to)\n\t\t\t.sort((a, b) => (from <= to ? a.version - b.version : b.version - a.version));\n\t\tfor await (const migration of migrationsToRun) {\n\t\t\tconst result = await (from < to ? migration.up() : migration.down());\n\t\t\tconsole.log(`Migrated to version ${migration.version}: ${result.result}`);\n\t\t}\n\t\tawait setCurrentVersion(to);\n\t} finally {\n\t\tisMigrating = false;\n\t}\n};\n\nlet isMigrated = false;\nexport const migrateToLatest = async () => {\n\tif (isMigrated) {\n\t\treturn console.log('Already migrated, ignoring..');\n\t}\n\tconst currentVersion = await getCurrentVersion();\n\tconst latestVersion = Math.max(...migrations.map((m) => m.version));\n\tif (currentVersion === latestVersion) {\n\t\tconsole.log('Already at latest version');\n\t\treturn;\n\t}\n\tif (isMigrating) {\n\t\tconsole.log('Already migrating, ignoring..');\n\t\treturn;\n\t}\n\tconsole.log('Migrating to latest version...', currentVersion, latestVersion);\n\tawait migrate(currentVersion, latestVersion);\n\tisMigrated = true;\n\tconsole.log('Migration complete.');\n};\n","'use client';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { UseMutationOptions, UseQueryOptions, useMutation, useQuery } from '@tanstack/react-query';\nimport useWebSocket from 'react-use-websocket';\nimport { migrateToLatest } from '@/moonraker/migrations';\nimport type {\n\tInFlightRequestCallbacks,\n\tInFlightRequestTimeouts,\n\tJSONRPCResponse,\n\tMoonrakerStatus,\n\tMoonrakerSaveItemFn,\n\tMoonrakerNamespaces,\n\tMoonrakerDBItemResponse,\n\tMoonrakerGetItemFn,\n\tMoonrakerNamespaceKeys,\n\tMoonrakerDBValue,\n\tMoonrakerQueryFn,\n\tMoonrakerQueryKeys,\n\tMoonrakerQueryParams,\n\tMoonrakerQueryResult,\n\tMoonrakerMutationKeys,\n\tMoonrakerMutationParams,\n\tMoonrakerMutationResult,\n\tMoonrakerMutationFn,\n\tPrinterObjectKeys,\n\tPrinterObjectsMoonrakerQueryParams,\n\tPrinterObjectResult,\n\tJSONRPCResponseSuccess,\n} from '@/moonraker/types';\nimport { getHost } from '@/helpers/util';\nimport { merge } from 'ts-deepmerge';\nimport deepEqual from 'deep-equal';\nimport { getLogger } from '@/app/_helpers/logger';\n\nlet REQ_ID = 0;\n\nconst getWsURL = () => {\n\tconst host = getHost();\n\tif (host == null || host.trim() == '') {\n\t\treturn null;\n\t}\n\treturn `ws://${host}/websocket`;\n};\n\nconst subscriptions: { [key: number]: Partial<PrinterObjectsMoonrakerQueryParams> } = {};\n\ntype MoonrakerStatusUpdate = { [key in PrinterObjectKeys]: PrinterObjectResult<PrinterObjectKeys> };\n\ninterface MoonrakerHookOptions {\n\tonStatusUpdate?: (status: MoonrakerStatusUpdate) => void;\n\tpassThroughUpdateMethods?: string[];\n}\n\nexport const useMoonraker = (options?: MoonrakerHookOptions) => {\n\tconst inFlightRequests = useRef<InFlightRequestCallbacks>({});\n\tconst inFlightRequestTimeouts = useRef<InFlightRequestTimeouts>({});\n\tconst localSubscriptions = useRef<number[]>([]);\n\tconst onReadyCallbacks = useRef<{ resolve: () => void; reject: () => void }[]>([]);\n\tconst [wsUrl, setWsUrl] = useState(getWsURL());\n\tuseEffect(() => {\n\t\tsetWsUrl(getWsURL());\n\t}, []);\n\n\tconst containsSubscriptionUpdate = useCallback(\n\t\t(jsonMessage: JSONRPCResponse): jsonMessage is JSONRPCResponseSuccess => {\n\t\t\tif ('error' in jsonMessage) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (jsonMessage.method === 'notify_status_update' && jsonMessage.params != null) {\n\t\t\t\tconst res = jsonMessage.params[0] as MoonrakerStatusUpdate;\n\t\t\t\tif (res != null) {\n\t\t\t\t\tfor (const sub of localSubscriptions.current) {\n\t\t\t\t\t\tconst objects = subscriptions[sub];\n\t\t\t\t\t\tif (objects != null) {\n\t\t\t\t\t\t\tfor (const key in objects) {\n\t\t\t\t\t\t\t\tif (res[key as PrinterObjectKeys] != null) {\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t[],\n\t);\n\n\tconst { lastJsonMessage, sendJsonMessage, readyState } = useWebSocket<JSONRPCResponse>(wsUrl, {\n\t\tfilter: (message) => {\n\t\t\tif (moonrakerStatus !== 'connected') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tconst parsed = JSON.parse(message.data) as JSONRPCResponse;\n\t\t\t\tif (inFlightRequests.current[parsed.id] != null) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\toptions?.passThroughUpdateMethods?.length &&\n\t\t\t\t\t'method' in parsed &&\n\t\t\t\t\toptions.passThroughUpdateMethods.includes(parsed.method)\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t} catch (e) {\n\t\t\t\tgetLogger().warn({ e, messageData: message.data }, 'Filter: Failed to parse message');\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tonMessage: (message) => {\n\t\t\tif (options?.onStatusUpdate) {\n\t\t\t\ttry {\n\t\t\t\t\tconst parsed = JSON.parse(message.data) as JSONRPCResponse;\n\t\t\t\t\tif (containsSubscriptionUpdate(parsed)) {\n\t\t\t\t\t\tconst res = parsed.params[0] as MoonrakerStatusUpdate;\n\t\t\t\t\t\toptions.onStatusUpdate?.(res);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tgetLogger().warn({ e, messageData: message.data }, 'OnMessage: Failed to parse message');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tshouldReconnect: (closeEvent) => {\n\t\t\treturn true;\n\t\t},\n\t\treconnectAttempts: Infinity,\n\t\treconnectInterval: 3000,\n\t\tshare: true,\n\t});\n\tconst readyStateRef = useRef(readyState);\n\treadyStateRef.current = readyState;\n\tconst [moonrakerStatus, setMoonrakerStatus] = useState<null | MoonrakerStatus>(\n\t\treadyState === 1 ? 'connected' : 'connecting',\n\t);\n\n\tconst whenReady = useCallback((resolve: () => void, reject: () => void) => {\n\t\tif (readyStateRef.current === 1) {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tonReadyCallbacks.current.push({ resolve, reject });\n\t\t}\n\t}, []);\n\n\tconst isReady = useCallback(\n\t\t() =>\n\t\t\tnew Promise<void>((resolve, reject) => {\n\t\t\t\twhenReady(resolve, reject);\n\t\t\t}),\n\t\t[whenReady],\n\t);\n\tconst moonrakerQuery: MoonrakerQueryFn & MoonrakerMutationFn = useCallback(\n\t\tasync <Response = any,>(method: string, params: any = {}) => {\n\t\t\tconst id = ++REQ_ID;\n\t\t\tawait isReady();\n\t\t\treturn new Promise<Response>((resolve, reject) => {\n\t\t\t\tinFlightRequests.current[id] = (err, result) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn reject(err);\n\t\t\t\t\t}\n\t\t\t\t\tif (result && typeof result === 'object' && 'error' in result && result.error) {\n\t\t\t\t\t\treturn reject(result.error);\n\t\t\t\t\t}\n\t\t\t\t\tif (result == null) {\n\t\t\t\t\t\treturn reject(new Error('No result. Unknown response format.'));\n\t\t\t\t\t}\n\t\t\t\t\tresolve(result as Response);\n\t\t\t\t};\n\t\t\t\tlet timeout = 10 * 1000;\n\t\t\t\tif (method === 'printer.gcode.script') {\n\t\t\t\t\t// Allow 10 minutes for gcode macros.\n\t\t\t\t\ttimeout = 10 * 60 * 1000;\n\t\t\t\t}\n\t\t\t\tinFlightRequestTimeouts.current[id] = window.setTimeout(() => {\n\t\t\t\t\tinFlightRequests.current[id]?.(new Error('Request timed out'), null);\n\t\t\t\t\tdelete inFlightRequests.current[id];\n\t\t\t\t\tdelete inFlightRequestTimeouts.current[id];\n\t\t\t\t}, timeout); // 10 second timeout.\n\t\t\t\tsendJsonMessage({\n\t\t\t\t\tjsonrpc: '2.0',\n\t\t\t\t\tmethod,\n\t\t\t\t\tparams,\n\t\t\t\t\tid: id,\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t[isReady, sendJsonMessage],\n\t);\n\n\tconst subscribeToObject = useCallback(\n\t\tasync <TArgs extends [PrinterObjectKeys, ...PrinterObjectKeys[]]>(...args: TArgs) => {\n\t\t\tconst objects = Object.fromEntries(args.map((key) => [key, null])) as PrinterObjectsMoonrakerQueryParams;\n\t\t\tconst allSubscribedObjects = Object.assign(\n\t\t\t\t{},\n\t\t\t\tobjects,\n\t\t\t\t...Object.values(subscriptions).filter((v) => v != null),\n\t\t\t) as PrinterObjectsMoonrakerQueryParams;\n\t\t\tconst q = moonrakerQuery('printer.objects.subscribe' as 'printer.objects.query', {\n\t\t\t\tobjects: allSubscribedObjects,\n\t\t\t});\n\t\t\t// Capture request id we just generated;\n\t\t\tconst reqId = REQ_ID;\n\t\t\tsubscriptions[reqId] = objects;\n\t\t\tlocalSubscriptions.current.push(reqId);\n\n\t\t\tconst res = (await q).status as {\n\t\t\t\t[K in TArgs[number]]: PrinterObjectResult<K>;\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tres,\n\t\t\t\tunsuscribe: async () => {\n\t\t\t\t\tlocalSubscriptions.current = localSubscriptions.current.filter((v) => v !== reqId);\n\t\t\t\t\tif (subscriptions[reqId] == null) {\n\t\t\t\t\t\tdelete subscriptions[reqId];\n\t\t\t\t\t\tconst allSubscribedObjects = Object.assign(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\t...Object.values(subscriptions).filter((v) => v != null),\n\t\t\t\t\t\t) as PrinterObjectsMoonrakerQueryParams;\n\t\t\t\t\t\tawait moonrakerQuery('printer.objects.subscribe' as 'printer.objects.query', {\n\t\t\t\t\t\t\tobjects: allSubscribedObjects,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\t[moonrakerQuery],\n\t);\n\n\tconst saveItem = useCallback<MoonrakerSaveItemFn>(\n\t\tasync <Data,>(namespace: MoonrakerNamespaces, key: unknown, value: unknown) => {\n\t\t\tawait isReady();\n\t\t\treturn (await moonrakerQuery('server.database.post_item', {\n\t\t\t\tnamespace: namespace,\n\t\t\t\tkey,\n\t\t\t\tvalue: value,\n\t\t\t})) as Data;\n\t\t},\n\t\t[moonrakerQuery, isReady],\n\t);\n\n\tconst getItem = useCallback<MoonrakerGetItemFn>(\n\t\tasync <Data,>(namespace: MoonrakerNamespaces, key: unknown): Promise<Data | null> => {\n\t\t\tawait isReady();\n\t\t\ttry {\n\t\t\t\tconst result = await moonrakerQuery('server.database.get_item', {\n\t\t\t\t\tnamespace: namespace,\n\t\t\t\t\tkey,\n\t\t\t\t});\n\t\t\t\treturn (result?.value ?? null) as Data;\n\t\t\t} catch (e) {\n\t\t\t\tgetLogger().warn(e);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\t[moonrakerQuery, isReady],\n\t);\n\n\tuseEffect(() => {\n\t\tif (readyState === 1) {\n\t\t\t(async () => {\n\t\t\t\tawait migrateToLatest();\n\t\t\t\tonReadyCallbacks.current.forEach((cb) => cb.resolve());\n\t\t\t\tonReadyCallbacks.current = [];\n\t\t\t\tsetMoonrakerStatus('connected');\n\t\t\t})();\n\t\t} else {\n\t\t\tsetMoonrakerStatus('connecting');\n\t\t}\n\t}, [readyState]);\n\n\tuseEffect(() => {\n\t\tif (lastJsonMessage?.id && inFlightRequests.current[lastJsonMessage.id]) {\n\t\t\twindow.clearTimeout(inFlightRequestTimeouts.current[lastJsonMessage.id]);\n\t\t\tif ('error' in lastJsonMessage) {\n\t\t\t\tinFlightRequests.current[lastJsonMessage.id](new Error(lastJsonMessage.error.message), null);\n\t\t\t} else {\n\t\t\t\tinFlightRequests.current[lastJsonMessage.id](null, lastJsonMessage.result);\n\t\t\t}\n\t\t\tdelete inFlightRequestTimeouts.current[lastJsonMessage.id];\n\t\t\tdelete inFlightRequests.current[lastJsonMessage.id];\n\t\t}\n\t}, [lastJsonMessage]);\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tfor (const reqId in inFlightRequestTimeouts.current) {\n\t\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t\t\tdelete inFlightRequestTimeouts.current[reqId];\n\t\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t\t\tdelete inFlightRequests.current[reqId];\n\t\t\t}\n\t\t\tif (localSubscriptions.current.length > 0) {\n\t\t\t\tlocalSubscriptions.current.forEach((sub) => {\n\t\t\t\t\tdelete subscriptions[sub];\n\t\t\t\t});\n\t\t\t\tlocalSubscriptions.current = [];\n\t\t\t\tconst allSubscribedObjects = Object.assign(\n\t\t\t\t\t{},\n\t\t\t\t\t...Object.values(subscriptions).filter((v) => v != null),\n\t\t\t\t) as PrinterObjectsMoonrakerQueryParams;\n\t\t\t\tmoonrakerQuery('printer.objects.subscribe' as 'printer.objects.query', {\n\t\t\t\t\tobjects: Object.keys(allSubscribedObjects).length > 0 ? allSubscribedObjects : null,\n\t\t\t\t}).catch((e) => {\n\t\t\t\t\t// ignore\n\t\t\t\t});\n\t\t\t}\n\t\t\tonReadyCallbacks.current.forEach((cb) => cb.reject());\n\t\t\tonReadyCallbacks.current = [];\n\t\t};\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\treturn {\n\t\tquery: moonrakerQuery,\n\t\tsaveItem,\n\t\tgetItem,\n\t\tsubscribeToObject,\n\t\tstatus: moonrakerStatus,\n\t\tlastMessage: lastJsonMessage,\n\t\tisReady: readyState === 1,\n\t};\n};\n\nexport const useNamespacedItemQuery = <\n\tN extends MoonrakerNamespaces,\n\tK extends MoonrakerNamespaceKeys<N>,\n\tV extends MoonrakerDBValue<N, K>,\n>(\n\tnamespace: N,\n\tkey: K,\n\toptions?: Omit<UseQueryOptions<V, unknown, V, N[]>, 'queryKey' | 'queryFn'>,\n) => {\n\tconst { getItem } = useMoonraker();\n\treturn useQuery({\n\t\t...options,\n\t\tqueryKey: [namespace, key],\n\t\tqueryFn: async () => {\n\t\t\treturn getItem(namespace, key) as Promise<V>;\n\t\t},\n\t});\n};\n\nexport const useMoonrakerQuery = <\n\tK extends MoonrakerQueryKeys = MoonrakerQueryKeys,\n\tP extends MoonrakerQueryParams<K> = MoonrakerQueryParams<K>,\n\tO extends Omit<\n\t\tUseQueryOptions<MoonrakerQueryResult<K>, unknown, MoonrakerQueryResult<K>, K[]>,\n\t\t'queryKey' | 'queryFn'\n\t> = Omit<UseQueryOptions<MoonrakerQueryResult<K>, unknown, MoonrakerQueryResult<K>, K[]>, 'queryKey' | 'queryFn'>,\n>(\n\t...args: P extends void ? [K, O?] : [K, P, O?]\n) => {\n\tconst { query } = useMoonraker();\n\tconst options = args.length === 3 ? (args[2] as O) : (args[1] as O);\n\tconst params = args.length === 3 ? args[1] : undefined;\n\tconst key = args[0];\n\tconst passed = (args.length === 3 ? [key, params] : [key]) as P extends void ? [K] : [K, P];\n\treturn useQuery({\n\t\t...(options ?? {}),\n\t\tqueryKey: [args[0]],\n\t\tqueryFn: async () => {\n\t\t\treturn query(...passed) as Promise<MoonrakerQueryResult<K>>;\n\t\t},\n\t});\n};\n\nexport const useMoonrakerMutation = <\n\tK extends MoonrakerMutationKeys = MoonrakerMutationKeys,\n\tP extends MoonrakerMutationParams<K> = MoonrakerMutationParams<K>,\n\tO extends Omit<UseMutationOptions<MoonrakerMutationResult<K>, unknown, P, K[]>, 'mutationKey' | 'mutationFn'> = Omit<\n\t\tUseMutationOptions<MoonrakerMutationResult<K>, unknown, P, K[]>,\n\t\t'mutationKey' | 'mutationFn'\n\t>,\n>(\n\t...args: [K, O?]\n) => {\n\tconst { query } = useMoonraker();\n\tconst options = args[1];\n\tconst key = args[0];\n\treturn useMutation({\n\t\t...options,\n\t\tmutationKey: [args[0]],\n\t\tmutationFn: async (params: P) => {\n\t\t\tconst passed = (params ? [key, params] : [key]) as P extends void ? [K] : [K, P];\n\t\t\treturn query(...passed) as Promise<MoonrakerMutationResult<K>>;\n\t\t},\n\t});\n};\n\nexport const usePrinterObjectQuery = <TArgs extends [PrinterObjectKeys, ...PrinterObjectKeys[]]>(...args: TArgs) => {\n\tconst { query } = useMoonraker();\n\treturn useQuery({\n\t\tqueryKey: args,\n\t\tqueryFn: async () => {\n\t\t\tconst objects = Object.fromEntries(args.map((key) => [key, null])) as PrinterObjectsMoonrakerQueryParams;\n\t\t\treturn (await query('printer.objects.query', { objects })).status as {\n\t\t\t\t[K in TArgs[number]]: PrinterObjectResult<K>;\n\t\t\t};\n\t\t},\n\t});\n};\n\nexport const usePrinterObjectSubscription = <\n\tTArgs extends [PrinterObjectKeys, ...PrinterObjectKeys[]],\n\tR extends object = { [K in TArgs[number]]: PrinterObjectResult<K> },\n>(\n\tselect: null | ((res: { [K in TArgs[number]]: PrinterObjectResult<K> }) => R),\n\t...args: TArgs\n) => {\n\tconst [state, setState] = useState<R | null>(null);\n\tconst stateRef = useRef(state);\n\tstateRef.current = state;\n\tconst selectRef = useRef(select);\n\tselectRef.current = select;\n\n\tconst _select = useCallback((res: { [K in TArgs[number]]: PrinterObjectResult<K> }) => {\n\t\tif (selectRef.current == null) {\n\t\t\treturn res as R;\n\t\t}\n\t\treturn selectRef.current?.(res);\n\t}, []);\n\n\tconst keys = useMemo(\n\t\t() => Object.fromEntries(args.map((key) => [key, null])) as PrinterObjectsMoonrakerQueryParams,\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[JSON.stringify(args.sort())],\n\t);\n\n\tconst { subscribeToObject } = useMoonraker({\n\t\tonStatusUpdate: useCallback(\n\t\t\t(res: MoonrakerStatusUpdate) => {\n\t\t\t\tconst changed = {} as typeof res;\n\t\t\t\tfor (const key in keys) {\n\t\t\t\t\tif (res[key as keyof typeof res] != null) {\n\t\t\t\t\t\tchanged[key as keyof typeof res] = res[key as keyof typeof res];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst changeSelection = _select(changed);\n\t\t\t\tif (changeSelection == null || typeof changeSelection !== 'object') {\n\t\t\t\t\tthrow new Error('Invalid selection function, must return object, got ' + typeof changeSelection);\n\t\t\t\t}\n\t\t\t\tif (Object.keys(changed).length > 0 && deepEqual(changeSelection, stateRef.current) === false) {\n\t\t\t\t\tsetState((prev) => {\n\t\t\t\t\t\treturn merge(prev ?? {}, changeSelection) as R;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t[_select, keys],\n\t\t),\n\t});\n\n\tuseEffect(() => {\n\t\tconst subscription = subscribeToObject(...(Object.keys(keys) as TArgs));\n\t\tsubscription\n\t\t\t.then((sub) => {\n\t\t\t\tsetState(_select(sub.res));\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tif (e instanceof Error) {\n\t\t\t\t\tgetLogger().error(e);\n\t\t\t\t}\n\t\t\t});\n\t\treturn () => {\n\t\t\tsubscription\n\t\t\t\t.then((sub) => sub.unsuscribe())\n\t\t\t\t.catch((e) => {\n\t\t\t\t\tif (e instanceof Error) {\n\t\t\t\t\t\tgetLogger().error(e);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t};\n\t}, [_select, keys, subscribeToObject]);\n\n\treturn state;\n};\n\nexport const useNamespacedItemMutation = <\n\tN extends MoonrakerNamespaces,\n\tK extends MoonrakerNamespaceKeys<N>,\n\tV extends MoonrakerDBValue<N, K>,\n>(\n\tnamespace: N,\n\tkey: K,\n\toptions?: Omit<UseMutationOptions<MoonrakerDBItemResponse<V>, unknown, V>, 'mutationKey' | 'mutationFn'>,\n) => {\n\tconst { saveItem } = useMoonraker();\n\treturn useMutation<MoonrakerDBItemResponse<V>, unknown, V>({\n\t\t...options,\n\t\tmutationKey: [namespace, key],\n\t\tmutationFn: (value: V) => saveItem(namespace, key, value) as Promise<MoonrakerDBItemResponse<V>>,\n\t});\n};\n\nexport const useMoonrakerState = <\n\tN extends MoonrakerNamespaces,\n\tK extends MoonrakerNamespaceKeys<N>,\n\tV extends MoonrakerDBValue<N, K>,\n\tVal extends NonNullable<V> | null,\n>(\n\tnamespace: N,\n\tkey: K,\n\tinitialValue: Val = null as Val,\n) => {\n\tconst query = useNamespacedItemQuery(namespace, key, { initialData: initialValue });\n\tconst mutation = useNamespacedItemMutation<N, K, V>(namespace, key);\n\tconst mutate = useCallback(\n\t\tasync (value: V | ((prev: NonNullable<V> | Val) => NonNullable<V> | Val)) => {\n\t\t\tconst newValue =\n\t\t\t\ttypeof value === 'function' ? (value as (prev: NonNullable<V> | Val) => V)(query.data ?? initialValue) : value;\n\t\t\tawait mutation.mutateAsync(newValue, {\n\t\t\t\tonSuccess: () => {\n\t\t\t\t\t// Todo, implement optimistic updates\n\t\t\t\t\tquery.refetch();\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\t[initialValue, mutation, query],\n\t);\n\treturn [query.data ?? initialValue, mutate, query, mutation] as const;\n};\n","'use client';\nimport { createTRPCProxyClient, httpBatchLink } from '@trpc/client';\nimport { createTRPCNext } from '@trpc/next';\nimport type { AppRouter } from '@/server/routers/index';\nexport type {\n\tPrinterRouterLike,\n\tDropdownQuery,\n\tDropdownQueryKeys,\n\tDropdownQueryInput,\n\tDropdownQueryOutput,\n} from '@/server/routers/printer';\n\nexport function getBaseUrl() {\n\tif (typeof window !== 'undefined')\n\t\t// browser should use relative path\n\t\treturn '/configure';\n\tif (process.env.RENDER_INTERNAL_HOSTNAME)\n\t\t// reference for render.com\n\t\treturn `http://${process.env.RENDER_INTERNAL_HOSTNAME}:${process.env.PORT}/configure`;\n\t// assume localhost\n\treturn `http://127.0.0.1:${process.env.PORT ?? 3000}/configure`;\n}\nexport const trpc = createTRPCNext<AppRouter>({\n\tconfig() {\n\t\treturn {\n\t\t\tlinks: [\n\t\t\t\thttpBatchLink({\n\t\t\t\t\t/**\n\t\t\t\t\t * @link https://trpc.io/docs/ssr\n\t\t\t\t\t **/\n\t\t\t\t\turl: `${getBaseUrl()}/api/trpc`,\n\t\t\t\t\tmaxURLLength: 2083, // a suitable size\n\t\t\t\t}),\n\t\t\t],\n\t\t};\n\t},\n\toverrides: {\n\t\tuseMutation: {\n\t\t\t/**\n\t\t\t * This function is called whenever a `.useMutation` succeeds\n\t\t\t **/\n\t\t\tasync onSuccess(opts) {\n\t\t\t\t/**\n\t\t\t\t * @note that order here matters:\n\t\t\t\t * The order here allows route changes in `onSuccess` without\n\t\t\t\t * having a flash of content change whilst redirecting.\n\t\t\t\t **/\n\t\t\t\t// Calls the `onSuccess` defined in the `useQuery()`-options:\n\t\t\t\tawait opts.originalFn();\n\t\t\t\t// Invalidate all queries in the react-query cache:\n\t\t\t\tawait opts.queryClient.invalidateQueries();\n\t\t\t},\n\t\t},\n\t},\n\t/**\n\t * @link https://trpc.io/docs/ssr\n\t **/\n\tssr: false,\n});\nexport const proxyClient = createTRPCProxyClient<AppRouter>({\n\tlinks: [\n\t\thttpBatchLink({\n\t\t\t/**\n\t\t\t * @link https://trpc.io/docs/ssr\n\t\t\t **/\n\t\t\turl: `${getBaseUrl()}/api/trpc`,\n\t\t\tmaxURLLength: 2083, // a suitable size\n\t\t}),\n\t],\n});\n","export default {\"src\":\"/configure/_next/static/media/logo-white.6051cbc7.svg\",\"height\":443,\"width\":1728,\"blurWidth\":0,\"blurHeight\":0};"],"names":["globalPinoOpts","timestamp","level","PinoLogLevel","z","enum","PinoLogEvent","object","ts","number","messages","array","any","bindings","record","string","label","value","send","logEvent","trpcClient","clientLog","mutate","parse","logger","getLogger","pino","browser","transmit","useDebounce","fn","delay","refreshTimeout","timeoutRef","useRef","argsRef","useEffect","current","clearTimeout","useCallback","args","undefined","setTimeout","Textarea","React","param","ref","className","props","jsx_runtime","jsx","textarea","cn","setDisplayName","fieldsetVariants","cva","Fieldset","fieldset","children","Switch","SwitchPrimitives","displayName","ResizablePanelGroup","ResizablePrimitive","ResizablePanel","ResizableHandle","withHandle","div","DragHandleDots2Icon","SciChartSurface","configure","wasmUrl","dataUrl","MacroChartPreview","sequences","sequenceData","map","seq","recording","capturePSD","accel","accelerometer","color","name","filter","Boolean","prevSequenceData","setupChart","length","randMul1","Math","random","randAdd1","randMul2","randAdd2","step1","step2","rs","FastBandRenderableSeries","surface","webAssemblyContext2D","dataSeries","XyyDataSeries","containsNaN","isSorted","xValues","Array","fill","_","i","yValues","max","cos","sin","y1Values","shadableTWColors","fillY1","stroke","strokeY1","strokeThickness","yAxisId","PSD_CHART_AXIS_AMPLITUDE_ID","rolloverModifierProps","tooltipColor","tooltipTitle","rolloverModifierProps1","animation","WaveAnimation","duration","renderableSeries","add","forEach","FastLineRenderableSeries","XyDataSeries","yAxis","yAxes","getById","range","NumberRange","asArray","union","series","getYRange","getXRange","growBy","visibleRange","chartModifiers","RolloverModifier","showRolloverLine","showTooltip","CursorModifier","crosshairStroke","sky","crosshairStrokeThickness","showXLine","showYLine","tooltipLegendTemplate","getPSDTooltipLegendTemplate","tooltipLegendOffsetX","tooltipLegendOffsetY","axisLabelFill","zinc","axisLabelStroke","chart","useChart","PSDChartNoSeriesDefinition","deepEqual","clear","invalidateElement","SciChartReact","forwardProps","colorOptions","Object","keys","c","MacroSequence","controls","useDragControls","onPointerDown","_e_target_tagName","e","includes","target","_e_target","tagName","toLowerCase","stopPropagation","preventDefault","start","Reorder","Item","as","dragListener","dragControls","exit","opacity","scale","y","transition","initial","animate","staggerChildren","useFormValues","getValues","useFormContext","useWatch","MacroForm","form","submit","isNew","labels","useMemo","description","icon","Cpu","Server","ArrowDownToDot","Target","useFieldArray","control","keyName","shouldUnregister","onReorder","seqs","update","formValues","fields","jsxs","header","FormField","render","field","FormItem","FormControl","Input","type","autoComplete","aria-autocomplete","autoCapitalize","placeholder","FormMessage","Button","variant","size","onClick","disabled","formState","isDirty","Check","direction","defaultSize","minSize","ScrollContainer","Group","axis","values","sequence","index","Fragment","legend","concat","remove","X","input","register","FormLabel","id","FormDescription","checked","onCheckedChange","onChange","AnimatedContainer","AnimatePresence","motion","Select","onValueChange","SelectTrigger","SelectValue","SelectContent","Icon","SelectItem","p","span","data-description","style","backgroundColor","key","toAppend","gcode","uuid","append","CircleFadingPlus","Card","Badge","MenubarContext","MenubarGroup","MenubarPrimitive","MenubarPortal","MenubarSub","MenubarRadioGroup","Menubar","setValue","Provider","MenubarMenuContext","MenubarMenu","MenubarIcon","MenubarTrigger","asChild","Comp","Slot","replace","layoutId","ease","damping","mass","stiffness","twJoin","MenubarContentIcon","MenubarSubTrigger","inset","ChevronRightIcon","MenubarSubContent","sideOffset","alignOffset","MenubarContent","align","MenubarItem","MenubarCheckboxItem","CheckIcon","MenubarRadioItem","MenubarLabel","MenubarSeparator","MenubarShortcut","displayname","MutationModal","open","setOpen","isFailed","XMarkIcon","aria-hidden","buttonClass","clsx","isLoading","Transition","Root","show","appear","Dialog","onClose","Child","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Panel","svg","xmlns","viewBox","circle","cx","cy","r","strokeWidth","path","d","Title","title","button","dismissText","HelpActions","isSymlinkModalOpen","setIsSymlinkModalOpen","useState","isFlashModalOpen","setIsFlashModalOpen","flashModalContent","setFlashModalContent","symlinkModalContent","setSymlinkModalContent","symlinkExtensions","trpc","symlink","useMutation","flashFirmware","mcu","flashAllConnected","symlinkModal","isError","flashModal","onClickFlash","mutateAsync","then","dangerouslySetInnerHTML","__html","report","String","onClickSymlink","Link2","Zap","MenuBarContext","createContext","registerMenu","unregisterMenu","changed","useMenuBarProvider","menus","Map","menusChanged","useNewSignal","subscribers","Set","eventOrListener","delete","listener","renderFn","has","get","set","topMenuProps","providerProps","MenuBarProvider","useTopMenu","renderReactCallback","useContext","TopMenu","sidebarOpen","setSidebarOpen","setMenu","from","unsubscribe","signal","Image","width","height","src","logoWhite","alt","Menu","CircleHelp","onCloseAutoFocus","Link","href","rel","ExternalLink","old","Bars3Icon","setHeight","heightRef","isOverflowVisible","setIsOverflowVisible","isOverflowVisibleRef","containerRef","useResizeObserver","entry","contentRect","onComplete","onStart","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","twMerge","containerClassName","onAnimationComplete","onAnimationStart","buttonVariants","variants","danger","warning","info","primary","success","indeterminate","outline","plain","true","sm","lg","default","compoundVariants","class","defaultVariants","forwardRef","dropdownItems","buttonClasses","ChevronDownIcon","Items","active","item","cardVariants","scrollClasses","Spinner","noMargin","strokeDasharray","PI","strokeLinecap","Form","FormProvider","FormFieldContext","Controller","useFormField","fieldContext","itemContext","FormItemContext","getFieldState","fieldState","formItemId","formDescriptionId","formMessageId","error","Label","htmlFor","aria-describedby","aria-invalid","body","message","InputVariants","labelVariants","LabelPrimitive","SelectPrimitive","CaretSortIcon","SelectScrollUpButton","ChevronUpIcon","SelectScrollDownButton","position","SelectLabel","SelectSeparator","getHost","window","process","trim","location","hostname","migrations","version","up","res","fetch","ok","result","data","json","entries","parsed","JSON","console","log","method","headers","stringify","namespace","encodeURIComponent","join","down","encoded","push","migratedValue","getCurrentVersion","setCurrentVersion","isMigrating","migrate","to","migrationsToRun","m","sort","a","b","migration","isMigrated","migrateToLatest","currentVersion","latestVersion","REQ_ID","getWsURL","host","subscriptions","useMoonraker","inFlightRequests","inFlightRequestTimeouts","localSubscriptions","onReadyCallbacks","wsUrl","setWsUrl","containsSubscriptionUpdate","jsonMessage","params","sub","objects","lastJsonMessage","sendJsonMessage","readyState","useWebSocket","moonrakerStatus","options","passThroughUpdateMethods","warn","messageData","onMessage","onStatusUpdate","shouldReconnect","reconnectAttempts","Infinity","reconnectInterval","share","readyStateRef","setMoonrakerStatus","whenReady","resolve","reject","isReady","Promise","moonrakerQuery","err","timeout","jsonrpc","subscribeToObject","fromEntries","allSubscribedObjects","assign","v","q","reqId","status","unsuscribe","saveItem","getItem","cb","catch","query","lastMessage","useNamespacedItemQuery","useQuery","queryKey","queryFn","useMoonrakerQuery","passed","useMoonrakerMutation","mutationKey","mutationFn","usePrinterObjectQuery","usePrinterObjectSubscription","select","state","setState","stateRef","selectRef","_select","changeSelection","merge","prev","subscription","Error","useNamespacedItemMutation","useMoonrakerState","initialValue","initialData","mutation","newValue","onSuccess","refetch","getBaseUrl","createTRPCNext","config","links","httpBatchLink","url","maxURLLength","overrides","opts","originalFn","queryClient","invalidateQueries","ssr","proxyClient","createTRPCProxyClient","__webpack_exports__","Z"],"sourceRoot":""}