(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7370],{17799:function(){},57582:function(){},93637:function(e,t,r){"use strict";r.d(t,{DN:function(){return g},NI:function(){return m}});var n=r(85232),a=r.n(n),i=r(46175),o=r.n(i),s=r(41877),l=r(85982),c=r.n(l),u=r(33619),d=r.n(u),f={darkMode:"class",content:["./pages/**/*.{js,ts,jsx,tsx}","./components/**/*.{js,ts,jsx,tsx}","./helpers/**/*.{js,ts,jsx,tsx}","./app/**/*.{js,ts,jsx,tsx}","./data/**/*.{js,ts,jsx,tsx}"],theme:{container:{center:!0,padding:"2rem",screens:{"2xl":"1400px"}},extend:{fontFamily:{sans:["var(--inter-font)",...o().fontFamily.sans]},keyframes:{ping:{"0%":{opacity:"100"},"75%, 100%":{transform:"scale(2)",opacity:"0"}},"accordion-down":{from:{height:"0"},to:{height:"var(--radix-accordion-content-height)"}},"accordion-up":{from:{height:"var(--radix-accordion-content-height)"},to:{height:"0"}}},animation:{"spin-fast":"spin 0.5s linear infinite","accordion-down":"accordion-down 0.2s ease-out","accordion-up":"accordion-up 0.2s ease-out"},colors:{brand:{50:"#f2ffe1",100:"#deffcc",200:"#bdff99",300:"#9cff66",400:"#7bff33",500:"#5aff00",600:"#48cc00",700:"#369900",800:"#246600",900:"#123300"},border:"hsl(var(--border))",input:"hsl(var(--input))",ring:"hsl(var(--ring))",background:"hsl(var(--background))",foreground:"hsl(var(--foreground))",primary:{DEFAULT:"hsl(var(--brand-400) / 50%)",foreground:"hsl(var(--white))"},secondary:{DEFAULT:"hsl(var(--secondary))",foreground:"hsl(var(--white))"},destructive:{DEFAULT:"hsl(var(--red-400))",foreground:"hsl(var(--black))"},muted:{DEFAULT:"hsl(var(--muted))",foreground:"hsl(var(--muted-foreground))"},accent:{DEFAULT:"hsl(var(--accent))",foreground:"hsl(var(--white))"},popover:{DEFAULT:"hsl(var(--popover))",foreground:"hsl(var(--popover-foreground))"},card:{DEFAULT:"hsl(var(--card))",foreground:"hsl(var(--card-foreground))"}},borderRadius:{lg:"var(--radius)",md:"calc(var(--radius) - 2px)",sm:"calc(var(--radius) - 4px)"},fontSize:{"2xs":"0.6rem",s:"0.8125rem"},containers:{"screen-sm":"640px","screen-md":"768px","screen-lg":"1024px","screen-xl":"1280px","screen-2xl":"1536px"}}},plugins:[r(79608),r(53094),r(49513),r(64037)({nocompatible:!0}),function(e){let{addBase:t,theme:r}=e;t({":root":Object.fromEntries(Object.entries((0,s.default)(r("colors"))).map(e=>{let[t,r]=e,n=c().hex.hsl(r);return["--".concat(t),r.startsWith("#")?"".concat(n[0]," ").concat(n[1],"% ").concat(n[2],"%"):r]}))})},function(e){let{matchUtilities:t,theme:r}=e;t({"bg-grid":e=>({backgroundImage:'url("'.concat(d()('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32" fill="none" stroke="'.concat(e,'"><path d="M0 .5H31.5V32"/></svg>')),'")')}),"bg-grid-small":e=>({backgroundImage:'url("'.concat(d()('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="8" height="8" fill="none" stroke="'.concat(e,'"><path d="M0 .5H31.5V32"/></svg>')),'")')}),"bg-dot":e=>({backgroundImage:'url("'.concat(d()('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="16" height="16" fill="none"><circle fill="'.concat(e,'" id="pattern-circle" cx="10" cy="10" r="1.6257413380501518"></circle></svg>')),'")')})},{values:(0,s.default)(r("backgroundColor")),type:"color"})}]};let p=a()(f),m=p.theme.colors,g=Object.fromEntries(Object.keys(m).filter(e=>{let t=m[e];return null!=t&&"string"!=typeof t&&!("DEFAULT"in t)}).map(e=>[e,m[e]]))},98814:function(e,t,r){"use strict";r.d(t,{b:function(){return ChartTheme}});var n=r(97134);let ChartTheme=class ChartTheme extends n.SciChartJSDarkv2Theme{constructor(){super(),this.sciChartBackground="transparent",this.loadingAnimationBackground="transparent",this.axisBandsFill="#20212333",this.majorGridLineBrush="#AAAAAA37",this.minorGridLineBrush="#77777719",this.strokePalette=["#F48420","#AE408E","#209FD9","#264B93"],this.fillPalette=["#F4842077","#AE408E77","#209FD977","#264B9377"],this.isLightBackground=!1}}},61518:function(e,t,r){"use strict";r.d(t,{GB:function(){return w},LM:function(){return g},QR:function(){return useADXLSignalChart},ZA:function(){return usePSDChart},as:function(){return y},ck:function(){return h},to:function(){return getPSDTooltipLegendTemplate},wx:function(){return u}});var n=r(97134),a=r(72579),i=r(98814),o=r(73047),s=r.n(o),l=r(93637),c=r(49738);let u=128;n.SciChartSurface.configure({wasmUrl:"/configure/scichart2d.wasm",dataUrl:"/configure/scichart2d.data"}),n.SciChartSurface.UseCommunityLicense();let d=new i.b,f="signal",p="history",m="amplitude",g=131,getAxisColorName=e=>{switch(e){case"x":return"yellow";case"y":return"sky";case"z":return"rose";default:return"brand"}},getAxisColor=e=>l.NI[getAxisColorName(e)];new n.NumberRange(-1e4,1e4);let useADXLSignalChart=e=>(0,a.Q8)(null,(0,c.useCallback)(t=>{let r=getAxisColor(e),a=new n.CategoryAxis(t.webAssemblyContext2D,{id:f+e,autoRange:n.EAutoRange.Always,maxAutoTicks:u,drawLabels:!1,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1,drawMinorGridLines:!1,drawMajorGridLines:!1});t.xAxes.add(a);let i=new n.CategoryAxis(t.webAssemblyContext2D,{id:p+e,autoRange:n.EAutoRange.Always,drawLabels:!1,drawMinorGridLines:!1,drawMajorTickLines:!1});t.xAxes.add(i);let o=new n.NumericAxis(t.webAssemblyContext2D,{autoRange:n.EAutoRange.Never,visibleRange:new n.NumberRange(-1e3,1e3),drawLabels:!1,id:m+e,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1,drawMinorGridLines:!1,drawMajorGridLines:!1,axisAlignment:n.EAxisAlignment.Left});t.yAxes.add(o);let s=new n.XyDataSeries(t.webAssemblyContext2D,{fifoCapacity:u,containsNaN:!1,isSorted:!0,dataSeriesName:e.toLocaleUpperCase(),dataIsSortedInX:!0,xValues:Array(u).fill(0).map((e,t)=>t),yValues:Array(u).fill(0)}),l=new n.FastLineRenderableSeries(t.webAssemblyContext2D,{xAxisId:f+e,yAxisId:m+e,stroke:r[400],strokeThickness:2,dataSeries:s,effect:new n.GlowEffect(t.webAssemblyContext2D,{intensity:1,range:1})});t.renderableSeries.add(l);let c=new n.XyDataSeries(t.webAssemblyContext2D,{fifoCapacity:200*u,containsNaN:!1,isSorted:!0,dataSeriesName:e.toLocaleUpperCase()+" History",dataIsSortedInX:!0,xValues:Array(200*u).fill(0).map((e,t)=>t),yValues:Array(200*u).fill(0)}),d=new n.FastLineRenderableSeries(t.webAssemblyContext2D,{stroke:r[500]+"22",strokeThickness:1,opacity:.6,yAxisId:m+e,xAxisId:p+e,dataSeries:c});return t.renderableSeries.add(d),l.animation=new n.WaveAnimation({duration:500}),d.animation=new n.WaveAnimation({duration:500}),{signalData:s,signalSeries:l,historyData:c,historySeries:d,xAxis:a,xHistoryAxis:i,yAxis:o}},[e])),h="amplitude",y=new n.NumberRange(0,1500),w={surface:{theme:d,padding:n.Thickness.fromNumber(0)},xAxes:[{type:n.EAxisType.NumericAxis,options:{visibleRange:new n.NumberRange(0,200),labelStyle:{...s().style,fontSize:13,fontWeight:"600",padding:new n.Thickness(15,15,15,15)},labelPostfix:"Hz",drawMinorGridLines:!0,minorsPerMajor:10,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1}}],yAxes:[{type:n.EAxisType.NumericAxis,options:{id:h,axisAlignment:n.EAxisAlignment.Left,growBy:new n.NumberRange(0,.1),visibleRange:y,labelFormat:n.ENumericFormat.Exponential,labelStyle:{...s().style,fontSize:13,fontWeight:"600",padding:new n.Thickness(15,15,15,15)},autoRangeAnimation:{duration:140,animateInitialRanging:!1,animateSubsequentRanging:!0,easing:n.easing.inOutCubic},drawMinorGridLines:!0,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1,axisTitleStyle:{fontSize:10}}}]},x={...w,series:[{type:n.ESeriesType.MountainSeries,options:{id:"total",yAxisId:h,strokeThickness:3,fill:l.NI.brand[500]+"22",stroke:l.NI.brand[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(g).fill(0).map((e,t)=>Math.floor(t/g*200)),yValues:Array(g).fill(0).map((e,t)=>0)}},{type:n.ESeriesType.LineSeries,options:{id:"z",yAxisId:h,strokeThickness:3,stroke:getAxisColor("z")[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(g).fill(0).map((e,t)=>Math.floor(t/g*200)),yValues:Array(g).fill(0).map((e,t)=>0)}},{type:n.ESeriesType.LineSeries,options:{id:"y",yAxisId:h,strokeThickness:3,stroke:getAxisColor("y")[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(g).fill(0).map((e,t)=>Math.floor(t/g*200)),yValues:Array(g).fill(0).map((e,t)=>0)}},{type:n.ESeriesType.LineSeries,options:{id:"x",yAxisId:h,strokeThickness:3,stroke:getAxisColor("x")[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(g).fill(0).map((e,t)=>Math.floor(t/g*200)),yValues:Array(g).fill(0).map((e,t)=>0)}}]},getPSDTooltipLegendTemplate=(e,t)=>{let r="",a=32,i=[];e.forEach((e,t)=>{let o=e.renderableSeries.rolloverModifierProps.tooltipColor;if(i.push("".concat(e.renderableSeries.rolloverModifierProps.tooltipTitle).concat(":"," ").concat((e.yValue/1e3).toFixed(2)," g^2/Hz @ ").concat(e.formattedXValue)),r+='<text x="'.concat(16,'" y="').concat(a,'" class="text-sm text-medium font-sans" fill="').concat(l.DN[o][400],'">\n		<tspan class="font-bold">').concat(e.renderableSeries.rolloverModifierProps.tooltipTitle,"</tspan>").concat(":"," ").concat((e.yValue/1e3).toFixed(2),' g<tspan y="').concat(a-4,'" class="sup">2</tspan><tspan y=').concat(a,">/Hz</tspan>@ ").concat(e.formattedXValue,"\n		</text>"),a+=20,e.dataSeriesType===n.EDataSeriesType.Xyy){let t=e.renderableSeries.rolloverModifierProps1.tooltipColor;i.push("".concat(e.renderableSeries.rolloverModifierProps1.tooltipTitle).concat(":"," ").concat((e.y1Value/1e3).toFixed(2)," g^2/Hz @ ").concat(e.formattedXValue)),r+='<text x="'.concat(16,'" y="').concat(a,'" class="text-sm text-medium font-sans" fill="').concat(l.DN[t][400],'">\n				<tspan class="font-bold">').concat(e.renderableSeries.rolloverModifierProps1.tooltipTitle,"</tspan>").concat(":"," ").concat((e.y1Value/1e3).toFixed(2),' g<tspan y="').concat(a-4,'" class="sup">2</tspan><tspan y=').concat(a,">/Hz</tspan> @ ").concat(e.formattedXValue,"\n			</text>"),a+=20,r+='<text x="'.concat(16,'" y="').concat(a,'" class="text-sm text-medium font-sans" fill="').concat(l.DN.zinc[400],'">\n				<tspan class="font-bold">Amplitude Difference</tspan>').concat(":"," ").concat(Math.abs((e.y1Value-e.yValue)/1e3).toFixed(2),' g<tspan y="').concat(a-4,'" class="sup">2</tspan><tspan y=').concat(a,">/Hz</tspan>\n			</text>"),a+=20}});let o=0===e.length?0:16+1.7*calcTooltipWidth(i.reduce(function(e,t){return t.length>e?t.length:e},0)),s=0===e.length?0:a;return'<svg width="'.concat(o,'" height="').concat(s,'">\n				<rect rx="8" ry="8" width="100%" height="100%" class="stroke-zinc-400/10 fill-zinc-900/70 stroke-1" />\n                ').concat(r,"\n            </svg>")},psdRolloverTooltipTemplate=(e,t,r)=>{let a="",i=r.tooltipProps,o=i.tooltipTitle,s=i.tooltipColor,c=l.NI[s][100],u=(0,n.parseColorToTArgb)(l.NI[s][400]),d=(0,n.parseColorToTArgb)(l.NI[s][600]),f=i.tooltipLabelX,p=i.tooltipLabelY,m=l.NI[s][900];u.opacity=Math.round(204),d.opacity=Math.round(51);let g=null!==(b=r.tooltipProps.tooltipDataTemplate)&&void 0!==b?b:r.tooltipProps.rolloverModifier.tooltipDataTemplate,h=g(t,o,f,p),y=null!==(v=i.width)&&void 0!==v?v:calcTooltipWidth(h.reduce(function(e,t){return t.length>e?t.length:e},0)),w=null!==(S=i.height)&&void 0!==S?S:calcTooltipHeight(h.length);r.updateSize(y,w),h.forEach(function(e,t){a+='<tspan x="8" dy="1.2em">'.concat(e,"</tspan>")});let x='<feGaussianBlur result="blurOut" in="offOut" stdDeviation="3" />';if(void 0!==m){var b,v,S,A=(0,n.parseColorToTArgb)(m);x='\n			<feColorMatrix result="matrixOut" in="offOut" type="matrix"\n				values="0 0 0 0 \n				'.concat(A.red/255,"\n				0 0 0 0\n				").concat(A.green/255,"\n				0 0 0 0\n				").concat(A.blue/255,"\n				0 0 0 \n				").concat(A.opacity/255,'\n				0 0" \n			/>\n			<feGaussianBlur result="blurOut" in="matrixOut" stdDeviation="3" />')}return'\n		<svg class="scichart__rollover-tooltip transition-all" width="'.concat(y,'" height="').concat(w,'">\n			<defs>\n				<filter id="').concat(e,'" x="0" y="0" width="200%" height="200%">\n					<feOffset result="offOut" in="SourceAlpha" dx="3" dy="3" />\n						\n						').concat(x,'\n					<feBlend in="SourceGraphic" in2="blurOut" mode="normal" />\n				</filter>\n			</defs>\n			<rect rx="8" ry="8" width="100%" height="100%" fill="').concat((0,n.parseTArgbToHtmlColor)(d),'" stroke="').concat((0,n.parseTArgbToHtmlColor)(u),'" stroke-width="2"  filter="url(#').concat(e,'" />\n			<svg width="100%">\n				<text x="8" y="3" class="text-sm font-sans font-semibold" dy="0" fill="').concat(c,'">\n				').concat(a,"\n				</text>\n			</svg>\n		</svg>")},getTooltipDataTemplate=(e,t,r,n)=>{let a=[];return a.push(t),a.push('<tspan class="opacity-70 font-medium">'.concat(e.formattedYValue," @ ").concat(e.formattedXValue,"</tspan>")),a},usePSDChart=()=>(0,a.Q8)(x,(0,c.useCallback)(e=>{let t=new n.XyDataSeries(e.webAssemblyContext2D,{id:"xAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});e.addDeletable(t);let r=new n.XyDataSeries(e.webAssemblyContext2D,{id:"yAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});e.addDeletable(r);let a=new n.XyDataSeries(e.webAssemblyContext2D,{id:"zAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});e.addDeletable(a);let i=new n.XyDataSeries(e.webAssemblyContext2D,{id:"totalAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});return e.addDeletable(i),e.renderableSeries.asArray().forEach(t=>{"total"===t.id&&(t.paletteProvider=n.PaletteFactory.createGradient(e.webAssemblyContext2D,new n.GradientParams(new n.Point(0,0),new n.Point(1,1),[{offset:0,color:l.NI.brand[400]},{offset:.8,color:l.NI.brand[600]}]),{enableStroke:!0,enableFill:!0,fillOpacity:.17,pointMarkerOpacity:.5})),t.rolloverModifierProps.tooltipColor=getAxisColorName(t.id),t.rolloverModifierProps.tooltipTemplate=psdRolloverTooltipTemplate,t.rolloverModifierProps.tooltipTitle=t.id.substring(0,1).toUpperCase()+t.id.substring(1)+" Power Spectral Density",t.animation=new n.WaveAnimation({duration:500})}),e.chartModifiers.add(new n.RolloverModifier({showRolloverLine:!0,showTooltip:!1,yAxisId:h,tooltipDataTemplate:getTooltipDataTemplate})),e.chartModifiers.add(new n.CursorModifier({crosshairStroke:l.NI.sky[400],crosshairStrokeThickness:1,showXLine:!0,showYLine:!0,showTooltip:!1,yAxisId:h,axisLabelFill:l.NI.zinc[900],axisLabelStroke:l.NI.zinc[100]})),{animationSeries:{x:t,y:r,z:a,total:i}}},[]));var calcTooltipWidth=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e*t+20},calcTooltipHeight=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return t*e+16}},72579:function(e,t,r){"use strict";r.d(t,{Dv:function(){return useADXLFifoTensor},Gs:function(){return useBufferedPSD},O3:function(){return useBufferedADXLSignal},Q8:function(){return useChart},Tv:function(){return useDynamicAxisRange},ag:function(){return useAccumulatedPSD},kP:function(){return useTicker},xc:function(){return useRealtimeSensor}});var n=r(26248),a=r(43790),i=r(26989),o=r(49738),s=r(87155),l=r(68705),c=r(97134),u=r(92427);r(39615);var d=r(44343),f=r(61518),p=r(98814),m=r(6363),g=r(50962),h=r(57812),y=r(98055),w=r(21899),x=r(55797),b=r(48418),v=r(33334);let getWsURL=()=>{let e=(0,i.X)();return null==e||""==e.trim()?null:"ws://".concat(e,":7125/klippysocket")},S=0,isSuccessResponse=e=>!("error"in e),useAccelerometerWithType=e=>{let t=(0,x.sJ)(b.OS),r=(0,v.YC)(),n="adxl345";if("controlboard"===e&&((null==t?void 0:t.ADXL345SPI)!=null&&(n="adxl345"),(null==t?void 0:t.LIS2DW)!=null&&(n="lis2dw")),"toolboard_t0"===e||"toolboard_t1"===e){var a;let t=null===(a=r.find(t=>t.getToolboardName()===e))||void 0===a?void 0:a.getToolboard();if(null==t)throw Error("No toolboard found for T0");null!=t.ADXL345SPI&&(n="adxl345"),null!=t.LIS2DW&&(n="lis2dw")}return w.U9.parse({name:e,type:n})},useRealtimeSensor=e=>{let[t,r]=(0,o.useState)(getWsURL()),n=(0,o.useRef)({}),i=(0,o.useRef)({}),[c,u]=(0,o.useState)(!1),{onSubscriptionFailure:d,onDataUpdate:f,sensor:p,enabled:g,onSubscriptionSuccess:h}=e,w=useAccelerometerWithType(p),x=(0,o.useRef)(c);x.current=c;let b=(0,l.n)();(0,o.useEffect)(()=>{r(getWsURL())},[]);let{lastJsonMessage:v,sendJsonMessage:A,readyState:T}=(0,a.ZP)(!1===g?null:t,{shouldReconnect:e=>!0,onMessage:e=>{if(f&&x.current)try{let t=JSON.parse(e.data);if(isSuccessResponse(t)&&null!=t.params&&"data"in t.params){let e=m.o5.parse(t.params);null==f||f(e)}else isSuccessResponse(t)||(0,s.j)().error("Error in response from klipper socket",t)}catch(t){console.warn("OnMessage: Failed to parse message",t,e.data)}},reconnectAttempts:1/0,reconnectInterval:3e3,share:!1}),R=(0,o.useCallback)(async()=>{let e=++S;return new Promise((t,r)=>{n.current[e]=(e,n)=>e?r(e):n&&"object"==typeof n&&"error"in n&&n.error?r(n.error):null==n?r(Error("No result. Unknown response format.")):void t(n),i.current[e]=window.setTimeout(()=>{var t,r;null===(t=(r=n.current)[e])||void 0===t||t.call(r,Error("Request timed out"),null),delete n.current[e],delete i.current[e]},1e4),A({jsonrpc:"2.0",method:"lis2dw"===w.type?"lis2dw/dump_lis2dw":"adxl345/dump_adxl345",params:{sensor:w.name,response_template:{}},id:e})})},[A,w]);return(0,o.useEffect)(()=>{1!==T||"ready"!==b||x.current?x.current&&u(!1):R().then(e=>{let t=m.NI.parse(e);(0,s.j)().info(t,"Subscribed to ADXL345"),u(!0),null==h||h(t.header)}).catch(e=>{(0,s.j)().error(e),u(!1),d?d(e):y.A.error("Failed to start accelerometer stream",{description:e.message})})},[b,T,R,d,h]),(0,o.useEffect)(()=>{(null==v?void 0:v.id)&&n.current[v.id]&&(window.clearTimeout(i.current[v.id]),isSuccessResponse(v)?n.current[v.id](null,v.result):n.current[v.id](Error(v.error.message),null),delete i.current[v.id],delete n.current[v.id])},[v]),(0,o.useEffect)(()=>()=>{for(let e in x.current=!1,i.current)delete i.current[e],delete n.current[e]},[]),{isSubscribed:c}},A=new p.b,useChart=function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=(0,o.useRef)(null),[i,s]=(0,o.useState)(!1),l=(0,o.useRef)(null);return(0,o.useMemo)(()=>({forwardProps:{initChart:async n=>{let i=null;if(null!=e){var o,s,u,d,f;let t=null===(o=e.surface)||void 0===o?void 0:o.padding,a={...e,surface:{...e.surface,padding:new c.Thickness(null!==(s=null==t?void 0:t.top)&&void 0!==s?s:0,null!==(u=null==t?void 0:t.right)&&void 0!==u?u:0,null!==(d=null==t?void 0:t.bottom)&&void 0!==d?d:0,(null!==(f=null==t?void 0:t.left)&&void 0!==f?f:0)+(r?300:0))}};i=await (0,c.build2DChart)(n,a)}else i=await c.SciChartSurface.create(n,{theme:A,padding:new c.Thickness(0,0,0,r?300:0)});return i.sciChartSurface.watermarkPosition=c.EWatermarkPosition.BottomLeft,i.sciChartSurface.watermarkRelativeToCanvas=!0,a.current=i.sciChartSurface,t&&(l.current=t(i.sciChartSurface)),{sciChartSurface:i.sciChartSurface}},onInit:()=>s(!0),style:{marginLeft:r?-300:0},fallback:(0,n.jsx)(h.I,{className:(0,g.d)(r&&"ml-[150px]","bg-zinc-900")})},surface:a,isInitialized:i,data:l}),[r,i,e,t])},T=["time","x_acceleration","y_acceleration","z_acceleration"],useADXLFifoTensor=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8192,r=(0,o.useRef)(null),n=(0,o.useRef)(0),[a,i]=(0,o.useState)(0),s=(0,o.useCallback)(e=>{if(null==r.current)return null;let t=Math.min(e,r.current.shape[0]),[n,a]=(0,u.Vl2)(r.current,[t,r.current.shape[0]-t],0);return r.current.dispose(),r.current=a,n},[]),l=(0,o.useMemo)(()=>[e.findIndex(e=>e.startsWith("time")),e.findIndex(e=>e.startsWith("x_acceleration")),e.findIndex(e=>e.startsWith("y_acceleration")),e.findIndex(e=>e.startsWith("z_acceleration"))],[e]),c=(0,o.useCallback)(e=>{var a,o;let c=(0,u.Iqj)(e.data,l,1),d=r.current?(0,u.Izb)([r.current,c],0):c;if(d!==c&&c.dispose(),null===(a=r.current)||void 0===a||a.dispose(),r.current=d,n.current=e.data.length/(e.data[e.data.length-1][0]-e.data[0][0]),r.current.shape[0]>t){console.debug("Fifo capacity exceeded, dropping frames",r.current.shape[0]);let e=r.current.shape[0]-t;null===(o=s(e))||void 0===o||o.dispose(),i(t=>t+e)}},[l,t,s]);return(0,o.useEffect)(()=>()=>{var e;null===(e=r.current)||void 0===e||e.dispose(),r.current=null},[]),{onData:c,take:s,buffer:r,dropped:a,sampleRate:n}},useBufferedADXLSignal=(e,t)=>{let r=(0,o.useRef)(new Date().getTime()),n=(0,o.useRef)(t);n.current=t;let a=(0,o.useCallback)(async()=>{var t;if(new Date().getTime(),r.current,null==e.buffer.current||e.buffer.current.shape[0]<f.wx/2)return;let a=f.wx/2;e.buffer.current.shape[0]>12*f.wx&&(a+=f.wx);let i=e.take(a);if(null==i)return;let[o,s,l,c]=(0,u.Vl2)(i,4,1);null===(t=n.current)||void 0===t||t.call(n,(0,u.XLQ)(o,[o.shape[0]]),(0,u.XLQ)(s,[s.shape[0]]),(0,u.XLQ)(l,[l.shape[0]]),(0,u.XLQ)(c,[c.shape[0]])),o.dispose(),i.dispose(),s.dispose(),l.dispose(),c.dispose()},[e]);return a},useBufferedPSD=(e,t)=>{let r=(0,o.useRef)((0,u.RRF)([])),n=(0,o.useRef)((0,u.RRF)([])),a=(0,o.useRef)((0,u.RRF)([])),i=(0,o.useRef)(t);i.current=t;let s=(0,o.useCallback)(async(t,o,s,l,c)=>{let f=e.current,p=(0,u.zoF)([o,r.current]),m=(0,u.zoF)([s,n.current]),g=(0,u.zoF)([l,a.current]);if(o.dispose(),s.dispose(),l.dispose(),t.dispose(),r.current.dispose(),n.current.dispose(),a.current.dispose(),r.current=p,n.current=m,a.current=g,r.current.shape[0]>f){var h;let e=r.current.clone(),t=n.current.clone(),o=a.current.clone(),s=(0,u.QBD)([e,t,o]);r.current.dispose(),n.current.dispose(),a.current.dispose(),r.current=(0,u.RRF)([]),n.current=(0,u.RRF)([]),a.current=(0,u.RRF)([]);let[l,p,m]=await Promise.all([(0,d.i2)(e,f,{isDetrended:c}),(0,d.i2)(t,f,{isDetrended:c}),(0,d.i2)(o,f,{isDetrended:c})]),g=(0,d.L)([l,p,m]);e.dispose(),t.dispose(),o.dispose(),s.dispose(),null===(h=i.current)||void 0===h||h.call(i,l,p,m,g)}},[e]);return s},useAccumulatedPSD=e=>{let[t,r]=(0,o.useState)(!1),n=(0,o.useRef)({x:[],y:[],z:[],total:[]}),a=(0,o.useRef)(e);a.current=e;let i=(0,o.useCallback)(async()=>{n.current={x:[],y:[],z:[],total:[]},r(!0)},[]),s=(0,o.useCallback)(async()=>{let e=n.current,[t,a,i,o]=await Promise.all([(0,d.r5)(e.x),(0,d.r5)(e.y),(0,d.r5)(e.z),(0,d.r5)(e.total)]);return n.current={x:[],y:[],z:[],total:[]},r(!1),{x:t,y:a,z:i,total:o,source:e}},[]),l=(0,o.useCallback)(async(e,r,i,o)=>{var s,l;if(!t){let t={x:e,y:r,z:i,total:o,source:{x:[e],y:[r],z:[i],total:[o]}};return null===(l=a.current)||void 0===l||l.call(a,t),t}n.current.x.push(e),n.current.y.push(r),n.current.z.push(i),n.current.total.push(o);let[c,u,f,p]=await Promise.all([(0,d.r5)(n.current.x),(0,d.r5)(n.current.y),(0,d.r5)(n.current.z),(0,d.r5)(n.current.total)]),m={x:c,y:u,z:f,total:p,source:n.current};return null===(s=a.current)||void 0===s||s.call(a,m),m},[t]);return(0,o.useMemo)(()=>({startAccumulation:i,stopAccumulation:s,onData:l,isAccumulating:t}),[t,l,i,s])};function useTicker(e,t){if("function"==typeof e&&(t=e),null==t)throw Error("Tick function is required");let r=(0,o.useRef)(t);r.current=t;let n=Math.floor(1e3/("function"==typeof e?50:e));(0,o.useEffect)(()=>{let e=0,update=async()=>{await r.current(),e=window.setTimeout(update,n)};return e=window.setTimeout(update,n),()=>{window.clearTimeout(e)}},[n])}let maximumRangeUnion=e=>Array.isArray(e)?e.reduce((e,t)=>{if(null==t)return e;let r=t.getMaximumRange();return e.union(r)},new c.NumberRange):e.getMaximumRange(),visibleRangeUnion=e=>Array.isArray(e)?e.reduce((e,t)=>{if(null==t)return e;let r=t.visibleRange;return e.union(r)},new c.NumberRange):e.visibleRange,growByUnion=e=>Array.isArray(e)?e.reduce((e,t)=>{var r;if(null==t)return e;let n=null!==(r=t.growBy)&&void 0!==r?r:new c.NumberRange;return e.union(n)},new c.NumberRange):e.growBy;function useDynamicAxisRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c.NumberRange(0,0),r=(0,o.useRef)(e?maximumRangeUnion(e):null),n=(0,o.useRef)(new Date().getTime()),a=(0,o.useRef)(new Date().getTime()),i=(0,o.useCallback)(function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;if(null==e)return;let o=Array.isArray(e)?e:[e];null==r.current&&(r.current=visibleRangeUnion(e));let s=new Date().getTime()-n.current,l=new Date().getTime()-a.current;n.current=new Date().getTime();let u=maximumRangeUnion(e);i&&(u=u.union(i));let d=growByUnion(e);d&&u.growBy(d);let f=null,p=null;if(u.max>r.current.max&&(f=u.max),u.min<r.current.min&&(p=u.min),null!=f||null!=p){o.forEach(e=>{null!=r.current&&null!=e&&e.animateVisibleRange(new c.NumberRange(Math.min(null!=p?p:r.current.min,t.min),Math.max(null!=f?f:r.current.max,t.max)),s,c.easing.inOutCirc)}),a.current=new Date().getTime();return}if(l>3*s&&(u.max<r.current.max&&(f=r.current.max-(r.current.max-u.max)),u.min>r.current.min&&(p=r.current.min+(u.min-r.current.min)),null!=f||null!=p)){o.forEach(e=>{null!=r.current&&null!=e&&e.animateVisibleRange(new c.NumberRange(Math.min(null!=p?p:r.current.min,t.min),Math.max(null!=f?f:r.current.max,t.max)),s/2,c.easing.inOutCirc)}),a.current=new Date().getTime();return}},[e,t]);return i}},44343:function(e,t,r){"use strict";r.d(t,{L:function(){return sumPSDs},i2:function(){return powerSpectralDensity},iQ:function(){return detrendSignal},r5:function(){return welch}});var n=r(92427);r(39615);var a=r(97134);let detrendSignal=e=>(0,n.lub)(()=>(0,n.luU)(e,(0,n.J69)(e,0,!0)));async function powerSpectralDensity(e,t,r){let{fftSize:i,_scaling:o}=Object.assign({fftSize:1<<Math.ceil(Math.log2(Math.abs(.5*t-1))),_scaling:"psd"},r);if("psd"!=o&&"none"!=o)throw Error("Unknown scaling");let s="none"===o?1:2,l=n.tdS.hannWindow(i),c=await (0,n.lub)(()=>(0,n.hiC)((0,n.hiC)(1,(0,n.Smz)((0,n.sQ3)(l,2))),t)).array(),u=(null==r?void 0:r.isDetrended)?e:detrendSignal(e),d=n.tdS.stft(u,i,Math.floor(i/2),i,n.tdS.hannWindow),f=await d.array();return d.dispose(),u.dispose(),l.dispose(),welch(f.map(e=>{let r=[],n=[],l=0,u=0;for(var d=0;d<e.length-1;d+=2){let a=(0===d?0:d/2)*(t/i);if(a>200)continue;let f=(d+2)/2*(t/i),p=e[d]**2+e[d+1]**2;p*=c,"psd"==o&&d>0&&f<200&&(p*=s),p>l&&(l=p),p<u&&(u=p),r.push(p),n.push(a)}return{estimates:r,frequencies:n,powerRange:new a.NumberRange(u,l)}}))}let welch=async e=>{if(0==e.length)throw Error("Unable to calculate any PSD estimates");if(1==e.length)return console.warn("Not enough data to compute more than one segment, returning single modified periodogram."),e[0];let t=e[0].estimates.length,r=Array(t).fill(0);for(let n=0;n<e.length;n++)for(let a=0;a<t;a++)r[a]+=e[n].estimates[a];let n=0,i=0;for(let a=0;a<t;a++)r[a]=r[a]/e.length,r[a]>n&&(n=r[a]),r[a]<i&&(i=r[a]);return{estimates:r,frequencies:e[0].frequencies,powerRange:new a.NumberRange(i,n)}},sumPSDs=e=>{let t=e[0].estimates.length,r=Array(t).fill(0);for(let n=0;n<e.length;n++)for(let a=0;a<t;a++)r[a]+=e[n].estimates[a];let{minPower:n,maxPower:i}=e.reduce((e,t)=>(t.powerRange.min<e.minPower&&(e.minPower=t.powerRange.min),t.powerRange.max>e.maxPower&&(e.maxPower=t.powerRange.max),e),{minPower:0,maxPower:0});return{estimates:r,frequencies:e[0].frequencies,powerRange:new a.NumberRange(n,i)}}},57812:function(e,t,r){"use strict";r.d(t,{I:function(){return FullLoadScreen}});var n=r(26248),a=r(81503),i=r(50962);let FullLoadScreen=e=>(0,n.jsx)("div",{className:(0,i.d)("flex h-full w-full flex-1 items-center justify-center",e.className),children:(0,n.jsx)(a.$,{className:"h-8 w-8"})})},69009:function(e,t,r){"use strict";r.r(t),r.d(t,{NoSSR:function(){return NoSSR}});var n=r(26248),a=r(17533),i=r(49738),o=r(57812);let NoSSR=e=>{var t;let r=(0,a.O)();return r?(0,n.jsx)(s,{children:e.children}):null!==(t=e.fallback)&&void 0!==t?t:(0,n.jsx)(o.I,{})},s=(0,i.lazy)(()=>Promise.resolve({default:e=>(0,n.jsx)(n.Fragment,{children:e.children})}))},68705:function(e,t,r){"use strict";r.d(t,{n:function(){return useKlippyStateHandler}});var n=r(49738),a=r(61352);let useKlippyStateHandler=()=>{let{query:e,lastMessage:t}=(0,a.oK)({passThroughUpdateMethods:["notify_klippy_ready","notify_klippy_shutdown","notify_klippy_disconnected"]}),[r,i]=(0,n.useState)("unknown"),o=(0,n.useCallback)(async()=>{if(null!=e)try{let t=await e("server.info");if((null==t?void 0:t.klippy_state)==null)return;let r=t.klippy_state;i(r),"startup"===r&&setTimeout(()=>{o()},2e3)}catch(e){i("unknown")}},[e,i]);return(0,n.useEffect)(()=>{null!=e&&o()},[e,o]),(0,n.useEffect)(()=>{t&&"method"in t&&"notify_klippy_ready"===t.method&&i("ready"),t&&"method"in t&&"notify_klippy_shutdown"===t.method&&i("shutdown"),t&&"method"in t&&"notify_klippy_disconnected"===t.method&&(i("unknown"),o())},[t,o,i]),r}},6363:function(e,t,r){"use strict";r.d(t,{NI:function(){return o},Xz:function(){return w},o5:function(){return s}});var n=r(94594),a=r(21899);let i=n.z.union([n.z.literal("time"),n.z.literal("x_acceleration"),n.z.literal("y_acceleration"),n.z.literal("z_acceleration")]),o=n.z.object({header:n.z.tuple([i,i,i,i])}),s=n.z.object({data:n.z.array(n.z.tuple([n.z.number(),n.z.number(),n.z.number(),n.z.number()])),overflows:n.z.number().optional()}),l=n.z.object({frequencies:n.z.array(n.z.number()),estimates:n.z.array(n.z.number()),powerRange:n.z.object({max:n.z.number(),min:n.z.number()})}),c=n.z.object({x:l,y:l,z:l,total:l,source:n.z.object({x:n.z.array(l),y:n.z.array(l),z:n.z.array(l),total:n.z.array(l)})}),u=n.z.string().brand("MacroID"),d=n.z.string().brand("MacroSequenceID"),f=n.z.string().brand("MacroRecordingID"),p=n.z.string().brand("MacroRecordingRunID"),m=n.z.object({capturePSD:n.z.boolean().default(!1),accelerometer:a.Yx.optional(),color:n.z.string().optional()}).superRefine((e,t)=>(e.capturePSD&&null==e.accelerometer&&t.addIssue({code:n.z.ZodIssueCode.custom,message:"Required when recording resonance data",path:["accelerometer"]}),e)),g=n.z.object({id:f,macroRecordingRunId:p,macroId:u,sequenceId:d,startTimeStamp:n.z.number(),endTimeStamp:n.z.number(),accelerometer:a.Yx,recordingHardwareName:n.z.string(),psd:c,name:n.z.string()});g.extend({psd:c.omit({source:!0})});let h=n.z.object({id:d,name:n.z.string(),recording:m.nullable(),gcode:n.z.string().min(2)}),y=n.z.object({id:u,name:n.z.string(),description:n.z.string(),createdAtTimeStamp:n.z.number(),updatedAtTimeStamp:n.z.number().nullable(),recordingCount:n.z.record(d,n.z.number()),sequences:n.z.array(h)}),w=y.omit({recordingCount:!0,createdAtTimeStamp:!0,updatedAtTimeStamp:!0})}}]);
//# sourceMappingURL=7370-c01c4600f929eefe.js.map