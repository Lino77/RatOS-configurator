{"version":3,"file":"static/chunks/2345-ef26f4512ecf2c98.js","mappings":"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","sources":["webpack://_N_E/ignored|/home/runner/work/RatOS-configurator/RatOS-configurator/src/node_modules/.pnpm/object-inspect@1.13.1/node_modules/object-inspect|./util.inspect","webpack://_N_E/./app/_helpers/logger.ts","webpack://_N_E/./components/common/badge.tsx","webpack://_N_E/./components/sync-with-moonraker.tsx","webpack://_N_E/./data/drivers.ts","webpack://_N_E/./components/ui/typography.tsx","webpack://_N_E/./data/fans.tsx","webpack://_N_E/./data/nozzles.ts","webpack://_N_E/./data/steppers.ts","webpack://_N_E/./helpers/logger.ts","webpack://_N_E/./helpers/toolhead.ts","webpack://_N_E/./helpers/trpc.ts","webpack://_N_E/./helpers/util.ts","webpack://_N_E/./helpers/utils.ts","webpack://_N_E/./hooks/usePrinterConfiguration.tsx","webpack://_N_E/./moonraker/migrations.ts","webpack://_N_E/./moonraker/hooks.tsx","webpack://_N_E/./recoil/printer.ts","webpack://_N_E/./recoil/toolhead.ts","webpack://_N_E/./utils/serialization.ts","webpack://_N_E/./utils/trpc.ts","webpack://_N_E/./zods/boards.tsx","webpack://_N_E/./zods/hardware.tsx","webpack://_N_E/./zods/motion.tsx","webpack://_N_E/./zods/printer-configuration.tsx","webpack://_N_E/./zods/printer.tsx","webpack://_N_E/./zods/toolhead.tsx","webpack://_N_E/./zods/util.tsx","webpack://_N_E/./env/schema.mjs","webpack://_N_E/<anon>"],"sourcesContent":["/* (ignored) */","import pino from 'pino';\nimport { globalPinoOpts } from '@/helpers/logger';\nimport { trpcClient } from '@/helpers/trpc';\nimport { PinoLogEvent } from '@/zods/util';\nimport { prettyFactory, write } from 'pino-pretty-browser';\n\nconst send = async function (level: pino.Level, logEvent: pino.LogEvent) {\n\ttrpcClient.clientLog.mutate({ level, logEvent: PinoLogEvent.parse(logEvent) });\n};\n\nlet logger: pino.Logger | null = null;\nexport const getLogger = () => {\n\tif (logger != null) {\n\t\treturn logger;\n\t}\n\tlogger = pino({\n\t\t...globalPinoOpts,\n\t\tbrowser: {\n\t\t\ttransmit: {\n\t\t\t\tsend,\n\t\t\t},\n\t\t},\n\t});\n\treturn logger;\n};\n","import { VariantProps, cva } from 'class-variance-authority';\nimport { twMerge } from 'tailwind-merge';\nimport { z } from 'zod';\n\nexport const badgeColorOptions = z.union([\n\tz.literal('rose'),\n\tz.literal('red'),\n\tz.literal('yellow'),\n\tz.literal('orange'),\n\tz.literal('green'),\n\tz.literal('lime'),\n\tz.literal('blue'),\n\tz.literal('sky'),\n\tz.literal('indigo'),\n\tz.literal('purple'),\n\tz.literal('pink'),\n\tz.literal('brand'),\n\tz.literal('gray'),\n\tz.literal('plain'),\n]);\nexport const badgeTextColorStyle = cva('', {\n\tvariants: {\n\t\tcolor: {\n\t\t\trose: 'text-rose-700 dark:text-rose-400',\n\t\t\tred: 'text-red-700 dark:text-red-400',\n\t\t\tyellow: 'text-yellow-800 dark:text-yellow-500',\n\t\t\torange: 'text-orange-800 dark:text-orange-500',\n\t\t\tgreen: 'text-green-700 dark:text-green-400',\n\t\t\tlime: 'text-lime-700 dark:text-lime-400',\n\t\t\tblue: 'text-blue-700 dark:text-blue-400',\n\t\t\tsky: 'text-sky-700 dark:text-sky-400',\n\t\t\tindigo: 'text-indigo-700 dark:text-indigo-400',\n\t\t\tpurple: 'text-purple-700 dark:text-purple-400',\n\t\t\tpink: 'text-pink-700 dark:text-pink-400',\n\t\t\tbrand: 'text-brand-700 dark:text-brand-400',\n\t\t\tgray: 'text-zinc-600 dark:text-zinc-400',\n\t\t\tplain: 'text-zinc-900 dark:text-zinc-100',\n\t\t} satisfies { [key in z.infer<typeof badgeColorOptions>]: string },\n\t},\n});\n\nexport const badgeBackgroundColorStyle = cva('', {\n\tvariants: {\n\t\tcolor: {\n\t\t\trose: 'bg-rose-50 dark:bg-rose-400/10',\n\t\t\tred: 'bg-red-50 dark:bg-red-400/10',\n\t\t\tyellow: 'bg-yellow-50 dark:bg-yellow-400/10',\n\t\t\torange: 'bg-orange-50 dark:bg-orange-400/10',\n\t\t\tgreen: 'bg-green-50 dark:bg-green-500/10',\n\t\t\tlime: 'bg-lime-50 dark:bg-lime-500/10',\n\t\t\tblue: 'bg-blue-50 dark:bg-blue-400/10',\n\t\t\tsky: 'bg-sky-50 dark:bg-sky-400/10',\n\t\t\tindigo: 'bg-indigo-50 dark:bg-indigo-400/10',\n\t\t\tpurple: 'bg-purple-50 dark:bg-purple-400/10',\n\t\t\tpink: 'bg-pink-50 dark:bg-pink-400/10',\n\t\t\tbrand: 'bg-brand-100 dark:bg-brand-400/10',\n\t\t\tgray: 'bg-zinc-50 dark:bg-zinc-400/10',\n\t\t\tplain: 'bg-zinc-900/10 dark:bg-zinc-100/10',\n\t\t} satisfies { [key in z.infer<typeof badgeColorOptions>]: string },\n\t},\n});\n\nexport const badgeBorderColorStyle = cva('', {\n\tvariants: {\n\t\tcolor: {\n\t\t\trose: 'border-rose-600/10 dark:border-rose-400/20 ring-rose-600/10 dark:ring-rose-400/20',\n\t\t\tred: 'border-red-600/10 dark:border-red-400/20 ring-red-600/10 dark:ring-red-400/20',\n\t\t\tyellow: 'border-yellow-600/20 dark:border-yellow-400/20 ring-yellow-600/20 dark:ring-yellow-400/20',\n\t\t\torange: 'border-orange-600/20 dark:border-orange-400/20 ring-orange-600/20 dark:ring-orange-400/20',\n\t\t\tgreen: 'border-green-600/20 dark:border-green-500/20 ring-green-600/20 dark:ring-green-500/20',\n\t\t\tlime: 'border-lime-600/20 dark:border-lime-500/20 ring-lime-600/20 dark:ring-lime-500/20',\n\t\t\tblue: 'border-blue-700/10 dark:border-blue-400/30 ring-blue-700/10 dark:ring-blue-400/30',\n\t\t\tsky: 'border-sky-700/10 dark:border-sky-400/30 ring-sky-700/10 dark:ring-sky-400/30',\n\t\t\tindigo: 'border-indigo-700/10 dark:border-indigo-400/30 ring-indigo-700/10 dark:ring-indigo-400/30',\n\t\t\tpurple: 'border-purple-700/10 dark:border-purple-400/30 ring-purple-700/10 dark:ring-purple-400/30',\n\t\t\tpink: 'border-pink-700/10 dark:border-pink-400/20 ring-pink-700/10 dark:ring-pink-400/20',\n\t\t\tbrand: 'border-brand-600/40 dark:border-brand-400/30 ring-brand-600/40 dark:ring-brand-400/30',\n\t\t\tgray: 'border-zinc-500/10 dark:border-zinc-400/20 ring-zinc-500/10 dark:ring-zinc-400/20',\n\t\t\tplain: 'border-zinc-900 dark:border-zinc-100 ring-zinc-900 dark:ring-zinc-100',\n\t\t} satisfies { [key in z.infer<typeof badgeColorOptions>]: string },\n\t},\n});\n\nconst badgeStyle = cva('flex-0 inline-flex w-auto items-center rounded-md font-medium ring-1 ring-inset', {\n\tvariants: {\n\t\tsize: {\n\t\t\tsm: 'px-1.5 gap-1.5 py-1 text-2xs leading-3',\n\t\t\tmd: 'px-2 gap-2 py-1 text-xs leading-4',\n\t\t\tlg: 'px-2 gap-2 py-1 text-xs leading-6',\n\t\t},\n\t\tcolor: {\n\t\t\trose: [\n\t\t\t\tbadgeBackgroundColorStyle({ color: 'rose' }),\n\t\t\t\tbadgeBorderColorStyle({ color: 'rose' }),\n\t\t\t\tbadgeTextColorStyle({ color: 'rose' }),\n\t\t\t],\n\t\t\tred: [\n\t\t\t\tbadgeBackgroundColorStyle({ color: 'red' }),\n\t\t\t\tbadgeBorderColorStyle({ color: 'red' }),\n\t\t\t\tbadgeTextColorStyle({ color: 'red' }),\n\t\t\t],\n\t\t\tyellow: [\n\t\t\t\tbadgeBackgroundColorStyle({ color: 'yellow' }),\n\t\t\t\tbadgeBorderColorStyle({ color: 'yellow' }),\n\t\t\t\tbadgeTextColorStyle({ color: 'yellow' }),\n\t\t\t],\n\t\t\torange: [\n\t\t\t\tbadgeBackgroundColorStyle({ color: 'orange' }),\n\t\t\t\tbadgeBorderColorStyle({ color: 'orange' }),\n\t\t\t\tbadgeTextColorStyle({ color: 'orange' }),\n\t\t\t],\n\t\t\tgreen: [\n\t\t\t\tbadgeBackgroundColorStyle({ color: 'green' }),\n\t\t\t\tbadgeBorderColorStyle({ color: 'green' }),\n\t\t\t\tbadgeTextColorStyle({ color: 'green' }),\n\t\t\t],\n\t\t\tlime: [\n\t\t\t\tbadgeBackgroundColorStyle({ color: 'lime' }),\n\t\t\t\tbadgeBorderColorStyle({ color: 'lime' }),\n\t\t\t\tbadgeTextColorStyle({ color: 'lime' }),\n\t\t\t],\n\t\t\tblue: [\n\t\t\t\tbadgeBackgroundColorStyle({ color: 'blue' }),\n\t\t\t\tbadgeBorderColorStyle({ color: 'blue' }),\n\t\t\t\tbadgeTextColorStyle({ color: 'blue' }),\n\t\t\t],\n\t\t\tsky: [\n\t\t\t\tbadgeBackgroundColorStyle({ color: 'sky' }),\n\t\t\t\tbadgeBorderColorStyle({ color: 'sky' }),\n\t\t\t\tbadgeTextColorStyle({ color: 'sky' }),\n\t\t\t],\n\t\t\tindigo: [\n\t\t\t\tbadgeBackgroundColorStyle({ color: 'indigo' }),\n\t\t\t\tbadgeBorderColorStyle({ color: 'indigo' }),\n\t\t\t\tbadgeTextColorStyle({ color: 'indigo' }),\n\t\t\t],\n\t\t\tpurple: [\n\t\t\t\tbadgeBackgroundColorStyle({ color: 'purple' }),\n\t\t\t\tbadgeBorderColorStyle({ color: 'purple' }),\n\t\t\t\tbadgeTextColorStyle({ color: 'purple' }),\n\t\t\t],\n\t\t\tpink: [\n\t\t\t\tbadgeBackgroundColorStyle({ color: 'pink' }),\n\t\t\t\tbadgeBorderColorStyle({ color: 'pink' }),\n\t\t\t\tbadgeTextColorStyle({ color: 'pink' }),\n\t\t\t],\n\t\t\tbrand: [\n\t\t\t\tbadgeBackgroundColorStyle({ color: 'brand' }),\n\t\t\t\tbadgeBorderColorStyle({ color: 'brand' }),\n\t\t\t\tbadgeTextColorStyle({ color: 'brand' }),\n\t\t\t],\n\t\t\tgray: [\n\t\t\t\tbadgeBackgroundColorStyle({ color: 'gray' }),\n\t\t\t\tbadgeBorderColorStyle({ color: 'gray' }),\n\t\t\t\tbadgeTextColorStyle({ color: 'gray' }),\n\t\t\t],\n\t\t\tplain: [\n\t\t\t\tbadgeBackgroundColorStyle({ color: 'plain' }),\n\t\t\t\tbadgeBorderColorStyle({ color: 'plain' }),\n\t\t\t\tbadgeTextColorStyle({ color: 'plain' }),\n\t\t\t],\n\t\t} satisfies { [key in z.infer<typeof badgeColorOptions>]: string[] },\n\t},\n\tdefaultVariants: {\n\t\tsize: 'md',\n\t\tcolor: 'gray',\n\t},\n});\n\nexport type BadgeProps = JSX.IntrinsicElements['span'] &\n\tVariantProps<typeof badgeStyle> & {\n\t\tchildren: React.ReactNode;\n\t\tclassName?: string;\n\t};\n\nexport const Badge: React.FC<BadgeProps> = (props) => {\n\tconst { size, color, className, children, ...forwardProps } = props;\n\treturn (\n\t\t<span className={twMerge(badgeStyle({ size, color }), className)} {...forwardProps}>\n\t\t\t{children}\n\t\t</span>\n\t);\n};\n","'use client';\n\nimport React, { useCallback, useEffect } from 'react';\nimport { useMoonraker } from '@/moonraker/hooks';\nimport { ReadItem, RecoilSync } from 'recoil-sync';\nimport { AtomEffect, DefaultValue } from 'recoil';\nimport { getLogger } from '@/app/_helpers/logger';\n\nconst moonrakerSyncEventEmitter = new EventTarget();\n\nexport const DispatchSaveAtomEvent = (itemKey: string, value: unknown) => {\n\tmoonrakerSyncEventEmitter.dispatchEvent(\n\t\tnew CustomEvent('saveAtom', {\n\t\t\tdetail: {\n\t\t\t\titemKey,\n\t\t\t\tvalue,\n\t\t\t},\n\t\t}) satisfies SaveAtomEvent,\n\t);\n};\n\nexport const moonrakerWriteEffect = <T extends any = unknown>(): AtomEffect<T> => {\n\treturn (params) => {\n\t\tparams.onSet((newValue) => {\n\t\t\t// getLogger().debug(\n\t\t\t// \t{\n\t\t\t// \t\tkey: params.node.key,\n\t\t\t// \t\tvalue: newValue,\n\t\t\t// \t},\n\t\t\t// \t`RatOS Atom Sync Effect: new value was saved to moonraker \"${params.trigger}\"`,\n\t\t\t// );\n\t\t\tDispatchSaveAtomEvent(params.node.key, newValue == null ? 'null' : newValue); // Moonraker doesn't save null values..\n\t\t});\n\t};\n};\n\ntype SaveAtomEvent = CustomEvent<{ itemKey: string; value: unknown }>;\n\nexport const SyncWithMoonraker: React.FC<React.PropsWithChildren> = ({ children }) => {\n\tconst moonraker = useMoonraker();\n\tconst read: ReadItem = useCallback(\n\t\tasync (itemKey) => {\n\t\t\tconst value = await moonraker.getItem('RatOS', itemKey as '__recoil');\n\t\t\treturn value != null && value != 'null' ? value : new DefaultValue();\n\t\t},\n\t\t[moonraker],\n\t);\n\n\tconst saveAtom = useCallback(\n\t\tasync (event: Event) => {\n\t\t\tconst { itemKey, value } = (event as SaveAtomEvent).detail;\n\t\t\tawait moonraker.saveItem('RatOS', itemKey as '__recoil', value);\n\t\t},\n\t\t[moonraker],\n\t);\n\n\tuseEffect(() => {\n\t\tmoonrakerSyncEventEmitter.addEventListener('saveAtom', saveAtom);\n\t\treturn () => {\n\t\t\tmoonrakerSyncEventEmitter.removeEventListener('saveAtom', saveAtom);\n\t\t};\n\t}, [saveAtom]);\n\treturn <RecoilSync read={read}>{children}</RecoilSync>;\n};\n","import { z } from 'zod';\nimport { Driver } from '@/zods/motion';\n\nexport const Drivers = z.array(Driver).parse([\n\t{\n\t\tid: 'LDO-TMC2209',\n\t\ttitle: 'TMC2209',\n\t\ttype: 'TMC2209',\n\t\tprotocol: 'UART',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 1.1,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'BTT-KRAKEN-2160-PLUS',\n\t\ttitle: 'BTT TMC2160',\n\t\ttype: 'TMC5160',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.022,\n\t\tvoltages: [24, 36, 48, 56, 60],\n\t\tmaxCurrent: 8,\n\t\tcoolingCurrentThreshold: 3,\n\t},\n\t{\n\t\tid: 'BTT-KRAKEN-2160',\n\t\ttitle: 'BTT TMC2160',\n\t\ttype: 'TMC5160',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.075,\n\t\tvoltages: [24, 36, 48, 56, 60],\n\t\tmaxCurrent: 3,\n\t\tcoolingCurrentThreshold: 1.5,\n\t},\n\t{\n\t\tid: 'BTT-TMC2209-13',\n\t\ttitle: 'BTT TMC2209 v1.3',\n\t\ttype: 'TMC2209',\n\t\tprotocol: 'UART',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 1.1,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'BTT-TMC2226-10',\n\t\ttitle: 'BTT TMC2226 v1.0',\n\t\ttype: 'TMC2209',\n\t\tprotocol: 'UART',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 1.1,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'BTT-TMC5160-PRO-11',\n\t\ttitle: 'BTT TMC5160(T) Pro v1.1',\n\t\ttype: 'TMC5160',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.075,\n\t\tvoltages: [24, 36, 48, 56],\n\t\tmaxCurrent: 3,\n\t\tcoolingCurrentThreshold: 1.5,\n\t},\n\t{\n\t\tid: 'BTT-TMC5160T-PLUS-10',\n\t\ttitle: 'BTT TMC5160T Plus v1.0',\n\t\ttype: 'TMC5160',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.022,\n\t\tvoltages: [24, 36, 48, 56, 60],\n\t\tmaxCurrent: 10.6,\n\t\tcoolingCurrentThreshold: 3,\n\t\texternal: true,\n\t},\n\t{\n\t\tid: 'BTT-EZ2209',\n\t\ttitle: 'BTT EZ2209',\n\t\ttype: 'TMC2209',\n\t\tprotocol: 'UART',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 1.3,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'BTT-EZ2226',\n\t\ttitle: 'BTT EZ2226',\n\t\ttype: 'TMC2209',\n\t\tprotocol: 'UART',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 1.3,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'BTT-EZ2130',\n\t\ttitle: 'BTT EZ2130',\n\t\ttype: 'TMC2130',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 0.9,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'BTT-EZ5160-PRO',\n\t\ttitle: 'BTT EZ5160 Pro',\n\t\ttype: 'TMC5160',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.075,\n\t\tcoolingCurrentThreshold: 1.6,\n\t\tvoltages: [24, 36, 48],\n\t\tmaxCurrent: 2.5,\n\t},\n\t{\n\t\tid: 'BTT-EZ5160-RGB',\n\t\ttitle: 'BTT EZ5160 RGB',\n\t\ttype: 'TMC5160',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.05,\n\t\tcoolingCurrentThreshold: 3,\n\t\tvoltages: [24, 48, 36, 56],\n\t\tmaxCurrent: 4.7,\n\t},\n\t{\n\t\tid: 'MELLOW-FLY-HV-TMC5160-PRO-12',\n\t\ttitle: 'Mellow FLY HV TMC5160 Pro v1.2',\n\t\ttype: 'TMC5160',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.033,\n\t\tcoolingCurrentThreshold: 3,\n\t\tvoltages: [24, 36, 48],\n\t\tmaxCurrent: 4.25,\n\t\texternal: true,\n\t},\n\t{\n\t\tid: 'MELLOW-FLY-TMC2209',\n\t\ttitle: 'Mellow FLY TMC2209',\n\t\ttype: 'TMC2209',\n\t\tprotocol: 'UART',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 1.1,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'PRUSA-EINSY-RAMBO-TMC2130',\n\t\ttitle: 'Prusa Einsy Rambo TMC2130',\n\t\ttype: 'TMC2130',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.22,\n\t\tcoolingCurrentThreshold: 0.9,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'PRUSA-BUDDY-TMC2209',\n\t\ttitle: 'Prusa Buddy TMC2209',\n\t\ttype: 'TMC2209',\n\t\tprotocol: 'UART',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 1.1,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n] satisfies z.input<typeof Driver>[]);\n","import { cn, setDisplayName } from '@/helpers/utils';\nimport React from 'react';\n\nexport const Strong = React.forwardRef<HTMLElement, JSX.IntrinsicElements['strong']>(({ className, ...props }, ref) => (\n\t<strong ref={ref} className={cn('font-semibold', className)} {...props} />\n));\nsetDisplayName(Strong, 'Strong');\n","import { z } from 'zod';\nimport { Fan } from '@/zods/hardware';\nimport { PrinterAxis } from '@/zods/motion';\nimport type { PartialPrinterConfiguration } from '@/zods/printer-configuration';\nimport type { PartialToolheadConfiguration } from '@/zods/toolhead';\nimport { Strong } from '@/components/ui/typography';\nimport React from 'react';\n\nexport const fanHelp = (\n\t<>\n\t\t<p>\n\t\t\t<Strong className=\"dark:text-sky-300/70\">Input Voltage PWM</Strong> is used on fans that have no dedicated pwm pin\n\t\t\t(2 and 3-pin fans).\n\t\t</p>\n\t\t<p>\n\t\t\t<Strong className=\"dark:text-sky-300/70\">Digital PWM</Strong> is used for fans that have a dedicated PWM signal\n\t\t\twire (requires a 4-pin fan).\n\t\t</p>\n\t</>\n);\n\nexport const partFanOptions = (\n\tconfig?: PartialPrinterConfiguration | null,\n\ttoolheadConfig?: (PartialToolheadConfiguration & { axis: null | PrinterAxis }) | null,\n): z.infer<typeof Fan>[] => {\n\tconst fans: z.infer<typeof Fan>[] = [];\n\tif (toolheadConfig == null || toolheadConfig?.axis === PrinterAxis.x || toolheadConfig?.axis === null) {\n\t\tfans.push({\n\t\t\tid: '2pin' as const,\n\t\t\ttitle: 'Input Voltage PWM',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t});\n\t\tfans.push({\n\t\t\tid: '4pin' as const,\n\t\t\ttitle: 'Digital PWM on 2-pin port',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t});\n\t}\n\tif (config?.controlboard?.fourPinFanConnectorCount != null && config.controlboard.fourPinFanConnectorCount > 0) {\n\t\tfans.push({\n\t\t\tid: '4pin-dedicated' as const,\n\t\t\ttitle: 'Digital PWM on 4-pin port',\n\t\t\tbadge: [{ color: 'purple', children: config.controlboard.name }],\n\t\t});\n\t}\n\tif (toolheadConfig?.toolboard != null) {\n\t\tfans.push({\n\t\t\tid: '2pin-toolboard' as const,\n\t\t\ttitle: 'Input Voltage PWM',\n\t\t\tbadge: [\n\t\t\t\t{\n\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\tchildren: `${toolheadConfig.toolboard.name}${toolheadConfig.toolNumber != null && ` T${toolheadConfig.toolNumber}`}`,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t\tfans.push({\n\t\t\tid: '4pin-toolboard' as const,\n\t\t\ttitle: 'Digital PWM on 2-pin port',\n\t\t\tbadge: [\n\t\t\t\t{\n\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\tchildren: `${toolheadConfig.toolboard.name}${toolheadConfig.toolNumber != null && ` T${toolheadConfig.toolNumber}`}`,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t\tif (\n\t\t\ttoolheadConfig?.toolboard.fourPinFanConnectorCount != null &&\n\t\t\ttoolheadConfig.toolboard.fourPinFanConnectorCount > 0\n\t\t) {\n\t\t\tfans.push({\n\t\t\t\tid: '4pin-dedicated-toolboard' as const,\n\t\t\t\ttitle: 'Digital PWM on 4-pin port',\n\t\t\t\tbadge: [\n\t\t\t\t\t{\n\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\tchildren: `${toolheadConfig.toolboard.name}${toolheadConfig.toolNumber != null && ` T${toolheadConfig.toolNumber}`}`,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\t}\n\treturn fans;\n};\n\nexport const hotendFanOptions = (\n\tconfig?: z.infer<typeof PartialPrinterConfiguration> | null,\n\ttoolheadConfig?: (PartialToolheadConfiguration & { axis: null | PrinterAxis }) | null,\n): z.infer<typeof Fan>[] => {\n\tconst fans: z.infer<typeof Fan>[] = [];\n\tif (toolheadConfig == null || toolheadConfig?.axis === PrinterAxis.x) {\n\t\tfans.push({\n\t\t\tid: '2pin' as const,\n\t\t\ttitle: 'Input Voltage PWM',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t});\n\t\tfans.push({\n\t\t\tid: '4pin' as const,\n\t\t\ttitle: 'Digital PWM on 2-pin port',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t});\n\t}\n\tif (\n\t\t(config?.controlboard?.fourPinFanConnectorCount != null && config.controlboard.fourPinFanConnectorCount > 2) ||\n\t\t(config?.controlboard?.fourPinFanConnectorCount != null &&\n\t\t\tconfig.controlboard.fourPinFanConnectorCount > 1 &&\n\t\t\tconfig.controllerFan?.id !== '4pin-dedicated')\n\t) {\n\t\tfans.push({\n\t\t\tid: '4pin-dedicated' as const,\n\t\t\ttitle: 'Digital PWM on 4-pin port',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t});\n\t}\n\tif (toolheadConfig?.toolboard != null) {\n\t\tfans.push({\n\t\t\tid: '2pin-toolboard' as const,\n\t\t\ttitle: 'Input Voltage PWM',\n\t\t\tbadge: [\n\t\t\t\t{\n\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\tchildren: `${toolheadConfig.toolboard.name}${toolheadConfig.toolNumber != null && ` T${toolheadConfig.toolNumber}`}`,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t\tfans.push({\n\t\t\tid: '4pin-toolboard' as const,\n\t\t\ttitle: 'Digital PWM on 2-pin port',\n\t\t\tbadge: [\n\t\t\t\t{\n\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\tchildren: `${toolheadConfig.toolboard.name}${toolheadConfig.toolNumber != null && ` T${toolheadConfig.toolNumber}`}`,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t\tif (\n\t\t\ttoolheadConfig?.toolboard.fourPinFanConnectorCount != null &&\n\t\t\ttoolheadConfig.toolboard.fourPinFanConnectorCount > 1\n\t\t) {\n\t\t\tfans.push({\n\t\t\t\tid: '4pin-dedicated-toolboard' as const,\n\t\t\t\ttitle: 'Digital PWM on 4-pin port',\n\t\t\t\tbadge: [\n\t\t\t\t\t{\n\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\tchildren: `${toolheadConfig.toolboard.name}${toolheadConfig.toolNumber != null && ` T${toolheadConfig.toolNumber}`}`,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\t}\n\treturn fans;\n};\n\nexport const controllerFanOptions = (\n\tconfig?: z.infer<typeof PartialPrinterConfiguration> | null,\n\ttoolheadConfigs?: PartialToolheadConfiguration[] | null,\n): z.infer<typeof Fan>[] => {\n\tconst fans: z.infer<typeof Fan>[] = [\n\t\t{\n\t\t\tid: '2pin' as const,\n\t\t\ttitle: 'Input Voltage PWM',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t},\n\t\t{\n\t\t\tid: '4pin' as const,\n\t\t\ttitle: 'Digital PWM on 2-pin port',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t},\n\t];\n\tif (\n\t\t(config?.controlboard?.fourPinFanConnectorCount != null && config.controlboard.fourPinFanConnectorCount > 2) ||\n\t\t(config?.controlboard?.fourPinFanConnectorCount != null &&\n\t\t\tconfig.controlboard.fourPinFanConnectorCount > 1 &&\n\t\t\t!toolheadConfigs?.some((th) => th?.hotendFan?.id === '4pin-dedicated'))\n\t) {\n\t\tfans.push({\n\t\t\tid: '4pin-dedicated' as const,\n\t\t\ttitle: 'Digital PWM on 4-pin port',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t});\n\t}\n\tfans.push({ id: 'none', title: 'No fan' });\n\treturn fans;\n};\n\nexport const defaultControllerFan = {\n\tid: '2pin' as const,\n\ttitle: 'Input Voltage PWM',\n\tbadge: [{ color: 'purple' as const, children: 'Control Board' }],\n};\n","import { z } from 'zod';\nimport { Nozzle } from '@/zods/hardware';\n\nexport const getDefaultNozzle = () => {\n\treturn { diameter: 0.4, type: 'Regular' } satisfies z.infer<typeof Nozzle>;\n};\n","import { z } from 'zod';\nimport { Drivers } from '@/data/drivers';\nimport { Stepper, StepperVoltage } from '@/zods/motion';\n\nexport const findPreset = (\n\tstepper: (typeof Steppers)[number],\n\tdriver: (typeof Drivers)[number],\n\tvoltage: StepperVoltage,\n\tcurrent?: number,\n\tperformanceMode?: boolean | null,\n) => {\n\treturn stepper.presets\n\t\t?.slice()\n\t\t.sort((a, b) => (performanceMode ? b.run_current - a.run_current : a.run_current - b.run_current))\n\t\t.find(\n\t\t\t(p) =>\n\t\t\t\tp.driver === driver.type &&\n\t\t\t\tp.voltage === voltage &&\n\t\t\t\tp.sense_resistor === driver.senseResistor &&\n\t\t\t\t(current == null || p.run_current === current),\n\t\t);\n};\n\nexport const Steppers = z.array(Stepper).parse([\n\t{\n\t\tid: 'generic',\n\t\ttitle: 'Generic Stepper',\n\t\tmaxPeakCurrent: 2.8,\n\t},\n\t{\n\t\tid: 'BONDTECH-42H025H-0704-002',\n\t\ttitle: 'Bondtech LGX Stepper',\n\t\tmaxPeakCurrent: 0.7,\n\t},\n\t{\n\t\tid: 'LDO-42STH48-2504AC',\n\t\ttitle: 'LDO-42STH48-2504AC',\n\t\tmaxPeakCurrent: 2.5,\n\t\tpresets: [\n\t\t\t{\n\t\t\t\trun_current: 1.1,\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2209',\n\t\t\t\tsense_resistor: 0.11,\n\t\t\t\tdriver_TBL: 1,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 0,\n\t\t\t\tdriver_HSTRT: 0,\n\t\t\t},\n\t\t\t{\n\t\t\t\trun_current: 1.6,\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2209',\n\t\t\t\tsense_resistor: 0.11,\n\t\t\t\tdriver_TBL: 2,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 0,\n\t\t\t\tdriver_HSTRT: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\trun_current: 1.6,\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC5160',\n\t\t\t\tsense_resistor: 0.075,\n\t\t\t\tdriver_TBL: 2,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 0,\n\t\t\t\tdriver_HSTRT: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\trun_current: 1.768,\n\t\t\t\tvoltage: 48,\n\t\t\t\tdriver: 'TMC5160',\n\t\t\t\tsense_resistor: 0.075,\n\t\t\t\tdriver_TBL: 0,\n\t\t\t\tdriver_TOFF: 4,\n\t\t\t\tdriver_HEND: 0,\n\t\t\t\tdriver_HSTRT: 4,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tid: 'LDO-42STH40-1684AC',\n\t\ttitle: 'LDO-42STH40-1684AC',\n\t\tmaxPeakCurrent: 1.68,\n\t\tpresets: [\n\t\t\t{\n\t\t\t\trun_current: 0.4,\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2130',\n\t\t\t\tsense_resistor: 0.22,\n\t\t\t\tdriver_IHOLDDELAY: 8,\n\t\t\t\tdriver_TPOWERDOWN: 0,\n\t\t\t\tdriver_TBL: 2,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 1,\n\t\t\t\tdriver_HSTRT: 5,\n\t\t\t\tdriver_PWM_FREQ: 2,\n\t\t\t\tdriver_PWM_GRAD: 2,\n\t\t\t\tdriver_PWM_AMPL: 230,\n\t\t\t\tdriver_PWM_AUTOSCALE: true,\n\t\t\t\tdriver_SGT: 5,\n\t\t\t},\n\t\t\t{\n\t\t\t\trun_current: 0.52,\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2130',\n\t\t\t\tsense_resistor: 0.22,\n\t\t\t\tdriver_IHOLDDELAY: 8,\n\t\t\t\tdriver_TPOWERDOWN: 0,\n\t\t\t\tdriver_TBL: 2,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 1,\n\t\t\t\tdriver_HSTRT: 5,\n\t\t\t\tdriver_PWM_FREQ: 2,\n\t\t\t\tdriver_PWM_GRAD: 4,\n\t\t\t\tdriver_PWM_AMPL: 240,\n\t\t\t\tdriver_PWM_AUTOSCALE: true,\n\t\t\t\tdriver_SGT: 3,\n\t\t\t},\n\t\t\t{\n\t\t\t\trun_current: 0.8,\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2209',\n\t\t\t\tsense_resistor: 0.11,\n\t\t\t\tdriver_TBL: 1,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 3,\n\t\t\t\tdriver_HSTRT: 0,\n\t\t\t},\n\t\t\t{\n\t\t\t\trun_current: 1.188,\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2209',\n\t\t\t\tsense_resistor: 0.11,\n\t\t\t\tdriver_TBL: 0,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 0,\n\t\t\t\tdriver_HSTRT: 0,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tid: 'LDO-42STH48-2004MAH',\n\t\ttitle: 'LDO-42STH48-2004MAH',\n\t\tmaxPeakCurrent: 2.0,\n\t\tfullStepsPerRotation: 400,\n\t},\n\t{\n\t\tid: 'LDO-42STH48-2004AC',\n\t\ttitle: 'LDO-42STH48-2004AC',\n\t\tmaxPeakCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'LDO-42STH25-1404MAC',\n\t\ttitle: 'LDO-42STH25-1404MAC',\n\t\tmaxPeakCurrent: 1.4,\n\t\tfullStepsPerRotation: 400,\n\t\tpresets: [\n\t\t\t{\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2209',\n\t\t\t\tsense_resistor: 0.11,\n\t\t\t\trun_current: 0.85,\n\t\t\t\tdriver_TBL: 1,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 2,\n\t\t\t\tdriver_HSTRT: 0,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tid: 'LDO-42STH25-1004CL200E',\n\t\ttitle: 'LDO-42STH25-1004CL200E',\n\t\tmaxPeakCurrent: 1.0,\n\t},\n\t{\n\t\tid: 'LDO-36STH20-1004AHG',\n\t\ttitle: 'LDO-36STH20-1004AHG',\n\t\tmaxPeakCurrent: 1.0,\n\t\tpresets: [\n\t\t\t{\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2209',\n\t\t\t\tsense_resistor: 0.11,\n\t\t\t\trun_current: 0.707,\n\t\t\t\tdriver_TBL: 0,\n\t\t\t\tdriver_HEND: 6,\n\t\t\t\tdriver_HSTRT: 7,\n\t\t\t\tdriver_TOFF: 4,\n\t\t\t},\n\t\t\t// {\n\t\t\t// \tvoltage: 24,\n\t\t\t// \tdriver: 'TMC2209',\n\t\t\t// \tsense_resistor: 0.11,\n\t\t\t// \trun_current: 0.85,\n\t\t\t// \tdriver_TBL: 0,\n\t\t\t// \tdriver_HEND: 6,\n\t\t\t// \tdriver_HSTRT: 7,\n\t\t\t// \tdriver_TOFF: 4,\n\t\t\t// },\n\t\t],\n\t},\n\t{\n\t\tid: 'LDO-36STH17-1004AHG',\n\t\ttitle: 'LDO-36STH17-1004AHG',\n\t\tmaxPeakCurrent: 1.0,\n\t},\n\t{\n\t\tid: 'LDO-35STH48-1684AH',\n\t\ttitle: 'LDO-35STH48-1684AH',\n\t\tmaxPeakCurrent: 1.68,\n\t},\n] satisfies z.input<typeof Stepper>[]);\n","import { LoggerOptions } from 'pino';\n\nexport const globalPinoOpts: LoggerOptions = {\n\ttimestamp: true,\n\tlevel: process.env.NODE_ENV === 'development' ? 'debug' : 'info',\n};\n","import { serializeToolheadConfiguration } from '@/utils/serialization';\nimport { PrinterAxis } from '@/zods/motion';\nimport {\n\tPartialToolheadConfiguration,\n\tSerializedToolheadConfiguration,\n\tToolheadConfiguration,\n\tToolNumber,\n} from '@/zods/toolhead';\nimport { getDefaultNozzle } from '@/data/nozzles';\nimport deepEqual from 'deep-equal';\nimport { KlipperAccelSensorName } from '@/zods/hardware';\n\ntype ToolheadSuffix = `t${ToolNumber}`;\ntype ToolheadCommand = `T${ToolNumber}`;\ntype ToolboardAxisString = 'x' | 'dc';\ntype ToolboardShortName = ToolheadSuffix;\n\nexport class ToolheadHelper<IsToolboard extends boolean> {\n\tprotected config: ToolheadConfiguration<IsToolboard>;\n\tconstructor(toolhead: ToolheadConfiguration<IsToolboard>) {\n\t\tthis.config = toolhead;\n\t}\n\tpublic hasToolboard(): boolean {\n\t\treturn this.config.toolboard != null;\n\t}\n\tpublic getToolboard() {\n\t\treturn this.config.toolboard;\n\t}\n\tpublic getMotionStepperName() {\n\t\tif (this.config.axis === PrinterAxis.dual_carriage) {\n\t\t\treturn 'dual_carriage';\n\t\t}\n\t\treturn `stepper_${this.getMotionAxis()}`;\n\t}\n\tpublic getToolboardName(): `toolboard_${ToolboardShortName}` {\n\t\tif (this.config.toolboard == null) {\n\t\t\tthrow new Error(`Toolhead T${this.getTool()} does not have a toolboard`);\n\t\t}\n\t\treturn `toolboard_${this.getShortToolName()}`;\n\t}\n\tpublic getShortToolName(): ToolboardShortName {\n\t\treturn `t${this.getTool()}`;\n\t}\n\tpublic getDescription(): string {\n\t\treturn this.config.description ?? `the printer's toolhead`;\n\t}\n\tpublic getMotionAxis(): PrinterAxis.x | PrinterAxis.dual_carriage {\n\t\tif (this.config.axis === PrinterAxis.dual_carriage) {\n\t\t\treturn PrinterAxis.dual_carriage;\n\t\t}\n\t\treturn PrinterAxis.x;\n\t}\n\tpublic getExtruderAxis(): PrinterAxis.extruder | PrinterAxis.extruder1 {\n\t\tif (this.config.axis === PrinterAxis.dual_carriage) {\n\t\t\treturn PrinterAxis.extruder1;\n\t\t}\n\t\treturn PrinterAxis.extruder;\n\t}\n\tpublic getToolCommand(): ToolheadCommand {\n\t\treturn `T${this.getTool()}`;\n\t}\n\tpublic getTool(): ToolNumber {\n\t\tif (this.config.axis === PrinterAxis.dual_carriage) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t}\n\tpublic getSerialSuffix(): ToolheadSuffix {\n\t\treturn `t${this.getTool()}`;\n\t}\n\tpublic getExtruder() {\n\t\treturn this.config.extruder;\n\t}\n\tpublic getHotend() {\n\t\treturn this.config.hotend;\n\t}\n\tpublic getNozzle() {\n\t\treturn this.config.nozzle ?? getDefaultNozzle();\n\t}\n\tpublic getThermistor() {\n\t\treturn this.config.thermistor;\n\t}\n\tpublic getXEndstop() {\n\t\treturn this.config.xEndstop;\n\t}\n\tpublic getYEndstop() {\n\t\treturn this.config.yEndstop;\n\t}\n\tpublic getXAccelerometer() {\n\t\treturn this.config.xAccelerometer;\n\t}\n\tpublic getYAccelerometer() {\n\t\treturn this.config.yAccelerometer;\n\t}\n\tpublic getXAccelerometerName(): KlipperAccelSensorName {\n\t\tswitch (this.getXAccelerometer()?.id) {\n\t\t\tcase 'controlboard':\n\t\t\t\treturn 'controlboard';\n\t\t\tcase 'toolboard':\n\t\t\t\tif (this.hasToolboard()) {\n\t\t\t\t\treturn this.getToolboardName();\n\t\t\t\t}\n\t\t\tcase 'sbc':\n\t\t\t\treturn 'rpi';\n\t\t\tcase 'beacon':\n\t\t\t\treturn 'beacon';\n\t\t\tdefault:\n\t\t\t\treturn 'controlboard';\n\t\t}\n\t}\n\tpublic getYAccelerometerName(): KlipperAccelSensorName {\n\t\tswitch (this.getYAccelerometer()?.id) {\n\t\t\tcase 'controlboard':\n\t\t\t\treturn 'controlboard';\n\t\t\tcase 'toolboard':\n\t\t\t\tif (this.hasToolboard()) {\n\t\t\t\t\treturn this.getToolboardName();\n\t\t\t\t}\n\t\t\tcase 'sbc':\n\t\t\t\treturn 'rpi';\n\t\t\tcase 'beacon':\n\t\t\t\treturn 'beacon';\n\t\t\tdefault:\n\t\t\t\treturn 'controlboard';\n\t\t}\n\t}\n\tpublic getChangeSet(changes: PartialToolheadConfiguration) {\n\t\tif (changes == null) {\n\t\t\treturn null;\n\t\t}\n\t\tconst changeSet: any = {};\n\t\tObject.keys(changes).forEach((key) => {\n\t\t\tconst current = this.getConfig()[key as keyof ToolheadConfiguration<IsToolboard>];\n\t\t\tconst change = changes[key as keyof ToolheadConfiguration<IsToolboard>];\n\t\t\tif ((current != null && change == null) || (current == null && change != null)) {\n\t\t\t\tchangeSet[key] = change;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (current && change) {\n\t\t\t\tif (typeof current === 'object' && 'id' in current && typeof change === 'object' && 'id' in change) {\n\t\t\t\t\tif (current.id !== change.id) {\n\t\t\t\t\t\tchangeSet[key] = change;\n\t\t\t\t\t}\n\t\t\t\t} else if (!deepEqual(current, change)) {\n\t\t\t\t\tchangeSet[key] = change;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tconst parsed = PartialToolheadConfiguration.safeParse(changeSet);\n\t\treturn parsed;\n\t}\n\tpublic getProbe() {\n\t\treturn this.config.probe;\n\t}\n\tpublic getPartFan() {\n\t\treturn this.config.partFan;\n\t}\n\tpublic getHotendFan() {\n\t\treturn this.config.hotendFan;\n\t}\n\tpublic serialize(): SerializedToolheadConfiguration {\n\t\treturn serializeToolheadConfiguration(this.config);\n\t}\n\tpublic getConfig(): ToolheadConfiguration<IsToolboard> {\n\t\treturn { ...this.config };\n\t}\n}\n","import { proxyClient, trpc } from '@/utils/trpc';\nexport { trpc, proxyClient as trpcClient };\n","'use client';\nexport const getHost = () => {\n\treturn process.env.NEXT_PUBLIC_KLIPPER_HOSTNAME != null && process.env.NEXT_PUBLIC_KLIPPER_HOSTNAME.trim() != ''\n\t\t? process.env.NEXT_PUBLIC_KLIPPER_HOSTNAME\n\t\t: typeof window !== 'undefined' && window.location?.hostname != null\n\t\t\t? window.location.hostname\n\t\t\t: null;\n};\n","import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n\treturn twMerge(clsx(inputs));\n}\n\nexport function setDisplayName(Component: React.ComponentType<any>, name: string | undefined) {\n\t(Component as any).displayName = name;\n}\n","'use client';\n\nimport { atom, selector, useRecoilValue, useRecoilState, waitForAll, noWait } from 'recoil';\nimport { z } from 'zod';\nimport { Fan } from '@/zods/hardware';\nimport {\n\tPartialPrinterConfiguration,\n\tPrinterConfiguration,\n\tSerializedPartialPrinterConfiguration,\n\tSerializedPrinterConfiguration,\n} from '@/zods/printer-configuration';\nimport { syncEffect } from 'recoil-sync';\nimport { getRefineCheckerForZodSchema } from 'zod-refine';\nimport { useMemo } from 'react';\nimport {\n\tserializePartialToolheadConfiguration,\n\tserializePrinterRail,\n\tserializeToolheadConfiguration,\n} from '@/utils/serialization';\nimport {\n\tControlboardState,\n\tLoadablePrinterRailsState,\n\tPrinterRailsState,\n\tPrinterSizeState,\n\tPrinterState,\n} from '@/recoil/printer';\nimport { PrinterToolheadsState } from '@/recoil/toolhead';\nimport { defaultControllerFan } from '@/data/fans';\nimport { moonrakerWriteEffect } from '@/components/sync-with-moonraker';\nimport { getLogger } from '@/app/_helpers/logger';\n\nexport const PerformanceModeState = atom<boolean | null | undefined>({\n\tkey: 'PerformanceMode',\n\tdefault: false,\n\teffects: [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\trefine: getRefineCheckerForZodSchema(z.boolean().optional().nullable()),\n\t\t}),\n\t],\n});\n\nexport const StealthchopState = atom<boolean | null | undefined>({\n\tkey: 'Stealchop',\n\tdefault: false,\n\teffects: [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\trefine: getRefineCheckerForZodSchema(z.boolean().optional().nullable()),\n\t\t}),\n\t],\n});\n\nexport const StandstillStealthState = atom<boolean | null | undefined>({\n\tkey: 'StandstillStealth',\n\tdefault: false,\n\teffects: [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\trefine: getRefineCheckerForZodSchema(z.boolean().optional().nullable()),\n\t\t}),\n\t],\n});\nexport const ControllerFanState = atom<z.infer<typeof Fan> | null>({\n\tkey: 'ControllerFan',\n\tdefault: defaultControllerFan,\n\teffects: [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\trefine: getRefineCheckerForZodSchema(Fan.nullable()),\n\t\t}),\n\t],\n});\n\nexport const PrinterConfigurationState = selector<z.infer<typeof PartialPrinterConfiguration> | null>({\n\tkey: 'PrinterConfiguration',\n\tget: async ({ get }) => {\n\t\tconst {\n\t\t\tprinter,\n\t\t\tprinterSize,\n\t\t\tperformanceMode,\n\t\t\tstealthchop,\n\t\t\tstandstillStealth,\n\t\t\trails,\n\t\t\tcontrolboard,\n\t\t\tcontrollerFan,\n\t\t\ttoolheads,\n\t\t} = get(\n\t\t\twaitForAll({\n\t\t\t\tprinter: PrinterState,\n\t\t\t\tprinterSize: PrinterSizeState,\n\t\t\t\tperformanceMode: PerformanceModeState,\n\t\t\t\tstealthchop: StealthchopState,\n\t\t\t\tstandstillStealth: StandstillStealthState,\n\t\t\t\trails: PrinterRailsState,\n\t\t\t\tcontrolboard: ControlboardState,\n\t\t\t\tcontrollerFan: ControllerFanState,\n\t\t\t\ttoolheads: PrinterToolheadsState,\n\t\t\t}),\n\t\t);\n\n\t\tconst input = {\n\t\t\tprinter:\n\t\t\t\tprinter == null\n\t\t\t\t\t? null\n\t\t\t\t\t: {\n\t\t\t\t\t\t\t...printer,\n\t\t\t\t\t\t\tdefaults: {\n\t\t\t\t\t\t\t\t...printer.defaults,\n\t\t\t\t\t\t\t\ttoolheads: printer?.defaults.toolheads.map((th) => serializeToolheadConfiguration(th)),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\tsize: printerSize,\n\t\t\tperformanceMode,\n\t\t\tstealthchop,\n\t\t\tstandstillStealth,\n\t\t\trails,\n\t\t\tcontrolboard,\n\t\t\tcontrollerFan,\n\t\t\ttoolheads: toolheads.length > 0 ? toolheads : undefined,\n\t\t} satisfies {\n\t\t\t[key in keyof PrinterConfiguration]: NonNullable<PartialPrinterConfiguration>[key] | null | undefined;\n\t\t};\n\n\t\tconst printerConfig = PartialPrinterConfiguration.safeParse(input);\n\t\tif (printerConfig.success === false) {\n\t\t\tgetLogger().error(\n\t\t\t\t{ errors: printerConfig.error.flatten().fieldErrors, data: input },\n\t\t\t\t\"Couldn't parse printer configuration\",\n\t\t\t);\n\t\t}\n\t\treturn printerConfig.success ? printerConfig.data : null;\n\t},\n});\n\nexport const LoadablePrinterConfigurationState = selector<z.infer<typeof PartialPrinterConfiguration>>({\n\tkey: 'LoadablePrinterConfigurationState',\n\tget: async ({ get }) => {\n\t\tconst loadable = get(noWait(PrinterConfigurationState));\n\t\treturn {\n\t\t\thasValue: () => loadable.contents,\n\t\t\thasError: () => null,\n\t\t\tloading: () => null,\n\t\t}[loadable.state]();\n\t},\n});\n\nexport const serializePrinterConfiguration = (config: PrinterConfiguration): SerializedPrinterConfiguration => {\n\tconst serializedConfig: SerializedPrinterConfiguration = {\n\t\tprinter: config.printer.id,\n\t\ttoolheads: config.toolheads.map((toolhead) => serializeToolheadConfiguration(toolhead)),\n\t\tsize: config.size,\n\t\tcontrolboard: config.controlboard.id,\n\t\tcontrollerFan: config.controllerFan.id,\n\t\tperformanceMode: config.performanceMode,\n\t\tstealthchop: config.stealthchop,\n\t\tstandstillStealth: config.standstillStealth,\n\t\trails: config.rails.map((rail) => serializePrinterRail(rail)),\n\t};\n\treturn SerializedPrinterConfiguration.parse(serializedConfig);\n};\nexport const serializePartialPrinterConfiguration = (\n\tconfig: PartialPrinterConfiguration,\n): SerializedPartialPrinterConfiguration => {\n\tconst toolheads = config?.toolheads?.map((toolhead) => serializePartialToolheadConfiguration(toolhead));\n\tconst serializedConfig: SerializedPartialPrinterConfiguration = {\n\t\tprinter: config?.printer?.id,\n\t\ttoolheads: toolheads,\n\t\tsize: config?.size,\n\t\tcontrolboard: config?.controlboard?.id,\n\t\tcontrollerFan: config?.controllerFan?.id,\n\t\tperformanceMode: config?.performanceMode,\n\t\tstealthchop: config?.stealthchop,\n\t\tstandstillStealth: config?.standstillStealth,\n\t};\n\treturn SerializedPartialPrinterConfiguration.parse(serializedConfig);\n};\n\nexport const useSerializedPrinterConfiguration = () => {\n\tconst printerConfiguration = useRecoilValue(PrinterConfigurationState);\n\tconst serializedPrinterConfiguration = useMemo(\n\t\t() => serializePartialPrinterConfiguration(printerConfiguration ?? {}),\n\t\t[printerConfiguration],\n\t);\n\treturn serializedPrinterConfiguration;\n};\nexport const usePrinterConfiguration = () => {\n\tconst [selectedPrinter, setSelectedPrinter] = useRecoilState(PrinterState);\n\tconst [selectedPrinterOption, setSelectedPrinterOption] = useRecoilState(PrinterSizeState);\n\tconst [selectedBoard, setSelectedBoard] = useRecoilState(ControlboardState);\n\tconst [performanceMode, setPerformanceMode] = useRecoilState(PerformanceModeState);\n\tconst [stealthchop, setStealthchop] = useRecoilState(StealthchopState);\n\tconst [standstillStealth, setStandstillStealth] = useRecoilState(StandstillStealthState);\n\tconst [selectedControllerFan, setSelectedControllerFan] = useRecoilState(ControllerFanState);\n\tconst selectedPrinterRails = useRecoilValue(PrinterRailsState);\n\tconst printerConfiguration = useRecoilValue(PrinterConfigurationState);\n\tconst serializedPrinterConfiguration = useSerializedPrinterConfiguration();\n\tconst parsedPrinterConfiguration = PrinterConfiguration.safeParse(printerConfiguration);\n\n\treturn {\n\t\tselectedPrinter,\n\t\tsetSelectedPrinter,\n\t\tselectedPrinterOption,\n\t\tsetSelectedPrinterOption,\n\t\tselectedBoard,\n\t\tsetSelectedBoard,\n\t\tperformanceMode,\n\t\tsetPerformanceMode,\n\t\tstealthchop,\n\t\tsetStealthchop,\n\t\tstandstillStealth,\n\t\tsetStandstillStealth,\n\t\tselectedPrinterRails,\n\t\tselectedControllerFan,\n\t\tsetSelectedControllerFan,\n\t\tpartialPrinterConfiguration: printerConfiguration,\n\t\tserializedPrinterConfiguration,\n\t\tparsedPrinterConfiguration,\n\t};\n};\n","/* eslint-disable no-console */\nimport { getHost } from '@/helpers/util';\nimport { MoonrakerDBItemResponse } from '@/moonraker/types';\n\ninterface Migration {\n\tversion: number;\n\tdescription: string;\n\tup: () => Promise<{ result: string }>;\n\tdown: () => Promise<{ result: string }>;\n}\n\nexport const migrations: Migration[] = [\n\t{\n\t\tversion: 1,\n\t\tdescription: \"Undo double JSON encoding of RatOS's data\",\n\t\tup: async () => {\n\t\t\tconst res = await window.fetch(`http://${getHost()}/server/database/item?namespace=RatOS`);\n\t\t\tif (res.ok) {\n\t\t\t\tconst data = (await res.json()) as\n\t\t\t\t\t| { result: MoonrakerDBItemResponse<{ [key: string]: unknown }> }\n\t\t\t\t\t| { error: { message: string } };\n\t\t\t\tif ('error' in data) {\n\t\t\t\t\tthrow new Error(data.error.message);\n\t\t\t\t}\n\t\t\t\tconst result: string[] = [];\n\t\t\t\tif (data.result.value == null) {\n\t\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t\t}\n\t\t\t\tfor await (const [key, value] of Object.entries(data.result.value)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst parsed = JSON.parse(value as any);\n\t\t\t\t\t\tconsole.log('Migrating', key, 'from', value, 'to', parsed);\n\t\t\t\t\t\tawait window.fetch(`http://${getHost()}/server/database/item`, {\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\tnamespace: 'RatOS',\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tvalue: parsed,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('Error migrating', key, value, 'clearing key');\n\t\t\t\t\t\tawait window.fetch(\n\t\t\t\t\t\t\t`http://${getHost()}/server/database/item?namespace=RatOS&key=${encodeURIComponent(key)}`,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmethod: 'DELETE',\n\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\t\tnamespace: 'RatOS',\n\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn { result: `Succesfully decoded ${result.length} keys.\\n${result.join('\\n')}` };\n\t\t\t} else {\n\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t}\n\t\t},\n\t\tdown: async () => {\n\t\t\t// drop table\n\t\t\tconst res = await window.fetch(`http://${getHost()}/server/database/item?namespace=RatOS`);\n\t\t\tif (res.ok) {\n\t\t\t\tconst data = (await res.json()) as\n\t\t\t\t\t| { result: MoonrakerDBItemResponse<{ [key: string]: unknown }> }\n\t\t\t\t\t| { error: { message: string } };\n\t\t\t\tif ('error' in data) {\n\t\t\t\t\tthrow new Error(data.error.message);\n\t\t\t\t}\n\t\t\t\tif (data.result.value == null) {\n\t\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t\t}\n\t\t\t\tconst result: string[] = [];\n\t\t\t\tfor await (const [key, value] of Object.entries(data.result.value)) {\n\t\t\t\t\tconst encoded = JSON.stringify(value as any);\n\t\t\t\t\tawait window.fetch(`http://${getHost()}/server/database/item`, {\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\tnamespace: 'RatOS',\n\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\tvalue: encoded,\n\t\t\t\t\t\t}),\n\t\t\t\t\t});\n\t\t\t\t\tresult.push(`Re-encoded ${key}`);\n\t\t\t\t}\n\t\t\t\treturn { result: `Succesfully re-encoded ${result.length} keys.\\n${result.join('\\n')}` };\n\t\t\t}\n\t\t\treturn { result: 'Nothing to migrate' };\n\t\t},\n\t},\n\t{\n\t\tversion: 2,\n\t\tdescription: 'Change caramba printers to v-core-4 / v-chonk',\n\t\tup: async () => {\n\t\t\tconst res = await window.fetch(`http://${getHost()}/server/database/item?namespace=RatOS`);\n\t\t\tif (res.ok) {\n\t\t\t\tconst data = (await res.json()) as\n\t\t\t\t\t| { result: MoonrakerDBItemResponse<{ [key: string]: unknown }> }\n\t\t\t\t\t| { error: { message: string } };\n\t\t\t\tif ('error' in data) {\n\t\t\t\t\tthrow new Error(data.error.message);\n\t\t\t\t}\n\t\t\t\tconst result: string[] = [];\n\t\t\t\tif (data.result.value == null) {\n\t\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t\t}\n\t\t\t\tfor await (const [key, value] of Object.entries(data.result.value)) {\n\t\t\t\t\tif (key === 'Printer' && typeof value === 'string') {\n\t\t\t\t\t\tconst migratedValue = value.replace(/caramba-chonk/g, 'v-chonk').replace(/caramba/g, 'v-core-4');\n\t\t\t\t\t\tif (migratedValue === value) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait window.fetch(`http://${getHost()}/server/database/item`, {\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\tnamespace: 'RatOS',\n\t\t\t\t\t\t\t\tkey: 'Printer',\n\t\t\t\t\t\t\t\tvalue: migratedValue,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresult.push(`Migrated ${value} to ${migratedValue}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn { result: `Succesfully migrated ${result.length} keys.\\n${result.join('\\n')}` };\n\t\t\t} else {\n\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t}\n\t\t},\n\t\tdown: async () => {\n\t\t\tconst res = await window.fetch(`http://${getHost()}/server/database/item?namespace=RatOS`);\n\t\t\tif (res.ok) {\n\t\t\t\tconst data = (await res.json()) as\n\t\t\t\t\t| { result: MoonrakerDBItemResponse<{ [key: string]: unknown }> }\n\t\t\t\t\t| { error: { message: string } };\n\t\t\t\tif ('error' in data) {\n\t\t\t\t\tthrow new Error(data.error.message);\n\t\t\t\t}\n\t\t\t\tconst result: string[] = [];\n\t\t\t\tif (data.result.value == null) {\n\t\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t\t}\n\t\t\t\tfor await (const [key, value] of Object.entries(data.result.value)) {\n\t\t\t\t\tif (key === 'Printer' && typeof value === 'string') {\n\t\t\t\t\t\tconst migratedValue = value.replace(/v-chonk/g, 'caramba-chonk').replace(/v-core-4/g, 'caramba');\n\t\t\t\t\t\tif (migratedValue === value) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait window.fetch(`http://${getHost()}/server/database/item`, {\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\tnamespace: 'RatOS',\n\t\t\t\t\t\t\t\tkey: 'Printer',\n\t\t\t\t\t\t\t\tvalue: migratedValue,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresult.push(`Migrated ${value} to ${migratedValue}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn { result: `Succesfully migrated ${result.length} keys.\\n${result.join('\\n')}` };\n\t\t\t} else {\n\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t}\n\t\t},\n\t},\n];\n\nexport const getCurrentVersion = async (): Promise<number> => {\n\tconst res = await window.fetch(`http://${getHost()}/server/database/item?namespace=RatOS&key=__db_version`);\n\tif (res.ok) {\n\t\tconst data = (await res.json()) as { result: MoonrakerDBItemResponse<number> } | { error: { message: string } };\n\t\tif ('error' in data) {\n\t\t\treturn 0;\n\t\t}\n\t\treturn data.result.value as number;\n\t}\n\treturn 0;\n};\n\nexport const setCurrentVersion = async (version: number) => {\n\tawait window.fetch(`http://${getHost()}/server/database/item`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tnamespace: 'RatOS',\n\t\t\tkey: '__db_version',\n\t\t\tvalue: version,\n\t\t}),\n\t});\n};\n\nlet isMigrating = false;\nexport const migrate = async (from: number, to: number) => {\n\tif (isMigrating) {\n\t\treturn console.log('Already migrating, ignoring..');\n\t}\n\tif (from === to) {\n\t\treturn console.log('Already at target version');\n\t}\n\tisMigrating = true;\n\ttry {\n\t\tconst migrationsToRun = migrations\n\t\t\t.filter((m) => m.version > from && m.version <= to)\n\t\t\t.sort((a, b) => (from <= to ? a.version - b.version : b.version - a.version));\n\t\tfor await (const migration of migrationsToRun) {\n\t\t\tconst result = await (from < to ? migration.up() : migration.down());\n\t\t\tconsole.log(`Migrated to version ${migration.version}: ${result.result}`);\n\t\t}\n\t\tawait setCurrentVersion(to);\n\t} finally {\n\t\tisMigrating = false;\n\t}\n};\n\nlet isMigrated = false;\nexport const migrateToLatest = async () => {\n\tif (isMigrated) {\n\t\treturn console.log('Already migrated, ignoring..');\n\t}\n\tconst currentVersion = await getCurrentVersion();\n\tconst latestVersion = Math.max(...migrations.map((m) => m.version));\n\tif (currentVersion === latestVersion) {\n\t\tconsole.log('Already at latest version');\n\t\treturn;\n\t}\n\tif (isMigrating) {\n\t\tconsole.log('Already migrating, ignoring..');\n\t\treturn;\n\t}\n\tconsole.log('Migrating to latest version...', currentVersion, latestVersion);\n\tawait migrate(currentVersion, latestVersion);\n\tisMigrated = true;\n\tconsole.log('Migration complete.');\n};\n","'use client';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { UseMutationOptions, UseQueryOptions, useMutation, useQuery } from '@tanstack/react-query';\nimport useWebSocket from 'react-use-websocket';\nimport { migrateToLatest } from '@/moonraker/migrations';\nimport type {\n\tInFlightRequestCallbacks,\n\tInFlightRequestTimeouts,\n\tJSONRPCResponse,\n\tMoonrakerStatus,\n\tMoonrakerSaveItemFn,\n\tMoonrakerNamespaces,\n\tMoonrakerDBItemResponse,\n\tMoonrakerGetItemFn,\n\tMoonrakerNamespaceKeys,\n\tMoonrakerDBValue,\n\tMoonrakerQueryFn,\n\tMoonrakerQueryKeys,\n\tMoonrakerQueryParams,\n\tMoonrakerQueryResult,\n\tMoonrakerMutationKeys,\n\tMoonrakerMutationParams,\n\tMoonrakerMutationResult,\n\tMoonrakerMutationFn,\n\tPrinterObjectKeys,\n\tPrinterObjectsMoonrakerQueryParams,\n\tPrinterObjectResult,\n\tJSONRPCResponseSuccess,\n} from '@/moonraker/types';\nimport { getHost } from '@/helpers/util';\nimport { merge } from 'ts-deepmerge';\nimport deepEqual from 'deep-equal';\nimport { getLogger } from '@/app/_helpers/logger';\n\nlet REQ_ID = 0;\n\nconst getWsURL = () => {\n\tconst host = getHost();\n\tif (host == null || host.trim() == '') {\n\t\treturn null;\n\t}\n\treturn `ws://${host}/websocket`;\n};\n\nconst subscriptions: { [key: number]: Partial<PrinterObjectsMoonrakerQueryParams> } = {};\n\ntype MoonrakerStatusUpdate = { [key in PrinterObjectKeys]: PrinterObjectResult<PrinterObjectKeys> };\n\ninterface MoonrakerHookOptions {\n\tonStatusUpdate?: (status: MoonrakerStatusUpdate) => void;\n\tpassThroughUpdateMethods?: string[];\n}\n\nexport const useMoonraker = (options?: MoonrakerHookOptions) => {\n\tconst inFlightRequests = useRef<InFlightRequestCallbacks>({});\n\tconst inFlightRequestTimeouts = useRef<InFlightRequestTimeouts>({});\n\tconst localSubscriptions = useRef<number[]>([]);\n\tconst onReadyCallbacks = useRef<{ resolve: () => void; reject: () => void }[]>([]);\n\tconst [wsUrl, setWsUrl] = useState(getWsURL());\n\tuseEffect(() => {\n\t\tsetWsUrl(getWsURL());\n\t}, []);\n\n\tconst containsSubscriptionUpdate = useCallback(\n\t\t(jsonMessage: JSONRPCResponse): jsonMessage is JSONRPCResponseSuccess => {\n\t\t\tif ('error' in jsonMessage) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (jsonMessage.method === 'notify_status_update' && jsonMessage.params != null) {\n\t\t\t\tconst res = jsonMessage.params[0] as MoonrakerStatusUpdate;\n\t\t\t\tif (res != null) {\n\t\t\t\t\tfor (const sub of localSubscriptions.current) {\n\t\t\t\t\t\tconst objects = subscriptions[sub];\n\t\t\t\t\t\tif (objects != null) {\n\t\t\t\t\t\t\tfor (const key in objects) {\n\t\t\t\t\t\t\t\tif (res[key as PrinterObjectKeys] != null) {\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t[],\n\t);\n\n\tconst { lastJsonMessage, sendJsonMessage, readyState } = useWebSocket<JSONRPCResponse>(wsUrl, {\n\t\tfilter: (message) => {\n\t\t\tif (moonrakerStatus !== 'connected') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tconst parsed = JSON.parse(message.data) as JSONRPCResponse;\n\t\t\t\tif (inFlightRequests.current[parsed.id] != null) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\toptions?.passThroughUpdateMethods?.length &&\n\t\t\t\t\t'method' in parsed &&\n\t\t\t\t\toptions.passThroughUpdateMethods.includes(parsed.method)\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t} catch (e) {\n\t\t\t\tgetLogger().warn({ e, messageData: message.data }, 'Filter: Failed to parse message');\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tonMessage: (message) => {\n\t\t\tif (options?.onStatusUpdate) {\n\t\t\t\ttry {\n\t\t\t\t\tconst parsed = JSON.parse(message.data) as JSONRPCResponse;\n\t\t\t\t\tif (containsSubscriptionUpdate(parsed)) {\n\t\t\t\t\t\tconst res = parsed.params[0] as MoonrakerStatusUpdate;\n\t\t\t\t\t\toptions.onStatusUpdate?.(res);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tgetLogger().warn({ e, messageData: message.data }, 'OnMessage: Failed to parse message');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tshouldReconnect: (closeEvent) => {\n\t\t\treturn true;\n\t\t},\n\t\treconnectAttempts: Infinity,\n\t\treconnectInterval: 3000,\n\t\tshare: true,\n\t});\n\tconst readyStateRef = useRef(readyState);\n\treadyStateRef.current = readyState;\n\tconst [moonrakerStatus, setMoonrakerStatus] = useState<null | MoonrakerStatus>(\n\t\treadyState === 1 ? 'connected' : 'connecting',\n\t);\n\n\tconst whenReady = useCallback((resolve: () => void, reject: () => void) => {\n\t\tif (readyStateRef.current === 1) {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tonReadyCallbacks.current.push({ resolve, reject });\n\t\t}\n\t}, []);\n\n\tconst isReady = useCallback(\n\t\t() =>\n\t\t\tnew Promise<void>((resolve, reject) => {\n\t\t\t\twhenReady(resolve, reject);\n\t\t\t}),\n\t\t[whenReady],\n\t);\n\tconst moonrakerQuery: MoonrakerQueryFn & MoonrakerMutationFn = useCallback(\n\t\tasync <Response = any,>(method: string, params: any = {}) => {\n\t\t\tconst id = ++REQ_ID;\n\t\t\tawait isReady();\n\t\t\treturn new Promise<Response>((resolve, reject) => {\n\t\t\t\tinFlightRequests.current[id] = (err, result) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn reject(err);\n\t\t\t\t\t}\n\t\t\t\t\tif (result && typeof result === 'object' && 'error' in result && result.error) {\n\t\t\t\t\t\treturn reject(result.error);\n\t\t\t\t\t}\n\t\t\t\t\tif (result == null) {\n\t\t\t\t\t\treturn reject(new Error('No result. Unknown response format.'));\n\t\t\t\t\t}\n\t\t\t\t\tresolve(result as Response);\n\t\t\t\t};\n\t\t\t\tlet timeout = 10 * 1000;\n\t\t\t\tif (method === 'printer.gcode.script') {\n\t\t\t\t\t// Allow 10 minutes for gcode macros.\n\t\t\t\t\ttimeout = 10 * 60 * 1000;\n\t\t\t\t}\n\t\t\t\tinFlightRequestTimeouts.current[id] = window.setTimeout(() => {\n\t\t\t\t\tinFlightRequests.current[id]?.(new Error('Request timed out'), null);\n\t\t\t\t\tdelete inFlightRequests.current[id];\n\t\t\t\t\tdelete inFlightRequestTimeouts.current[id];\n\t\t\t\t}, timeout); // 10 second timeout.\n\t\t\t\tsendJsonMessage({\n\t\t\t\t\tjsonrpc: '2.0',\n\t\t\t\t\tmethod,\n\t\t\t\t\tparams,\n\t\t\t\t\tid: id,\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t[isReady, sendJsonMessage],\n\t);\n\n\tconst subscribeToObject = useCallback(\n\t\tasync <TArgs extends [PrinterObjectKeys, ...PrinterObjectKeys[]]>(...args: TArgs) => {\n\t\t\tconst objects = Object.fromEntries(args.map((key) => [key, null])) as PrinterObjectsMoonrakerQueryParams;\n\t\t\tconst allSubscribedObjects = Object.assign(\n\t\t\t\t{},\n\t\t\t\tobjects,\n\t\t\t\t...Object.values(subscriptions).filter((v) => v != null),\n\t\t\t) as PrinterObjectsMoonrakerQueryParams;\n\t\t\tconst q = moonrakerQuery('printer.objects.subscribe' as 'printer.objects.query', {\n\t\t\t\tobjects: allSubscribedObjects,\n\t\t\t});\n\t\t\t// Capture request id we just generated;\n\t\t\tconst reqId = REQ_ID;\n\t\t\tsubscriptions[reqId] = objects;\n\t\t\tlocalSubscriptions.current.push(reqId);\n\n\t\t\tconst res = (await q).status as {\n\t\t\t\t[K in TArgs[number]]: PrinterObjectResult<K>;\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tres,\n\t\t\t\tunsuscribe: async () => {\n\t\t\t\t\tlocalSubscriptions.current = localSubscriptions.current.filter((v) => v !== reqId);\n\t\t\t\t\tif (subscriptions[reqId] == null) {\n\t\t\t\t\t\tdelete subscriptions[reqId];\n\t\t\t\t\t\tconst allSubscribedObjects = Object.assign(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\t...Object.values(subscriptions).filter((v) => v != null),\n\t\t\t\t\t\t) as PrinterObjectsMoonrakerQueryParams;\n\t\t\t\t\t\tawait moonrakerQuery('printer.objects.subscribe' as 'printer.objects.query', {\n\t\t\t\t\t\t\tobjects: allSubscribedObjects,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\t[moonrakerQuery],\n\t);\n\n\tconst saveItem = useCallback<MoonrakerSaveItemFn>(\n\t\tasync <Data,>(namespace: MoonrakerNamespaces, key: unknown, value: unknown) => {\n\t\t\tawait isReady();\n\t\t\treturn (await moonrakerQuery('server.database.post_item', {\n\t\t\t\tnamespace: namespace,\n\t\t\t\tkey,\n\t\t\t\tvalue: value,\n\t\t\t})) as Data;\n\t\t},\n\t\t[moonrakerQuery, isReady],\n\t);\n\n\tconst getItem = useCallback<MoonrakerGetItemFn>(\n\t\tasync <Data,>(namespace: MoonrakerNamespaces, key: unknown): Promise<Data | null> => {\n\t\t\tawait isReady();\n\t\t\ttry {\n\t\t\t\tconst result = await moonrakerQuery('server.database.get_item', {\n\t\t\t\t\tnamespace: namespace,\n\t\t\t\t\tkey,\n\t\t\t\t});\n\t\t\t\treturn (result?.value ?? null) as Data;\n\t\t\t} catch (e) {\n\t\t\t\tgetLogger().warn(e);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\t[moonrakerQuery, isReady],\n\t);\n\n\tuseEffect(() => {\n\t\tif (readyState === 1) {\n\t\t\t(async () => {\n\t\t\t\tawait migrateToLatest();\n\t\t\t\tonReadyCallbacks.current.forEach((cb) => cb.resolve());\n\t\t\t\tonReadyCallbacks.current = [];\n\t\t\t\tsetMoonrakerStatus('connected');\n\t\t\t})();\n\t\t} else {\n\t\t\tsetMoonrakerStatus('connecting');\n\t\t}\n\t}, [readyState]);\n\n\tuseEffect(() => {\n\t\tif (lastJsonMessage?.id && inFlightRequests.current[lastJsonMessage.id]) {\n\t\t\twindow.clearTimeout(inFlightRequestTimeouts.current[lastJsonMessage.id]);\n\t\t\tif ('error' in lastJsonMessage) {\n\t\t\t\tinFlightRequests.current[lastJsonMessage.id](new Error(lastJsonMessage.error.message), null);\n\t\t\t} else {\n\t\t\t\tinFlightRequests.current[lastJsonMessage.id](null, lastJsonMessage.result);\n\t\t\t}\n\t\t\tdelete inFlightRequestTimeouts.current[lastJsonMessage.id];\n\t\t\tdelete inFlightRequests.current[lastJsonMessage.id];\n\t\t}\n\t}, [lastJsonMessage]);\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tfor (const reqId in inFlightRequestTimeouts.current) {\n\t\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t\t\tdelete inFlightRequestTimeouts.current[reqId];\n\t\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t\t\tdelete inFlightRequests.current[reqId];\n\t\t\t}\n\t\t\tif (localSubscriptions.current.length > 0) {\n\t\t\t\tlocalSubscriptions.current.forEach((sub) => {\n\t\t\t\t\tdelete subscriptions[sub];\n\t\t\t\t});\n\t\t\t\tlocalSubscriptions.current = [];\n\t\t\t\tconst allSubscribedObjects = Object.assign(\n\t\t\t\t\t{},\n\t\t\t\t\t...Object.values(subscriptions).filter((v) => v != null),\n\t\t\t\t) as PrinterObjectsMoonrakerQueryParams;\n\t\t\t\tmoonrakerQuery('printer.objects.subscribe' as 'printer.objects.query', {\n\t\t\t\t\tobjects: Object.keys(allSubscribedObjects).length > 0 ? allSubscribedObjects : null,\n\t\t\t\t}).catch((e) => {\n\t\t\t\t\t// ignore\n\t\t\t\t});\n\t\t\t}\n\t\t\tonReadyCallbacks.current.forEach((cb) => cb.reject());\n\t\t\tonReadyCallbacks.current = [];\n\t\t};\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\treturn {\n\t\tquery: moonrakerQuery,\n\t\tsaveItem,\n\t\tgetItem,\n\t\tsubscribeToObject,\n\t\tstatus: moonrakerStatus,\n\t\tlastMessage: lastJsonMessage,\n\t\tisReady: readyState === 1,\n\t};\n};\n\nexport const useNamespacedItemQuery = <\n\tN extends MoonrakerNamespaces,\n\tK extends MoonrakerNamespaceKeys<N>,\n\tV extends MoonrakerDBValue<N, K>,\n>(\n\tnamespace: N,\n\tkey: K,\n\toptions?: Omit<UseQueryOptions<V, unknown, V, N[]>, 'queryKey' | 'queryFn'>,\n) => {\n\tconst { getItem } = useMoonraker();\n\treturn useQuery({\n\t\t...options,\n\t\tqueryKey: [namespace, key],\n\t\tqueryFn: async () => {\n\t\t\treturn getItem(namespace, key) as Promise<V>;\n\t\t},\n\t});\n};\n\nexport const useMoonrakerQuery = <\n\tK extends MoonrakerQueryKeys = MoonrakerQueryKeys,\n\tP extends MoonrakerQueryParams<K> = MoonrakerQueryParams<K>,\n\tO extends Omit<\n\t\tUseQueryOptions<MoonrakerQueryResult<K>, unknown, MoonrakerQueryResult<K>, K[]>,\n\t\t'queryKey' | 'queryFn'\n\t> = Omit<UseQueryOptions<MoonrakerQueryResult<K>, unknown, MoonrakerQueryResult<K>, K[]>, 'queryKey' | 'queryFn'>,\n>(\n\t...args: P extends void ? [K, O?] : [K, P, O?]\n) => {\n\tconst { query } = useMoonraker();\n\tconst options = args.length === 3 ? (args[2] as O) : (args[1] as O);\n\tconst params = args.length === 3 ? args[1] : undefined;\n\tconst key = args[0];\n\tconst passed = (args.length === 3 ? [key, params] : [key]) as P extends void ? [K] : [K, P];\n\treturn useQuery({\n\t\t...(options ?? {}),\n\t\tqueryKey: [args[0]],\n\t\tqueryFn: async () => {\n\t\t\treturn query(...passed) as Promise<MoonrakerQueryResult<K>>;\n\t\t},\n\t});\n};\n\nexport const useMoonrakerMutation = <\n\tK extends MoonrakerMutationKeys = MoonrakerMutationKeys,\n\tP extends MoonrakerMutationParams<K> = MoonrakerMutationParams<K>,\n\tO extends Omit<UseMutationOptions<MoonrakerMutationResult<K>, unknown, P, K[]>, 'mutationKey' | 'mutationFn'> = Omit<\n\t\tUseMutationOptions<MoonrakerMutationResult<K>, unknown, P, K[]>,\n\t\t'mutationKey' | 'mutationFn'\n\t>,\n>(\n\t...args: [K, O?]\n) => {\n\tconst { query } = useMoonraker();\n\tconst options = args[1];\n\tconst key = args[0];\n\treturn useMutation({\n\t\t...options,\n\t\tmutationKey: [args[0]],\n\t\tmutationFn: async (params: P) => {\n\t\t\tconst passed = (params ? [key, params] : [key]) as P extends void ? [K] : [K, P];\n\t\t\treturn query(...passed) as Promise<MoonrakerMutationResult<K>>;\n\t\t},\n\t});\n};\n\nexport const usePrinterObjectQuery = <TArgs extends [PrinterObjectKeys, ...PrinterObjectKeys[]]>(...args: TArgs) => {\n\tconst { query } = useMoonraker();\n\treturn useQuery({\n\t\tqueryKey: args,\n\t\tqueryFn: async () => {\n\t\t\tconst objects = Object.fromEntries(args.map((key) => [key, null])) as PrinterObjectsMoonrakerQueryParams;\n\t\t\treturn (await query('printer.objects.query', { objects })).status as {\n\t\t\t\t[K in TArgs[number]]: PrinterObjectResult<K>;\n\t\t\t};\n\t\t},\n\t});\n};\n\nexport const usePrinterObjectSubscription = <\n\tTArgs extends [PrinterObjectKeys, ...PrinterObjectKeys[]],\n\tR extends object = { [K in TArgs[number]]: PrinterObjectResult<K> },\n>(\n\tselect: null | ((res: { [K in TArgs[number]]: PrinterObjectResult<K> }) => R),\n\t...args: TArgs\n) => {\n\tconst [state, setState] = useState<R | null>(null);\n\tconst stateRef = useRef(state);\n\tstateRef.current = state;\n\tconst selectRef = useRef(select);\n\tselectRef.current = select;\n\n\tconst _select = useCallback((res: { [K in TArgs[number]]: PrinterObjectResult<K> }) => {\n\t\tif (selectRef.current == null) {\n\t\t\treturn res as R;\n\t\t}\n\t\treturn selectRef.current?.(res);\n\t}, []);\n\n\tconst keys = useMemo(\n\t\t() => Object.fromEntries(args.map((key) => [key, null])) as PrinterObjectsMoonrakerQueryParams,\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[JSON.stringify(args.sort())],\n\t);\n\n\tconst { subscribeToObject } = useMoonraker({\n\t\tonStatusUpdate: useCallback(\n\t\t\t(res: MoonrakerStatusUpdate) => {\n\t\t\t\tconst changed = {} as typeof res;\n\t\t\t\tfor (const key in keys) {\n\t\t\t\t\tif (res[key as keyof typeof res] != null) {\n\t\t\t\t\t\tchanged[key as keyof typeof res] = res[key as keyof typeof res];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst changeSelection = _select(changed);\n\t\t\t\tif (changeSelection == null || typeof changeSelection !== 'object') {\n\t\t\t\t\tthrow new Error('Invalid selection function, must return object, got ' + typeof changeSelection);\n\t\t\t\t}\n\t\t\t\tif (Object.keys(changed).length > 0 && deepEqual(changeSelection, stateRef.current) === false) {\n\t\t\t\t\tsetState((prev) => {\n\t\t\t\t\t\treturn merge(prev ?? {}, changeSelection) as R;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t[_select, keys],\n\t\t),\n\t});\n\n\tuseEffect(() => {\n\t\tconst subscription = subscribeToObject(...(Object.keys(keys) as TArgs));\n\t\tsubscription\n\t\t\t.then((sub) => {\n\t\t\t\tsetState(_select(sub.res));\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tif (e instanceof Error) {\n\t\t\t\t\tgetLogger().error(e);\n\t\t\t\t}\n\t\t\t});\n\t\treturn () => {\n\t\t\tsubscription\n\t\t\t\t.then((sub) => sub.unsuscribe())\n\t\t\t\t.catch((e) => {\n\t\t\t\t\tif (e instanceof Error) {\n\t\t\t\t\t\tgetLogger().error(e);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t};\n\t}, [_select, keys, subscribeToObject]);\n\n\treturn state;\n};\n\nexport const useNamespacedItemMutation = <\n\tN extends MoonrakerNamespaces,\n\tK extends MoonrakerNamespaceKeys<N>,\n\tV extends MoonrakerDBValue<N, K>,\n>(\n\tnamespace: N,\n\tkey: K,\n\toptions?: Omit<UseMutationOptions<MoonrakerDBItemResponse<V>, unknown, V>, 'mutationKey' | 'mutationFn'>,\n) => {\n\tconst { saveItem } = useMoonraker();\n\treturn useMutation<MoonrakerDBItemResponse<V>, unknown, V>({\n\t\t...options,\n\t\tmutationKey: [namespace, key],\n\t\tmutationFn: (value: V) => saveItem(namespace, key, value) as Promise<MoonrakerDBItemResponse<V>>,\n\t});\n};\n\nexport const useMoonrakerState = <\n\tN extends MoonrakerNamespaces,\n\tK extends MoonrakerNamespaceKeys<N>,\n\tV extends MoonrakerDBValue<N, K>,\n\tVal extends NonNullable<V> | null,\n>(\n\tnamespace: N,\n\tkey: K,\n\tinitialValue: Val = null as Val,\n) => {\n\tconst query = useNamespacedItemQuery(namespace, key, { initialData: initialValue });\n\tconst mutation = useNamespacedItemMutation<N, K, V>(namespace, key);\n\tconst mutate = useCallback(\n\t\tasync (value: V | ((prev: NonNullable<V> | Val) => NonNullable<V> | Val)) => {\n\t\t\tconst newValue =\n\t\t\t\ttypeof value === 'function' ? (value as (prev: NonNullable<V> | Val) => V)(query.data ?? initialValue) : value;\n\t\t\tawait mutation.mutateAsync(newValue, {\n\t\t\t\tonSuccess: () => {\n\t\t\t\t\t// Todo, implement optimistic updates\n\t\t\t\t\tquery.refetch();\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\t[initialValue, mutation, query],\n\t);\n\treturn [query.data ?? initialValue, mutate, query, mutation] as const;\n};\n","import { ReadAtomInterface, syncEffect } from 'recoil-sync';\nimport { PrinterDefinitionWithResolvedToolheads } from '@/zods/printer';\nimport { trpcClient } from '@/helpers/trpc';\nimport { atomFamily, selector, DefaultValue, atom, noWait } from 'recoil';\nimport { z } from 'zod';\nimport { getRefineCheckerForZodSchema } from 'zod-refine';\nimport { deserializePrinterRail, serializePrinterRail } from '@/utils/serialization';\nimport { SerializedPrinterRail, PrinterAxis, PrinterRail } from '@/zods/motion';\nimport { Board, BoardID, BoardPath } from '@/zods/boards';\nimport { moonrakerWriteEffect } from '@/components/sync-with-moonraker';\nimport { PrinterSize } from '@/zods/printer-configuration';\n\nlet cachedPrinters: { [id: string]: z.infer<typeof PrinterDefinitionWithResolvedToolheads> } = {};\n\n// SyncEffect read methods\nexport const readPrinterAtom = async ({\n\tread,\n}: ReadAtomInterface): Promise<z.infer<typeof PrinterDefinitionWithResolvedToolheads> | null> => {\n\tconst printer = await read(PrinterState.key);\n\tif (printer != null) {\n\t\tlet printerId = z.object({ id: PrinterDefinitionWithResolvedToolheads.shape.id }).safeParse(printer);\n\t\tif (!printerId.success) {\n\t\t\tprinterId = z.object({ id: PrinterDefinitionWithResolvedToolheads.shape.id }).safeParse({ id: printer });\n\t\t}\n\t\tif (printerId.success) {\n\t\t\tlet newPrinter: null | PrinterDefinitionWithResolvedToolheads = cachedPrinters[printerId.data.id];\n\t\t\tif (newPrinter == null) {\n\t\t\t\tnewPrinter = await trpcClient.printer.printer.query(printerId.data.id, {});\n\t\t\t\tif (newPrinter) {\n\t\t\t\t\tcachedPrinters[printerId.data.id] = newPrinter;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn newPrinter ?? null;\n\t\t}\n\t}\n\treturn null;\n};\n\nexport const readPrinterRailAtom =\n\t(param: PrinterAxis) =>\n\tasync ({ read }: ReadAtomInterface): Promise<z.infer<typeof SerializedPrinterRail> | null> => {\n\t\tconst printerRailState = await read(PrinterRailState(param).key);\n\t\tif (printerRailState != null) {\n\t\t\tconst parsedRail = SerializedPrinterRail.safeParse(printerRailState);\n\t\t\tif (parsedRail.success) {\n\t\t\t\treturn parsedRail.data;\n\t\t\t}\n\t\t\tconst printer = await readPrinterAtom({ read });\n\t\t\tconst printerRailDefault = printer?.defaults.rails.find((r) => r.axis === param);\n\t\t\tif (printerRailDefault != null) {\n\t\t\t\tconst parsedRailRepaired = SerializedPrinterRail.safeParse({ ...printerRailDefault, ...printerRailState });\n\t\t\t\tif (parsedRailRepaired.success) {\n\t\t\t\t\treturn parsedRailRepaired.data;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\nexport const PrinterState = atom<z.infer<typeof PrinterDefinitionWithResolvedToolheads> | null>({\n\tkey: 'Printer',\n\tdefault: null,\n\teffects: [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\tread: readPrinterAtom,\n\t\t\twrite: async ({ write }, newValue) => {\n\t\t\t\tawait new Promise((resolve) => {\n\t\t\t\t\tif (newValue instanceof DefaultValue) {\n\t\t\t\t\t\twrite(PrinterState.key, null);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twrite(PrinterState.key, newValue ?? null);\n\t\t\t\t\t}\n\t\t\t\t\tsetTimeout(() => {}, 500);\n\t\t\t\t});\n\t\t\t},\n\t\t\trefine: getRefineCheckerForZodSchema(PrinterDefinitionWithResolvedToolheads.nullable()),\n\t\t}),\n\t],\n});\n\nexport const LoadablePrinterState = selector<z.infer<typeof PrinterDefinitionWithResolvedToolheads> | null>({\n\tkey: 'LoadablePrinterState',\n\tget: async ({ get }) => {\n\t\tconst loadable = get(noWait(PrinterState));\n\t\treturn {\n\t\t\thasValue: () => loadable.contents,\n\t\t\thasError: () => [],\n\t\t\tloading: () => [],\n\t\t}[loadable.state]();\n\t},\n});\n\nexport const PrinterSizeState = atom<z.output<typeof PrinterSize> | null>({\n\tkey: 'PrinterOption',\n\tdefault: null,\n\teffects: [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\trefine: getRefineCheckerForZodSchema(PrinterSize.nullable()),\n\t\t}),\n\t],\n});\n\nexport const ControlboardState = atom<Board | null>({\n\tkey: 'Controlboard',\n\tdefault: null,\n\teffects: [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\tread: async ({ read }) => {\n\t\t\t\tconst board = await read(ControlboardState.key);\n\t\t\t\tif (board != null) {\n\t\t\t\t\tconst boardId = z.object({ id: BoardID }).safeParse(board);\n\t\t\t\t\tif (boardId.success) {\n\t\t\t\t\t\tconst boardReq = await trpcClient.mcu.boards.query({ boardFilters: { toolboard: false } });\n\t\t\t\t\t\tconst newBoard = boardReq.find((b) => b.id === boardId.data.id);\n\t\t\t\t\t\treturn newBoard ?? null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\trefine: getRefineCheckerForZodSchema(Board.nullable()),\n\t\t}),\n\t],\n});\n\nexport const PrinterRailState = atomFamily<z.infer<typeof SerializedPrinterRail> | null, PrinterAxis>({\n\tkey: 'PrinterRail',\n\tdefault: null,\n\teffects: (param) => [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\tread: readPrinterRailAtom(param),\n\t\t\trefine: getRefineCheckerForZodSchema(SerializedPrinterRail.nullable()),\n\t\t}),\n\t],\n});\n\nexport const PrinterRailsState = selector<z.infer<typeof PrinterRail>[]>({\n\tkey: 'PrinterRails',\n\tget: ({ get }) => {\n\t\tconst printer = get(PrinterState);\n\t\tconst rails = printer?.defaults.rails.map((rail) => {\n\t\t\tconst railState = get(PrinterRailState(rail.axis));\n\t\t\treturn deserializePrinterRail(railState ?? rail);\n\t\t});\n\t\treturn rails ?? [];\n\t},\n\tset: ({ set }, newValue) => {\n\t\tif (newValue instanceof DefaultValue) {\n\t\t\tObject.values(PrinterAxis).forEach((axis) => {\n\t\t\t\tset(PrinterRailState(axis), null);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tnewValue.forEach((rail) => {\n\t\t\tset(PrinterRailState(rail.axis), serializePrinterRail(rail));\n\t\t});\n\t},\n});\n\nexport const LoadablePrinterRailsState = selector<z.infer<typeof PrinterRail>[]>({\n\tkey: 'LoadablePrinterRailsState',\n\tget: async ({ get }) => {\n\t\tconst loadable = get(noWait(PrinterRailsState));\n\t\treturn {\n\t\t\thasValue: () => loadable.contents,\n\t\t\thasError: () => [],\n\t\t\tloading: () => [],\n\t\t}[loadable.state]();\n\t},\n});\n","import { atomFamily, DefaultValue, selector, selectorFamily, noWait, waitForAll } from 'recoil';\nimport { ReadAtomInterface, syncEffect } from 'recoil-sync';\nimport { z } from 'zod';\nimport { getRefineCheckerForZodSchema } from 'zod-refine';\nimport { trpcClient } from '@/helpers/trpc';\nimport { BoardID, BoardPath, Toolboard } from '@/zods/boards';\nimport { PrinterAxis } from '@/zods/motion';\nimport {\n\tBaseToolheadConfiguration,\n\tSerializedToolheadConfiguration,\n\tToolheadConfiguration,\n\tToolNumber,\n} from '@/zods/toolhead';\nimport { PrinterState } from '@/recoil/printer';\nimport { moonrakerWriteEffect } from '@/components/sync-with-moonraker';\nimport { getLogger } from '@/app/_helpers/logger';\n\nexport const isAxisValidForTool = (axis: PrinterAxis, tool: ToolNumber) => {\n\tif (axis === PrinterAxis.dual_carriage && tool === 1) {\n\t\treturn true;\n\t}\n\tif (axis === PrinterAxis.x) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nexport const PrinterToolheadState = atomFamily<\n\t(ToolheadConfiguration<any> & { toolNumber: ToolNumber }) | null,\n\tToolNumber\n>({\n\tkey: 'PrinterToolhead',\n\tdefault: null,\n\teffects: (param) => [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\tread: async ({\n\t\t\t\tread,\n\t\t\t}: ReadAtomInterface): Promise<(ToolheadConfiguration<any> & { toolNumber: ToolNumber }) | null> => {\n\t\t\t\tconst state = await read(PrinterToolheadState(param).key);\n\t\t\t\tif (typeof state !== 'object') {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (state == null) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst { toolNumber: tNum, ...printerToolheadState } = state as ToolheadConfiguration<any> & {\n\t\t\t\t\ttoolNumber: ToolNumber;\n\t\t\t\t};\n\t\t\t\tif (printerToolheadState != null) {\n\t\t\t\t\tconst parsedToolhead = ToolheadConfiguration.safeParse(printerToolheadState);\n\t\t\t\t\tif (parsedToolhead.success) {\n\t\t\t\t\t\tlet freshToolboard = parsedToolhead.data.toolboard;\n\t\t\t\t\t\tif (freshToolboard) {\n\t\t\t\t\t\t\tif (freshToolboard != null) {\n\t\t\t\t\t\t\t\tconst toolboardPath = z.object({ id: BoardID }).safeParse(freshToolboard);\n\t\t\t\t\t\t\t\tif (toolboardPath.success) {\n\t\t\t\t\t\t\t\t\tconst boardReq = await trpcClient.mcu.boards.query({ boardFilters: { toolboard: true } });\n\t\t\t\t\t\t\t\t\tconst maybeToolboard = boardReq.find((b) => b.id === toolboardPath.data.id);\n\t\t\t\t\t\t\t\t\tif (maybeToolboard) {\n\t\t\t\t\t\t\t\t\t\tfreshToolboard = Toolboard.parse(maybeToolboard);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn { ...parsedToolhead.data, toolboard: freshToolboard, toolNumber: param };\n\t\t\t\t\t}\n\t\t\t\t\tgetLogger().debug(\n\t\t\t\t\t\t'RecoilSync: failed to read toolhead!',\n\t\t\t\t\t\tPrinterToolheadState(param).key,\n\t\t\t\t\t\tparsedToolhead.error,\n\t\t\t\t\t\tprinterToolheadState,\n\t\t\t\t\t);\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\trefine: getRefineCheckerForZodSchema(BaseToolheadConfiguration.extend({ toolNumber: ToolNumber }).nullable()),\n\t\t}),\n\t],\n});\n\nexport const DeserializeToolheadQuery = selectorFamily<\n\t(ToolheadConfiguration<any> & { toolNumber: ToolNumber }) | null,\n\t{ th: SerializedToolheadConfiguration; boardId: string; toolNumber: ToolNumber }\n>({\n\tkey: 'DeserializeToolheadQuery',\n\tget:\n\t\t(param) =>\n\t\tasync ({ get }) => {\n\t\t\tconst parsedToolhead = ToolheadConfiguration.safeParse(\n\t\t\t\tawait trpcClient.printer.deserializeToolheadConfiguration.query({\n\t\t\t\t\tconfig: param.th,\n\t\t\t\t\tprinterConfig: { controlboard: param.boardId },\n\t\t\t\t}),\n\t\t\t);\n\t\t\tif (!parsedToolhead.success) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn { ...parsedToolhead.data, toolNumber: param.toolNumber };\n\t\t},\n});\n\nexport const PrinterToolheadsState = selector<(ToolheadConfiguration<any> & { toolNumber: ToolNumber })[]>({\n\tkey: 'PrinterToolheadsState',\n\tget: ({ get }) => {\n\t\tconst printer = get(PrinterState);\n\t\tif (printer == null) {\n\t\t\treturn [];\n\t\t}\n\t\treturn get(waitForAll(printer.defaults.toolheads.map((th, i) => PrinterToolheadState(i as ToolNumber)))).filter(\n\t\t\tBoolean,\n\t\t);\n\t},\n\tset: ({ set, reset }, newValue) => {\n\t\tif (newValue instanceof DefaultValue) {\n\t\t\tthrow new Error('ToolheadsState cannot be reset, please reset the individual ToolheadState instead');\n\t\t}\n\t\tnewValue.forEach((th) => {\n\t\t\tset(PrinterToolheadState(th.toolNumber), { ...th, toolNumber: th.toolNumber });\n\t\t});\n\t},\n});\n\nexport const LoadablePrinterToolheadsState = selector<(ToolheadConfiguration<any> & { toolNumber: ToolNumber })[]>({\n\tkey: 'LoadablePrinterToolheadsState',\n\tget: async ({ get }) => {\n\t\tconst loadable = get(noWait(PrinterToolheadsState));\n\t\treturn {\n\t\t\thasValue: () => loadable.contents,\n\t\t\thasError: () => [],\n\t\t\tloading: () => [],\n\t\t}[loadable.state]();\n\t},\n});\n","import type { z } from 'zod';\nimport { Drivers } from '@/data/drivers';\nimport {\n\tBasePrinterRail,\n\tDriver,\n\tPrinterRail,\n\tPrinterRailDefinition,\n\tSerializedPrinterRail,\n\tSerializedPrinterRailDefinition,\n\tStepper,\n\tPrinterAxis,\n} from '@/zods/motion';\nimport { Steppers } from '@/data/steppers';\nimport {\n\tToolheadConfiguration,\n\tSerializedToolheadConfiguration,\n\tPartialToolheadConfiguration,\n\tSerializedPartialToolheadConfiguration,\n\tToolOrAxis,\n} from '@/zods/toolhead';\nimport { PartialPrinterConfiguration } from '@/zods/printer-configuration';\nimport { ToolheadHelper } from '@/helpers/toolhead';\n\nexport const deserializeDriver = (driverId: z.input<typeof Driver.shape.id>): z.infer<typeof Driver> | null => {\n\treturn Drivers.find((d) => d.id === driverId) ?? null;\n};\n\nexport const deserializeStepper = (stepperId: z.input<typeof Stepper.shape.id>): z.infer<typeof Stepper> | null => {\n\treturn Steppers.find((d) => d.id === stepperId) ?? null;\n};\n\nexport const deserializePrinterRail = (rail: z.input<typeof SerializedPrinterRail>): z.infer<typeof PrinterRail> => {\n\tconst stepper = deserializeStepper(rail.stepper);\n\tconst driver = deserializeDriver(rail.driver);\n\tif (stepper == null) {\n\t\tthrow new Error(`Stepper ${rail.stepper} not found in database`);\n\t}\n\tif (driver == null) {\n\t\tthrow new Error(`Driver ${rail.driver} not found in database`);\n\t}\n\treturn BasePrinterRail.parse({\n\t\t...rail,\n\t\tstepper,\n\t\tdriver,\n\t});\n};\n\nexport const deserializePrinterRailDefinition = (\n\trail: z.input<typeof SerializedPrinterRailDefinition>,\n): z.infer<typeof PrinterRailDefinition> => {\n\tconst stepper = deserializeStepper(rail.stepper);\n\tconst driver = deserializeDriver(rail.driver);\n\tif (stepper == null) {\n\t\tthrow new Error(`Stepper ${rail.stepper} not found in database`);\n\t}\n\tif (driver == null) {\n\t\tthrow new Error(`Driver ${rail.driver} not found in database`);\n\t}\n\treturn PrinterRailDefinition.parse({\n\t\t...rail,\n\t\tstepper,\n\t\tdriver,\n\t});\n};\n\nexport const stringToTitleObject = <Item extends string>(data: Item): { id: Item; title: Item } => {\n\treturn { id: data, title: data };\n};\n\nexport const serializePrinterRail = (rail: z.input<typeof PrinterRail>): z.infer<typeof SerializedPrinterRail> => {\n\treturn SerializedPrinterRail.parse({\n\t\t...rail,\n\t\tdriver: rail.driver.id,\n\t\tstepper: rail.stepper.id,\n\t});\n};\n\nexport const serializeToolheadConfiguration = (th: ToolheadConfiguration<any>): SerializedToolheadConfiguration => {\n\treturn {\n\t\t...th,\n\t\ttoolboard: th.toolboard?.id,\n\t\thotend: th.hotend.id,\n\t\tthermistor: th.thermistor,\n\t\textruder: th.extruder.id,\n\t\tprobe: th.probe?.id,\n\t\txEndstop: th.xEndstop.id,\n\t\tyEndstop: th.yEndstop.id,\n\t\tpartFan: th.partFan.id,\n\t\thotendFan: th.hotendFan.id,\n\t\txAccelerometer: th.xAccelerometer?.id,\n\t\tyAccelerometer: th.yAccelerometer?.id,\n\t};\n};\n\nexport const serializePartialToolheadConfiguration = (\n\tth: PartialToolheadConfiguration,\n): SerializedPartialToolheadConfiguration => {\n\treturn th == null\n\t\t? undefined\n\t\t: {\n\t\t\t\t...th,\n\t\t\t\ttoolboard: th.toolboard?.id,\n\t\t\t\thotend: th.hotend?.id,\n\t\t\t\tthermistor: th.thermistor,\n\t\t\t\textruder: th.extruder?.id,\n\t\t\t\tprobe: th.probe?.id,\n\t\t\t\txEndstop: th.xEndstop?.id,\n\t\t\t\tyEndstop: th.yEndstop?.id,\n\t\t\t\tpartFan: th.partFan?.id,\n\t\t\t\thotendFan: th.hotendFan?.id,\n\t\t\t\txAccelerometer: th.xAccelerometer?.id,\n\t\t\t\tyAccelerometer: th.yAccelerometer?.id,\n\t\t\t};\n};\n\nexport const extractToolheadsFromPrinterConfiguration = (config: PartialPrinterConfiguration) => {\n\tconst toolheads = config?.toolheads\n\t\t?.map((th) => {\n\t\t\tif (th == null) {\n\t\t\t\tthrow new Error('Toolhead can not be null');\n\t\t\t}\n\t\t\treturn new ToolheadHelper(ToolheadConfiguration.parse(th));\n\t\t})\n\t\t.filter(Boolean);\n\tif (toolheads == null) {\n\t\tthrow new Error('No toolheads found');\n\t}\n\treturn toolheads;\n};\n\nexport const extractToolheadFromPrinterConfiguration = (\n\ttoolOrAxis: ToolOrAxis | PrinterAxis,\n\tconfig: PartialPrinterConfiguration,\n) => {\n\tif (config?.toolheads == null || config.toolheads.length === 0) {\n\t\tthrow new Error('No toolheads preset in supplied printer config');\n\t}\n\tconst toolheads = extractToolheadsFromPrinterConfiguration(config);\n\tconst th =\n\t\ttypeof toolOrAxis === 'number'\n\t\t\t? toolheads.find((th) => th.getTool() === toolOrAxis)\n\t\t\t: toolheads.find((th) => th.getExtruderAxis() === toolOrAxis || th.getMotionAxis() === toolOrAxis);\n\treturn th;\n};\n","'use client';\nimport { createTRPCProxyClient, httpBatchLink } from '@trpc/client';\nimport { createTRPCNext } from '@trpc/next';\nimport type { AppRouter } from '@/server/routers/index';\nexport type {\n\tPrinterRouterLike,\n\tDropdownQuery,\n\tDropdownQueryKeys,\n\tDropdownQueryInput,\n\tDropdownQueryOutput,\n} from '@/server/routers/printer';\n\nexport function getBaseUrl() {\n\tif (typeof window !== 'undefined')\n\t\t// browser should use relative path\n\t\treturn '/configure';\n\tif (process.env.RENDER_INTERNAL_HOSTNAME)\n\t\t// reference for render.com\n\t\treturn `http://${process.env.RENDER_INTERNAL_HOSTNAME}:${process.env.PORT}/configure`;\n\t// assume localhost\n\treturn `http://127.0.0.1:${process.env.PORT ?? 3000}/configure`;\n}\nexport const trpc = createTRPCNext<AppRouter>({\n\tconfig() {\n\t\treturn {\n\t\t\tlinks: [\n\t\t\t\thttpBatchLink({\n\t\t\t\t\t/**\n\t\t\t\t\t * @link https://trpc.io/docs/ssr\n\t\t\t\t\t **/\n\t\t\t\t\turl: `${getBaseUrl()}/api/trpc`,\n\t\t\t\t\tmaxURLLength: 2083, // a suitable size\n\t\t\t\t}),\n\t\t\t],\n\t\t};\n\t},\n\toverrides: {\n\t\tuseMutation: {\n\t\t\t/**\n\t\t\t * This function is called whenever a `.useMutation` succeeds\n\t\t\t **/\n\t\t\tasync onSuccess(opts) {\n\t\t\t\t/**\n\t\t\t\t * @note that order here matters:\n\t\t\t\t * The order here allows route changes in `onSuccess` without\n\t\t\t\t * having a flash of content change whilst redirecting.\n\t\t\t\t **/\n\t\t\t\t// Calls the `onSuccess` defined in the `useQuery()`-options:\n\t\t\t\tawait opts.originalFn();\n\t\t\t\t// Invalidate all queries in the react-query cache:\n\t\t\t\tawait opts.queryClient.invalidateQueries();\n\t\t\t},\n\t\t},\n\t},\n\t/**\n\t * @link https://trpc.io/docs/ssr\n\t **/\n\tssr: false,\n});\nexport const proxyClient = createTRPCProxyClient<AppRouter>({\n\tlinks: [\n\t\thttpBatchLink({\n\t\t\t/**\n\t\t\t * @link https://trpc.io/docs/ssr\n\t\t\t **/\n\t\t\turl: `${getBaseUrl()}/api/trpc`,\n\t\t\tmaxURLLength: 2083, // a suitable size\n\t\t}),\n\t],\n});\n","import { z } from 'zod';\nimport { PrinterAxis, Voltage } from '@/zods/motion';\n\n// Complete map of all available RatOS pin aliases.\nexport const AllPins = {\n\tx_step_pin: z.string().optional(),\n\tx_dir_pin: z.string().optional(),\n\tx_enable_pin: z.string().optional(),\n\tx_uart_pin: z.string().optional(),\n\tx_diag_pin: z.string().optional(),\n\tx_endstop_pin: z.string().optional(),\n\tx1_step_pin: z.string().optional(),\n\tx1_dir_pin: z.string().optional(),\n\tx1_enable_pin: z.string().optional(),\n\tx1_uart_pin: z.string().optional(),\n\tx1_diag_pin: z.string().optional(),\n\tx1_endstop_pin: z.string().optional(),\n\tdual_carriage_step_pin: z.string().optional(),\n\tdual_carriage_dir_pin: z.string().optional(),\n\tdual_carriage_enable_pin: z.string().optional(),\n\tdual_carriage_uart_pin: z.string().optional(),\n\tdual_carriage_diag_pin: z.string().optional(),\n\tdual_carriage_endstop_pin: z.string().optional(),\n\ty_step_pin: z.string().optional(),\n\ty_dir_pin: z.string().optional(),\n\ty_enable_pin: z.string().optional(),\n\ty_uart_pin: z.string().optional(),\n\ty_diag_pin: z.string().optional(),\n\ty_endstop_pin: z.string().optional(),\n\ty1_step_pin: z.string().optional(),\n\ty1_dir_pin: z.string().optional(),\n\ty1_enable_pin: z.string().optional(),\n\ty1_uart_pin: z.string().optional(),\n\ty1_diag_pin: z.string().optional(),\n\ty1_endstop_pin: z.string().optional(),\n\ty2_step_pin: z.string().optional(),\n\ty2_dir_pin: z.string().optional(),\n\ty2_enable_pin: z.string().optional(),\n\ty2_uart_pin: z.string().optional(),\n\ty2_diag_pin: z.string().optional(),\n\ty2_endstop_pin: z.string().optional(),\n\tz0_step_pin: z.string().optional(),\n\tz0_dir_pin: z.string().optional(),\n\tz0_enable_pin: z.string().optional(),\n\tz0_uart_pin: z.string().optional(),\n\tz0_diag_pin: z.string().optional(),\n\tz1_step_pin: z.string().optional(),\n\tz1_dir_pin: z.string().optional(),\n\tz1_enable_pin: z.string().optional(),\n\tz1_uart_pin: z.string().optional(),\n\tz1_diag_pin: z.string().optional(),\n\tz2_step_pin: z.string().optional(),\n\tz2_dir_pin: z.string().optional(),\n\tz2_enable_pin: z.string().optional(),\n\tz2_uart_pin: z.string().optional(),\n\tz2_diag_pin: z.string().optional(),\n\tz3_step_pin: z.string().optional(),\n\tz3_dir_pin: z.string().optional(),\n\tz3_enable_pin: z.string().optional(),\n\tz3_uart_pin: z.string().optional(),\n\tz3_diag_pin: z.string().optional(),\n\te_step_pin: z.string().optional(),\n\te_dir_pin: z.string().optional(),\n\te_enable_pin: z.string().optional(),\n\te_uart_pin: z.string().optional(),\n\te_diag_pin: z.string().optional(),\n\te_heater_pin: z.string().optional(),\n\te_sensor_pin: z.string().optional(),\n\tstepper_spi_mosi_pin: z.string().optional(),\n\tstepper_spi_miso_pin: z.string().optional(),\n\tstepper_spi_sclk_pin: z.string().optional(),\n\tadxl345_cs_pin: z.string().optional(),\n\tbltouch_sensor_pin: z.string().optional(),\n\tbltouch_control_pin: z.string().optional(),\n\tprobe_pin: z.string().optional(),\n\tfan_part_cooling_pin: z.string().optional(),\n\tfan_toolhead_cooling_pin: z.string().optional(),\n\tfan_controller_board_pin: z.string().optional(),\n\theater_bed_heating_pin: z.string().optional(),\n\theater_bed_sensor_pin: z.string().optional(),\n\t'4p_fan_part_cooling_pin': z.string().optional(),\n\t'4p_fan_part_cooling_tach_pin': z.string().optional(),\n\t'4p_toolhead_cooling_pin': z.string().optional(),\n\t'4p_toolhead_cooling_tach_pin': z.string().optional(),\n\t'4p_controller_board_pin': z.string().optional(),\n\t'4p_controller_board_tach_pin': z.string().optional(),\n};\nexport const PinMap = z.object(AllPins);\n\nexport enum AxisPinPrefix {\n\tx = 'x',\n\tx1 = 'x1',\n\ty = 'y',\n\ty1 = 'y1',\n\ty2 = 'y2',\n\tz0 = 'z0',\n\tz1 = 'z1',\n\tz2 = 'z2',\n\tz3 = 'z3',\n\te = 'e',\n\te1 = 'e1',\n\tdual_carriage = 'dual_carriage',\n}\n\nexport const pinAliasPrefixToPrinterAxis: { [key in AxisPinPrefix]: PrinterAxis } = {\n\tx: PrinterAxis['x'],\n\tx1: PrinterAxis['x1'],\n\ty: PrinterAxis['y'],\n\ty1: PrinterAxis['y1'],\n\ty2: PrinterAxis['y2'],\n\tz0: PrinterAxis['z'],\n\tz1: PrinterAxis['z1'],\n\tz2: PrinterAxis['z2'],\n\tz3: PrinterAxis['z3'],\n\te: PrinterAxis['extruder'],\n\te1: PrinterAxis['extruder1'],\n\tdual_carriage: PrinterAxis['dual_carriage'],\n};\n\nexport const pinPrefixToAxis = z.nativeEnum(AxisPinPrefix).transform((v) => pinAliasPrefixToPrinterAxis[v] ?? null);\nexport const axisToPinPrefix = z\n\t.nativeEnum(PrinterAxis)\n\t.transform(\n\t\t(pa) =>\n\t\t\t(Object.keys(pinAliasPrefixToPrinterAxis) as AxisPinPrefix[]).find(\n\t\t\t\t(p) => pinAliasPrefixToPrinterAxis[p] === pa,\n\t\t\t) ?? null,\n\t);\n\nexport const ControlBoardPinMap = PinMap.extend({\n\tx_step_pin: z.string(),\n\tx_dir_pin: z.string(),\n\tx_enable_pin: z.string(),\n\tx_uart_pin: z.string(),\n\tx_endstop_pin: z.string(),\n\ty_step_pin: z.string(),\n\ty_dir_pin: z.string(),\n\ty_enable_pin: z.string(),\n\ty_uart_pin: z.string(),\n\ty_endstop_pin: z.string(),\n\tz0_step_pin: z.string(),\n\tz0_dir_pin: z.string(),\n\tz0_enable_pin: z.string(),\n\tz0_uart_pin: z.string(),\n\te_step_pin: z.string(),\n\te_dir_pin: z.string(),\n\te_enable_pin: z.string(),\n\te_uart_pin: z.string(),\n\te_heater_pin: z.string(),\n\te_sensor_pin: z.string(),\n\tprobe_pin: z.string(),\n\theater_bed_heating_pin: z.string(),\n\theater_bed_sensor_pin: z.string(),\n}).and(\n\tz\n\t\t.object({\n\t\t\tfan_part_cooling_pin: z.string(),\n\t\t\tfan_toolhead_cooling_pin: z.string(),\n\t\t})\n\t\t.or(\n\t\t\tz.object({\n\t\t\t\t'4p_fan_part_cooling_pin': z.string(),\n\t\t\t\t'4p_fan_part_cooling_tach_pin': z.string(),\n\t\t\t\t'4p_toolhead_cooling_pin': z.string(),\n\t\t\t\t'4p_toolhead_cooling_tach_pin': z.string(),\n\t\t\t}),\n\t\t),\n);\n\nexport const ExtruderlessControlBoardPinMap = PinMap.extend({\n\tx_step_pin: z.string(),\n\tx_dir_pin: z.string(),\n\tx_enable_pin: z.string(),\n\tx_uart_pin: z.string(),\n\tx_endstop_pin: z.string(),\n\ty_step_pin: z.string(),\n\ty_dir_pin: z.string(),\n\ty_enable_pin: z.string(),\n\ty_uart_pin: z.string(),\n\ty_endstop_pin: z.string(),\n\tz0_step_pin: z.string(),\n\tz0_dir_pin: z.string(),\n\tz0_enable_pin: z.string(),\n\tz0_uart_pin: z.string(),\n\tz1_step_pin: z.string(),\n\tz1_dir_pin: z.string(),\n\tz1_enable_pin: z.string(),\n\tz1_uart_pin: z.string(),\n\tz2_step_pin: z.string(),\n\tz2_dir_pin: z.string(),\n\tz2_enable_pin: z.string(),\n\tz2_uart_pin: z.string(),\n\tprobe_pin: z.string(),\n\theater_bed_heating_pin: z.string(),\n\theater_bed_sensor_pin: z.string(),\n}).and(\n\tz\n\t\t.object({\n\t\t\tfan_part_cooling_pin: z.string(),\n\t\t\tfan_toolhead_cooling_pin: z.string(),\n\t\t})\n\t\t.or(\n\t\t\tz.object({\n\t\t\t\t'4p_fan_part_cooling_pin': z.string(),\n\t\t\t\t'4p_fan_part_cooling_tach_pin': z.string(),\n\t\t\t\t'4p_toolhead_cooling_pin': z.string(),\n\t\t\t\t'4p_toolhead_cooling_tach_pin': z.string(),\n\t\t\t}),\n\t\t),\n);\nexport const ToolboardPinMap = PinMap.extend({\n\te_step_pin: z.string(),\n\te_dir_pin: z.string(),\n\te_enable_pin: z.string(),\n\te_uart_pin: z.string(),\n\te_heater_pin: z.string(),\n\te_sensor_pin: z.string(),\n\tadxl345_cs_pin: z.string(),\n\tprobe_pin: z.string(),\n}).and(\n\tz\n\t\t.object({\n\t\t\tfan_part_cooling_pin: z.string(),\n\t\t\tfan_toolhead_cooling_pin: z.string(),\n\t\t})\n\t\t.or(\n\t\t\tz.object({\n\t\t\t\t'4p_fan_part_cooling_pin': z.string(),\n\t\t\t\t'4p_fan_part_cooling_tach_pin': z.string(),\n\t\t\t\t'4p_toolhead_cooling_pin': z.string(),\n\t\t\t\t'4p_toolhead_cooling_tach_pin': z.string(),\n\t\t\t}),\n\t\t),\n);\n\nexport const UARTPins = z.object({\n\tuart_pin: z.string(),\n\tuart_address: z.string().optional(),\n\trx_pin: z.string().optional(),\n\ttx_pin: z.string().optional(),\n});\n\nexport const SPIPins = z\n\t.object({\n\t\tcs_pin: z.string(),\n\t})\n\t.and(\n\t\tz.object({ spi_bus: z.string() }).or(\n\t\t\tz.object({\n\t\t\t\tspi_software_mosi_pin: z.string().optional(),\n\t\t\t\tspi_software_miso_pin: z.string().optional(),\n\t\t\t\tspi_software_sclk_pin: z.string().optional(),\n\t\t\t}),\n\t\t),\n\t);\n\nexport const hasSPI = (slot: unknown) => {\n\treturn SPIPins.safeParse(slot).success;\n};\n\nexport const hasUART = (slot: unknown) => {\n\treturn UARTPins.safeParse(slot).success;\n};\n\nexport const MotorSlotPins = z.object({\n\tstep_pin: z.string(),\n\tdir_pin: z.string(),\n\tenable_pin: z.string(),\n\tdiag_pin: z.string().optional(),\n\tendstop_pin: z.string().optional(),\n\t// UART\n\tuart_pin: z.string().optional(),\n\trx_pin: z.string().optional(),\n\ttx_pin: z.string().optional(),\n\t// SPI\n\tcs_pin: z.string().optional(),\n});\n\nexport const MotorSlot = MotorSlotPins.extend({\n\ttitle: z.string(),\n\t// UART\n\tuart_address: z.string().optional(),\n\t// SPI\n\tspi_bus: z.string().optional(),\n\tspi_software_mosi_pin: z.string().optional(),\n\tspi_software_miso_pin: z.string().optional(),\n\tspi_software_sclk_pin: z.string().optional(),\n}).refine(\n\t(slot) => {\n\t\treturn hasSPI(slot) || hasUART(slot);\n\t},\n\t{ message: 'Motor slot must have either SPI or UART pins' },\n);\n\nexport type MotorSlot = z.output<typeof MotorSlot>;\n\nconst AnySlotPin = MotorSlot.innerType().omit({ title: true }).partial();\nexport type AnySlotPin = z.infer<typeof AnySlotPin>;\n\nexport const MotorSlotKey = z.string();\n\nexport const reversePinLookup: (pins: AnySlotPin, board: Board) => z.infer<typeof MotorSlotKey> | undefined = (\n\tpins,\n\tboard,\n) => {\n\tconst slots = Object.entries(board.motorSlots ?? {});\n\tfor (const [key, slot] of slots) {\n\t\tif (Object.entries(pins).every(([pin, value]) => slot[pin as keyof typeof slot] === value)) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n};\n\nexport const BoardID = z.string().brand('BoardID');\nexport const BoardPath = z.string().brand('BoardPath');\nexport const BoardSerialPath = z.string().brand('BoardSerialPath');\n\nconst integratedDrivers = z.record(z.nativeEnum(PrinterAxis).or(z.string()), z.string());\nconst motorSlots = z.record(MotorSlotKey, MotorSlot);\n\nexport const Board = z\n\t.object({\n\t\tid: BoardID,\n\t\tisToolboard: z.boolean().optional(),\n\t\tisHost: z.boolean().optional(),\n\t\tserialPath: BoardSerialPath.optional(),\n\t\tboardImageFileName: z.string().optional(),\n\t\tmanualFileName: z.string().optional(),\n\t\twireDiagramFileName: z.string().optional(),\n\t\tname: z.string(),\n\t\tmanufacturer: z.string(),\n\t\tfirmwareBinaryName: z.string(),\n\t\tcompileScript: z.string(),\n\t\tflashScript: z.string().optional(),\n\t\tflashInstructions: z.string().optional(),\n\t\tdisableAutoFlash: z.boolean().optional(),\n\t\tdocumentationLink: z.string().optional(),\n\t\thasQuirksFiles: z.boolean().optional(),\n\t\tdriverCount: z.number(),\n\t\tintegratedDrivers: integratedDrivers.optional(),\n\t\textruderlessConfig: z.string().optional(),\n\t\tfourPinFanConnectorCount: z.number().optional(),\n\t\tdriverVoltages: Voltage.array().default([24]),\n\t\thasMcuTempSensor: z.boolean().default(true),\n\t\talternativePT1000Resistor: z.number().optional(),\n\t\tmotorSlots: z.record(MotorSlotKey, MotorSlot).optional(),\n\t\toutputPins: z\n\t\t\t.array(\n\t\t\t\tz.object({\n\t\t\t\t\tpin: z.string(),\n\t\t\t\t\tname: z.string(),\n\t\t\t\t\tvalue: z.number().min(0).max(1),\n\t\t\t\t}),\n\t\t\t)\n\t\t\t.optional(),\n\t\tdfu: z\n\t\t\t.object({\n\t\t\t\tdfuBootImage: z.string(),\n\t\t\t\tflashDevice: z.string(),\n\t\t\t\tinstructions: z.array(z.string()),\n\t\t\t\treminder: z.string().optional(),\n\t\t\t\thasBoot0Jumper: z.boolean(),\n\t\t\t})\n\t\t\t.optional(),\n\t\tstepperSPI: z\n\t\t\t.object({\n\t\t\t\tsoftware: z.object({\n\t\t\t\t\tsclk: z.string(),\n\t\t\t\t\tmosi: z.string(),\n\t\t\t\t\tmiso: z.string(),\n\t\t\t\t}),\n\t\t\t})\n\t\t\t.or(\n\t\t\t\tz.object({\n\t\t\t\t\thardware: z.object({\n\t\t\t\t\t\tbus: z.string(),\n\t\t\t\t\t}),\n\t\t\t\t}),\n\t\t\t)\n\t\t\t.optional(),\n\t\tADXL345SPI: z\n\t\t\t.object({\n\t\t\t\tcs_pin: z.string(),\n\t\t\t})\n\t\t\t.and(\n\t\t\t\tz\n\t\t\t\t\t.object({\n\t\t\t\t\t\tsoftware: z.object({\n\t\t\t\t\t\t\tsclk: z.string(),\n\t\t\t\t\t\t\tmosi: z.string(),\n\t\t\t\t\t\t\tmiso: z.string(),\n\t\t\t\t\t\t}),\n\t\t\t\t\t})\n\t\t\t\t\t.or(\n\t\t\t\t\t\tz.object({\n\t\t\t\t\t\t\thardware: z.object({\n\t\t\t\t\t\t\t\tbus: z.string(),\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t)\n\t\t\t.optional(),\n\t\tLIS2DW: z\n\t\t\t.object({\n\t\t\t\tcs_pin: z.string(),\n\t\t\t})\n\t\t\t.and(\n\t\t\t\tz\n\t\t\t\t\t.object({\n\t\t\t\t\t\tsoftware: z.object({\n\t\t\t\t\t\t\tsclk: z.string(),\n\t\t\t\t\t\t\tmosi: z.string(),\n\t\t\t\t\t\t\tmiso: z.string(),\n\t\t\t\t\t\t}),\n\t\t\t\t\t})\n\t\t\t\t\t.or(\n\t\t\t\t\t\tz.object({\n\t\t\t\t\t\t\thardware: z.object({\n\t\t\t\t\t\t\t\tbus: z.string(),\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t)\n\t\t\t.optional(),\n\t\tpath: BoardPath,\n\t})\n\t.and(\n\t\tz\n\t\t\t.object({ isToolboard: z.literal(true), motorSlots: z.undefined() })\n\t\t\t.or(z.object({ motorSlots: motorSlots }))\n\t\t\t.or(z.object({ isHost: z.literal(true), motorSlots: z.undefined() })),\n\t);\n\nexport const BoardWithDetectionStatus = Board.and(\n\tz.object({\n\t\tdetected: z.boolean(),\n\t}),\n);\n\nexport const AutoFlashableBoard = z.object({\n\tid: z.string(),\n\tdisableAutoFlash: z.literal(false).optional(),\n\tisToolboard: z.boolean().optional(),\n\tcompileScript: z.string(),\n\tflashScript: z.string(),\n\tpath: BoardPath,\n});\n\nexport const Toolboard = Board.and(\n\tz.object({\n\t\tisToolboard: z.literal(true),\n\t\tisHost: z.literal(false).optional(),\n\t\tintegratedDrivers: integratedDrivers.and(\n\t\t\tz.object({\n\t\t\t\t[PrinterAxis.extruder]: z.string(),\n\t\t\t}),\n\t\t),\n\t}),\n);\n\nexport const ToolboardWithDetectionStatus = Toolboard.and(\n\tz.object({\n\t\tdetected: z.boolean(),\n\t}),\n);\n\nexport type Board = z.infer<typeof Board>;\nexport type BoardWithDetectionStatus = z.infer<typeof BoardWithDetectionStatus>;\nexport type Toolboard = z.infer<typeof Toolboard>;\nexport type ToolboardWithDetectionStatus = z.infer<typeof ToolboardWithDetectionStatus>;\nexport type AutoFlashableBoard = z.infer<typeof AutoFlashableBoard>;\nexport type ToolboardPinMap = z.infer<typeof ToolboardPinMap>;\nexport type ControlBoardPinMap = z.infer<typeof ControlBoardPinMap>;\nexport type ExtruderlessControlBoardPinMap = z.infer<typeof ExtruderlessControlBoardPinMap>;\n","import { z } from 'zod';\nimport { serverSchema } from '@/env/schema.mjs';\nimport { PrinterRailDefinition, Stepper } from '@/zods/motion';\nimport { badgeColorOptions } from '@/components/common/badge';\n\nexport const thermistors = [\n\t'EPCOS 100K B57560G104F',\n\t'ATC Semitec 104GT-2',\n\t'ATC Semitec 104NT-4-R025H42G',\n\t'Generic 3950',\n\t'Honeywell 100K 135-104LAG-J01',\n\t'NTC 100K MGB18-104F39050L32',\n\t'SliceEngineering 450',\n\t'TDK NTCG104LH104JT1',\n\t'PT1000',\n] as const;\n\nlet startsWithServerValidation = '';\nif (process.env.RATOS_CONFIGURATION_PATH) {\n\tconst environment = serverSchema.parse(process.env);\n\tstartsWithServerValidation = environment.RATOS_CONFIGURATION_PATH;\n}\nconst hardwareType = z.object({\n\tpath: z.string().startsWith(startsWithServerValidation).endsWith('.cfg'),\n\tid: z.string(),\n});\n\nexport const Thermistor = z.enum(thermistors);\n\nexport const Hotend = hardwareType.extend({\n\ttype: z.literal('hotend'),\n\ttitle: z.string(),\n\tthermistor: z.enum(thermistors),\n\tflowType: z.union([z.literal('sf'), z.literal('hf'), z.literal('uhf')]),\n});\n\nexport const Nozzle = z.object({\n\ttype: z.enum(['Regular', 'CHT']),\n\tdiameter: z.number().min(0.2).max(1.8),\n});\n\nexport const Extruder = hardwareType.extend({\n\ttype: z.literal('extruder'),\n\tstepper: Stepper.shape.id.optional(),\n\tcurrent: PrinterRailDefinition.shape.current.optional(),\n\ttitle: z.string(),\n});\n\nexport const Probe = hardwareType.extend({\n\ttype: z.literal('static-probe').or(z.literal('stowable-probe')),\n\ttitle: z.string(),\n});\n\nexport const Endstop = z.object({\n\tid: z.enum(['endstop', 'endstop-toolboard', 'sensorless']),\n\ttitle: z.string(),\n\tbadge: z\n\t\t.array(\n\t\t\tz.object({\n\t\t\t\tchildren: z.string(),\n\t\t\t\tcolor: badgeColorOptions,\n\t\t\t}),\n\t\t)\n\t\t.optional(),\n});\n\nexport const KlipperAccelSensorNameSchame = z.union([\n\tz.literal('toolboard_t0'),\n\tz.literal('toolboard_t1'),\n\tz.literal('controlboard'),\n\tz.literal('rpi'),\n\tz.literal('beacon'),\n]);\n\nexport const AccelerometerType = z.union([z.literal('adxl345'), z.literal('lis2dw'), z.literal('beacon')]);\n\nexport const Accelerometer = z.object({\n\tid: z.enum(['toolboard', 'controlboard', 'sbc', 'none', 'beacon']),\n\ttitle: z.string(),\n\taccelerometerType: AccelerometerType.default('adxl345').optional(),\n});\n\nexport type KlipperAccelSensorName = z.infer<typeof KlipperAccelSensorNameSchame>;\n\nexport const klipperAccelSensorSchema = z.object({\n\tname: KlipperAccelSensorNameSchame,\n\ttype: AccelerometerType,\n});\n\nexport type KlipperAccelSensorSchema = z.infer<typeof klipperAccelSensorSchema>;\n\nexport const AccelerometerWithType = Accelerometer.extend({\n\taccelerometerType: AccelerometerType,\n});\n\nexport type AccelerometerWithType = z.infer<typeof AccelerometerWithType>;\n\nexport const Fan = z.object({\n\tid: z.enum([\n\t\t'2pin',\n\t\t'4pin',\n\t\t'4pin-dedicated',\n\t\t'2pin-toolboard',\n\t\t'4pin-toolboard',\n\t\t'4pin-dedicated-toolboard',\n\t\t'none',\n\t]),\n\ttitle: z.string(),\n\tbadge: z\n\t\t.array(\n\t\t\tz.object({\n\t\t\t\tchildren: z.string(),\n\t\t\t\tcolor: badgeColorOptions,\n\t\t\t}),\n\t\t)\n\t\t.optional(),\n});\n","import * as z from 'zod';\nimport type { Board, Toolboard } from '@/zods/boards';\nexport enum StepperVoltage {\n\t'24V' = 24,\n\t'36V' = 36,\n\t'48V' = 48,\n\t'56V' = 56,\n\t'60V' = 60,\n}\n\nexport const Voltages: { id: StepperVoltage; title: string }[] = [\n\t{ id: StepperVoltage['24V'], title: '24V' },\n\t{ id: StepperVoltage['36V'], title: '36V' },\n\t{ id: StepperVoltage['48V'], title: '48V' },\n\t{ id: StepperVoltage['56V'], title: '56V' },\n\t{ id: StepperVoltage['60V'], title: '60V' },\n];\n\nexport const getSupportedVoltages = (\n\tboard: Board | Toolboard | null,\n\tdriver?: z.infer<typeof Driver>,\n): typeof Voltages => {\n\tif (driver?.external) {\n\t\treturn Voltages.filter((v) => driver?.voltages?.includes(v.id) || v.id === StepperVoltage['24V']);\n\t}\n\treturn Voltages.filter((v) => board?.driverVoltages?.includes(v.id) || v.id === StepperVoltage['24V']).filter(\n\t\t(v) => driver?.voltages?.includes(v.id) || v.id === StepperVoltage['24V'],\n\t);\n};\n\nexport const matchesDefaultRail = (\n\trail: Zod.infer<typeof BasePrinterRail>,\n\tdefaultRail: Zod.infer<typeof PrinterRailDefinition>,\n\tperformanceMode: boolean,\n) => {\n\treturn (\n\t\trail.axis === defaultRail.axis &&\n\t\trail.driver.id === defaultRail.driver.id &&\n\t\trail.stepper.id === defaultRail.stepper.id &&\n\t\t((performanceMode &&\n\t\t\tdefaultRail.performanceMode &&\n\t\t\trail.voltage === defaultRail.performanceMode?.voltage &&\n\t\t\trail.current === defaultRail.performanceMode?.current) ||\n\t\t\t(!performanceMode && rail.voltage === defaultRail.voltage && rail.current === defaultRail.current))\n\t);\n};\n\nexport const Voltage = z.nativeEnum(StepperVoltage);\n\nexport const Driver = z.object({\n\tid: z.string(),\n\ttitle: z.string(),\n\ttype: z.enum(['TMC2209', 'TMC2226', 'TMC5160', 'TMC2130', 'TMC2240']),\n\tprotocol: z.enum(['SPI', 'UART']),\n\tsenseResistor: z.number().min(0),\n\tcoolingCurrentThreshold: z.number(),\n\tvoltages: Voltage.array(),\n\tmaxCurrent: z.number().min(0),\n\texternal: z.boolean().optional(),\n});\n\nconst BaseStepperPreset = z.object({\n\tvoltage: Voltage,\n\trun_current: z.number(),\n\tdriver: Driver.shape.id,\n\tsense_resistor: z.number(),\n});\n\nexport const Stepper = z.object({\n\tid: z.string(),\n\ttitle: z.string(),\n\tfullStepsPerRotation: z.number().default(200),\n\tmaxPeakCurrent: z.number().min(0),\n\tpresets: z\n\t\t.array(\n\t\t\tz.discriminatedUnion('driver', [\n\t\t\t\tBaseStepperPreset.extend({\n\t\t\t\t\tdriver: z.enum(['TMC2130', 'TMC5160', 'TMC2240']),\n\t\t\t\t\tdriver_MSLUT0: z.number().optional(),\n\t\t\t\t\tdriver_MSLUT1: z.number().optional(),\n\t\t\t\t\tdriver_MSLUT2: z.number().optional(),\n\t\t\t\t\tdriver_MSLUT3: z.number().optional(),\n\t\t\t\t\tdriver_MSLUT4: z.number().optional(),\n\t\t\t\t\tdriver_MSLUT5: z.number().optional(),\n\t\t\t\t\tdriver_MSLUT6: z.number().optional(),\n\t\t\t\t\tdriver_MSLUT7: z.number().optional(),\n\t\t\t\t\tdriver_W0: z.number().optional(),\n\t\t\t\t\tdriver_W1: z.number().optional(),\n\t\t\t\t\tdriver_W2: z.number().optional(),\n\t\t\t\t\tdriver_W3: z.number().optional(),\n\t\t\t\t\tdriver_X1: z.number().optional(),\n\t\t\t\t\tdriver_X2: z.number().optional(),\n\t\t\t\t\tdriver_X3: z.number().optional(),\n\t\t\t\t\tdriver_START_SIN: z.number().optional(),\n\t\t\t\t\tdriver_START_SIN90: z.number().optional(),\n\t\t\t\t\tdriver_IHOLDDELAY: z.number().optional(),\n\t\t\t\t\tdriver_TPOWERDOWN: z.number().optional(),\n\t\t\t\t\tdriver_TBL: z.number().optional(),\n\t\t\t\t\tdriver_TOFF: z.number().optional(),\n\t\t\t\t\tdriver_HEND: z.number().optional(),\n\t\t\t\t\tdriver_HSTRT: z.number().optional(),\n\t\t\t\t\tdriver_PWM_AUTOSCALE: z.boolean().optional(),\n\t\t\t\t\tdriver_PWM_FREQ: z.number().optional(),\n\t\t\t\t\tdriver_PWM_GRAD: z.number().optional(),\n\t\t\t\t\tdriver_PWM_AMPL: z.number().optional(),\n\t\t\t\t\tdriver_SGT: z.number().optional(),\n\t\t\t\t}),\n\t\t\t\tBaseStepperPreset.extend({\n\t\t\t\t\tdriver: z.enum(['TMC2209']),\n\t\t\t\t\tdriver_TBL: z.number().optional(),\n\t\t\t\t\tdriver_TOFF: z.number().optional(),\n\t\t\t\t\tdriver_HEND: z.number().optional(),\n\t\t\t\t\tdriver_HSTRT: z.number().optional(),\n\t\t\t\t}),\n\t\t\t]),\n\t\t)\n\t\t.optional()\n\t\t.describe('Stepper presets are tightly coupled to the driver type, sense_resistor, stepper, voltage and current.'),\n});\n\nexport enum PrinterAxis {\n\t'x' = 'x',\n\t'dual_carriage' = 'dual_carriage',\n\t'x1' = 'x1',\n\t'y' = 'y',\n\t'y1' = 'y1',\n\t'y2' = 'y2',\n\t'z' = 'z',\n\t'z1' = 'z1',\n\t'z2' = 'z2',\n\t'z3' = 'z3',\n\t'extruder' = 'extruder',\n\t'extruder1' = 'extruder1',\n}\n\nexport const BasePrinterRail = z.object({\n\taxis: z.nativeEnum(PrinterAxis).describe('Axis of the rail'),\n\taxisDescription: z.string().optional().describe('Description of the axis'),\n\tdriver: Driver.describe('Stepper driver used on this axis'),\n\tvoltage: Voltage.default(StepperVoltage['24V']).describe('Voltage of the stepper driver'),\n\tstepper: Stepper.describe('Stepper motor connected to this axis'),\n\tinvertStepperDirection: z.boolean().default(false).describe('Invert the default direction of the stepper motor'),\n\taxisMinimum: z.number().optional().describe('Minimum position of the axis in mm'),\n\taxisMaximum: z.number().optional().describe('Maximum position of the axis in mm'),\n\taxisEndstop: z.number().optional().describe('Endstop position of the axis in mm'),\n\tmotorSlot: z.string().optional().describe('Optional board motor slot of the stepper driver'),\n\tcurrent: z.number().min(0),\n\trotationDistance: z.number().min(0).describe('Distance in mm the axis travels per stepper rotation'),\n\tgearRatio: z\n\t\t.string()\n\t\t.regex(/^\\d+:\\d+$/)\n\t\t.optional()\n\t\t.describe('Optional gear ratio of the axis'),\n\thomingSpeed: z.number().min(0).default(10).describe('Axis speed during homing in mm/s'),\n\tmicrostepping: z\n\t\t.number()\n\t\t.min(16)\n\t\t.max(256)\n\t\t.default(64)\n\t\t.describe(\n\t\t\t'Microstepping of the stepper driver, higher values increase resolution and lower noise but increases load on the MCU',\n\t\t),\n});\n\nexport const PrinterRailDefinition = BasePrinterRail.extend({\n\tmotorSlot: z.undefined(),\n\tperformanceMode: z\n\t\t.object({\n\t\t\tcurrent: z.number().min(0),\n\t\t\tvoltage: Voltage.default(StepperVoltage['24V']).describe('Voltage of the stepper driver in performance mode'),\n\t\t\thomingSpeed: z.number().min(0).optional().describe('Axis speed during homing in mm/s in performance mode'),\n\t\t})\n\t\t.optional(),\n});\n\nexport const SerializedPrinterRailDefinition = PrinterRailDefinition.extend({\n\tdriver: Driver.shape.id,\n\tstepper: Stepper.shape.id,\n});\n\nexport const PrinterRail = BasePrinterRail\n\t// Don't enforce this, warn about temperatures in the frontend instead.\n\t// .refine(\n\t// \t(data) => data.current <= data.stepper.maxPeakCurrent / 1.41,\n\t// \t'Current must be less than max peak current of the stepper divided by 1.41',\n\t// )\n\t.refine((data) => data.current <= data.driver.maxCurrent, 'Current must be less than max current of the driver');\n\nexport const SerializedPrinterRail = BasePrinterRail.extend({\n\tdriver: Driver.shape.id,\n\tstepper: Stepper.shape.id,\n});\n\nexport const Limits = z.object({\n\tmin: z.number(),\n\tmax: z.number(),\n\tendstop: z.number(),\n});\nexport type Limits = z.infer<typeof Limits>;\n","import { Board, BoardID } from '@/zods/boards';\nimport { Fan } from '@/zods/hardware';\nimport { PrinterDefinition, PrinterSizeDefinition } from '@/zods/printer';\nimport { PrinterAxis, PrinterRail, SerializedPrinterRail } from '@/zods/motion';\nimport {\n\tPartialToolheadConfiguration,\n\tSerializedPartialToolheadConfiguration,\n\tSerializedToolheadConfiguration,\n\tToolheadConfiguration,\n} from '@/zods/toolhead';\nimport { ToolheadHelper } from '@/helpers/toolhead';\nimport { z } from 'zod';\n\nexport const PrinterSize = z.union([PrinterSizeDefinition, z.number(), z.string()]).nullable().optional();\n\nconst BasePrinterConfiguration = z\n\t.object({\n\t\tprinter: PrinterDefinition,\n\t\tcontrolboard: Board,\n\t\ttoolheads: z.array(ToolheadConfiguration).min(1).max(2),\n\t\tsize: PrinterSize,\n\t\tcontrollerFan: Fan,\n\t\tperformanceMode: z.boolean().default(false),\n\t\tstealthchop: z.boolean().default(false),\n\t\tstandstillStealth: z.boolean().default(false),\n\t\trails: z.array(PrinterRail),\n\t})\n\t.strict()\n\t.transform((data, ctx) => {\n\t\tif (data.size == null) {\n\t\t\tdata.size = data.printer.sizes[Object.keys(data.printer.sizes)[0]];\n\t\t} else if (typeof data.size === 'number' || typeof data.size === 'string') {\n\t\t\tconst size = data.printer.sizes[data.size.toString()];\n\t\t\tif (size == null) {\n\t\t\t\tctx.addIssue({\n\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\tmessage: `Size ${data.size} is not a valid size for a ${data.printer.name} config`,\n\t\t\t\t});\n\t\t\t\treturn z.NEVER;\n\t\t\t}\n\t\t\tdata.size = size;\n\t\t}\n\t\treturn data as Omit<typeof data, 'size'> & { size: z.output<typeof PrinterSizeDefinition> };\n\t});\n\nexport const PrinterConfiguration = BasePrinterConfiguration.superRefine((arg, ctx) => {\n\t// Driver count validation\n\tconst toolboardCount = arg.toolheads.map((t) => t.toolboard).filter(Boolean).length;\n\tif (toolboardCount + arg.controlboard.driverCount < arg.printer.driverCountRequired) {\n\t\tctx.addIssue({\n\t\t\tcode: z.ZodIssueCode.too_small,\n\t\t\tmessage: `Your combination of controlboard and toolboards do not have enough stepper drivers for a ${arg.printer.name} config`,\n\t\t\tminimum: arg.printer.driverCountRequired,\n\t\t\tinclusive: true,\n\t\t\ttype: 'number',\n\t\t});\n\t}\n}).superRefine((arg, ctx) => {\n\t// Rail motor slot validation\n\tconst toolheads = arg.toolheads.map((t) => new ToolheadHelper(t));\n\tconst errors = arg.rails\n\t\t.map((r, i) => {\n\t\t\tconst toolhead = toolheads.find((th) => th.getExtruderAxis() === r.axis);\n\t\t\tif (r.motorSlot != null) {\n\t\t\t\tconst conflicts = arg.rails.filter((pr) => {\n\t\t\t\t\tconst conflictingToolhead = toolheads.find((th) => th.getExtruderAxis() === pr.axis);\n\t\t\t\t\tif (pr.axis === r.axis || toolhead?.hasToolboard() != null) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (conflictingToolhead?.hasToolboard != null) {\n\t\t\t\t\t\t// The rail is an extruder rail and the toolhead has a toolboard, no chance of conflict.\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn pr.motorSlot === r.motorSlot;\n\t\t\t\t});\n\t\t\t\tconst railName = (axis: PrinterAxis) =>\n\t\t\t\t\taxis === 'extruder'\n\t\t\t\t\t\t? 'Extruder T0'\n\t\t\t\t\t\t: axis === PrinterAxis.extruder1\n\t\t\t\t\t\t\t? 'Extruder T1'\n\t\t\t\t\t\t\t: 'Stepper ' + axis.toLocaleUpperCase();\n\t\t\t\tif (conflicts.length === 1) {\n\t\t\t\t\tctx.addIssue({\n\t\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\t\tmessage: `Motor slot ${r.motorSlot} is already in use on ${railName(conflicts[0].axis)}`,\n\t\t\t\t\t\tpath: ['rails', i, 'motorSlot'],\n\t\t\t\t\t});\n\t\t\t\t} else if (conflicts.length > 1) {\n\t\t\t\t\tctx.addIssue({\n\t\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\t\tmessage: `Motor slot ${r.motorSlot} is already in use on ${conflicts\n\t\t\t\t\t\t\t.slice(0, -1)\n\t\t\t\t\t\t\t.map((cr) => railName(cr.axis))\n\t\t\t\t\t\t\t.join(', ')} and ${railName(conflicts[conflicts.length - 1].axis)}`,\n\t\t\t\t\t\tpath: ['rails', i, 'motorSlot'],\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn conflicts.length > 0 ? { rail: r, conflicts } : 0;\n\t\t\t}\n\t\t\treturn null;\n\t\t})\n\t\t.filter(Boolean);\n\tif (errors.length > 0) {\n\t\tctx.addIssue({\n\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\tmessage: 'Motor slot conflicts detected',\n\t\t});\n\t}\n});\n\nexport const SerializedPrinterConfiguration = BasePrinterConfiguration.innerType()\n\t.extend({\n\t\tprinter: PrinterDefinition.shape.id,\n\t\tcontrolboard: BoardID,\n\t\ttoolheads: z.array(SerializedToolheadConfiguration).min(1).max(2),\n\t\tcontrollerFan: Fan.shape.id,\n\t\trails: z.array(SerializedPrinterRail),\n\t})\n\t.strict();\n\nexport const PartialPrinterConfiguration = BasePrinterConfiguration.innerType()\n\t.extend({\n\t\ttoolheads: z.array(PartialToolheadConfiguration).min(1).max(2),\n\t})\n\t.strict()\n\t.partial()\n\t.optional();\n\nexport const SerializedPartialPrinterConfiguration = SerializedPrinterConfiguration.extend({\n\ttoolheads: z.array(SerializedPartialToolheadConfiguration).min(1).max(2),\n})\n\t.strict()\n\t.partial();\n\nexport type PrinterConfiguration = z.infer<typeof PrinterConfiguration>;\nexport type PartialPrinterConfiguration = z.infer<typeof PartialPrinterConfiguration>;\nexport type SerializedPrinterConfiguration = z.infer<typeof SerializedPrinterConfiguration>;\nexport type SerializedPartialPrinterConfiguration = z.infer<typeof SerializedPartialPrinterConfiguration>;\n","import { z } from 'zod';\nimport { serverSchema } from '@/env/schema.mjs';\nimport path from 'path';\nimport { SerializedPrinterRailDefinition } from '@/zods/motion';\nimport { SerializedToolheadConfiguration, ToolheadConfiguration } from '@/zods/toolhead';\nimport { Fan } from '@/zods/hardware';\nimport { BoardID } from '@/zods/boards';\n\nlet startsWithServerValidation = '';\nif (process.env.RATOS_CONFIGURATION_PATH) {\n\tconst environment = serverSchema.parse(process.env);\n\tstartsWithServerValidation = path.join(environment.RATOS_CONFIGURATION_PATH, 'printers');\n}\n\nconst SpeedLimits = z\n\t.object({\n\t\tvelocity: z.number().min(0).describe('Maximum velocity for this printer'),\n\t\taccel: z.number().min(0).describe('Maximum acceleration for this printer'),\n\t\tz_velocity: z.number().min(0).describe('Maximum z velocity for this printer'),\n\t\tz_accel: z.number().min(0).describe('Maximum z acceleration for this printer'),\n\t\tsquare_corner_velocity: z.number().min(0).default(5).describe('Maximum square corner velocity for this printer'),\n\t\ttravel_velocity: z.number().min(0).default(200).describe('Maximum travel velocity for this printer'),\n\t\ttravel_accel: z.number().min(0).default(3000).describe('Maximum travel velocity for this printer'),\n\t})\n\t.strict();\n\nexport const PrinterSizeDefinition = z\n\t.object({\n\t\tx: z.number().min(0).describe('The print volume in X'),\n\t\ty: z.number().min(0).describe('The print volume in Y'),\n\t\tz: z.number().min(0).describe('The print volume in Z'),\n\t})\n\t.describe('The print volume of a printer');\n\nexport const PrinterDefinition = z\n\t.object({\n\t\tid: z.string().transform((data) => {\n\t\t\treturn data === 'caramba-chonk'\n\t\t\t\t? 'v-chonk'\n\t\t\t\t: data.startsWith('caramba-')\n\t\t\t\t\t? data.replace('caramba-', 'v-core-4-')\n\t\t\t\t\t: data;\n\t\t}),\n\t\tname: z.string().describe('The name of the printer'),\n\t\treleaseDate: z.string().optional().describe('The release date of the printer in ISO 8601/RFC3339 eg. 2023-12-31'),\n\t\tdescription: z.string().describe('A description of the printer'),\n\t\tmanufacturer: z.string().describe('The name of the manufacturer of this printer'),\n\t\tdocumentationLink: z.string().describe('Link to the RatOS documentation for this printer'),\n\t\timage: z.string().describe('Link to an image of the printer'),\n\t\tsizes: z.record(z.string(), PrinterSizeDefinition).describe('Size options for this printer'),\n\t\ttemplate: z.string().describe('Printer.cfg template for this printer'),\n\t\tpath: z.string().startsWith(startsWithServerValidation),\n\t\tdriverCountRequired: z.number().describe('Number of drivers required for this printer'),\n\t\tkinematics: z\n\t\t\t.union([z.literal('cartesian'), z.literal('corexy'), z.literal('hybrid-corexy'), z.literal('hybrid-corexy-idex')])\n\t\t\t.optional(),\n\t\tbedMargin: z\n\t\t\t.object({\n\t\t\t\tx: z.tuple([z.number().default(0), z.number().default(0)]),\n\t\t\t\ty: z.tuple([z.number().default(0), z.number().default(0)]),\n\t\t\t})\n\t\t\t.describe('Margin of available movement around the bed for this printer')\n\t\t\t.default({ x: [0, 0], y: [0, 0] }),\n\t\tspeedLimits: z\n\t\t\t.object({\n\t\t\t\tbasic: SpeedLimits,\n\t\t\t\tperformance: SpeedLimits.optional(),\n\t\t\t})\n\t\t\t.strict()\n\t\t\t.describe('Speed limits for this printer'),\n\t\tdefaults: z\n\t\t\t.object({\n\t\t\t\ttoolheads: z.array(SerializedToolheadConfiguration).describe('Default toolheads for this printer'),\n\t\t\t\tboard: BoardID.describe('Default board for this printer. Should be the name of the board directory.'),\n\t\t\t\trails: z.array(SerializedPrinterRailDefinition).describe('Default rails for this printer'),\n\t\t\t\tcontrollerFan: Fan.shape.id.optional().describe('Default controller fan for this printer'),\n\t\t\t})\n\t\t\t.strict()\n\t\t\t.describe('Default hardware for this printer'),\n\t})\n\t.describe('A RatOS supported 3d printer');\n\nexport const PrinterDefinitionWithResolvedToolheads = PrinterDefinition.extend({\n\tdefaults: PrinterDefinition.shape.defaults\n\t\t.extend({\n\t\t\ttoolheads: z.array(ToolheadConfiguration),\n\t\t})\n\t\t.strict(),\n});\n\nexport type PrinterDefinition = z.infer<typeof PrinterDefinition>;\nexport type PrinterDefinitionWithResolvedToolheads = z.infer<typeof PrinterDefinitionWithResolvedToolheads>;\n","import { z } from 'zod';\nimport { BoardID, Toolboard } from '@/zods/boards';\nimport { Hotend, Thermistor, Extruder, Probe, Endstop, Fan, Accelerometer, Nozzle } from '@/zods/hardware';\nimport { PrinterAxis } from '@/zods/motion';\nimport { getDefaultNozzle } from '@/data/nozzles';\n\nexport const BaseToolheadConfiguration = z\n\t.object({\n\t\thotend: Hotend,\n\t\tthermistor: Thermistor,\n\t\textruder: Extruder,\n\t\txEndstop: Endstop,\n\t\tyEndstop: Endstop,\n\t\thotendFan: Fan,\n\t\tpartFan: Fan,\n\t\tnozzle: Nozzle.default(getDefaultNozzle()),\n\t\txAccelerometer: Accelerometer.optional().nullable(),\n\t\tyAccelerometer: Accelerometer.optional().nullable(),\n\t\ttoolboard: Toolboard.nullable(),\n\t\tprobe: Probe.optional(),\n\t\taxis: z.literal(PrinterAxis.x).or(z.literal(PrinterAxis.dual_carriage)),\n\t\tdescription: z.string().optional(),\n\t\ttoolNumber: z.number().optional(),\n\t})\n\t.strict();\n\nexport const ToolNumber = z.union([z.literal(0), z.literal(1)]);\nexport const ToolAxis = z.union([\n\tz.literal(PrinterAxis.x),\n\tz.literal(PrinterAxis.dual_carriage),\n\tz.literal(PrinterAxis.extruder),\n\tz.literal(PrinterAxis.extruder1),\n]);\nexport const ToolOrAxis = z.union([ToolAxis, ToolNumber]);\nexport type ToolNumber = z.infer<typeof ToolNumber>;\nexport type ToolAxis = z.infer<typeof ToolAxis>;\nexport type ToolOrAxis = z.infer<typeof ToolOrAxis>;\n\nexport const ToolheadConfiguration = BaseToolheadConfiguration.refine(\n\t(data) => data.toolboard !== null || data.xEndstop.id !== 'endstop-toolboard',\n\t'Cannot use toolboard endstop without a toolboard',\n)\n\t.refine(\n\t\t(data) =>\n\t\t\tdata.toolboard !== null ||\n\t\t\t!['2pin-toolboard', '4pin-toolboard', '4pin-dedicated-toolboard'].includes(data.hotendFan.id),\n\t\t'Cannot use toolboard hotend fan without a toolboard',\n\t)\n\t.refine(\n\t\t(data) =>\n\t\t\tdata.toolboard !== null ||\n\t\t\t!['2pin-toolboard', '4pin-toolboard', '4pin-dedicated-toolboard'].includes(data.partFan.id),\n\t\t'Cannot use toolboard part cooling fan without a toolboard',\n\t);\n\nexport const PartialToolheadConfiguration = BaseToolheadConfiguration.partial().optional();\nexport const SerializedToolheadConfiguration = BaseToolheadConfiguration.extend({\n\thotend: Hotend.shape.id,\n\textruder: Extruder.shape.id,\n\tthermistor: Thermistor,\n\txEndstop: Endstop.shape.id,\n\tyEndstop: Endstop.shape.id,\n\thotendFan: Fan.shape.id,\n\tpartFan: Fan.shape.id,\n\txAccelerometer: Accelerometer.shape.id.optional().nullable(),\n\tyAccelerometer: Accelerometer.shape.id.optional().nullable(),\n\ttoolboard: BoardID.optional().nullable(),\n\tprobe: Probe.shape.id.optional().nullable(),\n}).strict();\nexport const SerializedPartialToolheadConfiguration = SerializedToolheadConfiguration.partial().optional();\n\nexport type ToolheadConfiguration<T extends boolean> = z.infer<typeof ToolheadConfiguration> & {\n\ttoolboard: T extends true ? Toolboard : null;\n};\nexport type PartialToolheadConfiguration = z.infer<typeof PartialToolheadConfiguration>;\nexport type SerializedToolheadConfiguration = z.infer<typeof SerializedToolheadConfiguration>;\nexport type SerializedPartialToolheadConfiguration = z.infer<typeof SerializedPartialToolheadConfiguration>;\n","import { z } from 'zod';\n\nexport const PinoLogLevel = z.enum(['trace', 'debug', 'info', 'warn', 'error', 'fatal']);\n\nexport const PinoLogEvent = z.object({\n\tts: z.number(),\n\tmessages: z.array(z.any()),\n\tbindings: z.array(z.record(z.string(), z.any())),\n\tlevel: z.object({\n\t\tlabel: PinoLogLevel,\n\t\tvalue: z.number(),\n\t}),\n});\n","// @ts-check\nimport { z } from 'zod';\n\n/**\n * Specify your server-side environment variables schema here.\n * This way you can ensure the app isn't built with invalid env vars.\n */\nexport const serverSchema = z.object({\n\tNODE_ENV: z.enum(['development', 'test', 'production']),\n\tRATOS_CONFIGURATION_PATH: z.string(),\n\tRATOS_SCRIPT_DIR: z.string(),\n\tKLIPPER_CONFIG_PATH: z.string(),\n\tKLIPPER_DIR: z.string(),\n\tKLIPPER_ENV: z.string(),\n\tMOONRAKER_DIR: z.string(),\n\tLOG_FILE: z.string(),\n\tRATOS_DATA_DIR: z.string(),\n});\n\n/**\n * Specify your client-side environment variables schema here.\n * This way you can ensure the app isn't built with invalid env vars.\n * To expose them to the client, prefix them with `NEXT_PUBLIC_`.\n */\nexport const clientSchema = z.object({\n\tNEXT_PUBLIC_KLIPPER_HOSTNAME: z.string().optional(),\n});\n\n/**\n * You can't destruct `process.env` as a regular object, so you have to do\n * it manually here. This is because Next.js evaluates this at build time,\n * and only used environment variables are included in the build.\n * @type {{ [k in keyof z.infer<typeof clientSchema>]: z.infer<typeof clientSchema>[k] | undefined }}\n */\nexport const clientEnv = {\n\tNEXT_PUBLIC_KLIPPER_HOSTNAME: process.env.NEXT_PUBLIC_KLIPPER_HOSTNAME,\n};\n"],"names":["send","level","logEvent","trpcClient","clientLog","mutate","PinoLogEvent","parse","logger","getLogger","pino","globalPinoOpts","browser","transmit","badgeColorOptions","z","union","literal","badgeTextColorStyle","cva","variants","color","rose","red","yellow","orange","green","lime","blue","sky","indigo","purple","pink","brand","gray","plain","badgeBackgroundColorStyle","badgeBorderColorStyle","badgeStyle","size","sm","md","lg","defaultVariants","Badge","className","children","forwardProps","props","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","span","twMerge","moonrakerSyncEventEmitter","EventTarget","DispatchSaveAtomEvent","itemKey","value","dispatchEvent","CustomEvent","detail","moonrakerWriteEffect","params","onSet","node","key","newValue","SyncWithMoonraker","param","moonraker","useMoonraker","read","useCallback","getItem","DefaultValue","saveAtom","event","saveItem","useEffect","addEventListener","removeEventListener","RecoilSync","Drivers","array","Driver","id","title","type","protocol","senseResistor","coolingCurrentThreshold","voltages","maxCurrent","external","Strong","React","ref","jsx_runtime","strong","cn","setDisplayName","fanHelp","jsxs","Fragment","p","partFanOptions","config","toolheadConfig","fans","axis","PrinterAxis","x","push","badge","controlboard","name","fourPinFanConnectorCount","toolboard","concat","toolNumber","hotendFanOptions","controllerFan","defaultControllerFan","getDefaultNozzle","diameter","findPreset","stepper","driver","voltage","current","performanceMode","presets","slice","sort","a","b","run_current","find","sense_resistor","Steppers","Stepper","maxPeakCurrent","driver_TBL","driver_TOFF","driver_HEND","driver_HSTRT","driver_IHOLDDELAY","driver_TPOWERDOWN","driver_PWM_FREQ","driver_PWM_GRAD","driver_PWM_AMPL","driver_PWM_AUTOSCALE","driver_SGT","fullStepsPerRotation","timestamp","ToolheadHelper","hasToolboard","getToolboard","getMotionStepperName","dual_carriage","getMotionAxis","getToolboardName","getTool","getShortToolName","getDescription","_this_config_description","description","getExtruderAxis","extruder1","extruder","getToolCommand","getSerialSuffix","getExtruder","getHotend","hotend","getNozzle","_this_config_nozzle","nozzle","getThermistor","thermistor","getXEndstop","xEndstop","getYEndstop","yEndstop","getXAccelerometer","xAccelerometer","getYAccelerometer","yAccelerometer","getXAccelerometerName","_this_getXAccelerometer","getYAccelerometerName","_this_getYAccelerometer","getChangeSet","changes","changeSet","Object","keys","forEach","getConfig","change","deepEqual","parsed","PartialToolheadConfiguration","safeParse","getProbe","probe","getPartFan","partFan","getHotendFan","hotendFan","serialize","serializeToolheadConfiguration","constructor","toolhead","getHost","window","process","trim","location","hostname","_len","arguments","length","inputs","_key","clsx","Component","displayName","PerformanceModeState","atom","default","effects","syncEffect","refine","getRefineCheckerForZodSchema","boolean","optional","nullable","StealthchopState","StandstillStealthState","ControllerFanState","Fan","PrinterConfigurationState","selector","get","printer","printerSize","stealthchop","standstillStealth","rails","toolheads","waitForAll","PrinterState","PrinterSizeState","PrinterRailsState","ControlboardState","PrinterToolheadsState","input","defaults","map","th","undefined","printerConfig","PartialPrinterConfiguration","success","error","errors","flatten","fieldErrors","data","LoadablePrinterConfigurationState","loadable","noWait","hasValue","contents","hasError","loading","state","serializePrinterConfiguration","serializedConfig","serializePrinterRail","rail","SerializedPrinterConfiguration","serializePartialPrinterConfiguration","serializePartialToolheadConfiguration","SerializedPartialPrinterConfiguration","useSerializedPrinterConfiguration","printerConfiguration","useRecoilValue","serializedPrinterConfiguration","useMemo","usePrinterConfiguration","selectedPrinter","setSelectedPrinter","useRecoilState","selectedPrinterOption","setSelectedPrinterOption","selectedBoard","setSelectedBoard","setPerformanceMode","setStealthchop","setStandstillStealth","selectedControllerFan","setSelectedControllerFan","selectedPrinterRails","parsedPrinterConfiguration","PrinterConfiguration","partialPrinterConfiguration","migrations","version","up","res","fetch","ok","result","json","message","entries","JSON","console","log","method","headers","body","stringify","namespace","e","encodeURIComponent","join","down","encoded","migratedValue","replace","getCurrentVersion","setCurrentVersion","isMigrating","migrate","from","to","migrationsToRun","filter","m","migration","isMigrated","migrateToLatest","currentVersion","latestVersion","Math","max","REQ_ID","getWsURL","host","subscriptions","inFlightRequests","useRef","inFlightRequestTimeouts","localSubscriptions","onReadyCallbacks","wsUrl","setWsUrl","useState","containsSubscriptionUpdate","jsonMessage","sub","objects","lastJsonMessage","sendJsonMessage","readyState","useWebSocket","moonrakerStatus","options","passThroughUpdateMethods","includes","warn","messageData","onMessage","onStatusUpdate","shouldReconnect","reconnectAttempts","Infinity","reconnectInterval","share","readyStateRef","setMoonrakerStatus","whenReady","resolve","reject","isReady","Promise","moonrakerQuery","err","timeout","setTimeout","jsonrpc","subscribeToObject","args","fromEntries","allSubscribedObjects","assign","values","v","q","reqId","status","unsuscribe","cb","clearTimeout","catch","query","lastMessage","useNamespacedItemQuery","useQuery","queryKey","queryFn","useMoonrakerQuery","passed","useMoonrakerMutation","useMutation","mutationKey","mutationFn","usePrinterObjectQuery","usePrinterObjectSubscription","select","setState","stateRef","selectRef","_select","changed","changeSelection","merge","prev","subscription","then","Error","useNamespacedItemMutation","useMoonrakerState","initialValue","initialData","mutation","mutateAsync","onSuccess","refetch","cachedPrinters","readPrinterAtom","printerId","object","PrinterDefinitionWithResolvedToolheads","shape","newPrinter","readPrinterRailAtom","param1","printerRailState","PrinterRailState","parsedRail","SerializedPrinterRail","printerRailDefault","r","parsedRailRepaired","write","LoadablePrinterState","PrinterSize","board","boardId","BoardID","boardReq","mcu","boards","boardFilters","newBoard","Board","atomFamily","railState","deserializePrinterRail","set","PrinterToolheadState","tNum","printerToolheadState","parsedToolhead","ToolheadConfiguration","freshToolboard","toolboardPath","maybeToolboard","Toolboard","debug","BaseToolheadConfiguration","extend","ToolNumber","selectorFamily","deserializeToolheadConfiguration","i","Boolean","reset","LoadablePrinterToolheadsState","deserializeDriver","d","driverId","deserializeStepper","stepperId","BasePrinterRail","deserializePrinterRailDefinition","PrinterRailDefinition","stringToTitleObject","getBaseUrl","trpc","createTRPCNext","links","httpBatchLink","url","maxURLLength","overrides","opts","originalFn","queryClient","invalidateQueries","ssr","proxyClient","createTRPCProxyClient","AxisPinPrefix","AllPins","x_step_pin","string","x_dir_pin","x_enable_pin","x_uart_pin","x_diag_pin","x_endstop_pin","x1_step_pin","x1_dir_pin","x1_enable_pin","x1_uart_pin","x1_diag_pin","x1_endstop_pin","dual_carriage_step_pin","dual_carriage_dir_pin","dual_carriage_enable_pin","dual_carriage_uart_pin","dual_carriage_diag_pin","dual_carriage_endstop_pin","y_step_pin","y_dir_pin","y_enable_pin","y_uart_pin","y_diag_pin","y_endstop_pin","y1_step_pin","y1_dir_pin","y1_enable_pin","y1_uart_pin","y1_diag_pin","y1_endstop_pin","y2_step_pin","y2_dir_pin","y2_enable_pin","y2_uart_pin","y2_diag_pin","y2_endstop_pin","z0_step_pin","z0_dir_pin","z0_enable_pin","z0_uart_pin","z0_diag_pin","z1_step_pin","z1_dir_pin","z1_enable_pin","z1_uart_pin","z1_diag_pin","z2_step_pin","z2_dir_pin","z2_enable_pin","z2_uart_pin","z2_diag_pin","z3_step_pin","z3_dir_pin","z3_enable_pin","z3_uart_pin","z3_diag_pin","e_step_pin","e_dir_pin","e_enable_pin","e_uart_pin","e_diag_pin","e_heater_pin","e_sensor_pin","stepper_spi_mosi_pin","stepper_spi_miso_pin","stepper_spi_sclk_pin","adxl345_cs_pin","bltouch_sensor_pin","bltouch_control_pin","probe_pin","fan_part_cooling_pin","fan_toolhead_cooling_pin","fan_controller_board_pin","heater_bed_heating_pin","heater_bed_sensor_pin","PinMap","pinAliasPrefixToPrinterAxis","x1","y","y1","y2","z0","z1","z2","z3","e1","nativeEnum","transform","_Object_keys_find","pa","and","or","UARTPins","uart_pin","uart_address","rx_pin","tx_pin","SPIPins","cs_pin","spi_bus","spi_software_mosi_pin","spi_software_miso_pin","spi_software_sclk_pin","hasSPI","slot","hasUART","MotorSlotPins","step_pin","dir_pin","enable_pin","diag_pin","endstop_pin","MotorSlot","innerType","omit","partial","MotorSlotKey","BoardPath","BoardSerialPath","integratedDrivers","record","motorSlots","isToolboard","isHost","serialPath","boardImageFileName","manualFileName","wireDiagramFileName","manufacturer","firmwareBinaryName","compileScript","flashScript","flashInstructions","disableAutoFlash","documentationLink","hasQuirksFiles","driverCount","number","extruderlessConfig","driverVoltages","Voltage","hasMcuTempSensor","alternativePT1000Resistor","outputPins","pin","min","dfu","dfuBootImage","flashDevice","instructions","reminder","hasBoot0Jumper","stepperSPI","software","sclk","mosi","miso","hardware","bus","ADXL345SPI","LIS2DW","path","detected","thermistors","startsWithServerValidation","env","RATOS_CONFIGURATION_PATH","environment","serverSchema","hardwareType","startsWith","endsWith","Thermistor","enum","Hotend","flowType","Nozzle","Extruder","Probe","Endstop","KlipperAccelSensorNameSchame","AccelerometerType","Accelerometer","accelerometerType","klipperAccelSensorSchema","StepperVoltage","Voltages","getSupportedVoltages","matchesDefaultRail","defaultRail","BaseStepperPreset","driver_MSLUT0","driver_MSLUT1","driver_MSLUT2","driver_MSLUT3","driver_MSLUT4","driver_MSLUT5","driver_MSLUT6","driver_MSLUT7","driver_W0","driver_W1","driver_W2","driver_W3","driver_X1","driver_X2","driver_X3","driver_START_SIN","driver_START_SIN90","describe","axisDescription","invertStepperDirection","axisMinimum","axisMaximum","axisEndstop","motorSlot","rotationDistance","gearRatio","regex","homingSpeed","microstepping","SerializedPrinterRailDefinition","PrinterRail","endstop","PrinterSizeDefinition","BasePrinterConfiguration","PrinterDefinition","strict","ctx","sizes","toString","addIssue","code","ZodIssueCode","custom","NEVER","superRefine","arg","toolboardCount","t","driverCountRequired","too_small","minimum","inclusive","conflicts","conflictingToolhead","pr","railName","toLocaleUpperCase","cr","SerializedToolheadConfiguration","SerializedPartialToolheadConfiguration","SpeedLimits","velocity","accel","z_velocity","z_accel","square_corner_velocity","travel_velocity","travel_accel","releaseDate","image","template","kinematics","bedMargin","tuple","speedLimits","basic","performance","ToolAxis","PinoLogLevel","ts","messages","any","bindings","label","NODE_ENV","RATOS_SCRIPT_DIR","KLIPPER_CONFIG_PATH","KLIPPER_DIR","KLIPPER_ENV","MOONRAKER_DIR","LOG_FILE","RATOS_DATA_DIR","NEXT_PUBLIC_KLIPPER_HOSTNAME"],"sourceRoot":""}