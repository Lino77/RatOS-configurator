{"version":3,"file":"static/chunks/51-cd3a287c88b3cdec.js","mappings":"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","sources":["webpack://_N_E/./components/common/card.tsx","webpack://_N_E/./components/common/error-message.tsx","webpack://_N_E/./components/common/full-load-screen.tsx","webpack://_N_E/./components/common/no-ssr.tsx","webpack://_N_E/./components/common/query-status.tsx","webpack://_N_E/./components/setup-steps/diff-modal.tsx","webpack://_N_E/./components/common/state-circle.tsx","webpack://_N_E/./components/setup-steps/file-changes.tsx","webpack://_N_E/./components/setup-steps/printer-rail-settings.tsx","webpack://_N_E/./components/ui/card.tsx","webpack://_N_E/./hooks/useChangeEffect.tsx","webpack://_N_E/<anon>"],"sourcesContent":["'use client';\nimport { cva } from 'class-variance-authority';\nimport React from 'react';\nimport { type MotionProps, motion } from 'framer-motion';\n\nconst cardVariants = cva([\n\t'relative rounded-lg  bg-white dark:bg-zinc-900/60',\n\t'shadow-[0px_0px_0px_1px_rgba(9,9,11,0.07),0px_2px_2px_0px_rgba(9,9,11,0.05)] dark:shadow-[0px_0px_0px_1px_rgba(255,255,255,0.05)]',\n\t'dark:before:-inset-px dark:before:rounded-xl',\n\t'dark:before:pointer-events-none dark:before:absolute dark:before:shadow-[0px_2px_8px_0px_rgba(0,_0,_0,_0.20),_0px_1px_0px_0px_rgba(255,_255,_255,_0.07)_inset]',\n]);\n\ntype CardProps = React.PropsWithChildren<\n\t{\n\t\tclassName?: string;\n\t} & MotionProps\n>;\n\nexport const Card: React.FC<CardProps> = (props) => {\n\treturn (\n\t\t<motion.div {...props} className={cardVariants({ className: props.className })}>\n\t\t\t{props.children}\n\t\t</motion.div>\n\t);\n};\n","import { XCircleIcon } from '@heroicons/react/24/solid';\nimport React from 'react';\nimport { twMerge } from 'tailwind-merge';\nimport { Banner } from '@/components/common/banner';\n\nexport type ErrorMessageProps = React.PropsWithChildren<{\n\ttitle?: string;\n\tclassName?: string;\n}>;\n\nexport const ErrorMessage: React.FC<ErrorMessageProps> = (props) => {\n\treturn (\n\t\t<Banner\n\t\t\tcolor=\"red\"\n\t\t\tIcon={XCircleIcon}\n\t\t\ttitle={props.title ? 'Error: ' + props.title : 'Error'}\n\t\t\tclassName={twMerge(props.className, 'whitespace-pre-wrap')}\n\t\t>\n\t\t\t{props.children}\n\t\t</Banner>\n\t);\n};\n","import { Spinner } from '@/components/common/spinner';\nimport { twJoin } from 'tailwind-merge';\n\nexport const FullLoadScreen = (props: { className?: string }) => {\n\treturn (\n\t\t<div className={twJoin('flex h-full w-full flex-1 items-center justify-center', props.className)}>\n\t\t\t<Spinner className=\"h-8 w-8\" />\n\t\t</div>\n\t);\n};\n","'use client';\nimport { useIsClient } from '@/hooks/isClient';\nimport dynamic from 'next/dynamic';\nimport React, { lazy } from 'react';\nimport { FullLoadScreen } from '@/components/common/full-load-screen';\nexport const NoSSR = (props: React.PropsWithChildren<{ fallback?: React.ReactNode }>) => {\n\tconst isClient = useIsClient();\n\treturn isClient ? <DynamicImport>{props.children}</DynamicImport> : props.fallback ?? <FullLoadScreen />;\n};\nconst DynamicImport = lazy(() =>\n\tPromise.resolve({ default: (props: React.PropsWithChildren) => <>{props.children}</> }),\n);\n","'use client';\nimport { TRPCClientErrorLike } from '@trpc/client';\nimport { UseTRPCQueryResult } from '@trpc/react-query/src/shared/hooks/types';\nimport { AppRouter } from '@/server/routers';\nimport { ErrorMessage } from '@/components/common/error-message';\nimport { Spinner } from '@/components/common/spinner';\nimport { motion } from 'framer-motion';\nimport { AnimatedContainer } from '@/components/common/animated-container';\nimport { UseQueryResult } from '@tanstack/react-query';\n\nexport const QueryStatus = (query: UseQueryResult<any, any>) => {\n\tlet content = null;\n\tif (query.isError) {\n\t\tcontent = (\n\t\t\t<div className=\"mb-4\">\n\t\t\t\t<ErrorMessage>{query.error?.message}</ErrorMessage>\n\t\t\t</div>\n\t\t);\n\t}\n\tif (query.isLoading) {\n\t\tcontent = (\n\t\t\t<div className=\"mb-4 flex items-center justify-center\">\n\t\t\t\t<Spinner />\n\t\t\t</div>\n\t\t);\n\t}\n\treturn <AnimatedContainer>{content}</AnimatedContainer>;\n};\n","'use client';\n/* This example requires Tailwind CSS v2.0+ */\nimport React, { Fragment, useCallback, useMemo, useState } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { parseDiff, Diff, DiffType, ViewType, HunkData, TokenizeOptions, tokenize, markEdits } from 'react-diff-view';\nimport type { FileState } from '@/server/routers/printer';\nimport 'react-diff-view/style/index.css';\nimport { XMarkIcon } from '@heroicons/react/20/solid';\nimport { Button } from '@/components/common/button';\nimport { twJoin, twMerge } from 'tailwind-merge';\n\ninterface ModalProps {\n\ttitle: string;\n\tdiff: string;\n\tstate: FileState;\n\tisOpen: boolean;\n\tbuttons?: React.ReactNode;\n\toverwrite?: () => void;\n\tignore?: () => void;\n\tsetIsOpen: (open: boolean) => void;\n}\n\nconst TwoColumns = (props: { className?: string }) => {\n\treturn (\n\t\t<svg\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\tstrokeWidth=\"1.5\"\n\t\t\tstroke=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={twMerge('h-6 w-6', props.className)}\n\t\t>\n\t\t\t<path\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\td=\"M 12 4.5 L 12 19.5 M 4.125 19.5 L 19.875 19.5 C 20.496 19.5 21 18.996 21 18.375 L 21 5.625 C 21 5.004 20.496 4.5 19.875 4.5 L 4.125 4.5 C 3.504 4.5 3 5.004 3 5.625 L 3 18.375 C 3 18.996 3.504 19.5 4.125 19.5 Z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n};\nconst SingleColumn = (props: { className?: string }) => {\n\treturn (\n\t\t<svg\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\tstrokeWidth=\"1.5\"\n\t\t\tstroke=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={twMerge('h-6 w-6', props.className)}\n\t\t>\n\t\t\t<path\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\td=\"M 4.125 19.5 L 19.875 19.5 C 20.496 19.5 21 18.996 21 18.375 L 21 5.625 C 21 5.004 20.496 4.5 19.875 4.5 L 4.125 4.5 C 3.504 4.5 3 5.004 3 5.625 L 3 18.375 C 3 18.996 3.504 19.5 4.125 19.5 Z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n};\n\nconst proccessTokens = (hunks: HunkData[]) => {\n\tif (!hunks) {\n\t\treturn undefined;\n\t}\n\n\tconst options: TokenizeOptions = {\n\t\thighlight: false,\n\t\tenhancers: [markEdits(hunks, { type: 'block' })],\n\t};\n\n\ttry {\n\t\treturn tokenize(hunks, options);\n\t} catch (ex) {\n\t\treturn undefined;\n\t}\n};\n\nexport const DiffModal: React.FC<ModalProps> = (props) => {\n\tconst { isOpen, setIsOpen } = props;\n\tconst [viewType, setViewType] = useState<ViewType>('unified');\n\n\tconst close = useCallback(() => {\n\t\tsetIsOpen(false);\n\t}, [setIsOpen]);\n\n\tconst files = useMemo(() => {\n\t\treturn parseDiff(props.diff);\n\t}, [props.diff]);\n\tconst diffType: DiffType = props.state === 'changed' ? 'modify' : props.state === 'created' ? 'add' : 'delete';\n\n\treturn (\n\t\t<Transition.Root show={isOpen} as={Fragment} appear={true}>\n\t\t\t<Dialog\n\t\t\t\tas=\"div\"\n\t\t\t\tclassName=\"git-diff fixed inset-0 z-50 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-400 scrollbar-thumb-rounded-md dark:scrollbar-thumb-zinc-600\"\n\t\t\t\tonClose={close}\n\t\t\t>\n\t\t\t\t<div className=\"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0\">\n\t\t\t\t\t<Transition.Child\n\t\t\t\t\t\tas={Fragment}\n\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Dialog.Overlay className=\"fixed inset-0 bg-zinc-500 bg-opacity-75 transition-opacity dark:bg-zinc-950 dark:bg-opacity-75\" />\n\t\t\t\t\t</Transition.Child>\n\n\t\t\t\t\t{/* This element is to trick the browser into centering the modal contents. */}\n\t\t\t\t\t<span className=\"hidden sm:inline-block sm:h-screen sm:align-middle\" aria-hidden=\"true\">\n\t\t\t\t\t\t&#8203;\n\t\t\t\t\t</span>\n\t\t\t\t\t<Transition.Child\n\t\t\t\t\t\tas={Fragment}\n\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\tenterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\tenterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\tleaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\tleaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"relative inline-flex max-h-[80vh] max-w-screen-2xl transform flex-col overflow-hidden rounded-lg bg-white py-4 text-left align-bottom shadow-xl transition-all dark:bg-zinc-800 sm:my-8 sm:w-full sm:py-6 sm:align-middle\">\n\t\t\t\t\t\t\t<Dialog.Title\n\t\t\t\t\t\t\t\tas=\"h3\"\n\t\t\t\t\t\t\t\tclassName=\"flex items-center justify-between border-b border-zinc-200 px-4 pb-4 text-lg font-semibold leading-6 text-zinc-900 dark:border-zinc-700 dark:text-zinc-100 sm:px-6\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>{props.title}</div>\n\t\t\t\t\t\t\t\t<div className=\"relative flex flex-nowrap items-center space-x-2 text-zinc-500 dark:text-zinc-400\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t\t\t\t\tviewType === 'unified'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'cursor-default text-sky-600 dark:text-sky-400'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'hover:text-zinc-800 dark:hover:text-zinc-100',\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setViewType('unified')}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Unified View\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<SingleColumn className=\"h-6 w-6\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t\t\t\t\tviewType === 'split'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'cursor-default text-sky-600 dark:text-sky-400'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'hover:text-zinc-800 dark:hover:text-zinc-100',\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setViewType('split')}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Split View\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<TwoColumns className=\"h-6 w-6\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<div className=\"!ml-4 !mr-1 h-6 border-l border-l-zinc-200 dark:border-l-zinc-800\"></div>\n\t\t\t\t\t\t\t\t\t<button className=\"hover:text-zinc-800 dark:hover:text-zinc-100\" onClick={close}>\n\t\t\t\t\t\t\t\t\t\t<XMarkIcon className=\"h-6 w-6\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Dialog.Title>\n\t\t\t\t\t\t\t<div className=\"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-400 scrollbar-thumb-rounded-md dark:scrollbar-thumb-zinc-600\">\n\t\t\t\t\t\t\t\t{files.map(({ hunks }, i) => (\n\t\t\t\t\t\t\t\t\t<Diff key={i} hunks={hunks} viewType={viewType} diffType={diffType} tokens={proccessTokens(hunks)} />\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex-end flex flex-row items-center justify-end space-x-2 border-t border-zinc-200 px-4 pt-4 dark:border-zinc-700 sm:px-6 sm:pt-6\">\n\t\t\t\t\t\t\t\t{props.buttons ?? null}\n\t\t\t\t\t\t\t\t<Button variant=\"plain\" onClick={close}>\n\t\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Transition.Child>\n\t\t\t\t</div>\n\t\t\t</Dialog>\n\t\t</Transition.Root>\n\t);\n};\n","import { cva, VariantProps } from 'class-variance-authority';\nimport React from 'react';\nimport { twMerge } from 'tailwind-merge';\nimport type { Intents } from '@/components/common/button';\n\ntype IntentNoOutline = Exclude<Intents, 'outline'>;\n\ntype StateIntents = { [key in IntentNoOutline]: string };\n\nexport const StateCircleVariants = cva('flex-none rounded-full p-1 relative flex', {\n\tvariants: {\n\t\tstate: {\n\t\t\tsuccess: 'dark:text-green-400 text-green-500 bg-green-400/20',\n\t\t\tinfo: 'dark:text-sky-400 text-sky-500 bg-sky-400/20',\n\t\t\twarning: 'dark:text-yellow-400 text-yellow-500 bg-yellow-400/20',\n\t\t\tdanger: 'dark:text-rose-400 text-rose-500 bg-rose-400/20',\n\t\t\tindeterminate: 'dark:text-zinc-400 text-zinc-500 bg-zinc-500/20',\n\t\t\tplain: 'dark:text-zinc-400 text-zinc-500 bg-zinc-500/20',\n\t\t\tprimary: 'dark:text-brand-400 text-brand-500 bg-brand-500/20',\n\t\t} satisfies StateIntents,\n\t},\n});\n\nexport type StateCircleProps = VariantProps<typeof StateCircleVariants> & {\n\tping?: boolean;\n\ttitle?: string;\n\tpingClassName?: string;\n};\n\nexport const StateCircle: React.FC<StateCircleProps> = (props) => {\n\treturn (\n\t\t<div className={StateCircleVariants(props)}>\n\t\t\t<div\n\t\t\t\ttitle={props.title}\n\t\t\t\tclassName={twMerge(\n\t\t\t\t\t'absolute inset-0 transition-all duration-700',\n\t\t\t\t\tprops.ping ? 'opacity-100' : 'opacity-0',\n\t\t\t\t\tprops.pingClassName ?? 'z-2',\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={twMerge('absolute inset-0 inline-flex animate-ping rounded-full bg-current opacity-0 ease-out')}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"h-2 w-2 rounded-full bg-current\" />\n\t\t</div>\n\t);\n};\n","import React, { Fragment, useCallback, useEffect, useMemo, useState } from 'react';\nimport { SerializedPrinterConfiguration } from '@/zods/printer-configuration';\nimport { trpc } from '@/utils/trpc';\nimport { useQuery } from '@tanstack/react-query';\nimport type { FilesToWriteWithState, FileState } from '@/server/routers/printer';\nimport { DiffModal } from '@/components/setup-steps/diff-modal';\nimport { twJoin } from 'tailwind-merge';\nimport { Menu, Transition } from '@headlessui/react';\nimport { EllipsisVerticalIcon } from '@heroicons/react/20/solid';\nimport { StateCircle } from '@/components/common/state-circle';\nimport { Badge } from '@/components/common/badge';\nimport { Button, Intents } from '@/components/common/button';\nimport { useChangeEffect } from '@/hooks/useChangeEffect';\nimport { CheckIcon } from '@heroicons/react/24/outline';\nimport { QueryStatus } from '@/components/common/query-status';\n\ninterface FileChangesProps {\n\tserializedConfig: SerializedPrinterConfiguration | null;\n\tonFilesToOverwriteChange: (files: string[]) => void;\n\tonFilesToIgnoreChange: (files: string[]) => void;\n}\n\ninterface ChangedFileProps {\n\tfile: Unpacked<FilesToWriteWithState>;\n\tisMarkedOverwritten: boolean;\n\tisMarkedIgnored: boolean;\n\taddFileToOverwrite: (fileName: string) => void;\n\tremoveFileToOverwrite: (fileName: string) => void;\n\taddFileToIgnore: (fileName: string) => void;\n\tremoveFileToIgnore: (fileName: string) => void;\n}\n\nconst statuses: { [key in FileState]: string } = {\n\tcreated: 'text-green-700 bg-green-50 ring-green-600/20',\n\tunchanged: 'text-zinc-600 bg-zinc-50 ring-zinc-500/10',\n\tchanged: 'text-yellow-800 bg-yellow-50 ring-yellow-600/20',\n\tremoved: 'text-rose-700 bg-rose-50 ring-rose-600/20',\n};\n\ntype Action = {\n\taction: (fileName: string) => void;\n\tintent: Intents;\n\ttitle: string;\n};\n\nconst ChangedFile: React.FC<ChangedFileProps> = (props) => {\n\tconst {\n\t\taddFileToIgnore,\n\t\taddFileToOverwrite,\n\t\tfile,\n\t\tremoveFileToIgnore,\n\t\tremoveFileToOverwrite,\n\t\tisMarkedIgnored,\n\t\tisMarkedOverwritten,\n\t} = props;\n\n\tconst [isDiffModalOpen, setIsDiffModalOpen] = useState(false);\n\tconst showDiffModal = useCallback((file: Unpacked<FilesToWriteWithState>) => {\n\t\tsetIsDiffModalOpen(true);\n\t}, []);\n\n\tconst wouldOtherwiseBeWritten =\n\t\t(file.state === 'changed' && (file.overwrite || isMarkedOverwritten)) ||\n\t\tfile.state === 'created' ||\n\t\tfile.state === 'removed';\n\tconst isOverwritable = file.state === 'changed';\n\tconst isIgnorable = file.state === 'created' || file.state === 'removed' || file.state === 'changed';\n\tconst isIgnored = isMarkedIgnored;\n\tconst isOverwritten = isMarkedOverwritten || (file.overwrite && file.exists);\n\tconst needsExplicitAction =\n\t\tisIgnorable && !isIgnored && !isOverwritten && !wouldOtherwiseBeWritten && file.changedFromConfig === true;\n\tconst isDeleted = file.state === 'removed' && !isIgnored;\n\tconst isCreated = file.state === 'created' && !isIgnored;\n\tconst isChanged = file.state === 'changed' && !isIgnored && isOverwritten;\n\n\tconst actions = useMemo(() => {\n\t\tif (file.fileName === 'RatOS.cfg') {\n\t\t\treturn [];\n\t\t}\n\t\tlet skip: null | Action = null;\n\t\tlet ignore: null | Action = null;\n\t\tlet overwrite: null | Action = null;\n\t\tlet write: null | Action = null;\n\t\tlet remove: null | Action = null;\n\t\tif (isOverwritten && !isIgnored) {\n\t\t\tskip = {\n\t\t\t\ttitle: 'Skip',\n\t\t\t\tintent: 'indeterminate',\n\t\t\t\taction: isMarkedOverwritten ? removeFileToOverwrite : addFileToIgnore,\n\t\t\t};\n\t\t} else if (isOverwritable) {\n\t\t\toverwrite = {\n\t\t\t\ttitle: 'Overwrite',\n\t\t\t\tintent: 'warning',\n\t\t\t\taction: isMarkedIgnored ? removeFileToIgnore : addFileToOverwrite,\n\t\t\t};\n\t\t}\n\t\tif (isIgnorable && !isIgnored) {\n\t\t\tignore = {\n\t\t\t\ttitle: 'Ignore',\n\t\t\t\tintent: needsExplicitAction ? 'danger' : 'indeterminate',\n\t\t\t\taction: addFileToIgnore,\n\t\t\t};\n\t\t} else if (isIgnored) {\n\t\t\tif (file.state === 'removed') {\n\t\t\t\tremove = {\n\t\t\t\t\ttitle: 'Delete',\n\t\t\t\t\tintent: 'danger',\n\t\t\t\t\taction: removeFileToIgnore,\n\t\t\t\t};\n\t\t\t} else if (isIgnorable) {\n\t\t\t\twrite = {\n\t\t\t\t\ttitle: 'Write',\n\t\t\t\t\tintent: 'success',\n\t\t\t\t\taction: removeFileToIgnore,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn [skip, ignore, overwrite, write, remove].filter(Boolean);\n\t}, [\n\t\taddFileToIgnore,\n\t\taddFileToOverwrite,\n\t\tfile.fileName,\n\t\tfile.state,\n\t\tisIgnorable,\n\t\tisIgnored,\n\t\tisMarkedIgnored,\n\t\tisMarkedOverwritten,\n\t\tisOverwritable,\n\t\tisOverwritten,\n\t\tneedsExplicitAction,\n\t\tremoveFileToIgnore,\n\t\tremoveFileToOverwrite,\n\t]);\n\n\tconst fileState: Intents = useMemo(() => {\n\t\tif (needsExplicitAction) {\n\t\t\treturn 'danger';\n\t\t}\n\t\tif (file.state === 'changed') {\n\t\t\tif ((isIgnored && file.overwrite) || (isOverwritten && !file.overwrite)) {\n\t\t\t\treturn 'warning';\n\t\t\t} else if (isOverwritten) {\n\t\t\t\treturn 'success';\n\t\t\t} else {\n\t\t\t\treturn 'indeterminate';\n\t\t\t}\n\t\t}\n\t\tif (file.state === 'created') {\n\t\t\tif (isIgnored) {\n\t\t\t\treturn 'danger';\n\t\t\t} else {\n\t\t\t\treturn 'success';\n\t\t\t}\n\t\t}\n\t\tif (file.state === 'removed') {\n\t\t\tif (!isIgnored) {\n\t\t\t\treturn 'warning';\n\t\t\t}\n\t\t}\n\t\treturn 'indeterminate';\n\t}, [file.overwrite, file.state, isIgnored, isOverwritten, needsExplicitAction]);\n\n\tconst [shouldPing] = useChangeEffect([fileState], 4000);\n\n\treturn (\n\t\t<li key={file.fileName} className=\"flex items-center justify-between gap-x-6 py-5\">\n\t\t\t{file?.diff != null && (\n\t\t\t\t<DiffModal\n\t\t\t\t\tdiff={file.diff}\n\t\t\t\t\ttitle={`Changes to ${file.fileName}`}\n\t\t\t\t\tstate={file.state}\n\t\t\t\t\tsetIsOpen={setIsDiffModalOpen}\n\t\t\t\t\tbuttons={actions.map((a) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\ta.action(file.fileName);\n\t\t\t\t\t\t\t\t\tsetIsDiffModalOpen(false);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvariant={a.intent}\n\t\t\t\t\t\t\t\tkey={a.title}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{a.title}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\tisOpen={isDiffModalOpen}\n\t\t\t\t></DiffModal>\n\t\t\t)}\n\t\t\t<div className=\"min-w-0\">\n\t\t\t\t<div className=\"flex items-center gap-x-3\">\n\t\t\t\t\t<StateCircle state={fileState} ping={shouldPing} />\n\t\t\t\t\t<p className=\"text-sm font-medium leading-6 text-zinc-900 dark:text-zinc-100\">{file.fileName}</p>\n\t\t\t\t\t<Badge\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tcolor={\n\t\t\t\t\t\t\tfile.state === 'changed'\n\t\t\t\t\t\t\t\t? !file.changedFromConfig\n\t\t\t\t\t\t\t\t\t? 'sky'\n\t\t\t\t\t\t\t\t\t: 'yellow'\n\t\t\t\t\t\t\t\t: file.state === 'created'\n\t\t\t\t\t\t\t\t\t? 'green'\n\t\t\t\t\t\t\t\t\t: file.state === 'removed'\n\t\t\t\t\t\t\t\t\t\t? 'rose'\n\t\t\t\t\t\t\t\t\t\t: 'gray'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{file.state === 'changed'\n\t\t\t\t\t\t\t? file.changedFromConfig\n\t\t\t\t\t\t\t\t? 'Pending changes'\n\t\t\t\t\t\t\t\t: 'Changed on disk'\n\t\t\t\t\t\t\t: file.state === 'created'\n\t\t\t\t\t\t\t\t? 'New file'\n\t\t\t\t\t\t\t\t: file.state === 'removed'\n\t\t\t\t\t\t\t\t\t? 'Deleted'\n\t\t\t\t\t\t\t\t\t: 'No updates'}\n\t\t\t\t\t</Badge>\n\t\t\t\t\t{file.changedOnDisk && (\n\t\t\t\t\t\t<Badge size=\"sm\" color=\"sky\">\n\t\t\t\t\t\t\tChanged on disk\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mt-1 flex items-center gap-x-2 text-xs leading-5 text-zinc-500 dark:text-zinc-400\">\n\t\t\t\t\t<p className=\"\">\n\t\t\t\t\t\t{file.state === 'changed' &&\n\t\t\t\t\t\t\t(isOverwritten && !isIgnored\n\t\t\t\t\t\t\t\t? 'File will be backed up and overwritten.' +\n\t\t\t\t\t\t\t\t\t(file.fileName != 'RatOS.cfg' ? ` Any changes you've made can be recovered from the backup.` : '')\n\t\t\t\t\t\t\t\t: !needsExplicitAction\n\t\t\t\t\t\t\t\t\t? 'File will be skipped.'\n\t\t\t\t\t\t\t\t\t: 'Please review the changes and make a decision.')}\n\t\t\t\t\t\t{file.state === 'created' && (isIgnored ? 'File will be skipped.' : 'File will be created.')}\n\t\t\t\t\t\t{file.state === 'removed' && (!isIgnored ? 'File will be deleted.' : 'File will remain untouched.')}\n\t\t\t\t\t\t{file.state === 'unchanged' &&\n\t\t\t\t\t\t\t(file.changedOnDisk ? 'File has user modifications.' : 'File remains untouched.')}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"flex flex-none items-center gap-x-4\">\n\t\t\t\t<div className=\"flex flex-none items-center\">\n\t\t\t\t\t{needsExplicitAction ? (\n\t\t\t\t\t\t<Button variant=\"info\" onClick={() => showDiffModal(file)}>\n\t\t\t\t\t\t\tReview changes\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<CheckIcon className=\"h-5 w-5 text-green-500 dark:text-brand-500\" aria-hidden=\"true\" />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<Menu as=\"div\" className=\"relative flex-none\">\n\t\t\t\t\t<Menu.Button className=\"-m-2.5 block p-2.5 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-100\">\n\t\t\t\t\t\t<span className=\"sr-only\">Open options</span>\n\t\t\t\t\t\t<EllipsisVerticalIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\n\t\t\t\t\t</Menu.Button>\n\t\t\t\t\t<Transition\n\t\t\t\t\t\tas={Fragment}\n\t\t\t\t\t\tenter=\"transition ease-out duration-100\"\n\t\t\t\t\t\tenterFrom=\"transform opacity-0 scale-95\"\n\t\t\t\t\t\tenterTo=\"transform opacity-100 scale-100\"\n\t\t\t\t\t\tleave=\"transition ease-in duration-75\"\n\t\t\t\t\t\tleaveFrom=\"transform opacity-100 scale-100\"\n\t\t\t\t\t\tleaveTo=\"transform opacity-0 scale-95\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Menu.Items className=\"absolute right-0 z-10 mt-2 w-32 origin-top-right rounded-md bg-white py-2 shadow-lg ring-1 ring-zinc-900/5 focus:outline-none dark:bg-zinc-900 dark:ring-zinc-100/5\">\n\t\t\t\t\t\t\t{actions.map((action) => (\n\t\t\t\t\t\t\t\t<Menu.Item key={action.title}>\n\t\t\t\t\t\t\t\t\t{({ active, disabled }) => (\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => action.action(file.fileName)}\n\t\t\t\t\t\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t\t\t\t\t\tactive ? 'bg-zinc-50 dark:bg-zinc-800' : '',\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled ? 'cursor-not-allowed opacity-50' : 'cursor-pointer',\n\t\t\t\t\t\t\t\t\t\t\t\t'block px-3 py-1 text-sm leading-6 text-zinc-800 dark:text-zinc-200',\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{action.title}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t<Menu.Item disabled={file.diff == null}>\n\t\t\t\t\t\t\t\t{({ active, disabled }) => (\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tonClick={() => showDiffModal(file)}\n\t\t\t\t\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t\t\t\t\tactive ? 'bg-zinc-50 dark:bg-zinc-800' : '',\n\t\t\t\t\t\t\t\t\t\t\tdisabled ? 'cursor-not-allowed opacity-50' : 'cursor-pointer',\n\t\t\t\t\t\t\t\t\t\t\t'block px-3 py-1 text-sm leading-6 text-zinc-800 dark:text-zinc-200',\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tView diff\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t</Menu.Items>\n\t\t\t\t\t</Transition>\n\t\t\t\t</Menu>\n\t\t\t</div>\n\t\t</li>\n\t);\n};\n\nexport const FileChanges: React.FC<FileChangesProps> = (props) => {\n\tconst { serializedConfig, onFilesToIgnoreChange, onFilesToOverwriteChange } = props;\n\tconst [filesToOverwrite, setFilesToOverwrite] = useState<string[]>([]);\n\n\tconst addFileToOverwrite = useCallback((fileName: string) => {\n\t\tsetFilesToOverwrite((files) => (files.includes(fileName) ? files : [...files, fileName]));\n\t}, []);\n\n\tconst removeFileToOverwrite = useCallback((fileName: string) => {\n\t\tsetFilesToOverwrite((files) => (files.includes(fileName) ? files.filter((file) => file !== fileName) : files));\n\t}, []);\n\n\tconst [filesToIgnore, setFilesToIgnore] = useState<string[]>([]);\n\n\tconst addFileToIgnore = useCallback((fileName: string) => {\n\t\tsetFilesToIgnore((files) => (files.includes(fileName) ? files : [...files, fileName]));\n\t}, []);\n\n\tconst removeFileToIgnore = useCallback((fileName: string) => {\n\t\tsetFilesToIgnore((files) => (files.includes(fileName) ? files.filter((file) => file !== fileName) : files));\n\t}, []);\n\n\tuseEffect(() => {\n\t\tonFilesToOverwriteChange(filesToOverwrite);\n\t}, [filesToOverwrite, onFilesToOverwriteChange]);\n\tuseEffect(() => {\n\t\tonFilesToIgnoreChange(filesToIgnore);\n\t}, [filesToIgnore, onFilesToIgnoreChange]);\n\n\tconst client = trpc.useUtils().client;\n\tconst filesToWrite = useQuery({\n\t\tqueryKey: ['printer.filesToWrite', serializedConfig],\n\t\tqueryFn: async () => {\n\t\t\tconst res = await client.printer.getFilesToWrite.mutate({\n\t\t\t\tconfig: serializedConfig ?? ({} as any),\n\t\t\t});\n\t\t\treturn res;\n\t\t},\n\t\tenabled: serializedConfig != null,\n\t});\n\treturn (\n\t\t<>\n\t\t\t<ul role=\"list\" className=\"divide-y divide-zinc-100 dark:divide-zinc-800\">\n\t\t\t\t{filesToWrite.data?.map((fileToWrite) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ChangedFile\n\t\t\t\t\t\t\tkey={fileToWrite.fileName}\n\t\t\t\t\t\t\tfile={fileToWrite}\n\t\t\t\t\t\t\tisMarkedIgnored={filesToIgnore.includes(fileToWrite.fileName)}\n\t\t\t\t\t\t\tisMarkedOverwritten={filesToOverwrite.includes(fileToWrite.fileName)}\n\t\t\t\t\t\t\taddFileToIgnore={addFileToIgnore}\n\t\t\t\t\t\t\taddFileToOverwrite={addFileToOverwrite}\n\t\t\t\t\t\t\tremoveFileToIgnore={removeFileToIgnore}\n\t\t\t\t\t\t\tremoveFileToOverwrite={removeFileToOverwrite}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t\t<QueryStatus {...filesToWrite} />\n\t\t</>\n\t);\n};\n","import { Dropdown } from '@/components/forms/dropdown';\nimport { Board } from '@/zods/boards';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Drivers } from '@/data/drivers';\nimport { findPreset, Steppers } from '@/data/steppers';\nimport { BadgeProps, badgeBackgroundColorStyle, badgeBorderColorStyle } from '@/components/common/badge';\nimport { TextInput } from '@/components/forms/text-input';\nimport { Banner } from '@/components/common/banner';\nimport { BoltIcon, LightBulbIcon } from '@heroicons/react/24/outline';\nimport { useRecoilValue, useSetRecoilState } from 'recoil';\nimport { FireIcon } from '@heroicons/react/24/solid';\nimport {\n\tBasePrinterRail,\n\tPrinterAxis,\n\tPrinterRailDefinition,\n\tgetSupportedVoltages,\n\tmatchesDefaultRail,\n} from '@/zods/motion';\nimport { deserializeDriver, serializePrinterRail } from '@/utils/serialization';\nimport { PrinterRailState, PrinterRailsState } from '@/recoil/printer';\nimport { useToolheads } from '@/hooks/useToolheadConfiguration';\nimport { trpc } from '@/utils/trpc';\nimport { twMerge } from 'tailwind-merge';\nimport { z } from 'zod';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { Card } from '@/components/common/card';\nimport { CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\n\nconst railArray = z.array(BasePrinterRail);\n\ninterface PrinterRailSettingsProps {\n\tselectedBoard: Board | null;\n\tprinterRail: Zod.infer<typeof BasePrinterRail>;\n\tprinterRailDefault: Zod.infer<typeof PrinterRailDefinition>;\n\tperformanceMode?: boolean | null;\n\terrors?: z.inferFormattedError<typeof BasePrinterRail>;\n\t/**\n\t * This component should always be rendered to ensure the settings are updated when\n\t * switching performance mode, even if it isn't visible.\n\t */\n\tisVisible?: boolean;\n}\n\nexport const PrinterRailSettings: React.FC<PrinterRailSettingsProps> = (props) => {\n\tconst toolheads = useToolheads();\n\tconst toolhead = toolheads.find((th) => th.getExtruderAxis() === props.printerRail.axis);\n\tconst canBeExtruderlessBoard = toolheads.every((th) => th.hasToolboard());\n\tconst usesToolboard = toolhead?.getExtruderAxis() === props.printerRailDefault.axis && toolhead?.hasToolboard();\n\tconst board = usesToolboard ? toolhead.getToolboard() : props.selectedBoard;\n\tconst [performanceMode, setPerformanceMode] = useState(!!props.performanceMode);\n\tconst setPrinterRail = useSetRecoilState(PrinterRailState(props.printerRail.axis));\n\tconst printerRails = useRecoilValue(PrinterRailsState);\n\tconst [motorSlot, setMotorSlot] = useState(\n\t\tprops.printerRail.motorSlot && props.selectedBoard?.motorSlots?.[props.printerRail.motorSlot]\n\t\t\t? props.printerRail.motorSlot\n\t\t\t: undefined,\n\t);\n\tconst integratedDriver = board?.integratedDrivers\n\t\t? board.integratedDrivers[\n\t\t\t\tmotorSlot ?? (props.printerRail.axis.startsWith('extruder') ? PrinterAxis.extruder : props.printerRail.axis)\n\t\t\t] ??\n\t\t\tboard.integratedDrivers[\n\t\t\t\tprops.printerRail.axis.startsWith('extruder') ? PrinterAxis.extruder : props.printerRail.axis\n\t\t\t]\n\t\t: null;\n\tconst [driver, setDriver] = useState(\n\t\tintegratedDriver != null\n\t\t\t? deserializeDriver(integratedDriver) ?? props.printerRail.driver\n\t\t\t: props.printerRail.driver,\n\t);\n\tconst [stepper, setStepper] = useState(props.printerRail.stepper);\n\tconst [homingSpeed, setHomingSpeed] = useState(\n\t\tperformanceMode\n\t\t\t? props.printerRailDefault.performanceMode?.homingSpeed ?? props.printerRailDefault.homingSpeed\n\t\t\t: props.printerRailDefault.homingSpeed,\n\t);\n\tconst errorCount =\n\t\tprops.errors == null\n\t\t\t? 0\n\t\t\t: Object.keys(props.errors).reduce((acc, key) => {\n\t\t\t\t\tconst objKey = key as keyof typeof props.errors;\n\t\t\t\t\tconst keyErrors = props.errors?.[objKey];\n\t\t\t\t\tif (keyErrors == null) {\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t}\n\t\t\t\t\tconst count = Array.isArray(keyErrors) ? keyErrors.length : keyErrors._errors.length;\n\t\t\t\t\treturn acc + count;\n\t\t\t\t}, 0);\n\n\tconst isSlotInUse = useCallback(\n\t\t(slot: string | undefined) => {\n\t\t\tif (slot == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn printerRails.some((pr) => {\n\t\t\t\tconst railToolhead = toolheads.find((th) => th.getExtruderAxis() === pr.axis);\n\t\t\t\tif (pr.axis === props.printerRail.axis) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (railToolhead?.hasToolboard()) {\n\t\t\t\t\t// The rail is an extruder rail and the toolhead has a toolboard, no chance of conflict.\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn pr.motorSlot === slot;\n\t\t\t});\n\t\t},\n\t\t[printerRails, props.printerRail.axis, toolheads],\n\t);\n\n\tconst guessMotorSlot = trpc.mcu.reversePinLookup.useQuery(\n\t\t{\n\t\t\taxis: props.printerRail.axis,\n\t\t\tcanUseExtruderlessConfigs: canBeExtruderlessBoard,\n\t\t\tboardPath: board?.path ?? '',\n\t\t},\n\t\t{ enabled: !!board },\n\t);\n\tuseEffect(() => {\n\t\tif (guessMotorSlot.data && motorSlot == null && board?.motorSlots?.[guessMotorSlot.data] != null) {\n\t\t\tsetMotorSlot(guessMotorSlot.data);\n\t\t}\n\t}, [board, guessMotorSlot.data, motorSlot, props.printerRailDefault.axis]);\n\n\tconst supportedVoltages = getSupportedVoltages(board, driver).map((v) => {\n\t\treturn {\n\t\t\t...v,\n\t\t\tbadge:\n\t\t\t\tfindPreset(stepper, driver, v.id, undefined, performanceMode) != null\n\t\t\t\t\t? ({\n\t\t\t\t\t\t\tchildren: 'Tuned Preset',\n\t\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\t} satisfies BadgeProps)\n\t\t\t\t\t: undefined,\n\t\t};\n\t});\n\tconst [voltage, setVoltage] = useState(\n\t\tsupportedVoltages.find((v) => v.id === props.printerRail.voltage) ??\n\t\t\tsupportedVoltages.find(\n\t\t\t\t(v) =>\n\t\t\t\t\tv.id ===\n\t\t\t\t\t(performanceMode && props.printerRailDefault.performanceMode?.voltage\n\t\t\t\t\t\t? props.printerRailDefault.performanceMode.voltage\n\t\t\t\t\t\t: props.printerRailDefault.voltage),\n\t\t\t) ??\n\t\t\tsupportedVoltages[0],\n\t);\n\tconst [current, setCurrent] = useState(props.printerRail.current);\n\tconst defaultPreset = useMemo(\n\t\t() =>\n\t\t\tfindPreset(\n\t\t\t\tprops.printerRailDefault.stepper,\n\t\t\t\tprops.printerRailDefault.driver,\n\t\t\t\tprops.printerRailDefault.voltage,\n\t\t\t\tprops.printerRailDefault.current,\n\t\t\t),\n\t\t[props.printerRailDefault],\n\t);\n\tconst recommendedPreset = useMemo(\n\t\t() => findPreset(stepper, driver, voltage.id, undefined, performanceMode),\n\t\t[stepper, driver, voltage, performanceMode],\n\t);\n\tconst matchingPreset = useMemo(\n\t\t() => findPreset(stepper, driver, voltage.id, current, performanceMode),\n\t\t[stepper, driver, voltage, performanceMode, current],\n\t);\n\n\tconst supportedDrivers = Drivers.filter((d) => {\n\t\treturn d.protocol === 'UART' || board?.stepperSPI != null;\n\t}).map((d) => {\n\t\treturn {\n\t\t\t...d,\n\t\t\tbadge:\n\t\t\t\tfindPreset(stepper, d, voltage.id, undefined, performanceMode) != null\n\t\t\t\t\t? ({\n\t\t\t\t\t\t\tchildren: 'Tuned Preset',\n\t\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\t} satisfies BadgeProps)\n\t\t\t\t\t: undefined,\n\t\t};\n\t});\n\tconst steppers = Steppers.map((s) => {\n\t\treturn {\n\t\t\t...s,\n\t\t\tbadge:\n\t\t\t\tfindPreset(s, driver, voltage.id, undefined, performanceMode) != null\n\t\t\t\t\t? ({\n\t\t\t\t\t\t\tchildren: 'Tuned Preset',\n\t\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\t} satisfies BadgeProps)\n\t\t\t\t\t: undefined,\n\t\t};\n\t});\n\n\tuseEffect(() => {\n\t\t// If current rail configuration matches the default rail configuration, adapt current and voltage\n\t\t// to match the performance mode when performance mode changes.\n\t\tif (matchesDefaultRail(props.printerRail, props.printerRailDefault, !props.performanceMode)) {\n\t\t\tif (props.performanceMode && props.printerRailDefault.performanceMode) {\n\t\t\t\tsetHomingSpeed(props.printerRailDefault.performanceMode.homingSpeed ?? props.printerRail.homingSpeed);\n\t\t\t\tif (props.printerRailDefault.performanceMode.voltage != null) {\n\t\t\t\t\tsetVoltage(\n\t\t\t\t\t\tsupportedVoltages.find(\n\t\t\t\t\t\t\t(sv) => sv.id === (props.printerRailDefault.performanceMode?.voltage ?? props.printerRailDefault.voltage),\n\t\t\t\t\t\t) ?? supportedVoltages[0],\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (props.printerRailDefault.performanceMode.current != null) {\n\t\t\t\t\tsetCurrent(props.printerRailDefault.performanceMode.current);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetHomingSpeed(props.printerRailDefault.homingSpeed);\n\t\t\t\tsetVoltage(supportedVoltages.find((sv) => sv.id === props.printerRailDefault.voltage) ?? supportedVoltages[0]);\n\t\t\t\tsetCurrent(props.printerRailDefault.current);\n\t\t\t}\n\t\t}\n\t\tsetPerformanceMode(!!props.performanceMode);\n\t\t// We don't want to react to anything other than performance mode changes.\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [props.performanceMode]);\n\n\tuseEffect(() => {\n\t\tconst currentVoltage = supportedVoltages.find((sv) => sv.id === voltage.id);\n\t\tif (!currentVoltage) {\n\t\t\tsetVoltage(\n\t\t\t\trecommendedPreset\n\t\t\t\t\t? supportedVoltages.find((sv) => sv.id === recommendedPreset.voltage) ?? supportedVoltages[0]\n\t\t\t\t\t: supportedVoltages[0],\n\t\t\t);\n\t\t\tif (recommendedPreset) {\n\t\t\t\tsetCurrent(recommendedPreset.run_current);\n\t\t\t}\n\t\t}\n\t}, [supportedVoltages, voltage, recommendedPreset]);\n\n\tuseEffect(() => {\n\t\tconst newState = {\n\t\t\taxis: props.printerRail.axis,\n\t\t\taxisDescription: props.printerRail.axisDescription,\n\t\t\trotationDistance: props.printerRail.rotationDistance,\n\t\t\thomingSpeed: homingSpeed,\n\t\t\tmotorSlot: motorSlot,\n\t\t\tdriver,\n\t\t\tvoltage: voltage.id,\n\t\t\tstepper,\n\t\t\tcurrent,\n\t\t};\n\t\tconst serializedNew = serializePrinterRail(newState);\n\t\tconst serializedOld = serializePrinterRail(props.printerRail);\n\t\tconst isDirty = Object.keys(serializedNew).some((key) => {\n\t\t\treturn serializedNew[key as keyof typeof serializedNew] !== serializedOld[key as keyof typeof serializedNew];\n\t\t});\n\t\tif (isDirty) {\n\t\t\tsetPrinterRail(serializedNew);\n\t\t}\n\t}, [current, driver, props.printerRail, homingSpeed, setPrinterRail, stepper, voltage.id, motorSlot]);\n\n\tconst isRecommendedPresetCompatible = recommendedPreset && recommendedPreset.run_current === current;\n\tconst railName =\n\t\tprops.printerRail.axis === 'extruder'\n\t\t\t? 'Extruder T0'\n\t\t\t: props.printerRail.axis === PrinterAxis.extruder1\n\t\t\t\t? 'Extruder T1'\n\t\t\t\t: 'Stepper ' + props.printerRail.axis.toLocaleUpperCase();\n\tconst motorSlotOptions =\n\t\tboard?.motorSlots != null && Object.keys(board.motorSlots).length > 0\n\t\t\t? Object.keys(board.motorSlots)\n\t\t\t\t\t.map((ms) => {\n\t\t\t\t\t\tif (board.motorSlots?.[ms].title == null) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst hasDiagPin = board.motorSlots?.[ms].diag_pin != null;\n\t\t\t\t\t\tconst hasEndstopPin = board.motorSlots?.[ms].endstop_pin != null;\n\t\t\t\t\t\tconst isInUse = isSlotInUse(ms);\n\t\t\t\t\t\tconst disabled =\n\t\t\t\t\t\t\t(props.printerRailDefault.axis.startsWith('x') || props.printerRailDefault.axis.startsWith('y')) &&\n\t\t\t\t\t\t\t!hasDiagPin;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: ms,\n\t\t\t\t\t\t\ttitle: board.motorSlots?.[ms].title,\n\t\t\t\t\t\t\tdisabled: disabled,\n\t\t\t\t\t\t\tbadge: [\n\t\t\t\t\t\t\t\t!hasDiagPin\n\t\t\t\t\t\t\t\t\t? ({ children: 'No diag pin', color: disabled ? 'red' : 'gray' } satisfies BadgeProps)\n\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t\t!hasEndstopPin ? ({ children: 'No endstop pin', color: 'gray' } satisfies BadgeProps) : undefined,\n\t\t\t\t\t\t\t\tisInUse === true ? ({ children: 'In use', color: 'orange' } satisfies BadgeProps) : undefined,\n\t\t\t\t\t\t\t].filter(Boolean),\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t\t.filter(Boolean)\n\t\t\t: null;\n\tconst motorSlotBadge = useMemo(() => {\n\t\tif (motorSlot == null || board?.motorSlots?.[motorSlot].title == null) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst hasDiagPin = board.motorSlots?.[motorSlot].diag_pin != null;\n\t\tconst disabled =\n\t\t\t(props.printerRailDefault.axis.startsWith('x') || props.printerRailDefault.axis.startsWith('y')) && !hasDiagPin;\n\t\treturn !hasDiagPin && disabled ? ({ children: 'No diag pin', color: 'red' } satisfies BadgeProps) : undefined;\n\t}, [board, motorSlot, props.printerRailDefault.axis]);\n\treturn (\n\t\t<AnimatePresence>\n\t\t\t{props.isVisible && (\n\t\t\t\t<Card\n\t\t\t\t\tkey={props.printerRail.axis}\n\t\t\t\t\texit={{ opacity: 0, scale: 0.9, y: -40 }}\n\t\t\t\t\tinitial={{ opacity: 0, scale: 0.9, y: 40 }}\n\t\t\t\t\tanimate={{ opacity: 1, scale: 1, y: 0 }}\n\t\t\t\t\tclassName={twMerge(\n\t\t\t\t\t\t'break-inside-avoid-column',\n\t\t\t\t\t\terrorCount > 0 && badgeBorderColorStyle({ color: 'red' }),\n\t\t\t\t\t\terrorCount > 0 && badgeBackgroundColorStyle({ color: 'red' }),\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<CardHeader className=\"\">\n\t\t\t\t\t\t<CardTitle className={twMerge(errorCount > 0 && 'text-red-900/80 dark:text-red-100')}>{railName}</CardTitle>\n\t\t\t\t\t\t<CardDescription className={twMerge(errorCount > 0 && 'text-red-800/80 dark:text-red-100/60')}>\n\t\t\t\t\t\t\t{props.printerRail.axisDescription}\n\t\t\t\t\t\t</CardDescription>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n\t\t\t\t\t\t{motorSlotOptions && (\n\t\t\t\t\t\t\t<div className=\"col-span-2\">\n\t\t\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t\t\tlabel=\"Motor Slot\"\n\t\t\t\t\t\t\t\t\toptions={motorSlotOptions}\n\t\t\t\t\t\t\t\t\terror={props.errors?.motorSlot?._errors.join('\\n')}\n\t\t\t\t\t\t\t\t\tonSelect={(ms) => {\n\t\t\t\t\t\t\t\t\t\tsetMotorSlot(ms.id);\n\t\t\t\t\t\t\t\t\t\tif (board?.integratedDrivers?.[ms.id] != null) {\n\t\t\t\t\t\t\t\t\t\t\tsetDriver(deserializeDriver(board.integratedDrivers[ms.id]) ?? driver);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tvalue={motorSlot ? motorSlotOptions.find((ms) => ms.id === motorSlot) : undefined}\n\t\t\t\t\t\t\t\t\tbadge={motorSlotBadge}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div className=\"col-span-2\">\n\t\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t\tlabel=\"Driver\"\n\t\t\t\t\t\t\t\toptions={supportedDrivers}\n\t\t\t\t\t\t\t\tonSelect={setDriver}\n\t\t\t\t\t\t\t\tvalue={driver}\n\t\t\t\t\t\t\t\tdisabled={integratedDriver != null}\n\t\t\t\t\t\t\t\tbadge={[\n\t\t\t\t\t\t\t\t\tintegratedDriver != null\n\t\t\t\t\t\t\t\t\t\t? ({ children: 'Integrated', color: 'sky' } satisfies BadgeProps)\n\t\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t\t\tusesToolboard ? ({ children: 'Toolboard', color: 'yellow' } satisfies BadgeProps) : undefined,\n\t\t\t\t\t\t\t\t].filter(Boolean)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-span-2\">\n\t\t\t\t\t\t\t<Dropdown label=\"Stepper\" options={steppers} onSelect={setStepper} value={stepper} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-span-1\">\n\t\t\t\t\t\t\t<Dropdown label=\"Voltage\" options={supportedVoltages} onSelect={setVoltage} value={voltage} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-span-1\">\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tlabel=\"Current\"\n\t\t\t\t\t\t\t\tvalue={current}\n\t\t\t\t\t\t\t\tonChange={setCurrent}\n\t\t\t\t\t\t\t\tinputMode=\"decimal\"\n\t\t\t\t\t\t\t\tstep=\"any\"\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tmax={driver.maxCurrent}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{stepper.maxPeakCurrent / 1.41 < current && (\n\t\t\t\t\t\t\t<Banner Icon={FireIcon} color=\"yellow\" title=\"Stepper overcurrent!\" className=\"col-span-2\">\n\t\t\t\t\t\t\t\tYour stepper motor is rated for {Math.floor((stepper.maxPeakCurrent * 100) / 1.41) / 100}A RMS, but you\n\t\t\t\t\t\t\t\tare using {current}A.\n\t\t\t\t\t\t\t</Banner>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{matchingPreset != null && (\n\t\t\t\t\t\t\t<Banner Icon={LightBulbIcon} color=\"brand\" title=\"Driver tuning applied!\" className=\"col-span-2\">\n\t\t\t\t\t\t\t\tRatOS preset applied automatically.\n\t\t\t\t\t\t\t</Banner>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{matchingPreset?.run_current !== defaultPreset?.run_current &&\n\t\t\t\t\t\t\trecommendedPreset &&\n\t\t\t\t\t\t\t!isRecommendedPresetCompatible && (\n\t\t\t\t\t\t\t\t<Banner\n\t\t\t\t\t\t\t\t\tIcon={BoltIcon}\n\t\t\t\t\t\t\t\t\tcolor=\"sky\"\n\t\t\t\t\t\t\t\t\ttitle=\"Recommended tuning preset available at different current\"\n\t\t\t\t\t\t\t\t\tclassName=\"col-span-2\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tRatOS has a recommended preset for your current settings at {recommendedPreset.run_current}A. You can{' '}\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName=\"cursor-pointer font-bold underline hover:no-underline\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => setCurrent(recommendedPreset.run_current)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tchange the current to {recommendedPreset.run_current}A\n\t\t\t\t\t\t\t\t\t</span>{' '}\n\t\t\t\t\t\t\t\t\tto apply the preset automatically.\n\t\t\t\t\t\t\t\t</Banner>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\t\t\t)}\n\t\t</AnimatePresence>\n\t);\n};\n","import * as React from 'react';\n\nimport { cn } from '@/helpers/utils';\n\nconst CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n\t({ className, ...props }, ref) => (\n\t\t<div ref={ref} className={cn('flex flex-col space-y-1.5 p-6', className)} {...props} />\n\t),\n);\n(CardHeader as React.FC).displayName = 'CardHeader';\n\nconst CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(\n\t({ className, ...props }, ref) => (\n\t\t<h3 ref={ref} className={cn('font-semibold leading-none tracking-tight', className)} {...props} />\n\t),\n);\n(CardTitle as React.FC).displayName = 'CardTitle';\n\nconst CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n\t({ className, ...props }, ref) => (\n\t\t<p ref={ref} className={cn('text-sm text-muted-foreground', className)} {...props} />\n\t),\n);\n(CardDescription as React.FC).displayName = 'CardDescription';\n\nconst CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n\t({ className, ...props }, ref) => <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />,\n);\n(CardContent as React.FC).displayName = 'CardContent';\n\nconst CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n\t({ className, ...props }, ref) => (\n\t\t<div ref={ref} className={cn('flex items-center p-6 pt-0', className)} {...props} />\n\t),\n);\n(CardFooter as React.FC).displayName = 'CardFooter';\n\nexport { CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n","import { useCallback, useEffect, useRef, useState } from 'react';\n\nexport const useChangeEffect = (deps: unknown[], clearAfter?: number, resetTimeoutOnChange: boolean = false) => {\n\tconst [hasChanged, setHasChanged] = useState(0);\n\tconst lastDeps = useRef([...deps]);\n\tuseEffect(() => {\n\t\tlet changed = false;\n\t\tlastDeps.current.forEach((dep, i) => {\n\t\t\tif (dep !== deps[i]) {\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\t\tif (changed) {\n\t\t\tsetHasChanged((hasChanged) => (resetTimeoutOnChange ? hasChanged + 1 : 1));\n\t\t}\n\t\tlastDeps.current = [...deps];\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [...deps]);\n\n\tconst clear = useCallback(() => {\n\t\tsetHasChanged(0);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (clearAfter != null && hasChanged > 0) {\n\t\t\tconst timeout = setTimeout(() => {\n\t\t\t\tsetHasChanged(0);\n\t\t\t}, clearAfter);\n\t\t\treturn () => {\n\t\t\t\tclearTimeout(timeout);\n\t\t\t};\n\t\t}\n\t\treturn;\n\t}, [clearAfter, hasChanged]);\n\n\treturn [hasChanged > 0, clear] as const;\n};\n\nexport const useDelayedChangeEffect = (\n\tdeps: unknown[],\n\tdelay: number,\n\tclearAfter?: number,\n\tresetTimeoutOnChange: boolean = false,\n) => {\n\tconst [changeCount, setChangeCount] = useState(0);\n\tconst lastDeps = useRef([...deps]);\n\tconst timeout = useRef<number | null>(null);\n\tuseEffect(() => {\n\t\tif (typeof window === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tlet changed = false;\n\t\tlastDeps.current.forEach((dep, i) => {\n\t\t\tif (dep !== deps[i]) {\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\t\tif (changed) {\n\t\t\tconst trigger = () => setChangeCount((hasChanged) => (resetTimeoutOnChange ? hasChanged + 1 : 1));\n\t\t\ttimeout.current = window.setTimeout(() => {\n\t\t\t\ttrigger();\n\t\t\t\ttimeout.current = null;\n\t\t\t}, delay);\n\t\t}\n\t\tlastDeps.current = [...deps];\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [...deps]);\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (timeout.current) {\n\t\t\t\tclearTimeout(timeout.current);\n\t\t\t}\n\t\t};\n\t}, []);\n\tconst [hasChanged, clear] = useChangeEffect([changeCount], clearAfter, resetTimeoutOnChange);\n\treturn [hasChanged, clear] as const;\n};\n"],"names":["cardVariants","cva","Card","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","motion","div","props","className","children","ErrorMessage","Banner","color","Icon","XCircleIcon","title","twMerge","FullLoadScreen","twJoin","Spinner","NoSSR","isClient","useIsClient","DynamicImport","fallback","lazy","Promise","resolve","default","Fragment","QueryStatus","content","query","isError","error","message","isLoading","AnimatedContainer","TwoColumns","jsx_runtime","svg","viewBox","fill","strokeWidth","stroke","xmlns","path","strokeLinecap","strokeLinejoin","d","SingleColumn","proccessTokens","hunks","options","highlight","enhancers","markEdits","type","tokenize","ex","DiffModal","isOpen","setIsOpen","viewType","setViewType","useState","close","useCallback","files","useMemo","parseDiff","diff","diffType","state","Transition","Root","show","as","appear","Dialog","onClose","jsxs","Child","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Overlay","span","aria-hidden","Title","button","onClick","XMarkIcon","map","param","i","Diff","tokens","buttons","Button","variant","StateCircleVariants","variants","success","info","warning","danger","indeterminate","plain","primary","StateCircle","ping","pingClassName","ChangedFile","addFileToIgnore","addFileToOverwrite","file","removeFileToIgnore","removeFileToOverwrite","isMarkedIgnored","isMarkedOverwritten","isDiffModalOpen","setIsDiffModalOpen","showDiffModal","wouldOtherwiseBeWritten","overwrite","isOverwritable","isIgnorable","isOverwritten","exists","needsExplicitAction","changedFromConfig","actions","fileName","skip","ignore","write","remove","intent","action","filter","Boolean","fileState","shouldPing","useChangeEffect","li","concat","a","p","Badge","size","changedOnDisk","isIgnored","CheckIcon","Menu","EllipsisVerticalIcon","Items","Item","active","disabled","FileChanges","filesToWrite","serializedConfig","onFilesToIgnoreChange","onFilesToOverwriteChange","filesToOverwrite","setFilesToOverwrite","includes","filesToIgnore","setFilesToIgnore","useEffect","client","trpc","useUtils","useQuery","queryKey","queryFn","res","printer","getFilesToWrite","mutate","config","enabled","ul","role","data","fileToWrite","z","array","BasePrinterRail","PrinterRailSettings","board","deserializeDriver","supportedVoltages","toolheads","useToolheads","toolhead","find","th","getExtruderAxis","printerRail","axis","canBeExtruderlessBoard","every","hasToolboard","usesToolboard","printerRailDefault","getToolboard","selectedBoard","performanceMode","setPerformanceMode","setPrinterRail","useSetRecoilState","PrinterRailState","printerRails","useRecoilValue","PrinterRailsState","motorSlot","setMotorSlot","motorSlots","undefined","integratedDriver","integratedDrivers","startsWith","PrinterAxis","extruder","driver","setDriver","stepper","setStepper","homingSpeed","setHomingSpeed","errorCount","errors","Object","keys","reduce","acc","key","keyErrors","count","Array","isArray","length","_errors","isSlotInUse","slot","some","railToolhead","pr","guessMotorSlot","mcu","reversePinLookup","canUseExtruderlessConfigs","boardPath","getSupportedVoltages","v","badge","findPreset","id","voltage","setVoltage","current","setCurrent","defaultPreset","recommendedPreset","matchingPreset","supportedDrivers","Drivers","protocol","stepperSPI","steppers","Steppers","s","matchesDefaultRail","sv","currentVoltage","run_current","newState","axisDescription","rotationDistance","serializedNew","serializePrinterRail","serializedOld","isDirty","isRecommendedPresetCompatible","railName","extruder1","toLocaleUpperCase","motorSlotOptions","ms","hasDiagPin","diag_pin","hasEndstopPin","endstop_pin","isInUse","motorSlotBadge","AnimatePresence","isVisible","exit","opacity","scale","y","initial","animate","badgeBorderColorStyle","badgeBackgroundColorStyle","CardHeader","CardTitle","CardDescription","CardContent","Dropdown","label","join","onSelect","value","TextInput","onChange","inputMode","step","min","max","maxCurrent","maxPeakCurrent","FireIcon","Math","floor","LightBulbIcon","BoltIcon","React","ref","cn","displayName","h3","CardFooter","deps","clearAfter","resetTimeoutOnChange","hasChanged","setHasChanged","lastDeps","useRef","changed","forEach","dep","clear","timeout","setTimeout","clearTimeout","useDelayedChangeEffect","delay","changeCount","setChangeCount","trigger","window"],"sourceRoot":""}