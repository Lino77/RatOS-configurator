{"version":3,"file":"static/chunks/7652-da405681e53e4c8b.js","mappings":"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","sources":["webpack://_N_E/./components/sync-with-moonraker.tsx","webpack://_N_E/./data/drivers.ts","webpack://_N_E/./components/ui/typography.tsx","webpack://_N_E/./data/fans.tsx","webpack://_N_E/./data/nozzles.ts","webpack://_N_E/./data/steppers.ts","webpack://_N_E/./helpers/toolhead.ts","webpack://_N_E/./helpers/utils.ts","webpack://_N_E/./hooks/usePrinterConfiguration.tsx","webpack://_N_E/./recoil/printer.ts","webpack://_N_E/./recoil/toolhead.ts","webpack://_N_E/./utils/serialization.ts","webpack://_N_E/./zods/boards.tsx","webpack://_N_E/./zods/hardware.tsx","webpack://_N_E/./zods/motion.tsx","webpack://_N_E/./zods/printer-configuration.tsx","webpack://_N_E/./zods/printer.tsx","webpack://_N_E/./zods/toolhead.tsx","webpack://_N_E/./env/schema.mjs","webpack://_N_E/<anon>"],"sourcesContent":["'use client';\n\nimport React, { useCallback, useEffect } from 'react';\nimport { useMoonraker } from '@/moonraker/hooks';\nimport { ReadItem, RecoilSync } from 'recoil-sync';\nimport { AtomEffect, DefaultValue } from 'recoil';\nimport { getLogger } from '@/app/_helpers/logger';\n\nconst moonrakerSyncEventEmitter = new EventTarget();\n\nexport const DispatchSaveAtomEvent = (itemKey: string, value: unknown) => {\n\tmoonrakerSyncEventEmitter.dispatchEvent(\n\t\tnew CustomEvent('saveAtom', {\n\t\t\tdetail: {\n\t\t\t\titemKey,\n\t\t\t\tvalue,\n\t\t\t},\n\t\t}) satisfies SaveAtomEvent,\n\t);\n};\n\nexport const moonrakerWriteEffect = <T extends any = unknown>(): AtomEffect<T> => {\n\treturn (params) => {\n\t\tparams.onSet((newValue) => {\n\t\t\t// getLogger().debug(\n\t\t\t// \t{\n\t\t\t// \t\tkey: params.node.key,\n\t\t\t// \t\tvalue: newValue,\n\t\t\t// \t},\n\t\t\t// \t`RatOS Atom Sync Effect: new value was saved to moonraker \"${params.trigger}\"`,\n\t\t\t// );\n\t\t\tDispatchSaveAtomEvent(params.node.key, newValue == null ? 'null' : newValue); // Moonraker doesn't save null values..\n\t\t});\n\t};\n};\n\ntype SaveAtomEvent = CustomEvent<{ itemKey: string; value: unknown }>;\n\nexport const SyncWithMoonraker: React.FC<React.PropsWithChildren> = ({ children }) => {\n\tconst moonraker = useMoonraker();\n\tconst read: ReadItem = useCallback(\n\t\tasync (itemKey) => {\n\t\t\tconst value = await moonraker.getItem('RatOS', itemKey as '__recoil');\n\t\t\treturn value != null && value != 'null' ? value : new DefaultValue();\n\t\t},\n\t\t[moonraker],\n\t);\n\n\tconst saveAtom = useCallback(\n\t\tasync (event: Event) => {\n\t\t\tconst { itemKey, value } = (event as SaveAtomEvent).detail;\n\t\t\tawait moonraker.saveItem('RatOS', itemKey as '__recoil', value);\n\t\t},\n\t\t[moonraker],\n\t);\n\n\tuseEffect(() => {\n\t\tmoonrakerSyncEventEmitter.addEventListener('saveAtom', saveAtom);\n\t\treturn () => {\n\t\t\tmoonrakerSyncEventEmitter.removeEventListener('saveAtom', saveAtom);\n\t\t};\n\t}, [saveAtom]);\n\treturn <RecoilSync read={read}>{children}</RecoilSync>;\n};\n","import { z } from 'zod';\nimport { Driver } from '@/zods/motion';\n\nexport const Drivers = z.array(Driver).parse([\n\t{\n\t\tid: 'LDO-TMC2209',\n\t\ttitle: 'TMC2209',\n\t\ttype: 'TMC2209',\n\t\tprotocol: 'UART',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 1.1,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'BTT-KRAKEN-2160-PLUS',\n\t\ttitle: 'BTT TMC2160',\n\t\ttype: 'TMC5160',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.022,\n\t\tvoltages: [24, 36, 48, 56, 60],\n\t\tmaxCurrent: 8,\n\t\tcoolingCurrentThreshold: 3,\n\t},\n\t{\n\t\tid: 'BTT-KRAKEN-2160',\n\t\ttitle: 'BTT TMC2160',\n\t\ttype: 'TMC5160',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.075,\n\t\tvoltages: [24, 36, 48, 56, 60],\n\t\tmaxCurrent: 3,\n\t\tcoolingCurrentThreshold: 1.5,\n\t},\n\t{\n\t\tid: 'BTT-TMC2209-13',\n\t\ttitle: 'BTT TMC2209 v1.3',\n\t\ttype: 'TMC2209',\n\t\tprotocol: 'UART',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 1.1,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'BTT-TMC2226-10',\n\t\ttitle: 'BTT TMC2226 v1.0',\n\t\ttype: 'TMC2209',\n\t\tprotocol: 'UART',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 1.1,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'BTT-TMC5160-PRO-11',\n\t\ttitle: 'BTT TMC5160(T) Pro v1.1',\n\t\ttype: 'TMC5160',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.075,\n\t\tvoltages: [24, 36, 48, 56],\n\t\tmaxCurrent: 3,\n\t\tcoolingCurrentThreshold: 1.5,\n\t},\n\t{\n\t\tid: 'BTT-TMC5160T-PLUS-10',\n\t\ttitle: 'BTT TMC5160T Plus v1.0',\n\t\ttype: 'TMC5160',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.022,\n\t\tvoltages: [24, 36, 48, 56, 60],\n\t\tmaxCurrent: 10.6,\n\t\tcoolingCurrentThreshold: 3,\n\t\texternal: true,\n\t},\n\t{\n\t\tid: 'BTT-EZ2209',\n\t\ttitle: 'BTT EZ2209',\n\t\ttype: 'TMC2209',\n\t\tprotocol: 'UART',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 1.3,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'BTT-EZ2226',\n\t\ttitle: 'BTT EZ2226',\n\t\ttype: 'TMC2209',\n\t\tprotocol: 'UART',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 1.3,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'BTT-EZ2130',\n\t\ttitle: 'BTT EZ2130',\n\t\ttype: 'TMC2130',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 0.9,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'BTT-EZ5160-PRO',\n\t\ttitle: 'BTT EZ5160 Pro',\n\t\ttype: 'TMC5160',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.075,\n\t\tcoolingCurrentThreshold: 1.6,\n\t\tvoltages: [24, 36, 48],\n\t\tmaxCurrent: 2.5,\n\t},\n\t{\n\t\tid: 'BTT-EZ5160-RGB',\n\t\ttitle: 'BTT EZ5160 RGB',\n\t\ttype: 'TMC5160',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.05,\n\t\tcoolingCurrentThreshold: 3,\n\t\tvoltages: [24, 48, 36, 56],\n\t\tmaxCurrent: 4.7,\n\t},\n\t{\n\t\tid: 'BTT-TMC2240-10',\n\t\ttitle: 'BTT TMC2240 v1.0',\n\t\ttype: 'TMC2240',\n\t\tprotocol: 'SPI',\n\t\tcoolingCurrentThreshold: 1.1,\n\t\tvoltages: [24, 36],\n\t\tmaxCurrent: 2.1,\n\t},\n\t{\n\t\tid: 'MELLOW-FLY-HV-TMC5160-PRO-12',\n\t\ttitle: 'Mellow FLY HV TMC5160 Pro v1.2',\n\t\ttype: 'TMC5160',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.033,\n\t\tcoolingCurrentThreshold: 3,\n\t\tvoltages: [24, 36, 48],\n\t\tmaxCurrent: 4.25,\n\t\texternal: true,\n\t},\n\t{\n\t\tid: 'MELLOW-FLY-TMC2209',\n\t\ttitle: 'Mellow FLY TMC2209',\n\t\ttype: 'TMC2209',\n\t\tprotocol: 'UART',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 1.1,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'PRUSA-EINSY-RAMBO-TMC2130',\n\t\ttitle: 'Prusa Einsy Rambo TMC2130',\n\t\ttype: 'TMC2130',\n\t\tprotocol: 'SPI',\n\t\tsenseResistor: 0.22,\n\t\tcoolingCurrentThreshold: 0.9,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'PRUSA-BUDDY-TMC2209',\n\t\ttitle: 'Prusa Buddy TMC2209',\n\t\ttype: 'TMC2209',\n\t\tprotocol: 'UART',\n\t\tsenseResistor: 0.11,\n\t\tcoolingCurrentThreshold: 1.1,\n\t\tvoltages: [24],\n\t\tmaxCurrent: 2.0,\n\t},\n] satisfies z.input<typeof Driver>[]);\n","import { cn, setDisplayName } from '@/helpers/utils';\nimport React from 'react';\n\nexport const Strong = React.forwardRef<HTMLElement, JSX.IntrinsicElements['strong']>(({ className, ...props }, ref) => (\n\t<strong ref={ref} className={cn('font-semibold', className)} {...props} />\n));\nsetDisplayName(Strong, 'Strong');\n","import { z } from 'zod';\nimport { Fan } from '@/zods/hardware';\nimport { PrinterAxis } from '@/zods/motion';\nimport type { PartialPrinterConfiguration } from '@/zods/printer-configuration';\nimport type { PartialToolheadConfiguration } from '@/zods/toolhead';\nimport { Strong } from '@/components/ui/typography';\nimport React from 'react';\n\nexport const fanHelp = (\n\t<>\n\t\t<p>\n\t\t\t<Strong className=\"dark:text-sky-300/70\">Input Voltage PWM</Strong> is used on fans that have no dedicated pwm pin\n\t\t\t(2 and 3-pin fans).\n\t\t</p>\n\t\t<p>\n\t\t\t<Strong className=\"dark:text-sky-300/70\">Digital PWM</Strong> is used for fans that have a dedicated PWM signal\n\t\t\twire (requires a 4-pin fan).\n\t\t</p>\n\t</>\n);\n\nexport const partFanOptions = (\n\tconfig?: PartialPrinterConfiguration | null,\n\ttoolheadConfig?: (PartialToolheadConfiguration & { axis: null | PrinterAxis }) | null,\n): z.infer<typeof Fan>[] => {\n\tconst fans: z.infer<typeof Fan>[] = [];\n\tif (toolheadConfig == null || toolheadConfig?.axis === PrinterAxis.x || toolheadConfig?.axis === null) {\n\t\tfans.push({\n\t\t\tid: '2pin' as const,\n\t\t\ttitle: 'Input Voltage PWM',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t});\n\t\tfans.push({\n\t\t\tid: '4pin' as const,\n\t\t\ttitle: 'Digital PWM on 2-pin port',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t});\n\t}\n\tif (config?.controlboard?.fourPinFanConnectorCount != null && config.controlboard.fourPinFanConnectorCount > 0) {\n\t\tfans.push({\n\t\t\tid: '4pin-dedicated' as const,\n\t\t\ttitle: 'Digital PWM on 4-pin port',\n\t\t\tbadge: [{ color: 'purple', children: config.controlboard.name }],\n\t\t});\n\t}\n\tif (toolheadConfig?.toolboard != null) {\n\t\tfans.push({\n\t\t\tid: '2pin-toolboard' as const,\n\t\t\ttitle: 'Input Voltage PWM',\n\t\t\tbadge: [\n\t\t\t\t{\n\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\tchildren: `${toolheadConfig.toolboard.name}${toolheadConfig.toolNumber != null && ` T${toolheadConfig.toolNumber}`}`,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t\tfans.push({\n\t\t\tid: '4pin-toolboard' as const,\n\t\t\ttitle: 'Digital PWM on 2-pin port',\n\t\t\tbadge: [\n\t\t\t\t{\n\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\tchildren: `${toolheadConfig.toolboard.name}${toolheadConfig.toolNumber != null && ` T${toolheadConfig.toolNumber}`}`,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t\tif (\n\t\t\ttoolheadConfig?.toolboard.fourPinFanConnectorCount != null &&\n\t\t\ttoolheadConfig.toolboard.fourPinFanConnectorCount > 0\n\t\t) {\n\t\t\tfans.push({\n\t\t\t\tid: '4pin-dedicated-toolboard' as const,\n\t\t\t\ttitle: 'Digital PWM on 4-pin port',\n\t\t\t\tbadge: [\n\t\t\t\t\t{\n\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\tchildren: `${toolheadConfig.toolboard.name}${toolheadConfig.toolNumber != null && ` T${toolheadConfig.toolNumber}`}`,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\t}\n\treturn fans;\n};\n\nexport const hotendFanOptions = (\n\tconfig?: z.infer<typeof PartialPrinterConfiguration> | null,\n\ttoolheadConfig?: (PartialToolheadConfiguration & { axis: null | PrinterAxis }) | null,\n): z.infer<typeof Fan>[] => {\n\tconst fans: z.infer<typeof Fan>[] = [];\n\tif (toolheadConfig == null || toolheadConfig?.axis === PrinterAxis.x) {\n\t\tfans.push({\n\t\t\tid: '2pin' as const,\n\t\t\ttitle: 'Input Voltage PWM',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t});\n\t\tfans.push({\n\t\t\tid: '4pin' as const,\n\t\t\ttitle: 'Digital PWM on 2-pin port',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t});\n\t}\n\tif (\n\t\t(config?.controlboard?.fourPinFanConnectorCount != null && config.controlboard.fourPinFanConnectorCount > 2) ||\n\t\t(config?.controlboard?.fourPinFanConnectorCount != null &&\n\t\t\tconfig.controlboard.fourPinFanConnectorCount > 1 &&\n\t\t\tconfig.controllerFan?.id !== '4pin-dedicated')\n\t) {\n\t\tfans.push({\n\t\t\tid: '4pin-dedicated' as const,\n\t\t\ttitle: 'Digital PWM on 4-pin port',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t});\n\t}\n\tif (toolheadConfig?.toolboard != null) {\n\t\tfans.push({\n\t\t\tid: '2pin-toolboard' as const,\n\t\t\ttitle: 'Input Voltage PWM',\n\t\t\tbadge: [\n\t\t\t\t{\n\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\tchildren: `${toolheadConfig.toolboard.name}${toolheadConfig.toolNumber != null && ` T${toolheadConfig.toolNumber}`}`,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t\tfans.push({\n\t\t\tid: '4pin-toolboard' as const,\n\t\t\ttitle: 'Digital PWM on 2-pin port',\n\t\t\tbadge: [\n\t\t\t\t{\n\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\tchildren: `${toolheadConfig.toolboard.name}${toolheadConfig.toolNumber != null && ` T${toolheadConfig.toolNumber}`}`,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t\tif (\n\t\t\ttoolheadConfig?.toolboard.fourPinFanConnectorCount != null &&\n\t\t\ttoolheadConfig.toolboard.fourPinFanConnectorCount > 1\n\t\t) {\n\t\t\tfans.push({\n\t\t\t\tid: '4pin-dedicated-toolboard' as const,\n\t\t\t\ttitle: 'Digital PWM on 4-pin port',\n\t\t\t\tbadge: [\n\t\t\t\t\t{\n\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\tchildren: `${toolheadConfig.toolboard.name}${toolheadConfig.toolNumber != null && ` T${toolheadConfig.toolNumber}`}`,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\t}\n\treturn fans;\n};\n\nexport const controllerFanOptions = (\n\tconfig?: z.infer<typeof PartialPrinterConfiguration> | null,\n\ttoolheadConfigs?: PartialToolheadConfiguration[] | null,\n): z.infer<typeof Fan>[] => {\n\tconst fans: z.infer<typeof Fan>[] = [\n\t\t{\n\t\t\tid: '2pin' as const,\n\t\t\ttitle: 'Input Voltage PWM',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t},\n\t\t{\n\t\t\tid: '4pin' as const,\n\t\t\ttitle: 'Digital PWM on 2-pin port',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t},\n\t];\n\tif (\n\t\t(config?.controlboard?.fourPinFanConnectorCount != null && config.controlboard.fourPinFanConnectorCount > 2) ||\n\t\t(config?.controlboard?.fourPinFanConnectorCount != null &&\n\t\t\tconfig.controlboard.fourPinFanConnectorCount > 1 &&\n\t\t\t!toolheadConfigs?.some((th) => th?.hotendFan?.id === '4pin-dedicated'))\n\t) {\n\t\tfans.push({\n\t\t\tid: '4pin-dedicated' as const,\n\t\t\ttitle: 'Digital PWM on 4-pin port',\n\t\t\tbadge: [{ color: 'purple', children: config?.controlboard?.name ?? 'Control Board' }],\n\t\t});\n\t}\n\tfans.push({ id: 'none', title: 'No fan' });\n\treturn fans;\n};\n\nexport const defaultControllerFan = {\n\tid: '2pin' as const,\n\ttitle: 'Input Voltage PWM',\n\tbadge: [{ color: 'purple' as const, children: 'Control Board' }],\n};\n","import { z } from 'zod';\nimport { Nozzle } from '@/zods/hardware';\n\nexport const getDefaultNozzle = () => {\n\treturn { diameter: 0.4, type: 'Regular' } satisfies z.infer<typeof Nozzle>;\n};\n","import { z } from 'zod';\nimport { Drivers } from '@/data/drivers';\nimport { Stepper, StepperVoltage } from '@/zods/motion';\n\nexport const findPreset = (\n\tstepper: (typeof Steppers)[number],\n\tdriver: (typeof Drivers)[number],\n\tvoltage: StepperVoltage,\n\tcurrent?: number,\n\tperformanceMode?: boolean | null,\n) => {\n\treturn stepper.presets\n\t\t?.slice()\n\t\t.sort((a, b) => (performanceMode ? b.run_current - a.run_current : a.run_current - b.run_current))\n\t\t.find(\n\t\t\t(p) =>\n\t\t\t\tp.driver === driver.type &&\n\t\t\t\tp.voltage === voltage &&\n\t\t\t\t(driver.type === 'TMC2240' || ('sense_resistor' in p && p.sense_resistor === driver.senseResistor)) &&\n\t\t\t\t(current == null || p.run_current === current),\n\t\t);\n};\n\nexport const Steppers = z.array(Stepper).parse([\n\t{\n\t\tid: 'generic',\n\t\ttitle: 'Generic Stepper',\n\t\tmaxPeakCurrent: 2.8,\n\t},\n\t{\n\t\tid: 'BONDTECH-42H025H-0704-002',\n\t\ttitle: 'Bondtech LGX Stepper',\n\t\tmaxPeakCurrent: 0.7,\n\t},\n\t{\n\t\tid: 'LDO-42STH48-2504AC',\n\t\ttitle: 'LDO-42STH48-2504AC',\n\t\tmaxPeakCurrent: 2.5,\n\t\tpresets: [\n\t\t\t{\n\t\t\t\trun_current: 1.1,\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2209',\n\t\t\t\tsense_resistor: 0.11,\n\t\t\t\tdriver_TBL: 1,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 0,\n\t\t\t\tdriver_HSTRT: 0,\n\t\t\t},\n\t\t\t{\n\t\t\t\trun_current: 1.6,\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2209',\n\t\t\t\tsense_resistor: 0.11,\n\t\t\t\tdriver_TBL: 2,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 0,\n\t\t\t\tdriver_HSTRT: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\trun_current: 1.6,\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC5160',\n\t\t\t\tsense_resistor: 0.075,\n\t\t\t\tdriver_TBL: 2,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 0,\n\t\t\t\tdriver_HSTRT: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\trun_current: 1.768,\n\t\t\t\tvoltage: 48,\n\t\t\t\tdriver: 'TMC5160',\n\t\t\t\tsense_resistor: 0.075,\n\t\t\t\tdriver_TBL: 0,\n\t\t\t\tdriver_TOFF: 4,\n\t\t\t\tdriver_HEND: 0,\n\t\t\t\tdriver_HSTRT: 4,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tid: 'LDO-42STH40-1684AC',\n\t\ttitle: 'LDO-42STH40-1684AC',\n\t\tmaxPeakCurrent: 1.68,\n\t\tpresets: [\n\t\t\t{\n\t\t\t\trun_current: 0.4,\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2130',\n\t\t\t\tsense_resistor: 0.22,\n\t\t\t\tdriver_IHOLDDELAY: 8,\n\t\t\t\tdriver_TPOWERDOWN: 0,\n\t\t\t\tdriver_TBL: 2,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 1,\n\t\t\t\tdriver_HSTRT: 5,\n\t\t\t\tdriver_PWM_FREQ: 2,\n\t\t\t\tdriver_PWM_GRAD: 2,\n\t\t\t\tdriver_PWM_AMPL: 230,\n\t\t\t\tdriver_PWM_AUTOSCALE: true,\n\t\t\t\tdriver_SGT: 5,\n\t\t\t},\n\t\t\t{\n\t\t\t\trun_current: 0.52,\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2130',\n\t\t\t\tsense_resistor: 0.22,\n\t\t\t\tdriver_IHOLDDELAY: 8,\n\t\t\t\tdriver_TPOWERDOWN: 0,\n\t\t\t\tdriver_TBL: 2,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 1,\n\t\t\t\tdriver_HSTRT: 5,\n\t\t\t\tdriver_PWM_FREQ: 2,\n\t\t\t\tdriver_PWM_GRAD: 4,\n\t\t\t\tdriver_PWM_AMPL: 240,\n\t\t\t\tdriver_PWM_AUTOSCALE: true,\n\t\t\t\tdriver_SGT: 3,\n\t\t\t},\n\t\t\t{\n\t\t\t\trun_current: 0.8,\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2209',\n\t\t\t\tsense_resistor: 0.11,\n\t\t\t\tdriver_TBL: 1,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 3,\n\t\t\t\tdriver_HSTRT: 0,\n\t\t\t},\n\t\t\t{\n\t\t\t\trun_current: 1.188,\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2209',\n\t\t\t\tsense_resistor: 0.11,\n\t\t\t\tdriver_TBL: 0,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 0,\n\t\t\t\tdriver_HSTRT: 0,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tid: 'LDO-42STH48-2004MAH',\n\t\ttitle: 'LDO-42STH48-2004MAH',\n\t\tmaxPeakCurrent: 2.0,\n\t\tfullStepsPerRotation: 400,\n\t},\n\t{\n\t\tid: 'LDO-42STH48-2004AC',\n\t\ttitle: 'LDO-42STH48-2004AC',\n\t\tmaxPeakCurrent: 2.0,\n\t},\n\t{\n\t\tid: 'LDO-42STH25-1404MAC',\n\t\ttitle: 'LDO-42STH25-1404MAC',\n\t\tmaxPeakCurrent: 1.4,\n\t\tfullStepsPerRotation: 400,\n\t\tpresets: [\n\t\t\t{\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2209',\n\t\t\t\tsense_resistor: 0.11,\n\t\t\t\trun_current: 0.85,\n\t\t\t\tdriver_TBL: 1,\n\t\t\t\tdriver_TOFF: 3,\n\t\t\t\tdriver_HEND: 2,\n\t\t\t\tdriver_HSTRT: 0,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tid: 'LDO-42STH25-1004CL200E',\n\t\ttitle: 'LDO-42STH25-1004CL200E',\n\t\tmaxPeakCurrent: 1.0,\n\t},\n\t{\n\t\tid: 'LDO-36STH20-1004AHG',\n\t\ttitle: 'LDO-36STH20-1004AHG',\n\t\tmaxPeakCurrent: 1.0,\n\t\tpresets: [\n\t\t\t{\n\t\t\t\tvoltage: 24,\n\t\t\t\tdriver: 'TMC2209',\n\t\t\t\tsense_resistor: 0.11,\n\t\t\t\trun_current: 0.707,\n\t\t\t\tdriver_TBL: 0,\n\t\t\t\tdriver_HEND: 6,\n\t\t\t\tdriver_HSTRT: 7,\n\t\t\t\tdriver_TOFF: 4,\n\t\t\t},\n\t\t\t// {\n\t\t\t// \tvoltage: 24,\n\t\t\t// \tdriver: 'TMC2209',\n\t\t\t// \tsense_resistor: 0.11,\n\t\t\t// \trun_current: 0.85,\n\t\t\t// \tdriver_TBL: 0,\n\t\t\t// \tdriver_HEND: 6,\n\t\t\t// \tdriver_HSTRT: 7,\n\t\t\t// \tdriver_TOFF: 4,\n\t\t\t// },\n\t\t],\n\t},\n\t{\n\t\tid: 'LDO-36STH17-1004AHG',\n\t\ttitle: 'LDO-36STH17-1004AHG',\n\t\tmaxPeakCurrent: 1.0,\n\t},\n\t{\n\t\tid: 'LDO-35STH48-1684AH',\n\t\ttitle: 'LDO-35STH48-1684AH',\n\t\tmaxPeakCurrent: 1.68,\n\t},\n] satisfies z.input<typeof Stepper>[]);\n","import { serializeToolheadConfiguration } from '@/utils/serialization';\nimport { PrinterAxis } from '@/zods/motion';\nimport {\n\tPartialToolheadConfiguration,\n\tSerializedToolheadConfiguration,\n\tToolheadConfiguration,\n\tToolNumber,\n} from '@/zods/toolhead';\nimport { getDefaultNozzle } from '@/data/nozzles';\nimport deepEqual from 'deep-equal';\nimport { KlipperAccelSensorName } from '@/zods/hardware';\n\ntype ToolheadSuffix = `t${ToolNumber}`;\ntype ToolheadCommand = `T${ToolNumber}`;\ntype ToolboardAxisString = 'x' | 'dc';\ntype ToolboardShortName = ToolheadSuffix;\n\nexport class ToolheadHelper<IsToolboard extends boolean> {\n\tprotected config: ToolheadConfiguration<IsToolboard>;\n\tconstructor(toolhead: ToolheadConfiguration<IsToolboard>) {\n\t\tthis.config = toolhead;\n\t}\n\tpublic hasToolboard(): boolean {\n\t\treturn this.config.toolboard != null;\n\t}\n\tpublic getToolboard() {\n\t\treturn this.config.toolboard;\n\t}\n\tpublic getMotionStepperName() {\n\t\tif (this.config.axis === PrinterAxis.dual_carriage) {\n\t\t\treturn 'dual_carriage';\n\t\t}\n\t\treturn `stepper_${this.getMotionAxis()}`;\n\t}\n\tpublic getToolboardName(): `toolboard_${ToolboardShortName}` {\n\t\tif (this.config.toolboard == null) {\n\t\t\tthrow new Error(`Toolhead T${this.getTool()} does not have a toolboard`);\n\t\t}\n\t\treturn `toolboard_${this.getShortToolName()}`;\n\t}\n\tpublic getShortToolName(): ToolboardShortName {\n\t\treturn `t${this.getTool()}`;\n\t}\n\tpublic getDescription(): string {\n\t\treturn this.config.description ?? `the printer's toolhead`;\n\t}\n\tpublic getMotionAxis(): PrinterAxis.x | PrinterAxis.dual_carriage {\n\t\tif (this.config.axis === PrinterAxis.dual_carriage) {\n\t\t\treturn PrinterAxis.dual_carriage;\n\t\t}\n\t\treturn PrinterAxis.x;\n\t}\n\tpublic getExtruderAxis(): PrinterAxis.extruder | PrinterAxis.extruder1 {\n\t\tif (this.config.axis === PrinterAxis.dual_carriage) {\n\t\t\treturn PrinterAxis.extruder1;\n\t\t}\n\t\treturn PrinterAxis.extruder;\n\t}\n\tpublic getToolCommand(): ToolheadCommand {\n\t\treturn `T${this.getTool()}`;\n\t}\n\tpublic getTool(): ToolNumber {\n\t\tif (this.config.axis === PrinterAxis.dual_carriage) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t}\n\tpublic getSerialSuffix(): ToolheadSuffix {\n\t\treturn `t${this.getTool()}`;\n\t}\n\tpublic getExtruder() {\n\t\treturn this.config.extruder;\n\t}\n\tpublic getHotend() {\n\t\treturn this.config.hotend;\n\t}\n\tpublic getNozzle() {\n\t\treturn this.config.nozzle ?? getDefaultNozzle();\n\t}\n\tpublic getThermistor() {\n\t\treturn this.config.thermistor;\n\t}\n\tpublic getXEndstop() {\n\t\treturn this.config.xEndstop;\n\t}\n\tpublic getYEndstop() {\n\t\treturn this.config.yEndstop;\n\t}\n\tpublic getXAccelerometer() {\n\t\treturn this.config.xAccelerometer;\n\t}\n\tpublic getYAccelerometer() {\n\t\treturn this.config.yAccelerometer;\n\t}\n\tpublic getXAccelerometerName(): KlipperAccelSensorName {\n\t\tswitch (this.getXAccelerometer()?.id) {\n\t\t\tcase 'controlboard':\n\t\t\t\treturn 'controlboard';\n\t\t\tcase 'toolboard':\n\t\t\t\tif (this.hasToolboard()) {\n\t\t\t\t\treturn this.getToolboardName();\n\t\t\t\t}\n\t\t\tcase 'sbc':\n\t\t\t\treturn 'rpi';\n\t\t\tcase 'beacon':\n\t\t\t\treturn 'beacon';\n\t\t\tdefault:\n\t\t\t\treturn 'controlboard';\n\t\t}\n\t}\n\tpublic getYAccelerometerName(): KlipperAccelSensorName {\n\t\tswitch (this.getYAccelerometer()?.id) {\n\t\t\tcase 'controlboard':\n\t\t\t\treturn 'controlboard';\n\t\t\tcase 'toolboard':\n\t\t\t\tif (this.hasToolboard()) {\n\t\t\t\t\treturn this.getToolboardName();\n\t\t\t\t}\n\t\t\tcase 'sbc':\n\t\t\t\treturn 'rpi';\n\t\t\tcase 'beacon':\n\t\t\t\treturn 'beacon';\n\t\t\tdefault:\n\t\t\t\treturn 'controlboard';\n\t\t}\n\t}\n\tpublic getChangeSet(changes: PartialToolheadConfiguration) {\n\t\tif (changes == null) {\n\t\t\treturn null;\n\t\t}\n\t\tconst changeSet: any = {};\n\t\tObject.keys(changes).forEach((key) => {\n\t\t\tconst current = this.getConfig()[key as keyof ToolheadConfiguration<IsToolboard>];\n\t\t\tconst change = changes[key as keyof ToolheadConfiguration<IsToolboard>];\n\t\t\tif ((current != null && change == null) || (current == null && change != null)) {\n\t\t\t\tchangeSet[key] = change;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (current && change) {\n\t\t\t\tif (typeof current === 'object' && 'id' in current && typeof change === 'object' && 'id' in change) {\n\t\t\t\t\tif (current.id !== change.id) {\n\t\t\t\t\t\tchangeSet[key] = change;\n\t\t\t\t\t}\n\t\t\t\t} else if (!deepEqual(current, change)) {\n\t\t\t\t\tchangeSet[key] = change;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tconst parsed = PartialToolheadConfiguration.safeParse(changeSet);\n\t\treturn parsed;\n\t}\n\tpublic getProbe() {\n\t\treturn this.config.probe;\n\t}\n\tpublic getPartFan() {\n\t\treturn this.config.partFan;\n\t}\n\tpublic getHotendFan() {\n\t\treturn this.config.hotendFan;\n\t}\n\tpublic serialize(): SerializedToolheadConfiguration {\n\t\treturn serializeToolheadConfiguration(this.config);\n\t}\n\tpublic getConfig(): ToolheadConfiguration<IsToolboard> {\n\t\treturn { ...this.config };\n\t}\n}\n","import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n\treturn twMerge(clsx(inputs));\n}\n\nexport function setDisplayName(Component: React.ComponentType<any>, name: string | undefined) {\n\t(Component as any).displayName = name;\n}\n","'use client';\n\nimport { atom, selector, useRecoilValue, useRecoilState, waitForAll, noWait } from 'recoil';\nimport { z } from 'zod';\nimport { Fan } from '@/zods/hardware';\nimport {\n\tPartialPrinterConfiguration,\n\tPrinterConfiguration,\n\tSerializedPartialPrinterConfiguration,\n\tSerializedPrinterConfiguration,\n} from '@/zods/printer-configuration';\nimport { syncEffect } from 'recoil-sync';\nimport { getRefineCheckerForZodSchema } from 'zod-refine';\nimport { useMemo } from 'react';\nimport {\n\tserializePartialToolheadConfiguration,\n\tserializePrinterRail,\n\tserializeToolheadConfiguration,\n} from '@/utils/serialization';\nimport {\n\tControlboardState,\n\tLoadablePrinterRailsState,\n\tPrinterRailsState,\n\tPrinterSizeState,\n\tPrinterState,\n} from '@/recoil/printer';\nimport { PrinterToolheadsState } from '@/recoil/toolhead';\nimport { defaultControllerFan } from '@/data/fans';\nimport { moonrakerWriteEffect } from '@/components/sync-with-moonraker';\nimport { getLogger } from '@/app/_helpers/logger';\n\nexport const PerformanceModeState = atom<boolean | null | undefined>({\n\tkey: 'PerformanceMode',\n\tdefault: false,\n\teffects: [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\trefine: getRefineCheckerForZodSchema(z.boolean().optional().nullable()),\n\t\t}),\n\t],\n});\n\nexport const StealthchopState = atom<boolean | null | undefined>({\n\tkey: 'Stealchop',\n\tdefault: false,\n\teffects: [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\trefine: getRefineCheckerForZodSchema(z.boolean().optional().nullable()),\n\t\t}),\n\t],\n});\n\nexport const StandstillStealthState = atom<boolean | null | undefined>({\n\tkey: 'StandstillStealth',\n\tdefault: false,\n\teffects: [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\trefine: getRefineCheckerForZodSchema(z.boolean().optional().nullable()),\n\t\t}),\n\t],\n});\nexport const ControllerFanState = atom<z.infer<typeof Fan> | null>({\n\tkey: 'ControllerFan',\n\tdefault: defaultControllerFan,\n\teffects: [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\trefine: getRefineCheckerForZodSchema(Fan.nullable()),\n\t\t}),\n\t],\n});\n\nexport const PrinterConfigurationState = selector<z.infer<typeof PartialPrinterConfiguration> | null>({\n\tkey: 'PrinterConfiguration',\n\tget: async ({ get }) => {\n\t\tconst {\n\t\t\tprinter,\n\t\t\tprinterSize,\n\t\t\tperformanceMode,\n\t\t\tstealthchop,\n\t\t\tstandstillStealth,\n\t\t\trails,\n\t\t\tcontrolboard,\n\t\t\tcontrollerFan,\n\t\t\ttoolheads,\n\t\t} = get(\n\t\t\twaitForAll({\n\t\t\t\tprinter: PrinterState,\n\t\t\t\tprinterSize: PrinterSizeState,\n\t\t\t\tperformanceMode: PerformanceModeState,\n\t\t\t\tstealthchop: StealthchopState,\n\t\t\t\tstandstillStealth: StandstillStealthState,\n\t\t\t\trails: PrinterRailsState,\n\t\t\t\tcontrolboard: ControlboardState,\n\t\t\t\tcontrollerFan: ControllerFanState,\n\t\t\t\ttoolheads: PrinterToolheadsState,\n\t\t\t}),\n\t\t);\n\n\t\tconst input = {\n\t\t\tprinter:\n\t\t\t\tprinter == null\n\t\t\t\t\t? null\n\t\t\t\t\t: {\n\t\t\t\t\t\t\t...printer,\n\t\t\t\t\t\t\tdefaults: {\n\t\t\t\t\t\t\t\t...printer.defaults,\n\t\t\t\t\t\t\t\ttoolheads: printer?.defaults.toolheads.map((th) => serializeToolheadConfiguration(th)),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\tsize: printerSize,\n\t\t\tperformanceMode,\n\t\t\tstealthchop,\n\t\t\tstandstillStealth,\n\t\t\trails,\n\t\t\tcontrolboard,\n\t\t\tcontrollerFan,\n\t\t\ttoolheads: toolheads.length > 0 ? toolheads : undefined,\n\t\t} satisfies {\n\t\t\t[key in keyof PrinterConfiguration]: NonNullable<PartialPrinterConfiguration>[key] | null | undefined;\n\t\t};\n\n\t\tconst printerConfig = PartialPrinterConfiguration.safeParse(input);\n\t\tif (printerConfig.success === false) {\n\t\t\tgetLogger().error(\n\t\t\t\t{ errors: printerConfig.error.flatten().fieldErrors, data: input },\n\t\t\t\t\"Couldn't parse printer configuration\",\n\t\t\t);\n\t\t}\n\t\treturn printerConfig.success ? printerConfig.data : null;\n\t},\n});\n\nexport const LoadablePrinterConfigurationState = selector<z.infer<typeof PartialPrinterConfiguration>>({\n\tkey: 'LoadablePrinterConfigurationState',\n\tget: async ({ get }) => {\n\t\tconst loadable = get(noWait(PrinterConfigurationState));\n\t\treturn {\n\t\t\thasValue: () => loadable.contents,\n\t\t\thasError: () => null,\n\t\t\tloading: () => null,\n\t\t}[loadable.state]();\n\t},\n});\n\nexport const serializePrinterConfiguration = (config: PrinterConfiguration): SerializedPrinterConfiguration => {\n\tconst serializedConfig: SerializedPrinterConfiguration = {\n\t\tprinter: config.printer.id,\n\t\ttoolheads: config.toolheads.map((toolhead) => serializeToolheadConfiguration(toolhead)),\n\t\tsize: config.size,\n\t\tcontrolboard: config.controlboard.id,\n\t\tcontrollerFan: config.controllerFan.id,\n\t\tperformanceMode: config.performanceMode,\n\t\tstealthchop: config.stealthchop,\n\t\tstandstillStealth: config.standstillStealth,\n\t\trails: config.rails.map((rail) => serializePrinterRail(rail)),\n\t};\n\treturn SerializedPrinterConfiguration.parse(serializedConfig);\n};\nexport const serializePartialPrinterConfiguration = (\n\tconfig: PartialPrinterConfiguration,\n): SerializedPartialPrinterConfiguration => {\n\tconst toolheads = config?.toolheads?.map((toolhead) => serializePartialToolheadConfiguration(toolhead));\n\tconst serializedConfig: SerializedPartialPrinterConfiguration = {\n\t\tprinter: config?.printer?.id,\n\t\ttoolheads: toolheads,\n\t\tsize: config?.size,\n\t\tcontrolboard: config?.controlboard?.id,\n\t\tcontrollerFan: config?.controllerFan?.id,\n\t\tperformanceMode: config?.performanceMode,\n\t\tstealthchop: config?.stealthchop,\n\t\tstandstillStealth: config?.standstillStealth,\n\t};\n\treturn SerializedPartialPrinterConfiguration.parse(serializedConfig);\n};\n\nexport const useSerializedPrinterConfiguration = () => {\n\tconst printerConfiguration = useRecoilValue(PrinterConfigurationState);\n\tconst serializedPrinterConfiguration = useMemo(\n\t\t() => serializePartialPrinterConfiguration(printerConfiguration ?? {}),\n\t\t[printerConfiguration],\n\t);\n\treturn serializedPrinterConfiguration;\n};\nexport const usePrinterConfiguration = () => {\n\tconst [selectedPrinter, setSelectedPrinter] = useRecoilState(PrinterState);\n\tconst [selectedPrinterOption, setSelectedPrinterOption] = useRecoilState(PrinterSizeState);\n\tconst [selectedBoard, setSelectedBoard] = useRecoilState(ControlboardState);\n\tconst [performanceMode, setPerformanceMode] = useRecoilState(PerformanceModeState);\n\tconst [stealthchop, setStealthchop] = useRecoilState(StealthchopState);\n\tconst [standstillStealth, setStandstillStealth] = useRecoilState(StandstillStealthState);\n\tconst [selectedControllerFan, setSelectedControllerFan] = useRecoilState(ControllerFanState);\n\tconst selectedPrinterRails = useRecoilValue(PrinterRailsState);\n\tconst printerConfiguration = useRecoilValue(PrinterConfigurationState);\n\tconst serializedPrinterConfiguration = useSerializedPrinterConfiguration();\n\tconst parsedPrinterConfiguration = PrinterConfiguration.safeParse(printerConfiguration);\n\n\treturn {\n\t\tselectedPrinter,\n\t\tsetSelectedPrinter,\n\t\tselectedPrinterOption,\n\t\tsetSelectedPrinterOption,\n\t\tselectedBoard,\n\t\tsetSelectedBoard,\n\t\tperformanceMode,\n\t\tsetPerformanceMode,\n\t\tstealthchop,\n\t\tsetStealthchop,\n\t\tstandstillStealth,\n\t\tsetStandstillStealth,\n\t\tselectedPrinterRails,\n\t\tselectedControllerFan,\n\t\tsetSelectedControllerFan,\n\t\tpartialPrinterConfiguration: printerConfiguration,\n\t\tserializedPrinterConfiguration,\n\t\tparsedPrinterConfiguration,\n\t};\n};\n","import { ReadAtomInterface, syncEffect } from 'recoil-sync';\nimport { PrinterDefinitionWithResolvedToolheads } from '@/zods/printer';\nimport { trpcClient } from '@/helpers/trpc';\nimport { atomFamily, selector, DefaultValue, atom, noWait } from 'recoil';\nimport { z } from 'zod';\nimport { getRefineCheckerForZodSchema } from 'zod-refine';\nimport { deserializePrinterRail, serializePrinterRail } from '@/utils/serialization';\nimport { SerializedPrinterRail, PrinterAxis, PrinterRail } from '@/zods/motion';\nimport { Board, BoardID, BoardPath } from '@/zods/boards';\nimport { moonrakerWriteEffect } from '@/components/sync-with-moonraker';\nimport { PrinterSize } from '@/zods/printer-configuration';\n\nlet cachedPrinters: { [id: string]: z.infer<typeof PrinterDefinitionWithResolvedToolheads> } = {};\n\n// SyncEffect read methods\nexport const readPrinterAtom = async ({\n\tread,\n}: ReadAtomInterface): Promise<z.infer<typeof PrinterDefinitionWithResolvedToolheads> | null> => {\n\tconst printer = await read(PrinterState.key);\n\tif (printer != null) {\n\t\tlet printerId = z.object({ id: PrinterDefinitionWithResolvedToolheads.shape.id }).safeParse(printer);\n\t\tif (!printerId.success) {\n\t\t\tprinterId = z.object({ id: PrinterDefinitionWithResolvedToolheads.shape.id }).safeParse({ id: printer });\n\t\t}\n\t\tif (printerId.success) {\n\t\t\tlet newPrinter: null | PrinterDefinitionWithResolvedToolheads = cachedPrinters[printerId.data.id];\n\t\t\tif (newPrinter == null) {\n\t\t\t\tnewPrinter = await trpcClient.printer.printer.query(printerId.data.id, {});\n\t\t\t\tif (newPrinter) {\n\t\t\t\t\tcachedPrinters[printerId.data.id] = newPrinter;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn newPrinter ?? null;\n\t\t}\n\t}\n\treturn null;\n};\n\nexport const readPrinterRailAtom =\n\t(param: PrinterAxis) =>\n\tasync ({ read }: ReadAtomInterface): Promise<z.infer<typeof SerializedPrinterRail> | null> => {\n\t\tconst printerRailState = await read(PrinterRailState(param).key);\n\t\tif (printerRailState != null) {\n\t\t\tconst parsedRail = SerializedPrinterRail.safeParse(printerRailState);\n\t\t\tif (parsedRail.success) {\n\t\t\t\treturn parsedRail.data;\n\t\t\t}\n\t\t\tconst printer = await readPrinterAtom({ read });\n\t\t\tconst printerRailDefault = printer?.defaults.rails.find((r) => r.axis === param);\n\t\t\tif (printerRailDefault != null) {\n\t\t\t\tconst parsedRailRepaired = SerializedPrinterRail.safeParse({ ...printerRailDefault, ...printerRailState });\n\t\t\t\tif (parsedRailRepaired.success) {\n\t\t\t\t\treturn parsedRailRepaired.data;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\nexport const PrinterState = atom<z.infer<typeof PrinterDefinitionWithResolvedToolheads> | null>({\n\tkey: 'Printer',\n\tdefault: null,\n\teffects: [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\tread: readPrinterAtom,\n\t\t\twrite: async ({ write }, newValue) => {\n\t\t\t\tawait new Promise((resolve) => {\n\t\t\t\t\tif (newValue instanceof DefaultValue) {\n\t\t\t\t\t\twrite(PrinterState.key, null);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twrite(PrinterState.key, newValue ?? null);\n\t\t\t\t\t}\n\t\t\t\t\tsetTimeout(() => {}, 500);\n\t\t\t\t});\n\t\t\t},\n\t\t\trefine: getRefineCheckerForZodSchema(PrinterDefinitionWithResolvedToolheads.nullable()),\n\t\t}),\n\t],\n});\n\nexport const LoadablePrinterState = selector<z.infer<typeof PrinterDefinitionWithResolvedToolheads> | null>({\n\tkey: 'LoadablePrinterState',\n\tget: async ({ get }) => {\n\t\tconst loadable = get(noWait(PrinterState));\n\t\treturn {\n\t\t\thasValue: () => loadable.contents,\n\t\t\thasError: () => [],\n\t\t\tloading: () => [],\n\t\t}[loadable.state]();\n\t},\n});\n\nexport const PrinterSizeState = atom<z.output<typeof PrinterSize> | null>({\n\tkey: 'PrinterOption',\n\tdefault: null,\n\teffects: [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\trefine: getRefineCheckerForZodSchema(PrinterSize.nullable()),\n\t\t}),\n\t],\n});\n\nexport const ControlboardState = atom<Board | null>({\n\tkey: 'Controlboard',\n\tdefault: null,\n\teffects: [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\tread: async ({ read }) => {\n\t\t\t\tconst board = await read(ControlboardState.key);\n\t\t\t\tif (board != null) {\n\t\t\t\t\tconst boardId = z.object({ id: BoardID }).safeParse(board);\n\t\t\t\t\tif (boardId.success) {\n\t\t\t\t\t\tconst boardReq = await trpcClient.mcu.boards.query({ boardFilters: { toolboard: false } });\n\t\t\t\t\t\tconst newBoard = boardReq.find((b) => b.id === boardId.data.id);\n\t\t\t\t\t\treturn newBoard ?? null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\trefine: getRefineCheckerForZodSchema(Board.nullable()),\n\t\t}),\n\t],\n});\n\nexport const PrinterRailState = atomFamily<z.infer<typeof SerializedPrinterRail> | null, PrinterAxis>({\n\tkey: 'PrinterRail',\n\tdefault: null,\n\teffects: (param) => [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\tread: readPrinterRailAtom(param),\n\t\t\trefine: getRefineCheckerForZodSchema(SerializedPrinterRail.nullable()),\n\t\t}),\n\t],\n});\n\nexport const PrinterRailsState = selector<z.infer<typeof PrinterRail>[]>({\n\tkey: 'PrinterRails',\n\tget: ({ get }) => {\n\t\tconst printer = get(PrinterState);\n\t\tconst rails = printer?.defaults.rails.map((rail) => {\n\t\t\tconst railState = get(PrinterRailState(rail.axis));\n\t\t\treturn deserializePrinterRail(railState ?? rail);\n\t\t});\n\t\treturn rails ?? [];\n\t},\n\tset: ({ set }, newValue) => {\n\t\tif (newValue instanceof DefaultValue) {\n\t\t\tObject.values(PrinterAxis).forEach((axis) => {\n\t\t\t\tset(PrinterRailState(axis), null);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tnewValue.forEach((rail) => {\n\t\t\tset(PrinterRailState(rail.axis), serializePrinterRail(rail));\n\t\t});\n\t},\n});\n\nexport const LoadablePrinterRailsState = selector<z.infer<typeof PrinterRail>[]>({\n\tkey: 'LoadablePrinterRailsState',\n\tget: async ({ get }) => {\n\t\tconst loadable = get(noWait(PrinterRailsState));\n\t\treturn {\n\t\t\thasValue: () => loadable.contents,\n\t\t\thasError: () => [],\n\t\t\tloading: () => [],\n\t\t}[loadable.state]();\n\t},\n});\n","import { atomFamily, DefaultValue, selector, selectorFamily, noWait, waitForAll } from 'recoil';\nimport { ReadAtomInterface, syncEffect } from 'recoil-sync';\nimport { z } from 'zod';\nimport { getRefineCheckerForZodSchema } from 'zod-refine';\nimport { trpcClient } from '@/helpers/trpc';\nimport { BoardID, BoardPath, Toolboard } from '@/zods/boards';\nimport { PrinterAxis } from '@/zods/motion';\nimport {\n\tBaseToolheadConfiguration,\n\tSerializedToolheadConfiguration,\n\tToolheadConfiguration,\n\tToolNumber,\n} from '@/zods/toolhead';\nimport { PrinterState } from '@/recoil/printer';\nimport { moonrakerWriteEffect } from '@/components/sync-with-moonraker';\nimport { getLogger } from '@/app/_helpers/logger';\n\nexport const isAxisValidForTool = (axis: PrinterAxis, tool: ToolNumber) => {\n\tif (axis === PrinterAxis.dual_carriage && tool === 1) {\n\t\treturn true;\n\t}\n\tif (axis === PrinterAxis.x) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nexport const PrinterToolheadState = atomFamily<\n\t(ToolheadConfiguration<any> & { toolNumber: ToolNumber }) | null,\n\tToolNumber\n>({\n\tkey: 'PrinterToolhead',\n\tdefault: null,\n\teffects: (param) => [\n\t\tmoonrakerWriteEffect(),\n\t\tsyncEffect({\n\t\t\tread: async ({\n\t\t\t\tread,\n\t\t\t}: ReadAtomInterface): Promise<(ToolheadConfiguration<any> & { toolNumber: ToolNumber }) | null> => {\n\t\t\t\tconst state = await read(PrinterToolheadState(param).key);\n\t\t\t\tif (typeof state !== 'object') {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (state == null) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst { toolNumber: tNum, ...printerToolheadState } = state as ToolheadConfiguration<any> & {\n\t\t\t\t\ttoolNumber: ToolNumber;\n\t\t\t\t};\n\t\t\t\tif (printerToolheadState != null) {\n\t\t\t\t\tconst parsedToolhead = ToolheadConfiguration.safeParse(printerToolheadState);\n\t\t\t\t\tif (parsedToolhead.success) {\n\t\t\t\t\t\tlet freshToolboard = parsedToolhead.data.toolboard;\n\t\t\t\t\t\tif (freshToolboard) {\n\t\t\t\t\t\t\tif (freshToolboard != null) {\n\t\t\t\t\t\t\t\tconst toolboardPath = z.object({ id: BoardID }).safeParse(freshToolboard);\n\t\t\t\t\t\t\t\tif (toolboardPath.success) {\n\t\t\t\t\t\t\t\t\tconst boardReq = await trpcClient.mcu.boards.query({ boardFilters: { toolboard: true } });\n\t\t\t\t\t\t\t\t\tconst maybeToolboard = boardReq.find((b) => b.id === toolboardPath.data.id);\n\t\t\t\t\t\t\t\t\tif (maybeToolboard) {\n\t\t\t\t\t\t\t\t\t\tfreshToolboard = Toolboard.parse(maybeToolboard);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn { ...parsedToolhead.data, toolboard: freshToolboard, toolNumber: param };\n\t\t\t\t\t}\n\t\t\t\t\tgetLogger().debug(\n\t\t\t\t\t\t'RecoilSync: failed to read toolhead!',\n\t\t\t\t\t\tPrinterToolheadState(param).key,\n\t\t\t\t\t\tparsedToolhead.error,\n\t\t\t\t\t\tprinterToolheadState,\n\t\t\t\t\t);\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\trefine: getRefineCheckerForZodSchema(BaseToolheadConfiguration.extend({ toolNumber: ToolNumber }).nullable()),\n\t\t}),\n\t],\n});\n\nexport const DeserializeToolheadQuery = selectorFamily<\n\t(ToolheadConfiguration<any> & { toolNumber: ToolNumber }) | null,\n\t{ th: SerializedToolheadConfiguration; boardId: string; toolNumber: ToolNumber }\n>({\n\tkey: 'DeserializeToolheadQuery',\n\tget:\n\t\t(param) =>\n\t\tasync ({ get }) => {\n\t\t\tconst parsedToolhead = ToolheadConfiguration.safeParse(\n\t\t\t\tawait trpcClient.printer.deserializeToolheadConfiguration.query({\n\t\t\t\t\tconfig: param.th,\n\t\t\t\t\tprinterConfig: { controlboard: param.boardId },\n\t\t\t\t}),\n\t\t\t);\n\t\t\tif (!parsedToolhead.success) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn { ...parsedToolhead.data, toolNumber: param.toolNumber };\n\t\t},\n});\n\nexport const PrinterToolheadsState = selector<(ToolheadConfiguration<any> & { toolNumber: ToolNumber })[]>({\n\tkey: 'PrinterToolheadsState',\n\tget: ({ get }) => {\n\t\tconst printer = get(PrinterState);\n\t\tif (printer == null) {\n\t\t\treturn [];\n\t\t}\n\t\treturn get(waitForAll(printer.defaults.toolheads.map((th, i) => PrinterToolheadState(i as ToolNumber)))).filter(\n\t\t\tBoolean,\n\t\t);\n\t},\n\tset: ({ set, reset }, newValue) => {\n\t\tif (newValue instanceof DefaultValue) {\n\t\t\tthrow new Error('ToolheadsState cannot be reset, please reset the individual ToolheadState instead');\n\t\t}\n\t\tnewValue.forEach((th) => {\n\t\t\tset(PrinterToolheadState(th.toolNumber), { ...th, toolNumber: th.toolNumber });\n\t\t});\n\t},\n});\n\nexport const LoadablePrinterToolheadsState = selector<(ToolheadConfiguration<any> & { toolNumber: ToolNumber })[]>({\n\tkey: 'LoadablePrinterToolheadsState',\n\tget: async ({ get }) => {\n\t\tconst loadable = get(noWait(PrinterToolheadsState));\n\t\treturn {\n\t\t\thasValue: () => loadable.contents,\n\t\t\thasError: () => [],\n\t\t\tloading: () => [],\n\t\t}[loadable.state]();\n\t},\n});\n","import type { z } from 'zod';\nimport { Drivers } from '@/data/drivers';\nimport {\n\tBasePrinterRail,\n\tDriver,\n\tPrinterRail,\n\tPrinterRailDefinition,\n\tSerializedPrinterRail,\n\tSerializedPrinterRailDefinition,\n\tStepper,\n\tPrinterAxis,\n\tDriverID,\n} from '@/zods/motion';\nimport { Steppers } from '@/data/steppers';\nimport {\n\tToolheadConfiguration,\n\tSerializedToolheadConfiguration,\n\tPartialToolheadConfiguration,\n\tSerializedPartialToolheadConfiguration,\n\tToolOrAxis,\n} from '@/zods/toolhead';\nimport { PartialPrinterConfiguration } from '@/zods/printer-configuration';\nimport { ToolheadHelper } from '@/helpers/toolhead';\n\nexport const deserializeDriver = (driverId: z.input<typeof DriverID>): z.infer<typeof Driver> | null => {\n\treturn Drivers.find((d) => d.id === driverId) ?? null;\n};\n\nexport const deserializeStepper = (stepperId: z.input<typeof Stepper.shape.id>): z.infer<typeof Stepper> | null => {\n\treturn Steppers.find((d) => d.id === stepperId) ?? null;\n};\n\nexport const deserializePrinterRail = (rail: z.input<typeof SerializedPrinterRail>): z.infer<typeof PrinterRail> => {\n\tconst stepper = deserializeStepper(rail.stepper);\n\tconst driver = deserializeDriver(rail.driver);\n\tif (stepper == null) {\n\t\tthrow new Error(`Stepper ${rail.stepper} not found in database`);\n\t}\n\tif (driver == null) {\n\t\tthrow new Error(`Driver ${rail.driver} not found in database`);\n\t}\n\treturn BasePrinterRail.parse({\n\t\t...rail,\n\t\tstepper,\n\t\tdriver,\n\t});\n};\n\nexport const deserializePrinterRailDefinition = (\n\trail: z.input<typeof SerializedPrinterRailDefinition>,\n): z.infer<typeof PrinterRailDefinition> => {\n\tconst stepper = deserializeStepper(rail.stepper);\n\tconst driver = deserializeDriver(rail.driver);\n\tif (stepper == null) {\n\t\tthrow new Error(`Stepper ${rail.stepper} not found in database`);\n\t}\n\tif (driver == null) {\n\t\tthrow new Error(`Driver ${rail.driver} not found in database`);\n\t}\n\treturn PrinterRailDefinition.parse({\n\t\t...rail,\n\t\tstepper,\n\t\tdriver,\n\t});\n};\n\nexport const stringToTitleObject = <Item extends string>(data: Item): { id: Item; title: Item } => {\n\treturn { id: data, title: data };\n};\n\nexport const serializePrinterRail = (rail: z.input<typeof PrinterRail>): z.infer<typeof SerializedPrinterRail> => {\n\treturn SerializedPrinterRail.parse({\n\t\t...rail,\n\t\tdriver: rail.driver.id,\n\t\tstepper: rail.stepper.id,\n\t});\n};\n\nexport const serializeToolheadConfiguration = (th: ToolheadConfiguration<any>): SerializedToolheadConfiguration => {\n\treturn {\n\t\t...th,\n\t\ttoolboard: th.toolboard?.id,\n\t\thotend: th.hotend.id,\n\t\tthermistor: th.thermistor,\n\t\textruder: th.extruder.id,\n\t\tprobe: th.probe?.id,\n\t\txEndstop: th.xEndstop.id,\n\t\tyEndstop: th.yEndstop.id,\n\t\tpartFan: th.partFan.id,\n\t\thotendFan: th.hotendFan.id,\n\t\txAccelerometer: th.xAccelerometer?.id,\n\t\tyAccelerometer: th.yAccelerometer?.id,\n\t};\n};\n\nexport const serializePartialToolheadConfiguration = (\n\tth: PartialToolheadConfiguration,\n): SerializedPartialToolheadConfiguration => {\n\treturn th == null\n\t\t? undefined\n\t\t: {\n\t\t\t\t...th,\n\t\t\t\ttoolboard: th.toolboard?.id,\n\t\t\t\thotend: th.hotend?.id,\n\t\t\t\tthermistor: th.thermistor,\n\t\t\t\textruder: th.extruder?.id,\n\t\t\t\tprobe: th.probe?.id,\n\t\t\t\txEndstop: th.xEndstop?.id,\n\t\t\t\tyEndstop: th.yEndstop?.id,\n\t\t\t\tpartFan: th.partFan?.id,\n\t\t\t\thotendFan: th.hotendFan?.id,\n\t\t\t\txAccelerometer: th.xAccelerometer?.id,\n\t\t\t\tyAccelerometer: th.yAccelerometer?.id,\n\t\t\t};\n};\n\nexport const extractToolheadsFromPrinterConfiguration = (config: PartialPrinterConfiguration) => {\n\tconst toolheads = config?.toolheads\n\t\t?.map((th) => {\n\t\t\tif (th == null) {\n\t\t\t\tthrow new Error('Toolhead can not be null');\n\t\t\t}\n\t\t\treturn new ToolheadHelper(ToolheadConfiguration.parse(th));\n\t\t})\n\t\t.filter(Boolean);\n\tif (toolheads == null) {\n\t\tthrow new Error('No toolheads found');\n\t}\n\treturn toolheads;\n};\n\nexport const extractToolheadFromPrinterConfiguration = (\n\ttoolOrAxis: ToolOrAxis | PrinterAxis,\n\tconfig: PartialPrinterConfiguration,\n) => {\n\tif (config?.toolheads == null || config.toolheads.length === 0) {\n\t\tthrow new Error('No toolheads preset in supplied printer config');\n\t}\n\tconst toolheads = extractToolheadsFromPrinterConfiguration(config);\n\tconst th =\n\t\ttypeof toolOrAxis === 'number'\n\t\t\t? toolheads.find((th) => th.getTool() === toolOrAxis)\n\t\t\t: toolheads.find((th) => th.getExtruderAxis() === toolOrAxis || th.getMotionAxis() === toolOrAxis);\n\treturn th;\n};\n","import { z } from 'zod';\nimport { DriverID, PrinterAxis, Voltage } from '@/zods/motion';\n\n// Complete map of all available RatOS pin aliases.\nexport const AllPins = {\n\tx_step_pin: z.string().optional(),\n\tx_dir_pin: z.string().optional(),\n\tx_enable_pin: z.string().optional(),\n\tx_uart_pin: z.string().optional(),\n\tx_diag_pin: z.string().optional(),\n\tx_endstop_pin: z.string().optional(),\n\tx1_step_pin: z.string().optional(),\n\tx1_dir_pin: z.string().optional(),\n\tx1_enable_pin: z.string().optional(),\n\tx1_uart_pin: z.string().optional(),\n\tx1_diag_pin: z.string().optional(),\n\tx1_endstop_pin: z.string().optional(),\n\tdual_carriage_step_pin: z.string().optional(),\n\tdual_carriage_dir_pin: z.string().optional(),\n\tdual_carriage_enable_pin: z.string().optional(),\n\tdual_carriage_uart_pin: z.string().optional(),\n\tdual_carriage_diag_pin: z.string().optional(),\n\tdual_carriage_endstop_pin: z.string().optional(),\n\ty_step_pin: z.string().optional(),\n\ty_dir_pin: z.string().optional(),\n\ty_enable_pin: z.string().optional(),\n\ty_uart_pin: z.string().optional(),\n\ty_diag_pin: z.string().optional(),\n\ty_endstop_pin: z.string().optional(),\n\ty1_step_pin: z.string().optional(),\n\ty1_dir_pin: z.string().optional(),\n\ty1_enable_pin: z.string().optional(),\n\ty1_uart_pin: z.string().optional(),\n\ty1_diag_pin: z.string().optional(),\n\ty1_endstop_pin: z.string().optional(),\n\ty2_step_pin: z.string().optional(),\n\ty2_dir_pin: z.string().optional(),\n\ty2_enable_pin: z.string().optional(),\n\ty2_uart_pin: z.string().optional(),\n\ty2_diag_pin: z.string().optional(),\n\ty2_endstop_pin: z.string().optional(),\n\tz0_step_pin: z.string().optional(),\n\tz0_dir_pin: z.string().optional(),\n\tz0_enable_pin: z.string().optional(),\n\tz0_uart_pin: z.string().optional(),\n\tz0_diag_pin: z.string().optional(),\n\tz1_step_pin: z.string().optional(),\n\tz1_dir_pin: z.string().optional(),\n\tz1_enable_pin: z.string().optional(),\n\tz1_uart_pin: z.string().optional(),\n\tz1_diag_pin: z.string().optional(),\n\tz2_step_pin: z.string().optional(),\n\tz2_dir_pin: z.string().optional(),\n\tz2_enable_pin: z.string().optional(),\n\tz2_uart_pin: z.string().optional(),\n\tz2_diag_pin: z.string().optional(),\n\tz3_step_pin: z.string().optional(),\n\tz3_dir_pin: z.string().optional(),\n\tz3_enable_pin: z.string().optional(),\n\tz3_uart_pin: z.string().optional(),\n\tz3_diag_pin: z.string().optional(),\n\te_step_pin: z.string().optional(),\n\te_dir_pin: z.string().optional(),\n\te_enable_pin: z.string().optional(),\n\te_uart_pin: z.string().optional(),\n\te_diag_pin: z.string().optional(),\n\te_heater_pin: z.string().optional(),\n\te_sensor_pin: z.string().optional(),\n\tstepper_spi_mosi_pin: z.string().optional(),\n\tstepper_spi_miso_pin: z.string().optional(),\n\tstepper_spi_sclk_pin: z.string().optional(),\n\tadxl345_cs_pin: z.string().optional(),\n\tbltouch_sensor_pin: z.string().optional(),\n\tbltouch_control_pin: z.string().optional(),\n\tprobe_pin: z.string().optional(),\n\tfan_part_cooling_pin: z.string().optional(),\n\tfan_toolhead_cooling_pin: z.string().optional(),\n\tfan_controller_board_pin: z.string().optional(),\n\theater_bed_heating_pin: z.string().optional(),\n\theater_bed_sensor_pin: z.string().optional(),\n\t'4p_fan_part_cooling_pin': z.string().optional(),\n\t'4p_fan_part_cooling_tach_pin': z.string().optional(),\n\t'4p_toolhead_cooling_pin': z.string().optional(),\n\t'4p_toolhead_cooling_tach_pin': z.string().optional(),\n\t'4p_controller_board_pin': z.string().optional(),\n\t'4p_controller_board_tach_pin': z.string().optional(),\n};\nexport const PinMap = z.object(AllPins);\n\nexport enum AxisPinPrefix {\n\tx = 'x',\n\tx1 = 'x1',\n\ty = 'y',\n\ty1 = 'y1',\n\ty2 = 'y2',\n\tz0 = 'z0',\n\tz1 = 'z1',\n\tz2 = 'z2',\n\tz3 = 'z3',\n\te = 'e',\n\te1 = 'e1',\n\tdual_carriage = 'dual_carriage',\n}\n\nexport const pinAliasPrefixToPrinterAxis: { [key in AxisPinPrefix]: PrinterAxis } = {\n\tx: PrinterAxis['x'],\n\tx1: PrinterAxis['x1'],\n\ty: PrinterAxis['y'],\n\ty1: PrinterAxis['y1'],\n\ty2: PrinterAxis['y2'],\n\tz0: PrinterAxis['z'],\n\tz1: PrinterAxis['z1'],\n\tz2: PrinterAxis['z2'],\n\tz3: PrinterAxis['z3'],\n\te: PrinterAxis['extruder'],\n\te1: PrinterAxis['extruder1'],\n\tdual_carriage: PrinterAxis['dual_carriage'],\n};\n\nexport const pinPrefixToAxis = z.nativeEnum(AxisPinPrefix).transform((v) => pinAliasPrefixToPrinterAxis[v] ?? null);\nexport const axisToPinPrefix = z\n\t.nativeEnum(PrinterAxis)\n\t.transform(\n\t\t(pa) =>\n\t\t\t(Object.keys(pinAliasPrefixToPrinterAxis) as AxisPinPrefix[]).find(\n\t\t\t\t(p) => pinAliasPrefixToPrinterAxis[p] === pa,\n\t\t\t) ?? null,\n\t);\n\nexport const ControlBoardPinMap = PinMap.extend({\n\tx_step_pin: z.string(),\n\tx_dir_pin: z.string(),\n\tx_enable_pin: z.string(),\n\tx_uart_pin: z.string(),\n\tx_endstop_pin: z.string(),\n\ty_step_pin: z.string(),\n\ty_dir_pin: z.string(),\n\ty_enable_pin: z.string(),\n\ty_uart_pin: z.string(),\n\ty_endstop_pin: z.string(),\n\tz0_step_pin: z.string(),\n\tz0_dir_pin: z.string(),\n\tz0_enable_pin: z.string(),\n\tz0_uart_pin: z.string(),\n\te_step_pin: z.string(),\n\te_dir_pin: z.string(),\n\te_enable_pin: z.string(),\n\te_uart_pin: z.string(),\n\te_heater_pin: z.string(),\n\te_sensor_pin: z.string(),\n\tprobe_pin: z.string(),\n\theater_bed_heating_pin: z.string(),\n\theater_bed_sensor_pin: z.string(),\n}).and(\n\tz\n\t\t.object({\n\t\t\tfan_part_cooling_pin: z.string(),\n\t\t\tfan_toolhead_cooling_pin: z.string(),\n\t\t})\n\t\t.or(\n\t\t\tz.object({\n\t\t\t\t'4p_fan_part_cooling_pin': z.string(),\n\t\t\t\t'4p_fan_part_cooling_tach_pin': z.string(),\n\t\t\t\t'4p_toolhead_cooling_pin': z.string(),\n\t\t\t\t'4p_toolhead_cooling_tach_pin': z.string(),\n\t\t\t}),\n\t\t),\n);\n\nexport const ExtruderlessControlBoardPinMap = PinMap.extend({\n\tx_step_pin: z.string(),\n\tx_dir_pin: z.string(),\n\tx_enable_pin: z.string(),\n\tx_uart_pin: z.string(),\n\tx_endstop_pin: z.string(),\n\ty_step_pin: z.string(),\n\ty_dir_pin: z.string(),\n\ty_enable_pin: z.string(),\n\ty_uart_pin: z.string(),\n\ty_endstop_pin: z.string(),\n\tz0_step_pin: z.string(),\n\tz0_dir_pin: z.string(),\n\tz0_enable_pin: z.string(),\n\tz0_uart_pin: z.string(),\n\tz1_step_pin: z.string(),\n\tz1_dir_pin: z.string(),\n\tz1_enable_pin: z.string(),\n\tz1_uart_pin: z.string(),\n\tz2_step_pin: z.string(),\n\tz2_dir_pin: z.string(),\n\tz2_enable_pin: z.string(),\n\tz2_uart_pin: z.string(),\n\tprobe_pin: z.string(),\n\theater_bed_heating_pin: z.string(),\n\theater_bed_sensor_pin: z.string(),\n}).and(\n\tz\n\t\t.object({\n\t\t\tfan_part_cooling_pin: z.string(),\n\t\t\tfan_toolhead_cooling_pin: z.string(),\n\t\t})\n\t\t.or(\n\t\t\tz.object({\n\t\t\t\t'4p_fan_part_cooling_pin': z.string(),\n\t\t\t\t'4p_fan_part_cooling_tach_pin': z.string(),\n\t\t\t\t'4p_toolhead_cooling_pin': z.string(),\n\t\t\t\t'4p_toolhead_cooling_tach_pin': z.string(),\n\t\t\t}),\n\t\t),\n);\nexport const ToolboardPinMap = PinMap.extend({\n\te_step_pin: z.string(),\n\te_dir_pin: z.string(),\n\te_enable_pin: z.string(),\n\te_uart_pin: z.string(),\n\te_heater_pin: z.string(),\n\te_sensor_pin: z.string(),\n\tadxl345_cs_pin: z.string(),\n\tprobe_pin: z.string(),\n}).and(\n\tz\n\t\t.object({\n\t\t\tfan_part_cooling_pin: z.string(),\n\t\t\tfan_toolhead_cooling_pin: z.string(),\n\t\t})\n\t\t.or(\n\t\t\tz.object({\n\t\t\t\t'4p_fan_part_cooling_pin': z.string(),\n\t\t\t\t'4p_fan_part_cooling_tach_pin': z.string(),\n\t\t\t\t'4p_toolhead_cooling_pin': z.string(),\n\t\t\t\t'4p_toolhead_cooling_tach_pin': z.string(),\n\t\t\t}),\n\t\t),\n);\n\nexport const UARTPins = z.object({\n\tuart_pin: z.string(),\n\tuart_address: z.string().optional(),\n\trx_pin: z.string().optional(),\n\ttx_pin: z.string().optional(),\n});\n\nexport const SPIPins = z\n\t.object({\n\t\tcs_pin: z.string(),\n\t})\n\t.and(\n\t\tz.object({ spi_bus: z.string() }).or(\n\t\t\tz.object({\n\t\t\t\tspi_software_mosi_pin: z.string().optional(),\n\t\t\t\tspi_software_miso_pin: z.string().optional(),\n\t\t\t\tspi_software_sclk_pin: z.string().optional(),\n\t\t\t}),\n\t\t),\n\t);\n\nexport const hasSPI = (slot: unknown) => {\n\treturn SPIPins.safeParse(slot).success;\n};\n\nexport const hasUART = (slot: unknown) => {\n\treturn UARTPins.safeParse(slot).success;\n};\n\nexport const MotorSlotPins = z.object({\n\tstep_pin: z.string(),\n\tdir_pin: z.string(),\n\tenable_pin: z.string(),\n\tdiag_pin: z.string().optional(),\n\tendstop_pin: z.string().optional(),\n\t// UART\n\tuart_pin: z.string().optional(),\n\trx_pin: z.string().optional(),\n\ttx_pin: z.string().optional(),\n\t// SPI\n\tcs_pin: z.string().optional(),\n});\n\nexport const MotorSlot = MotorSlotPins.extend({\n\ttitle: z.string(),\n\t// UART\n\tuart_address: z.string().optional(),\n\t// SPI\n\tspi_bus: z.string().optional(),\n\tspi_software_mosi_pin: z.string().optional(),\n\tspi_software_miso_pin: z.string().optional(),\n\tspi_software_sclk_pin: z.string().optional(),\n}).refine(\n\t(slot) => {\n\t\treturn hasSPI(slot) || hasUART(slot);\n\t},\n\t{ message: 'Motor slot must have either SPI or UART pins' },\n);\n\nexport type MotorSlot = z.output<typeof MotorSlot>;\n\nconst AnySlotPin = MotorSlot.innerType().omit({ title: true }).partial();\nexport type AnySlotPin = z.infer<typeof AnySlotPin>;\n\nexport const MotorSlotKey = z.string();\n\nexport const reversePinLookup: (pins: AnySlotPin, board: Board) => z.infer<typeof MotorSlotKey> | undefined = (\n\tpins,\n\tboard,\n) => {\n\tconst slots = Object.entries(board.motorSlots ?? {});\n\tfor (const [key, slot] of slots) {\n\t\tif (Object.entries(pins).every(([pin, value]) => slot[pin as keyof typeof slot] === value)) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n};\n\nexport const BoardID = z.string().brand('BoardID');\nexport const BoardPath = z.string().brand('BoardPath');\nexport const BoardSerialPath = z.string().brand('BoardSerialPath');\n\nconst integratedDrivers = z.record(z.nativeEnum(PrinterAxis).or(z.string()), DriverID);\nconst motorSlots = z.record(MotorSlotKey, MotorSlot);\n\nexport const Board = z\n\t.object({\n\t\tid: BoardID,\n\t\tisToolboard: z.boolean().optional(),\n\t\tisHost: z.boolean().optional(),\n\t\tserialPath: BoardSerialPath.optional(),\n\t\tboardImageFileName: z.string().optional(),\n\t\tmanualFileName: z.string().optional(),\n\t\twireDiagramFileName: z.string().optional(),\n\t\tname: z.string(),\n\t\tmanufacturer: z.string(),\n\t\tfirmwareBinaryName: z.string(),\n\t\tcompileScript: z.string(),\n\t\tflashScript: z.string().optional(),\n\t\tflashInstructions: z.string().optional(),\n\t\tdisableAutoFlash: z.boolean().optional(),\n\t\tdocumentationLink: z.string().optional(),\n\t\thasQuirksFiles: z.boolean().optional(),\n\t\tdriverCount: z.number(),\n\t\tintegratedDrivers: integratedDrivers.optional(),\n\t\textruderlessConfig: z.string().optional(),\n\t\tfourPinFanConnectorCount: z.number().optional(),\n\t\tdriverVoltages: Voltage.array().default([24]),\n\t\thasMcuTempSensor: z.boolean().default(true),\n\t\talternativePT1000Resistor: z.number().optional(),\n\t\tmotorSlots: z.record(MotorSlotKey, MotorSlot).optional(),\n\t\toutputPins: z\n\t\t\t.array(\n\t\t\t\tz.object({\n\t\t\t\t\tpin: z.string(),\n\t\t\t\t\tname: z.string(),\n\t\t\t\t\tvalue: z.number().min(0).max(1),\n\t\t\t\t}),\n\t\t\t)\n\t\t\t.optional(),\n\t\tdfu: z\n\t\t\t.object({\n\t\t\t\tdfuBootImage: z.string(),\n\t\t\t\tflashDevice: z.string(),\n\t\t\t\tinstructions: z.array(z.string()),\n\t\t\t\treminder: z.string().optional(),\n\t\t\t\thasBoot0Jumper: z.boolean(),\n\t\t\t})\n\t\t\t.optional(),\n\t\tstepperSPI: z\n\t\t\t.object({\n\t\t\t\tsoftware: z.object({\n\t\t\t\t\tsclk: z.string(),\n\t\t\t\t\tmosi: z.string(),\n\t\t\t\t\tmiso: z.string(),\n\t\t\t\t}),\n\t\t\t})\n\t\t\t.or(\n\t\t\t\tz.object({\n\t\t\t\t\thardware: z.object({\n\t\t\t\t\t\tbus: z.string(),\n\t\t\t\t\t}),\n\t\t\t\t}),\n\t\t\t)\n\t\t\t.optional(),\n\t\tADXL345SPI: z\n\t\t\t.object({\n\t\t\t\tcs_pin: z.string(),\n\t\t\t})\n\t\t\t.and(\n\t\t\t\tz\n\t\t\t\t\t.object({\n\t\t\t\t\t\tsoftware: z.object({\n\t\t\t\t\t\t\tsclk: z.string(),\n\t\t\t\t\t\t\tmosi: z.string(),\n\t\t\t\t\t\t\tmiso: z.string(),\n\t\t\t\t\t\t}),\n\t\t\t\t\t})\n\t\t\t\t\t.or(\n\t\t\t\t\t\tz.object({\n\t\t\t\t\t\t\thardware: z.object({\n\t\t\t\t\t\t\t\tbus: z.string(),\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t)\n\t\t\t.optional(),\n\t\tLIS2DW: z\n\t\t\t.object({\n\t\t\t\tcs_pin: z.string(),\n\t\t\t})\n\t\t\t.and(\n\t\t\t\tz\n\t\t\t\t\t.object({\n\t\t\t\t\t\tsoftware: z.object({\n\t\t\t\t\t\t\tsclk: z.string(),\n\t\t\t\t\t\t\tmosi: z.string(),\n\t\t\t\t\t\t\tmiso: z.string(),\n\t\t\t\t\t\t}),\n\t\t\t\t\t})\n\t\t\t\t\t.or(\n\t\t\t\t\t\tz.object({\n\t\t\t\t\t\t\thardware: z.object({\n\t\t\t\t\t\t\t\tbus: z.string(),\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t)\n\t\t\t.optional(),\n\t\tpath: BoardPath,\n\t})\n\t.and(\n\t\tz\n\t\t\t.object({ isToolboard: z.literal(true), motorSlots: z.undefined() })\n\t\t\t.or(z.object({ motorSlots: motorSlots }))\n\t\t\t.or(z.object({ isHost: z.literal(true), motorSlots: z.undefined() })),\n\t);\n\nexport const BoardWithDetectionStatus = Board.and(\n\tz.object({\n\t\tdetected: z.boolean(),\n\t}),\n);\n\nexport const AutoFlashableBoard = z.object({\n\tid: z.string(),\n\tdisableAutoFlash: z.literal(false).optional(),\n\tisToolboard: z.boolean().optional(),\n\tcompileScript: z.string(),\n\tflashScript: z.string(),\n\tpath: BoardPath,\n});\n\nexport const Toolboard = Board.and(\n\tz.object({\n\t\tisToolboard: z.literal(true),\n\t\tisHost: z.literal(false).optional(),\n\t\tintegratedDrivers: integratedDrivers.and(\n\t\t\tz.object({\n\t\t\t\t[PrinterAxis.extruder]: z.string(),\n\t\t\t}),\n\t\t),\n\t}),\n);\n\nexport const ToolboardWithDetectionStatus = Toolboard.and(\n\tz.object({\n\t\tdetected: z.boolean(),\n\t}),\n);\n\nexport type Board = z.infer<typeof Board>;\nexport type BoardWithDetectionStatus = z.infer<typeof BoardWithDetectionStatus>;\nexport type Toolboard = z.infer<typeof Toolboard>;\nexport type ToolboardWithDetectionStatus = z.infer<typeof ToolboardWithDetectionStatus>;\nexport type AutoFlashableBoard = z.infer<typeof AutoFlashableBoard>;\nexport type ToolboardPinMap = z.infer<typeof ToolboardPinMap>;\nexport type ControlBoardPinMap = z.infer<typeof ControlBoardPinMap>;\nexport type ExtruderlessControlBoardPinMap = z.infer<typeof ExtruderlessControlBoardPinMap>;\n","import { z } from 'zod';\nimport { serverSchema } from '@/env/schema.mjs';\nimport { PrinterRailDefinition, Stepper } from '@/zods/motion';\nimport { badgeColorOptions } from '@/components/common/badge';\n\nexport const thermistors = [\n\t'EPCOS 100K B57560G104F',\n\t'ATC Semitec 104GT-2',\n\t'ATC Semitec 104NT-4-R025H42G',\n\t'Generic 3950',\n\t'Honeywell 100K 135-104LAG-J01',\n\t'NTC 100K MGB18-104F39050L32',\n\t'SliceEngineering 450',\n\t'TDK NTCG104LH104JT1',\n\t'PT1000',\n] as const;\n\nlet startsWithServerValidation = '';\nif (process.env.RATOS_CONFIGURATION_PATH) {\n\tconst environment = serverSchema.parse(process.env);\n\tstartsWithServerValidation = environment.RATOS_CONFIGURATION_PATH;\n}\nconst hardwareType = z.object({\n\tpath: z.string().startsWith(startsWithServerValidation).endsWith('.cfg'),\n\tid: z.string(),\n});\n\nexport const Thermistor = z.enum(thermistors);\n\nexport const Hotend = hardwareType.extend({\n\ttype: z.literal('hotend'),\n\ttitle: z.string(),\n\tthermistor: z.enum(thermistors),\n\tflowType: z.union([z.literal('sf'), z.literal('hf'), z.literal('uhf')]),\n});\n\nexport const Nozzle = z.object({\n\ttype: z.enum(['Regular', 'CHT']),\n\tdiameter: z.number().min(0.2).max(1.8),\n});\n\nexport const Extruder = hardwareType.extend({\n\ttype: z.literal('extruder'),\n\tstepper: Stepper.shape.id.optional(),\n\tcurrent: PrinterRailDefinition.shape.current.optional(),\n\ttitle: z.string(),\n});\n\nexport const Probe = hardwareType.extend({\n\ttype: z.literal('static-probe').or(z.literal('stowable-probe')),\n\ttitle: z.string(),\n});\n\nexport const Endstop = z.object({\n\tid: z.enum(['endstop', 'endstop-toolboard', 'sensorless']),\n\ttitle: z.string(),\n\tbadge: z\n\t\t.array(\n\t\t\tz.object({\n\t\t\t\tchildren: z.string(),\n\t\t\t\tcolor: badgeColorOptions,\n\t\t\t}),\n\t\t)\n\t\t.optional(),\n});\n\nexport const KlipperAccelSensorNameSchame = z.union([\n\tz.literal('toolboard_t0'),\n\tz.literal('toolboard_t1'),\n\tz.literal('controlboard'),\n\tz.literal('rpi'),\n\tz.literal('beacon'),\n]);\n\nexport const AccelerometerType = z.union([z.literal('adxl345'), z.literal('lis2dw'), z.literal('beacon')]);\n\nexport const Accelerometer = z.object({\n\tid: z.enum(['toolboard', 'controlboard', 'sbc', 'none', 'beacon']),\n\ttitle: z.string(),\n\taccelerometerType: AccelerometerType.default('adxl345').optional(),\n});\n\nexport type KlipperAccelSensorName = z.infer<typeof KlipperAccelSensorNameSchame>;\n\nexport const klipperAccelSensorSchema = z.object({\n\tname: KlipperAccelSensorNameSchame,\n\ttype: AccelerometerType,\n});\n\nexport type KlipperAccelSensorSchema = z.infer<typeof klipperAccelSensorSchema>;\n\nexport const AccelerometerWithType = Accelerometer.extend({\n\taccelerometerType: AccelerometerType,\n});\n\nexport type AccelerometerWithType = z.infer<typeof AccelerometerWithType>;\n\nexport const Fan = z.object({\n\tid: z.enum([\n\t\t'2pin',\n\t\t'4pin',\n\t\t'4pin-dedicated',\n\t\t'2pin-toolboard',\n\t\t'4pin-toolboard',\n\t\t'4pin-dedicated-toolboard',\n\t\t'none',\n\t]),\n\ttitle: z.string(),\n\tbadge: z\n\t\t.array(\n\t\t\tz.object({\n\t\t\t\tchildren: z.string(),\n\t\t\t\tcolor: badgeColorOptions,\n\t\t\t}),\n\t\t)\n\t\t.optional(),\n});\n","import * as z from 'zod';\nimport type { Board, Toolboard } from '@/zods/boards';\nexport enum StepperVoltage {\n\t'24V' = 24,\n\t'36V' = 36,\n\t'48V' = 48,\n\t'56V' = 56,\n\t'60V' = 60,\n}\n\nexport const Voltages: { id: StepperVoltage; title: string }[] = [\n\t{ id: StepperVoltage['24V'], title: '24V' },\n\t{ id: StepperVoltage['36V'], title: '36V' },\n\t{ id: StepperVoltage['48V'], title: '48V' },\n\t{ id: StepperVoltage['56V'], title: '56V' },\n\t{ id: StepperVoltage['60V'], title: '60V' },\n];\n\nexport const getSupportedVoltages = (\n\tboard: Board | Toolboard | null,\n\tdriver?: z.infer<typeof Driver>,\n): typeof Voltages => {\n\tif (driver?.external) {\n\t\treturn Voltages.filter((v) => driver?.voltages?.includes(v.id) || v.id === StepperVoltage['24V']);\n\t}\n\treturn Voltages.filter((v) => board?.driverVoltages?.includes(v.id) || v.id === StepperVoltage['24V']).filter(\n\t\t(v) => driver?.voltages?.includes(v.id) || v.id === StepperVoltage['24V'],\n\t);\n};\n\nexport const matchesDefaultRail = (\n\trail: Zod.infer<typeof BasePrinterRail>,\n\tdefaultRail: Zod.infer<typeof PrinterRailDefinition>,\n\tperformanceMode: boolean,\n) => {\n\treturn (\n\t\trail.axis === defaultRail.axis &&\n\t\trail.driver.id === defaultRail.driver.id &&\n\t\trail.stepper.id === defaultRail.stepper.id &&\n\t\t((performanceMode &&\n\t\t\tdefaultRail.performanceMode &&\n\t\t\trail.voltage === defaultRail.performanceMode?.voltage &&\n\t\t\trail.current === defaultRail.performanceMode?.current) ||\n\t\t\t(!performanceMode && rail.voltage === defaultRail.voltage && rail.current === defaultRail.current))\n\t);\n};\n\nexport const Voltage = z.nativeEnum(StepperVoltage);\n\nexport const DriverID = z.string();\n\nexport const Driver = z\n\t.object({\n\t\tid: DriverID,\n\t\ttitle: z.string(),\n\t\tprotocol: z.enum(['SPI', 'UART']),\n\t\tcoolingCurrentThreshold: z.number(),\n\t\tvoltages: Voltage.array(),\n\t\tmaxCurrent: z.number().min(0),\n\t\texternal: z.boolean().optional(),\n\t})\n\t.and(\n\t\tz\n\t\t\t.object({\n\t\t\t\ttype: z.enum(['TMC2209', 'TMC2226', 'TMC5160', 'TMC2130']),\n\t\t\t\tsenseResistor: z.number().min(0),\n\t\t\t})\n\t\t\t.or(\n\t\t\t\tz.object({\n\t\t\t\t\ttype: z.enum(['TMC2240']),\n\t\t\t\t}),\n\t\t\t),\n\t);\n\nconst BaseStepperPreset = z.object({\n\tvoltage: Voltage,\n\trun_current: z.number(),\n\tdriver: DriverID,\n});\n\nconst BaseSPIStepperPreset = BaseStepperPreset.extend({\n\tdriver_MSLUT0: z.number().optional(),\n\tdriver_MSLUT1: z.number().optional(),\n\tdriver_MSLUT2: z.number().optional(),\n\tdriver_MSLUT3: z.number().optional(),\n\tdriver_MSLUT4: z.number().optional(),\n\tdriver_MSLUT5: z.number().optional(),\n\tdriver_MSLUT6: z.number().optional(),\n\tdriver_MSLUT7: z.number().optional(),\n\tdriver_W0: z.number().optional(),\n\tdriver_W1: z.number().optional(),\n\tdriver_W2: z.number().optional(),\n\tdriver_W3: z.number().optional(),\n\tdriver_X1: z.number().optional(),\n\tdriver_X2: z.number().optional(),\n\tdriver_X3: z.number().optional(),\n\tdriver_START_SIN: z.number().optional(),\n\tdriver_START_SIN90: z.number().optional(),\n\tdriver_IHOLDDELAY: z.number().optional(),\n\tdriver_TPOWERDOWN: z.number().optional(),\n\tdriver_TBL: z.number().optional(),\n\tdriver_TOFF: z.number().optional(),\n\tdriver_HEND: z.number().optional(),\n\tdriver_HSTRT: z.number().optional(),\n\tdriver_PWM_AUTOSCALE: z.boolean().optional(),\n\tdriver_PWM_FREQ: z.number().optional(),\n\tdriver_PWM_GRAD: z.number().optional(),\n\tdriver_PWM_AMPL: z.number().optional(),\n\tdriver_SGT: z.number().optional(),\n});\n\nexport const Stepper = z.object({\n\tid: z.string(),\n\ttitle: z.string(),\n\tfullStepsPerRotation: z.number().default(200),\n\tmaxPeakCurrent: z.number().min(0),\n\tpresets: z\n\t\t.array(\n\t\t\tz.discriminatedUnion('driver', [\n\t\t\t\tBaseSPIStepperPreset.extend({\n\t\t\t\t\tdriver: z.enum(['TMC2130', 'TMC5160']),\n\t\t\t\t\tsense_resistor: z.number(),\n\t\t\t\t}),\n\t\t\t\tBaseSPIStepperPreset.extend({\n\t\t\t\t\tdriver: z.enum(['TMC2240']),\n\t\t\t\t}),\n\t\t\t\tBaseStepperPreset.extend({\n\t\t\t\t\tdriver: z.enum(['TMC2209']),\n\t\t\t\t\tdriver_TBL: z.number().optional(),\n\t\t\t\t\tdriver_TOFF: z.number().optional(),\n\t\t\t\t\tdriver_HEND: z.number().optional(),\n\t\t\t\t\tdriver_HSTRT: z.number().optional(),\n\t\t\t\t\tsense_resistor: z.number(),\n\t\t\t\t}),\n\t\t\t]),\n\t\t)\n\t\t.optional()\n\t\t.describe('Stepper presets are tightly coupled to the driver type, sense_resistor, stepper, voltage and current.'),\n});\n\nexport enum PrinterAxis {\n\t'x' = 'x',\n\t'dual_carriage' = 'dual_carriage',\n\t'x1' = 'x1',\n\t'y' = 'y',\n\t'y1' = 'y1',\n\t'y2' = 'y2',\n\t'z' = 'z',\n\t'z1' = 'z1',\n\t'z2' = 'z2',\n\t'z3' = 'z3',\n\t'extruder' = 'extruder',\n\t'extruder1' = 'extruder1',\n}\n\nexport const BasePrinterRail = z.object({\n\taxis: z.nativeEnum(PrinterAxis).describe('Axis of the rail'),\n\taxisDescription: z.string().optional().describe('Description of the axis'),\n\tdriver: Driver.describe('Stepper driver used on this axis'),\n\tvoltage: Voltage.default(StepperVoltage['24V']).describe('Voltage of the stepper driver'),\n\tstepper: Stepper.describe('Stepper motor connected to this axis'),\n\tinvertStepperDirection: z.boolean().default(false).describe('Invert the default direction of the stepper motor'),\n\taxisMinimum: z.number().optional().describe('Minimum position of the axis in mm'),\n\taxisMaximum: z.number().optional().describe('Maximum position of the axis in mm'),\n\taxisEndstop: z.number().optional().describe('Endstop position of the axis in mm'),\n\tmotorSlot: z.string().optional().describe('Optional board motor slot of the stepper driver'),\n\tcurrent: z.number().min(0),\n\trotationDistance: z.number().min(0).describe('Distance in mm the axis travels per stepper rotation'),\n\tgearRatio: z\n\t\t.string()\n\t\t.regex(/^\\d+:\\d+$/)\n\t\t.optional()\n\t\t.describe('Optional gear ratio of the axis'),\n\thomingSpeed: z.number().min(0).default(10).describe('Axis speed during homing in mm/s'),\n\tmicrostepping: z\n\t\t.number()\n\t\t.min(16)\n\t\t.max(256)\n\t\t.default(64)\n\t\t.describe(\n\t\t\t'Microstepping of the stepper driver, higher values increase resolution and lower noise but increases load on the MCU',\n\t\t),\n});\n\nexport const PrinterRailDefinition = BasePrinterRail.extend({\n\tmotorSlot: z.undefined(),\n\tperformanceMode: z\n\t\t.object({\n\t\t\tcurrent: z.number().min(0),\n\t\t\tvoltage: Voltage.default(StepperVoltage['24V']).describe('Voltage of the stepper driver in performance mode'),\n\t\t\thomingSpeed: z.number().min(0).optional().describe('Axis speed during homing in mm/s in performance mode'),\n\t\t})\n\t\t.optional(),\n});\n\nexport const SerializedPrinterRailDefinition = PrinterRailDefinition.extend({\n\tdriver: DriverID,\n\tstepper: Stepper.shape.id,\n});\n\nexport const PrinterRail = BasePrinterRail\n\t// Don't enforce this, warn about temperatures in the frontend instead.\n\t// .refine(\n\t// \t(data) => data.current <= data.stepper.maxPeakCurrent / 1.41,\n\t// \t'Current must be less than max peak current of the stepper divided by 1.41',\n\t// )\n\t.refine((data) => data.current <= data.driver.maxCurrent, 'Current must be less than max current of the driver');\n\nexport const SerializedPrinterRail = BasePrinterRail.extend({\n\tdriver: DriverID,\n\tstepper: Stepper.shape.id,\n});\n\nexport const Limits = z.object({\n\tmin: z.number(),\n\tmax: z.number(),\n\tendstop: z.number(),\n});\nexport type Limits = z.infer<typeof Limits>;\n","import { Board, BoardID } from '@/zods/boards';\nimport { Fan } from '@/zods/hardware';\nimport { PrinterDefinition, PrinterSizeDefinition } from '@/zods/printer';\nimport { PrinterAxis, PrinterRail, SerializedPrinterRail } from '@/zods/motion';\nimport {\n\tPartialToolheadConfiguration,\n\tSerializedPartialToolheadConfiguration,\n\tSerializedToolheadConfiguration,\n\tToolheadConfiguration,\n} from '@/zods/toolhead';\nimport { ToolheadHelper } from '@/helpers/toolhead';\nimport { z } from 'zod';\n\nexport const PrinterSize = z.union([PrinterSizeDefinition, z.number(), z.string()]).nullable().optional();\n\nconst BasePrinterConfiguration = z\n\t.object({\n\t\tprinter: PrinterDefinition,\n\t\tcontrolboard: Board,\n\t\ttoolheads: z.array(ToolheadConfiguration).min(1).max(2),\n\t\tsize: PrinterSize,\n\t\tcontrollerFan: Fan,\n\t\tperformanceMode: z.boolean().default(false),\n\t\tstealthchop: z.boolean().default(false),\n\t\tstandstillStealth: z.boolean().default(false),\n\t\trails: z.array(PrinterRail),\n\t})\n\t.strict()\n\t.transform((data, ctx) => {\n\t\tif (data.size == null) {\n\t\t\tdata.size = data.printer.sizes[Object.keys(data.printer.sizes)[0]];\n\t\t} else if (typeof data.size === 'number' || typeof data.size === 'string') {\n\t\t\tconst size = data.printer.sizes[data.size.toString()];\n\t\t\tif (size == null) {\n\t\t\t\tctx.addIssue({\n\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\tmessage: `Size ${data.size} is not a valid size for a ${data.printer.name} config`,\n\t\t\t\t});\n\t\t\t\treturn z.NEVER;\n\t\t\t}\n\t\t\tdata.size = size;\n\t\t}\n\t\treturn data as Omit<typeof data, 'size'> & { size: z.output<typeof PrinterSizeDefinition> };\n\t});\n\nexport const PrinterConfiguration = BasePrinterConfiguration.superRefine((arg, ctx) => {\n\t// Driver count validation\n\tconst toolboardCount = arg.toolheads.map((t) => t.toolboard).filter(Boolean).length;\n\tif (toolboardCount + arg.controlboard.driverCount < arg.printer.driverCountRequired) {\n\t\tctx.addIssue({\n\t\t\tcode: z.ZodIssueCode.too_small,\n\t\t\tmessage: `Your combination of controlboard and toolboards do not have enough stepper drivers for a ${arg.printer.name} config`,\n\t\t\tminimum: arg.printer.driverCountRequired,\n\t\t\tinclusive: true,\n\t\t\ttype: 'number',\n\t\t});\n\t}\n}).superRefine((arg, ctx) => {\n\t// Rail motor slot validation\n\tconst toolheads = arg.toolheads.map((t) => new ToolheadHelper(t));\n\tconst errors = arg.rails\n\t\t.map((r, i) => {\n\t\t\tconst toolhead = toolheads.find((th) => th.getExtruderAxis() === r.axis);\n\t\t\tif (r.motorSlot != null) {\n\t\t\t\tconst conflicts = arg.rails.filter((pr) => {\n\t\t\t\t\tconst conflictingToolhead = toolheads.find((th) => th.getExtruderAxis() === pr.axis);\n\t\t\t\t\tif (pr.axis === r.axis || toolhead?.hasToolboard() != null) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (conflictingToolhead?.hasToolboard != null) {\n\t\t\t\t\t\t// The rail is an extruder rail and the toolhead has a toolboard, no chance of conflict.\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn pr.motorSlot === r.motorSlot;\n\t\t\t\t});\n\t\t\t\tconst railName = (axis: PrinterAxis) =>\n\t\t\t\t\taxis === 'extruder'\n\t\t\t\t\t\t? 'Extruder T0'\n\t\t\t\t\t\t: axis === PrinterAxis.extruder1\n\t\t\t\t\t\t\t? 'Extruder T1'\n\t\t\t\t\t\t\t: 'Stepper ' + axis.toLocaleUpperCase();\n\t\t\t\tif (conflicts.length === 1) {\n\t\t\t\t\tctx.addIssue({\n\t\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\t\tmessage: `Motor slot ${r.motorSlot} is already in use on ${railName(conflicts[0].axis)}`,\n\t\t\t\t\t\tpath: ['rails', i, 'motorSlot'],\n\t\t\t\t\t});\n\t\t\t\t} else if (conflicts.length > 1) {\n\t\t\t\t\tctx.addIssue({\n\t\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\t\tmessage: `Motor slot ${r.motorSlot} is already in use on ${conflicts\n\t\t\t\t\t\t\t.slice(0, -1)\n\t\t\t\t\t\t\t.map((cr) => railName(cr.axis))\n\t\t\t\t\t\t\t.join(', ')} and ${railName(conflicts[conflicts.length - 1].axis)}`,\n\t\t\t\t\t\tpath: ['rails', i, 'motorSlot'],\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn conflicts.length > 0 ? { rail: r, conflicts } : 0;\n\t\t\t}\n\t\t\treturn null;\n\t\t})\n\t\t.filter(Boolean);\n\tif (errors.length > 0) {\n\t\tctx.addIssue({\n\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\tmessage: 'Motor slot conflicts detected',\n\t\t});\n\t}\n});\n\nexport const SerializedPrinterConfiguration = BasePrinterConfiguration.innerType()\n\t.extend({\n\t\tprinter: PrinterDefinition.shape.id,\n\t\tcontrolboard: BoardID,\n\t\ttoolheads: z.array(SerializedToolheadConfiguration).min(1).max(2),\n\t\tcontrollerFan: Fan.shape.id,\n\t\trails: z.array(SerializedPrinterRail),\n\t})\n\t.strict();\n\nexport const PartialPrinterConfiguration = BasePrinterConfiguration.innerType()\n\t.extend({\n\t\ttoolheads: z.array(PartialToolheadConfiguration).min(1).max(2),\n\t})\n\t.strict()\n\t.partial()\n\t.optional();\n\nexport const SerializedPartialPrinterConfiguration = SerializedPrinterConfiguration.extend({\n\ttoolheads: z.array(SerializedPartialToolheadConfiguration).min(1).max(2),\n})\n\t.strict()\n\t.partial();\n\nexport type PrinterConfiguration = z.infer<typeof PrinterConfiguration>;\nexport type PartialPrinterConfiguration = z.infer<typeof PartialPrinterConfiguration>;\nexport type SerializedPrinterConfiguration = z.infer<typeof SerializedPrinterConfiguration>;\nexport type SerializedPartialPrinterConfiguration = z.infer<typeof SerializedPartialPrinterConfiguration>;\n","import { z } from 'zod';\nimport { serverSchema } from '@/env/schema.mjs';\nimport path from 'path';\nimport { SerializedPrinterRailDefinition } from '@/zods/motion';\nimport { SerializedToolheadConfiguration, ToolheadConfiguration } from '@/zods/toolhead';\nimport { Fan } from '@/zods/hardware';\nimport { BoardID } from '@/zods/boards';\n\nlet startsWithServerValidation = '';\nif (process.env.RATOS_CONFIGURATION_PATH) {\n\tconst environment = serverSchema.parse(process.env);\n\tstartsWithServerValidation = path.join(environment.RATOS_CONFIGURATION_PATH, 'printers');\n}\n\nconst SpeedLimits = z\n\t.object({\n\t\tvelocity: z.number().min(0).describe('Maximum velocity for this printer'),\n\t\taccel: z.number().min(0).describe('Maximum acceleration for this printer'),\n\t\tz_velocity: z.number().min(0).describe('Maximum z velocity for this printer'),\n\t\tz_accel: z.number().min(0).describe('Maximum z acceleration for this printer'),\n\t\tsquare_corner_velocity: z.number().min(0).default(5).describe('Maximum square corner velocity for this printer'),\n\t\ttravel_velocity: z.number().min(0).default(200).describe('Maximum travel velocity for this printer'),\n\t\ttravel_accel: z.number().min(0).default(3000).describe('Maximum travel velocity for this printer'),\n\t})\n\t.strict();\n\nexport const PrinterSizeDefinition = z\n\t.object({\n\t\tx: z.number().min(0).describe('The print volume in X'),\n\t\ty: z.number().min(0).describe('The print volume in Y'),\n\t\tz: z.number().min(0).describe('The print volume in Z'),\n\t})\n\t.describe('The print volume of a printer');\n\nexport const PrinterDefinition = z\n\t.object({\n\t\tid: z.string().transform((data) => {\n\t\t\treturn data === 'caramba-chonk'\n\t\t\t\t? 'v-chonk'\n\t\t\t\t: data.startsWith('caramba-')\n\t\t\t\t\t? data.replace('caramba-', 'v-core-4-')\n\t\t\t\t\t: data;\n\t\t}),\n\t\tname: z.string().describe('The name of the printer'),\n\t\treleaseDate: z.string().optional().describe('The release date of the printer in ISO 8601/RFC3339 eg. 2023-12-31'),\n\t\tdescription: z.string().describe('A description of the printer'),\n\t\tmanufacturer: z.string().describe('The name of the manufacturer of this printer'),\n\t\tdocumentationLink: z.string().describe('Link to the RatOS documentation for this printer'),\n\t\timage: z.string().describe('Link to an image of the printer'),\n\t\tsizes: z.record(z.string(), PrinterSizeDefinition).describe('Size options for this printer'),\n\t\ttemplate: z.string().describe('Printer.cfg template for this printer'),\n\t\tpath: z.string().startsWith(startsWithServerValidation),\n\t\tdriverCountRequired: z.number().describe('Number of drivers required for this printer'),\n\t\tkinematics: z\n\t\t\t.union([z.literal('cartesian'), z.literal('corexy'), z.literal('hybrid-corexy'), z.literal('hybrid-corexy-idex')])\n\t\t\t.optional(),\n\t\tbedMargin: z\n\t\t\t.object({\n\t\t\t\tx: z.tuple([z.number().default(0), z.number().default(0)]),\n\t\t\t\ty: z.tuple([z.number().default(0), z.number().default(0)]),\n\t\t\t})\n\t\t\t.describe('Margin of available movement around the bed for this printer')\n\t\t\t.default({ x: [0, 0], y: [0, 0] }),\n\t\tspeedLimits: z\n\t\t\t.object({\n\t\t\t\tbasic: SpeedLimits,\n\t\t\t\tperformance: SpeedLimits.optional(),\n\t\t\t})\n\t\t\t.strict()\n\t\t\t.describe('Speed limits for this printer'),\n\t\tdefaults: z\n\t\t\t.object({\n\t\t\t\ttoolheads: z.array(SerializedToolheadConfiguration).describe('Default toolheads for this printer'),\n\t\t\t\tboard: BoardID.describe('Default board for this printer. Should be the name of the board directory.'),\n\t\t\t\trails: z.array(SerializedPrinterRailDefinition).describe('Default rails for this printer'),\n\t\t\t\tcontrollerFan: Fan.shape.id.optional().describe('Default controller fan for this printer'),\n\t\t\t})\n\t\t\t.strict()\n\t\t\t.describe('Default hardware for this printer'),\n\t})\n\t.describe('A RatOS supported 3d printer');\n\nexport const PrinterDefinitionWithResolvedToolheads = PrinterDefinition.extend({\n\tdefaults: PrinterDefinition.shape.defaults\n\t\t.extend({\n\t\t\ttoolheads: z.array(ToolheadConfiguration),\n\t\t})\n\t\t.strict(),\n});\n\nexport type PrinterDefinition = z.infer<typeof PrinterDefinition>;\nexport type PrinterDefinitionWithResolvedToolheads = z.infer<typeof PrinterDefinitionWithResolvedToolheads>;\n","import { z } from 'zod';\nimport { BoardID, Toolboard } from '@/zods/boards';\nimport { Hotend, Thermistor, Extruder, Probe, Endstop, Fan, Accelerometer, Nozzle } from '@/zods/hardware';\nimport { PrinterAxis } from '@/zods/motion';\nimport { getDefaultNozzle } from '@/data/nozzles';\n\nexport const BaseToolheadConfiguration = z\n\t.object({\n\t\thotend: Hotend,\n\t\tthermistor: Thermistor,\n\t\textruder: Extruder,\n\t\txEndstop: Endstop,\n\t\tyEndstop: Endstop,\n\t\thotendFan: Fan,\n\t\tpartFan: Fan,\n\t\tnozzle: Nozzle.default(getDefaultNozzle()),\n\t\txAccelerometer: Accelerometer.optional().nullable(),\n\t\tyAccelerometer: Accelerometer.optional().nullable(),\n\t\ttoolboard: Toolboard.nullable(),\n\t\tprobe: Probe.optional(),\n\t\taxis: z.literal(PrinterAxis.x).or(z.literal(PrinterAxis.dual_carriage)),\n\t\tdescription: z.string().optional(),\n\t\ttoolNumber: z.number().optional(),\n\t})\n\t.strict();\n\nexport const ToolNumber = z.union([z.literal(0), z.literal(1)]);\nexport const ToolAxis = z.union([\n\tz.literal(PrinterAxis.x),\n\tz.literal(PrinterAxis.dual_carriage),\n\tz.literal(PrinterAxis.extruder),\n\tz.literal(PrinterAxis.extruder1),\n]);\nexport const ToolOrAxis = z.union([ToolAxis, ToolNumber]);\nexport type ToolNumber = z.infer<typeof ToolNumber>;\nexport type ToolAxis = z.infer<typeof ToolAxis>;\nexport type ToolOrAxis = z.infer<typeof ToolOrAxis>;\n\nexport const ToolheadConfiguration = BaseToolheadConfiguration.refine(\n\t(data) => data.toolboard !== null || data.xEndstop.id !== 'endstop-toolboard',\n\t'Cannot use toolboard endstop without a toolboard',\n)\n\t.refine(\n\t\t(data) =>\n\t\t\tdata.toolboard !== null ||\n\t\t\t!['2pin-toolboard', '4pin-toolboard', '4pin-dedicated-toolboard'].includes(data.hotendFan.id),\n\t\t'Cannot use toolboard hotend fan without a toolboard',\n\t)\n\t.refine(\n\t\t(data) =>\n\t\t\tdata.toolboard !== null ||\n\t\t\t!['2pin-toolboard', '4pin-toolboard', '4pin-dedicated-toolboard'].includes(data.partFan.id),\n\t\t'Cannot use toolboard part cooling fan without a toolboard',\n\t);\n\nexport const PartialToolheadConfiguration = BaseToolheadConfiguration.partial().optional();\nexport const SerializedToolheadConfiguration = BaseToolheadConfiguration.extend({\n\thotend: Hotend.shape.id,\n\textruder: Extruder.shape.id,\n\tthermistor: Thermistor,\n\txEndstop: Endstop.shape.id,\n\tyEndstop: Endstop.shape.id,\n\thotendFan: Fan.shape.id,\n\tpartFan: Fan.shape.id,\n\txAccelerometer: Accelerometer.shape.id.optional().nullable(),\n\tyAccelerometer: Accelerometer.shape.id.optional().nullable(),\n\ttoolboard: BoardID.optional().nullable(),\n\tprobe: Probe.shape.id.optional().nullable(),\n}).strict();\nexport const SerializedPartialToolheadConfiguration = SerializedToolheadConfiguration.partial().optional();\n\nexport type ToolheadConfiguration<T extends boolean> = z.infer<typeof ToolheadConfiguration> & {\n\ttoolboard: T extends true ? Toolboard : null;\n};\nexport type PartialToolheadConfiguration = z.infer<typeof PartialToolheadConfiguration>;\nexport type SerializedToolheadConfiguration = z.infer<typeof SerializedToolheadConfiguration>;\nexport type SerializedPartialToolheadConfiguration = z.infer<typeof SerializedPartialToolheadConfiguration>;\n","// @ts-check\nimport { z } from 'zod';\n\n/**\n * Specify your server-side environment variables schema here.\n * This way you can ensure the app isn't built with invalid env vars.\n */\nexport const serverSchema = z.object({\n\tNODE_ENV: z.enum(['development', 'test', 'production']),\n\tRATOS_CONFIGURATION_PATH: z.string(),\n\tRATOS_SCRIPT_DIR: z.string(),\n\tKLIPPER_CONFIG_PATH: z.string(),\n\tKLIPPER_DIR: z.string(),\n\tKLIPPER_ENV: z.string(),\n\tMOONRAKER_DIR: z.string(),\n\tLOG_FILE: z.string(),\n\tRATOS_DATA_DIR: z.string(),\n});\n\n/**\n * Specify your client-side environment variables schema here.\n * This way you can ensure the app isn't built with invalid env vars.\n * To expose them to the client, prefix them with `NEXT_PUBLIC_`.\n */\nexport const clientSchema = z.object({\n\tNEXT_PUBLIC_KLIPPER_HOSTNAME: z.string().optional(),\n});\n\n/**\n * You can't destruct `process.env` as a regular object, so you have to do\n * it manually here. This is because Next.js evaluates this at build time,\n * and only used environment variables are included in the build.\n * @type {{ [k in keyof z.infer<typeof clientSchema>]: z.infer<typeof clientSchema>[k] | undefined }}\n */\nexport const clientEnv = {\n\tNEXT_PUBLIC_KLIPPER_HOSTNAME: process.env.NEXT_PUBLIC_KLIPPER_HOSTNAME,\n};\n"],"names":["moonrakerSyncEventEmitter","EventTarget","DispatchSaveAtomEvent","itemKey","value","dispatchEvent","CustomEvent","detail","moonrakerWriteEffect","params","onSet","node","key","newValue","SyncWithMoonraker","children","param","moonraker","useMoonraker","read","useCallback","getItem","DefaultValue","saveAtom","event","saveItem","useEffect","addEventListener","removeEventListener","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","RecoilSync","Drivers","z","array","Driver","parse","id","title","type","protocol","senseResistor","coolingCurrentThreshold","voltages","maxCurrent","external","Strong","React","ref","className","props","jsx_runtime","strong","cn","setDisplayName","fanHelp","jsxs","Fragment","p","partFanOptions","config","toolheadConfig","fans","axis","PrinterAxis","x","push","badge","color","controlboard","name","fourPinFanConnectorCount","toolboard","concat","toolNumber","hotendFanOptions","controllerFan","defaultControllerFan","getDefaultNozzle","diameter","findPreset","stepper","driver","voltage","current","performanceMode","presets","slice","sort","a","b","run_current","find","sense_resistor","Steppers","Stepper","maxPeakCurrent","driver_TBL","driver_TOFF","driver_HEND","driver_HSTRT","driver_IHOLDDELAY","driver_TPOWERDOWN","driver_PWM_FREQ","driver_PWM_GRAD","driver_PWM_AMPL","driver_PWM_AUTOSCALE","driver_SGT","fullStepsPerRotation","ToolheadHelper","hasToolboard","getToolboard","getMotionStepperName","dual_carriage","getMotionAxis","getToolboardName","getTool","getShortToolName","getDescription","_this_config_description","description","getExtruderAxis","extruder1","extruder","getToolCommand","getSerialSuffix","getExtruder","getHotend","hotend","getNozzle","_this_config_nozzle","nozzle","getThermistor","thermistor","getXEndstop","xEndstop","getYEndstop","yEndstop","getXAccelerometer","xAccelerometer","getYAccelerometer","yAccelerometer","getXAccelerometerName","_this_getXAccelerometer","getYAccelerometerName","_this_getYAccelerometer","getChangeSet","changes","changeSet","Object","keys","forEach","getConfig","change","deepEqual","parsed","PartialToolheadConfiguration","safeParse","getProbe","probe","getPartFan","partFan","getHotendFan","hotendFan","serialize","serializeToolheadConfiguration","constructor","toolhead","_len","arguments","length","inputs","_key","twMerge","clsx","Component","displayName","PerformanceModeState","atom","default","effects","syncEffect","refine","getRefineCheckerForZodSchema","boolean","optional","nullable","StealthchopState","StandstillStealthState","ControllerFanState","Fan","PrinterConfigurationState","selector","get","printer","printerSize","stealthchop","standstillStealth","rails","toolheads","waitForAll","PrinterState","PrinterSizeState","PrinterRailsState","ControlboardState","PrinterToolheadsState","input","defaults","map","th","size","undefined","printerConfig","PartialPrinterConfiguration","success","getLogger","error","errors","flatten","fieldErrors","data","LoadablePrinterConfigurationState","loadable","noWait","hasValue","contents","hasError","loading","state","serializePrinterConfiguration","serializedConfig","serializePrinterRail","rail","SerializedPrinterConfiguration","serializePartialPrinterConfiguration","serializePartialToolheadConfiguration","SerializedPartialPrinterConfiguration","useSerializedPrinterConfiguration","printerConfiguration","useRecoilValue","serializedPrinterConfiguration","useMemo","usePrinterConfiguration","selectedPrinter","setSelectedPrinter","useRecoilState","selectedPrinterOption","setSelectedPrinterOption","selectedBoard","setSelectedBoard","setPerformanceMode","setStealthchop","setStandstillStealth","selectedControllerFan","setSelectedControllerFan","selectedPrinterRails","parsedPrinterConfiguration","PrinterConfiguration","partialPrinterConfiguration","cachedPrinters","readPrinterAtom","printerId","object","PrinterDefinitionWithResolvedToolheads","shape","newPrinter","trpcClient","query","readPrinterRailAtom","param1","printerRailState","PrinterRailState","parsedRail","SerializedPrinterRail","printerRailDefault","r","parsedRailRepaired","write","Promise","setTimeout","LoadablePrinterState","PrinterSize","board","boardId","BoardID","boardReq","mcu","boards","boardFilters","newBoard","Board","atomFamily","railState","deserializePrinterRail","set","values","PrinterToolheadState","tNum","printerToolheadState","parsedToolhead","ToolheadConfiguration","freshToolboard","toolboardPath","maybeToolboard","Toolboard","debug","BaseToolheadConfiguration","extend","ToolNumber","selectorFamily","deserializeToolheadConfiguration","i","filter","Boolean","reset","LoadablePrinterToolheadsState","deserializeDriver","d","driverId","deserializeStepper","stepperId","BasePrinterRail","deserializePrinterRailDefinition","PrinterRailDefinition","stringToTitleObject","AxisPinPrefix","AllPins","x_step_pin","string","x_dir_pin","x_enable_pin","x_uart_pin","x_diag_pin","x_endstop_pin","x1_step_pin","x1_dir_pin","x1_enable_pin","x1_uart_pin","x1_diag_pin","x1_endstop_pin","dual_carriage_step_pin","dual_carriage_dir_pin","dual_carriage_enable_pin","dual_carriage_uart_pin","dual_carriage_diag_pin","dual_carriage_endstop_pin","y_step_pin","y_dir_pin","y_enable_pin","y_uart_pin","y_diag_pin","y_endstop_pin","y1_step_pin","y1_dir_pin","y1_enable_pin","y1_uart_pin","y1_diag_pin","y1_endstop_pin","y2_step_pin","y2_dir_pin","y2_enable_pin","y2_uart_pin","y2_diag_pin","y2_endstop_pin","z0_step_pin","z0_dir_pin","z0_enable_pin","z0_uart_pin","z0_diag_pin","z1_step_pin","z1_dir_pin","z1_enable_pin","z1_uart_pin","z1_diag_pin","z2_step_pin","z2_dir_pin","z2_enable_pin","z2_uart_pin","z2_diag_pin","z3_step_pin","z3_dir_pin","z3_enable_pin","z3_uart_pin","z3_diag_pin","e_step_pin","e_dir_pin","e_enable_pin","e_uart_pin","e_diag_pin","e_heater_pin","e_sensor_pin","stepper_spi_mosi_pin","stepper_spi_miso_pin","stepper_spi_sclk_pin","adxl345_cs_pin","bltouch_sensor_pin","bltouch_control_pin","probe_pin","fan_part_cooling_pin","fan_toolhead_cooling_pin","fan_controller_board_pin","heater_bed_heating_pin","heater_bed_sensor_pin","PinMap","pinAliasPrefixToPrinterAxis","x1","y","y1","y2","z0","z1","z2","z3","e","e1","nativeEnum","transform","v","_Object_keys_find","pa","and","or","UARTPins","uart_pin","uart_address","rx_pin","tx_pin","SPIPins","cs_pin","spi_bus","spi_software_mosi_pin","spi_software_miso_pin","spi_software_sclk_pin","hasSPI","slot","hasUART","MotorSlotPins","step_pin","dir_pin","enable_pin","diag_pin","endstop_pin","MotorSlot","message","innerType","omit","partial","MotorSlotKey","brand","BoardPath","BoardSerialPath","integratedDrivers","record","DriverID","motorSlots","isToolboard","isHost","serialPath","boardImageFileName","manualFileName","wireDiagramFileName","manufacturer","firmwareBinaryName","compileScript","flashScript","flashInstructions","disableAutoFlash","documentationLink","hasQuirksFiles","driverCount","number","extruderlessConfig","driverVoltages","Voltage","hasMcuTempSensor","alternativePT1000Resistor","outputPins","pin","min","max","dfu","dfuBootImage","flashDevice","instructions","reminder","hasBoot0Jumper","stepperSPI","software","sclk","mosi","miso","hardware","bus","ADXL345SPI","LIS2DW","path","literal","detected","thermistors","startsWithServerValidation","process","env","RATOS_CONFIGURATION_PATH","environment","serverSchema","hardwareType","startsWith","endsWith","Thermistor","enum","Hotend","flowType","union","Nozzle","Extruder","Probe","Endstop","badgeColorOptions","KlipperAccelSensorNameSchame","AccelerometerType","Accelerometer","accelerometerType","klipperAccelSensorSchema","StepperVoltage","Voltages","getSupportedVoltages","includes","matchesDefaultRail","defaultRail","BaseStepperPreset","BaseSPIStepperPreset","driver_MSLUT0","driver_MSLUT1","driver_MSLUT2","driver_MSLUT3","driver_MSLUT4","driver_MSLUT5","driver_MSLUT6","driver_MSLUT7","driver_W0","driver_W1","driver_W2","driver_W3","driver_X1","driver_X2","driver_X3","driver_START_SIN","driver_START_SIN90","describe","axisDescription","invertStepperDirection","axisMinimum","axisMaximum","axisEndstop","motorSlot","rotationDistance","gearRatio","regex","homingSpeed","microstepping","SerializedPrinterRailDefinition","PrinterRail","endstop","PrinterSizeDefinition","BasePrinterConfiguration","PrinterDefinition","strict","ctx","sizes","toString","addIssue","code","ZodIssueCode","custom","NEVER","superRefine","arg","toolboardCount","t","driverCountRequired","too_small","minimum","inclusive","conflicts","conflictingToolhead","pr","railName","toLocaleUpperCase","cr","join","SerializedToolheadConfiguration","SerializedPartialToolheadConfiguration","SpeedLimits","velocity","accel","z_velocity","z_accel","square_corner_velocity","travel_velocity","travel_accel","replace","releaseDate","image","template","kinematics","bedMargin","tuple","speedLimits","basic","performance","ToolAxis","NODE_ENV","RATOS_SCRIPT_DIR","KLIPPER_CONFIG_PATH","KLIPPER_DIR","KLIPPER_ENV","MOONRAKER_DIR","LOG_FILE","RATOS_DATA_DIR","NEXT_PUBLIC_KLIPPER_HOSTNAME"],"sourceRoot":""}