{"version":3,"file":"static/chunks/7370-099d1af67b07f162.js","mappings":"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","sources":["webpack://_N_E/ignored|/home/runner/work/RatOS-configurator/RatOS-configurator/src/node_modules/.pnpm/@tensorflow+tfjs-core@4.17.0_encoding@0.1.13/node_modules/@tensorflow/tfjs-core/dist/platforms|node-fetch","webpack://_N_E/ignored|/home/runner/work/RatOS-configurator/RatOS-configurator/src/node_modules/.pnpm/@tensorflow+tfjs-core@4.17.0_encoding@0.1.13/node_modules/@tensorflow/tfjs-core/dist/platforms|util","webpack://_N_E/./tailwind.config.ts","webpack://_N_E/./app/_helpers/colors.ts","webpack://_N_E/./app/analysis/chart-theme.ts","webpack://_N_E/./app/analysis/charts.tsx","webpack://_N_E/./app/analysis/hooks.tsx","webpack://_N_E/./app/analysis/periodogram.ts","webpack://_N_E/./components/common/full-load-screen.tsx","webpack://_N_E/./components/common/no-ssr.tsx","webpack://_N_E/./components/common/spinner.tsx","webpack://_N_E/./hooks/isClient.tsx","webpack://_N_E/./hooks/useKlippyStateHandler.tsx","webpack://_N_E/./zods/analysis.tsx","webpack://_N_E/<anon>"],"sourcesContent":["/* (ignored) */","/* (ignored) */","import defaultTheme from 'tailwindcss/defaultTheme';\nimport { Config } from 'tailwindcss/types/config';\n\nimport flattenColorPalette from 'tailwindcss/lib/util/flattenColorPalette';\nimport convert from 'color-convert';\nimport svgToDataUri from 'mini-svg-data-uri';\n\nexport default {\n\tdarkMode: 'class',\n\tcontent: [\n\t\t'./pages/**/*.{js,ts,jsx,tsx}',\n\t\t'./components/**/*.{js,ts,jsx,tsx}',\n\t\t'./helpers/**/*.{js,ts,jsx,tsx}',\n\t\t'./app/**/*.{js,ts,jsx,tsx}',\n\t],\n\ttheme: {\n\t\tcontainer: {\n\t\t\tcenter: true,\n\t\t\tpadding: '2rem',\n\t\t\tscreens: {\n\t\t\t\t'2xl': '1400px',\n\t\t\t},\n\t\t},\n\t\textend: {\n\t\t\tfontFamily: {\n\t\t\t\tsans: ['var(--inter-font)', ...defaultTheme.fontFamily.sans],\n\t\t\t},\n\t\t\tkeyframes: {\n\t\t\t\tping: {\n\t\t\t\t\t'0%': {\n\t\t\t\t\t\topacity: '100',\n\t\t\t\t\t},\n\t\t\t\t\t'75%, 100%': {\n\t\t\t\t\t\ttransform: 'scale(2)',\n\t\t\t\t\t\topacity: '0',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t'accordion-down': {\n\t\t\t\t\tfrom: { height: '0' },\n\t\t\t\t\tto: { height: 'var(--radix-accordion-content-height)' },\n\t\t\t\t},\n\t\t\t\t'accordion-up': {\n\t\t\t\t\tfrom: { height: 'var(--radix-accordion-content-height)' },\n\t\t\t\t\tto: { height: '0' },\n\t\t\t\t},\n\t\t\t},\n\t\t\tanimation: {\n\t\t\t\t'spin-fast': 'spin 0.5s linear infinite',\n\t\t\t\t'accordion-down': 'accordion-down 0.2s ease-out',\n\t\t\t\t'accordion-up': 'accordion-up 0.2s ease-out',\n\t\t\t},\n\t\t\tcolors: {\n\t\t\t\tbrand: {\n\t\t\t\t\t50: '#f2ffe1',\n\t\t\t\t\t100: '#deffcc',\n\t\t\t\t\t200: '#bdff99',\n\t\t\t\t\t300: '#9cff66',\n\t\t\t\t\t400: '#7bff33',\n\t\t\t\t\t500: '#5aff00',\n\t\t\t\t\t600: '#48cc00',\n\t\t\t\t\t700: '#369900',\n\t\t\t\t\t800: '#246600',\n\t\t\t\t\t900: '#123300',\n\t\t\t\t},\n\t\t\t\tborder: 'hsl(var(--border))',\n\t\t\t\tinput: 'hsl(var(--input))',\n\t\t\t\tring: 'hsl(var(--ring))',\n\t\t\t\tbackground: 'hsl(var(--background))',\n\t\t\t\tforeground: 'hsl(var(--foreground))',\n\t\t\t\tprimary: {\n\t\t\t\t\tDEFAULT: 'hsl(var(--brand-400) / 50%)',\n\t\t\t\t\tforeground: 'hsl(var(--white))',\n\t\t\t\t},\n\t\t\t\tsecondary: {\n\t\t\t\t\tDEFAULT: 'hsl(var(--secondary))',\n\t\t\t\t\tforeground: 'hsl(var(--white))',\n\t\t\t\t},\n\t\t\t\tdestructive: {\n\t\t\t\t\tDEFAULT: 'hsl(var(--red-400))',\n\t\t\t\t\tforeground: 'hsl(var(--black))',\n\t\t\t\t},\n\t\t\t\tmuted: {\n\t\t\t\t\tDEFAULT: 'hsl(var(--muted))',\n\t\t\t\t\tforeground: 'hsl(var(--muted-foreground))',\n\t\t\t\t},\n\t\t\t\taccent: {\n\t\t\t\t\tDEFAULT: 'hsl(var(--accent))',\n\t\t\t\t\tforeground: 'hsl(var(--white))',\n\t\t\t\t},\n\t\t\t\tpopover: {\n\t\t\t\t\tDEFAULT: 'hsl(var(--popover))',\n\t\t\t\t\tforeground: 'hsl(var(--popover-foreground))',\n\t\t\t\t},\n\t\t\t\tcard: {\n\t\t\t\t\tDEFAULT: 'hsl(var(--card))',\n\t\t\t\t\tforeground: 'hsl(var(--card-foreground))',\n\t\t\t\t},\n\t\t\t},\n\t\t\tborderRadius: {\n\t\t\t\tlg: 'var(--radius)',\n\t\t\t\tmd: 'calc(var(--radius) - 2px)',\n\t\t\t\tsm: 'calc(var(--radius) - 4px)',\n\t\t\t},\n\t\t\tfontSize: {\n\t\t\t\t'2xs': '0.6rem',\n\t\t\t\ts: '0.8125rem',\n\t\t\t},\n\t\t\tcontainers: {\n\t\t\t\t'screen-sm': '640px',\n\t\t\t\t'screen-md': '768px',\n\t\t\t\t'screen-lg': '1024px',\n\t\t\t\t'screen-xl': '1280px',\n\t\t\t\t'screen-2xl': '1536px',\n\t\t\t},\n\t\t},\n\t},\n\tplugins: [\n\t\trequire('@tailwindcss/forms'),\n\t\trequire('@tailwindcss/container-queries'),\n\t\trequire('tailwindcss-animate'),\n\t\trequire('tailwind-scrollbar')({ nocompatible: true }),\n\t\taddVariablesForColors,\n\t\tfunction ({ matchUtilities, theme }: any) {\n\t\t\tmatchUtilities(\n\t\t\t\t{\n\t\t\t\t\t'bg-grid': (value: any) => ({\n\t\t\t\t\t\tbackgroundImage: `url(\"${svgToDataUri(\n\t\t\t\t\t\t\t`<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\" width=\"32\" height=\"32\" fill=\"none\" stroke=\"${value}\"><path d=\"M0 .5H31.5V32\"/></svg>`,\n\t\t\t\t\t\t)}\")`,\n\t\t\t\t\t}),\n\t\t\t\t\t'bg-grid-small': (value: any) => ({\n\t\t\t\t\t\tbackgroundImage: `url(\"${svgToDataUri(\n\t\t\t\t\t\t\t`<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\" width=\"8\" height=\"8\" fill=\"none\" stroke=\"${value}\"><path d=\"M0 .5H31.5V32\"/></svg>`,\n\t\t\t\t\t\t)}\")`,\n\t\t\t\t\t}),\n\t\t\t\t\t'bg-dot': (value: any) => ({\n\t\t\t\t\t\tbackgroundImage: `url(\"${svgToDataUri(\n\t\t\t\t\t\t\t`<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\" width=\"16\" height=\"16\" fill=\"none\"><circle fill=\"${value}\" id=\"pattern-circle\" cx=\"10\" cy=\"10\" r=\"1.6257413380501518\"></circle></svg>`,\n\t\t\t\t\t\t)}\")`,\n\t\t\t\t\t}),\n\t\t\t\t},\n\t\t\t\t{ values: flattenColorPalette(theme('backgroundColor')), type: 'color' },\n\t\t\t);\n\t\t},\n\t],\n} satisfies Config;\n\nfunction addVariablesForColors({ addBase, theme }: any) {\n\tlet allColors = flattenColorPalette(theme('colors'));\n\tlet newVars = Object.fromEntries(\n\t\tObject.entries(allColors).map(([key, val]) => {\n\t\t\tconst parsed = convert.hex.hsl(val);\n\t\t\treturn [`--${key}`, val.startsWith('#') ? `${parsed[0]} ${parsed[1]}% ${parsed[2]}%` : val];\n\t\t}),\n\t);\n\n\taddBase({\n\t\t':root': newVars,\n\t});\n}\n","import resolveConfig from 'tailwindcss/resolveConfig';\nimport tailwindConfig from '@/tailwind.config';\nconst fullConfig = resolveConfig(tailwindConfig);\ntype TWShade<T extends keyof typeof fullConfig.theme.colors> = {\n\t[Color in T]: ExplicitObject<typeof fullConfig.theme.colors>[Color] extends string | { DEFAULT: string }\n\t\t? never\n\t\t: Color;\n}[T];\nexport type TWShadeableColorName = TWShade<keyof typeof fullConfig.theme.colors>;\nexport const twColors = fullConfig.theme.colors;\nexport const isShadableColor = (color: string): color is TWShadeableColorName => {\n\tconst twColor = twColors[color as keyof typeof twColors];\n\treturn twColor != null && typeof twColor !== 'string' && !('DEFAULT' in twColor);\n};\nexport const shadableTWColors = Object.fromEntries(\n\tObject.keys(twColors)\n\t\t.filter(isShadableColor)\n\t\t.map((c) => [c, twColors[c]]),\n) as { [color in TWShadeableColorName]: (typeof twColors)[TWShadeableColorName] };\n","import { SciChartJSDarkv2Theme } from 'scichart';\n\nexport class ChartTheme extends SciChartJSDarkv2Theme {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.sciChartBackground = 'transparent';\n\t\tthis.loadingAnimationBackground = 'transparent';\n\t\tthis.axisBandsFill = '#20212333';\n\t\tthis.majorGridLineBrush = '#AAAAAA37';\n\t\tthis.minorGridLineBrush = '#77777719';\n\t\tthis.strokePalette = ['#F48420', '#AE408E', '#209FD9', '#264B93'];\n\t\tthis.fillPalette = ['#F4842077', '#AE408E77', '#209FD977', '#264B9377'];\n\t\tthis.isLightBackground = false;\n\t}\n}\n","'use client';\nimport {\n\tXyDataSeries,\n\tSciChartSurface,\n\tThickness,\n\tNumericAxis,\n\tEAutoRange,\n\tNumberRange,\n\tEAxisAlignment,\n\tFastLineRenderableSeries,\n\tENumericFormat,\n\teasing,\n\tFastMountainRenderableSeries,\n\tPaletteFactory,\n\tGradientParams,\n\tPoint,\n\tISciChart2DDefinition,\n\tEAxisType,\n\tESeriesType,\n\tWaveAnimation,\n\tCategoryAxis,\n\tGlowEffect,\n\tSeriesInfo,\n\tRolloverModifier,\n\tCursorModifier,\n\tTRolloverTooltipSvgTemplate,\n\tparseColorToTArgb,\n\tparseTArgbToHtmlColor,\n\tCursorTooltipSvgAnnotation,\n\tEDataSeriesType,\n\tXyySeriesInfo,\n} from 'scichart';\nimport { useChart } from '@/app/analysis/hooks';\nimport { ChartTheme } from '@/app/analysis/chart-theme';\n\nimport { inter } from '@/app/fonts';\nimport { TWShadeableColorName, shadableTWColors, twColors } from '@/app/_helpers/colors';\nimport { useCallback } from 'react';\n\nexport const ADXL_STREAM_BUFFER_SIZE = 128;\nconst historyCount = 200;\n\nSciChartSurface.configure({\n\twasmUrl: '/configure/scichart2d.wasm',\n\tdataUrl: '/configure/scichart2d.data',\n});\nSciChartSurface.UseCommunityLicense();\nconst theme = new ChartTheme();\n\nexport const SIGNAL_CHART_AXIS_SIGNAL_ID = 'signal';\nexport const SIGNAL_CHART_AXIS_HISTORY_ID = 'history';\nexport const SIGNAL_CHART_SERIES_SIGNAL_ID = 'signal-series';\nexport const SIGNAL_CHART_SERIES_HISTORY_ID = 'history-series';\nexport const SIGNAL_CHART_AXIS_AMPLITUDE_ID = 'amplitude';\nconst PSDLength = 131;\n\ntype ADXLAxes = 'x' | 'y' | 'z';\n\nexport const getAxisColorName = (axis: ADXLAxes): TWShadeableColorName => {\n\tswitch (axis) {\n\t\tcase 'x':\n\t\t\treturn `yellow`;\n\t\tcase 'y':\n\t\t\treturn `sky`;\n\t\tcase 'z':\n\t\t\treturn `rose`;\n\t\tdefault:\n\t\t\treturn `brand`;\n\t}\n};\n\nexport const getAxisColor = (axis: ADXLAxes) => {\n\treturn twColors[getAxisColorName(axis)];\n};\n\nexport const SignalChartMinimumRange = new NumberRange(-10000, 10000);\n\nexport const useADXLSignalChart = (axis: ADXLAxes) => {\n\treturn useChart(\n\t\tnull,\n\t\tuseCallback(\n\t\t\t(surface: SciChartSurface) => {\n\t\t\t\tconst color = getAxisColor(axis);\n\t\t\t\t// Category axis as the actual time doesn't matter (samples are evenly spaced).\n\t\t\t\tconst xAxis = new CategoryAxis(surface.webAssemblyContext2D, {\n\t\t\t\t\tid: SIGNAL_CHART_AXIS_SIGNAL_ID + axis,\n\t\t\t\t\tautoRange: EAutoRange.Always,\n\t\t\t\t\tmaxAutoTicks: ADXL_STREAM_BUFFER_SIZE,\n\t\t\t\t\tdrawLabels: false,\n\t\t\t\t\tdrawMinorTickLines: false,\n\t\t\t\t\tdrawMajorTickLines: false,\n\t\t\t\t\tdrawMajorBands: false,\n\t\t\t\t\tdrawMinorGridLines: false,\n\t\t\t\t\tdrawMajorGridLines: false,\n\t\t\t\t});\n\t\t\t\tsurface.xAxes.add(xAxis);\n\n\t\t\t\t// Category axis as the actual time doesn't matter (samples are evenly spaced).\n\t\t\t\tconst xHistoryAxis = new CategoryAxis(surface.webAssemblyContext2D, {\n\t\t\t\t\tid: SIGNAL_CHART_AXIS_HISTORY_ID + axis,\n\t\t\t\t\tautoRange: EAutoRange.Always,\n\t\t\t\t\tdrawLabels: false,\n\t\t\t\t\tdrawMinorGridLines: false,\n\t\t\t\t\tdrawMajorTickLines: false,\n\t\t\t\t});\n\t\t\t\tsurface.xAxes.add(xHistoryAxis);\n\n\t\t\t\tconst yAxis = new NumericAxis(surface.webAssemblyContext2D, {\n\t\t\t\t\tautoRange: EAutoRange.Never,\n\t\t\t\t\tvisibleRange: new NumberRange(-1000, 1000),\n\t\t\t\t\tdrawLabels: false,\n\t\t\t\t\tid: SIGNAL_CHART_AXIS_AMPLITUDE_ID + axis,\n\t\t\t\t\tdrawMinorTickLines: false,\n\t\t\t\t\tdrawMajorTickLines: false,\n\t\t\t\t\tdrawMajorBands: false,\n\t\t\t\t\tdrawMinorGridLines: false,\n\t\t\t\t\tdrawMajorGridLines: false,\n\t\t\t\t\taxisAlignment: EAxisAlignment.Left,\n\t\t\t\t});\n\t\t\t\tsurface.yAxes.add(yAxis);\n\n\t\t\t\tconst signalData = new XyDataSeries(surface.webAssemblyContext2D, {\n\t\t\t\t\tfifoCapacity: ADXL_STREAM_BUFFER_SIZE,\n\t\t\t\t\tcontainsNaN: false,\n\t\t\t\t\tisSorted: true,\n\t\t\t\t\tdataSeriesName: axis.toLocaleUpperCase(),\n\t\t\t\t\tdataIsSortedInX: true,\n\t\t\t\t\txValues: Array(ADXL_STREAM_BUFFER_SIZE)\n\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t.map((_, i) => i),\n\t\t\t\t\tyValues: Array(ADXL_STREAM_BUFFER_SIZE).fill(0),\n\t\t\t\t});\n\n\t\t\t\t// Line series to render the live signal data.\n\t\t\t\tconst signalSeries = new FastLineRenderableSeries(surface.webAssemblyContext2D, {\n\t\t\t\t\txAxisId: SIGNAL_CHART_AXIS_SIGNAL_ID + axis,\n\t\t\t\t\tyAxisId: SIGNAL_CHART_AXIS_AMPLITUDE_ID + axis,\n\t\t\t\t\tstroke: color[400],\n\t\t\t\t\tstrokeThickness: 2,\n\t\t\t\t\tdataSeries: signalData,\n\t\t\t\t\teffect: new GlowEffect(surface.webAssemblyContext2D, {\n\t\t\t\t\t\tintensity: 1,\n\t\t\t\t\t\trange: 1,\n\t\t\t\t\t}),\n\t\t\t\t});\n\n\t\t\t\tsurface.renderableSeries.add(signalSeries);\n\n\t\t\t\tconst historyData = new XyDataSeries(surface.webAssemblyContext2D, {\n\t\t\t\t\tfifoCapacity: ADXL_STREAM_BUFFER_SIZE * historyCount,\n\t\t\t\t\tcontainsNaN: false,\n\t\t\t\t\tisSorted: true,\n\t\t\t\t\tdataSeriesName: axis.toLocaleUpperCase() + ' History',\n\t\t\t\t\tdataIsSortedInX: true,\n\t\t\t\t\txValues: Array(ADXL_STREAM_BUFFER_SIZE * historyCount)\n\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t.map((_, i) => i),\n\t\t\t\t\tyValues: Array(ADXL_STREAM_BUFFER_SIZE * historyCount).fill(0),\n\t\t\t\t});\n\n\t\t\t\t// Line series to render the historical signal data (last 200 buffers)\n\t\t\t\tconst historySeries = new FastLineRenderableSeries(surface.webAssemblyContext2D, {\n\t\t\t\t\tstroke: color[500] + '22',\n\t\t\t\t\tstrokeThickness: 1,\n\t\t\t\t\topacity: 0.6,\n\t\t\t\t\tyAxisId: SIGNAL_CHART_AXIS_AMPLITUDE_ID + axis,\n\t\t\t\t\txAxisId: SIGNAL_CHART_AXIS_HISTORY_ID + axis,\n\t\t\t\t\tdataSeries: historyData,\n\t\t\t\t});\n\t\t\t\tsurface.renderableSeries.add(historySeries);\n\n\t\t\t\tsignalSeries.animation = new WaveAnimation({\n\t\t\t\t\tduration: 500,\n\t\t\t\t});\n\t\t\t\thistorySeries.animation = new WaveAnimation({\n\t\t\t\t\tduration: 500,\n\t\t\t\t});\n\n\t\t\t\treturn {\n\t\t\t\t\tsignalData: signalData,\n\t\t\t\t\tsignalSeries: signalSeries,\n\t\t\t\t\thistoryData: historyData,\n\t\t\t\t\thistorySeries: historySeries,\n\t\t\t\t\txAxis,\n\t\t\t\t\txHistoryAxis,\n\t\t\t\t\tyAxis,\n\t\t\t\t};\n\t\t\t},\n\t\t\t[axis],\n\t\t),\n\t);\n};\n\nexport const PSD_CHART_AXIS_AMPLITUDE_ID = 'amplitude';\nexport const PSDChartMinimumYVisibleRange = new NumberRange(0, 1500);\nexport const PSDChardNoSeriesDefinition: ISciChart2DDefinition = {\n\tsurface: {\n\t\ttheme: theme,\n\t\tpadding: Thickness.fromNumber(0),\n\t},\n\txAxes: [\n\t\t{\n\t\t\ttype: EAxisType.NumericAxis,\n\t\t\toptions: {\n\t\t\t\tvisibleRange: new NumberRange(0, 200),\n\t\t\t\tlabelStyle: {\n\t\t\t\t\t...inter.style,\n\t\t\t\t\tfontSize: 13,\n\t\t\t\t\tfontWeight: '600',\n\t\t\t\t\tpadding: new Thickness(15, 15, 15, 15),\n\t\t\t\t},\n\t\t\t\tlabelPostfix: 'Hz',\n\t\t\t\tdrawMinorGridLines: true,\n\t\t\t\tminorsPerMajor: 10,\n\t\t\t\tdrawMinorTickLines: false,\n\t\t\t\tdrawMajorTickLines: false,\n\t\t\t\tdrawMajorBands: false,\n\t\t\t},\n\t\t},\n\t],\n\tyAxes: [\n\t\t{\n\t\t\ttype: EAxisType.NumericAxis,\n\t\t\toptions: {\n\t\t\t\tid: PSD_CHART_AXIS_AMPLITUDE_ID,\n\t\t\t\taxisAlignment: EAxisAlignment.Left,\n\t\t\t\tgrowBy: new NumberRange(0, 0.1),\n\t\t\t\tvisibleRange: PSDChartMinimumYVisibleRange,\n\t\t\t\tlabelFormat: ENumericFormat.Exponential,\n\t\t\t\tlabelStyle: {\n\t\t\t\t\t...inter.style,\n\t\t\t\t\tfontSize: 13,\n\t\t\t\t\tfontWeight: '600',\n\t\t\t\t\tpadding: new Thickness(15, 15, 15, 15),\n\t\t\t\t},\n\t\t\t\tautoRangeAnimation: {\n\t\t\t\t\tduration: 140,\n\t\t\t\t\tanimateInitialRanging: false,\n\t\t\t\t\tanimateSubsequentRanging: true,\n\t\t\t\t\teasing: easing.inOutCubic,\n\t\t\t\t},\n\t\t\t\tdrawMinorGridLines: true,\n\t\t\t\tdrawMinorTickLines: false,\n\t\t\t\tdrawMajorTickLines: false,\n\t\t\t\tdrawMajorBands: false,\n\t\t\t\taxisTitleStyle: { fontSize: 10 },\n\t\t\t},\n\t\t},\n\t],\n};\nexport const PSDChartDefinition: ISciChart2DDefinition = {\n\t...PSDChardNoSeriesDefinition,\n\tseries: [\n\t\t{\n\t\t\ttype: ESeriesType.MountainSeries,\n\t\t\toptions: {\n\t\t\t\tid: 'total',\n\t\t\t\tyAxisId: PSD_CHART_AXIS_AMPLITUDE_ID,\n\t\t\t\tstrokeThickness: 3,\n\t\t\t\tfill: twColors.brand[500] + '22',\n\t\t\t\tstroke: twColors.brand[400],\n\t\t\t},\n\t\t\txyData: {\n\t\t\t\tcontainsNaN: false,\n\t\t\t\tisSorted: true,\n\t\t\t\txValues: Array(PSDLength)\n\t\t\t\t\t.fill(0)\n\t\t\t\t\t.map((_, i) => Math.floor((i / PSDLength) * 200)),\n\t\t\t\tyValues: Array(PSDLength)\n\t\t\t\t\t.fill(0)\n\t\t\t\t\t.map((_, i) => 0),\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: ESeriesType.LineSeries,\n\t\t\toptions: {\n\t\t\t\tid: 'z',\n\t\t\t\tyAxisId: PSD_CHART_AXIS_AMPLITUDE_ID,\n\t\t\t\tstrokeThickness: 3,\n\t\t\t\tstroke: getAxisColor('z')[400],\n\t\t\t},\n\t\t\txyData: {\n\t\t\t\tcontainsNaN: false,\n\t\t\t\tisSorted: true,\n\t\t\t\txValues: Array(PSDLength)\n\t\t\t\t\t.fill(0)\n\t\t\t\t\t.map((_, i) => Math.floor((i / PSDLength) * 200)),\n\t\t\t\tyValues: Array(PSDLength)\n\t\t\t\t\t.fill(0)\n\t\t\t\t\t.map((_, i) => 0),\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: ESeriesType.LineSeries,\n\t\t\toptions: {\n\t\t\t\tid: 'y',\n\t\t\t\tyAxisId: PSD_CHART_AXIS_AMPLITUDE_ID,\n\t\t\t\tstrokeThickness: 3,\n\t\t\t\tstroke: getAxisColor('y')[400],\n\t\t\t},\n\t\t\txyData: {\n\t\t\t\tcontainsNaN: false,\n\t\t\t\tisSorted: true,\n\t\t\t\txValues: Array(PSDLength)\n\t\t\t\t\t.fill(0)\n\t\t\t\t\t.map((_, i) => Math.floor((i / PSDLength) * 200)),\n\t\t\t\tyValues: Array(PSDLength)\n\t\t\t\t\t.fill(0)\n\t\t\t\t\t.map((_, i) => 0),\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: ESeriesType.LineSeries,\n\t\t\toptions: {\n\t\t\t\tid: 'x',\n\t\t\t\tyAxisId: PSD_CHART_AXIS_AMPLITUDE_ID,\n\t\t\t\tstrokeThickness: 3,\n\t\t\t\tstroke: getAxisColor('x')[400],\n\t\t\t},\n\t\t\txyData: {\n\t\t\t\tcontainsNaN: false,\n\t\t\t\tisSorted: true,\n\t\t\t\txValues: Array(PSDLength)\n\t\t\t\t\t.fill(0)\n\t\t\t\t\t.map((_, i) => Math.floor((i / PSDLength) * 200)),\n\t\t\t\tyValues: Array(PSDLength)\n\t\t\t\t\t.fill(0)\n\t\t\t\t\t.map((_, i) => 0),\n\t\t\t},\n\t\t},\n\t],\n};\n\n// Override the standard tooltip displayed by CursorModifier\nexport const getPSDTooltipLegendTemplate = (seriesInfos: SeriesInfo[], svgAnnotation: CursorTooltipSvgAnnotation) => {\n\tlet outputSvgString = '';\n\n\t// Foreach series there will be a seriesInfo supplied by SciChart. This contains info about the series under the house\n\tconst padding = 16;\n\tlet y = padding * 2;\n\tconst valuesWithLabels: string[] = [];\n\tseriesInfos.forEach((seriesInfo, index) => {\n\t\tlet separator = ':';\n\t\tlet textColor = seriesInfo.renderableSeries.rolloverModifierProps.tooltipColor as TWShadeableColorName;\n\t\tvaluesWithLabels.push(\n\t\t\t`${seriesInfo.renderableSeries.rolloverModifierProps.tooltipTitle}${separator} ${(seriesInfo.yValue / 1000).toFixed(2)} g^2/Hz @ ${seriesInfo.formattedXValue}`,\n\t\t);\n\t\toutputSvgString += `<text x=\"${padding}\" y=\"${y}\" class=\"text-sm text-medium font-sans\" fill=\"${shadableTWColors[textColor][400]}\">\n\t\t<tspan class=\"font-bold\">${seriesInfo.renderableSeries.rolloverModifierProps.tooltipTitle}</tspan>${separator} ${(seriesInfo.yValue / 1000).toFixed(2)} g<tspan y=\"${y - 4}\" class=\"sup\">2</tspan><tspan y=${y}>/Hz</tspan>@ ${seriesInfo.formattedXValue}\n\t\t</text>`;\n\t\ty += 20;\n\t\tif (seriesInfo.dataSeriesType === EDataSeriesType.Xyy) {\n\t\t\tconst si = seriesInfo as XyySeriesInfo;\n\t\t\tlet textColor = seriesInfo.renderableSeries.rolloverModifierProps1.tooltipColor as TWShadeableColorName;\n\t\t\tvaluesWithLabels.push(\n\t\t\t\t`${si.renderableSeries.rolloverModifierProps1.tooltipTitle}${separator} ${(si.y1Value / 1000).toFixed(2)} g^2/Hz @ ${si.formattedXValue}`,\n\t\t\t);\n\t\t\toutputSvgString += `<text x=\"${padding}\" y=\"${y}\" class=\"text-sm text-medium font-sans\" fill=\"${shadableTWColors[textColor][400]}\">\n\t\t\t\t<tspan class=\"font-bold\">${si.renderableSeries.rolloverModifierProps1.tooltipTitle}</tspan>${separator} ${(si.y1Value / 1000).toFixed(2)} g<tspan y=\"${y - 4}\" class=\"sup\">2</tspan><tspan y=${y}>/Hz</tspan> @ ${si.formattedXValue}\n\t\t\t</text>`;\n\t\t\ty += 20;\n\n\t\t\toutputSvgString += `<text x=\"${padding}\" y=\"${y}\" class=\"text-sm text-medium font-sans\" fill=\"${shadableTWColors['zinc'][400]}\">\n\t\t\t\t<tspan class=\"font-bold\">Amplitude Difference</tspan>${separator} ${Math.abs((si.y1Value - si.yValue) / 1000).toFixed(2)} g<tspan y=\"${y - 4}\" class=\"sup\">2</tspan><tspan y=${y}>/Hz</tspan>\n\t\t\t</text>`;\n\t\t\ty += 20;\n\t\t}\n\t});\n\tconst width =\n\t\tseriesInfos.length === 0\n\t\t\t? 0\n\t\t\t: padding +\n\t\t\t\tcalcTooltipWidth(\n\t\t\t\t\tvaluesWithLabels.reduce(function (prev, cur) {\n\t\t\t\t\t\treturn cur.length > prev ? cur.length : prev;\n\t\t\t\t\t}, 0),\n\t\t\t\t) *\n\t\t\t\t\t1.7;\n\t// tooltip height\n\tconst height = seriesInfos.length === 0 ? 0 : y;\n\n\treturn `<svg width=\"${width}\" height=\"${height}\">\n\t\t\t\t<rect rx=\"8\" ry=\"8\" width=\"100%\" height=\"100%\" class=\"stroke-zinc-400/10 fill-zinc-900/70 stroke-1\" />\n                ${outputSvgString}\n            </svg>`;\n};\n\n// Override the standard tooltip displayed by CursorModifier\nexport const psdRolloverTooltipTemplate: TRolloverTooltipSvgTemplate = (id, seriesInfo, rolloverTooltip) => {\n\tlet valuesBlock = '';\n\tconst tooltipProps = rolloverTooltip.tooltipProps;\n\tconst tooltipTitle = tooltipProps.tooltipTitle,\n\t\ttooltipColor = tooltipProps.tooltipColor as TWShadeableColorName,\n\t\ttooltipTextColor = twColors[tooltipColor][100],\n\t\ttooltipBorderColor = parseColorToTArgb(twColors[tooltipColor][400]),\n\t\ttooltipBGColor = parseColorToTArgb(twColors[tooltipColor][600]),\n\t\ttooltipLabelX = tooltipProps.tooltipLabelX,\n\t\ttooltipLabelY = tooltipProps.tooltipLabelY,\n\t\tshadowColor = twColors[tooltipColor][900];\n\n\ttooltipBorderColor.opacity = Math.round(255 * 0.8);\n\ttooltipBGColor.opacity = Math.round(255 * 0.2);\n\tconst tooltipDataTemplate =\n\t\trolloverTooltip.tooltipProps.tooltipDataTemplate ??\n\t\trolloverTooltip.tooltipProps.rolloverModifier.tooltipDataTemplate;\n\tconst valuesWithLabels = tooltipDataTemplate(seriesInfo, tooltipTitle, tooltipLabelX, tooltipLabelY);\n\t// tooltip width\n\tconst width =\n\t\ttooltipProps.width ??\n\t\tcalcTooltipWidth(\n\t\t\tvaluesWithLabels.reduce(function (prev, cur) {\n\t\t\t\treturn cur.length > prev ? cur.length : prev;\n\t\t\t}, 0),\n\t\t);\n\t// tooltip height\n\tconst height = tooltipProps.height ?? calcTooltipHeight(valuesWithLabels.length);\n\trolloverTooltip.updateSize(width, height);\n\tvaluesWithLabels.forEach(function (val, index) {\n\t\tvaluesBlock += `<tspan x=\"8\" dy=\"1.2em\">${val}</tspan>`;\n\t});\n\tlet blur = `<feGaussianBlur result=\"blurOut\" in=\"offOut\" stdDeviation=\"3\" />`;\n\tif (shadowColor !== undefined) {\n\t\tvar shadowRGBA = parseColorToTArgb(shadowColor);\n\t\tblur = `\n\t\t\t<feColorMatrix result=\"matrixOut\" in=\"offOut\" type=\"matrix\"\n\t\t\t\tvalues=\"0 0 0 0 \n\t\t\t\t${shadowRGBA.red / 255}\n\t\t\t\t0 0 0 0\n\t\t\t\t${shadowRGBA.green / 255}\n\t\t\t\t0 0 0 0\n\t\t\t\t${shadowRGBA.blue / 255}\n\t\t\t\t0 0 0 \n\t\t\t\t${shadowRGBA.opacity / 255}\n\t\t\t\t0 0\" \n\t\t\t/>\n\t\t\t<feGaussianBlur result=\"blurOut\" in=\"matrixOut\" stdDeviation=\"3\" />`;\n\t}\n\treturn `\n\t\t<svg class=\"scichart__rollover-tooltip transition-all\" width=\"${width}\" height=\"${height}\">\n\t\t\t<defs>\n\t\t\t\t<filter id=\"${id}\" x=\"0\" y=\"0\" width=\"200%\" height=\"200%\">\n\t\t\t\t\t<feOffset result=\"offOut\" in=\"SourceAlpha\" dx=\"3\" dy=\"3\" />\n\t\t\t\t\t\t\n\t\t\t\t\t\t${blur}\n\t\t\t\t\t<feBlend in=\"SourceGraphic\" in2=\"blurOut\" mode=\"normal\" />\n\t\t\t\t</filter>\n\t\t\t</defs>\n\t\t\t<rect rx=\"8\" ry=\"8\" width=\"100%\" height=\"100%\" fill=\"${parseTArgbToHtmlColor(tooltipBGColor)}\" stroke=\"${parseTArgbToHtmlColor(tooltipBorderColor)}\" stroke-width=\"2\"  filter=\"url(#${id}\" />\n\t\t\t<svg width=\"100%\">\n\t\t\t\t<text x=\"8\" y=\"3\" class=\"text-sm font-sans font-semibold\" dy=\"0\" fill=\"${tooltipTextColor}\">\n\t\t\t\t${valuesBlock}\n\t\t\t\t</text>\n\t\t\t</svg>\n\t\t</svg>`;\n};\n\nconst getTooltipDataTemplate = (\n\tseriesInfo: SeriesInfo,\n\ttooltipTitle: string,\n\ttooltipLabelX: string,\n\ttooltipLabelY: string,\n) => {\n\t// Lines here are returned to the tooltip and displayed as text-line per tooltip\n\tconst lines: string[] = [];\n\tlines.push(tooltipTitle);\n\tlines.push(\n\t\t`<tspan class=\"opacity-70 font-medium\">${seriesInfo.formattedYValue} @ ${seriesInfo.formattedXValue}</tspan>`,\n\t);\n\treturn lines;\n};\n\nexport const usePSDChart = () => {\n\treturn useChart(\n\t\tPSDChartDefinition,\n\t\tuseCallback((surface: SciChartSurface) => {\n\t\t\tconst xAnimationSeries = new XyDataSeries(surface.webAssemblyContext2D, {\n\t\t\t\tid: 'xAnimationSeries',\n\t\t\t\tcontainsNaN: false,\n\t\t\t\tisSorted: true,\n\t\t\t\tdataIsSortedInX: true,\n\t\t\t});\n\t\t\tsurface.addDeletable(xAnimationSeries);\n\t\t\tconst yAnimationSeries = new XyDataSeries(surface.webAssemblyContext2D, {\n\t\t\t\tid: 'yAnimationSeries',\n\t\t\t\tcontainsNaN: false,\n\t\t\t\tisSorted: true,\n\t\t\t\tdataIsSortedInX: true,\n\t\t\t});\n\t\t\tsurface.addDeletable(yAnimationSeries);\n\t\t\tconst zAnimationSeries = new XyDataSeries(surface.webAssemblyContext2D, {\n\t\t\t\tid: 'zAnimationSeries',\n\t\t\t\tcontainsNaN: false,\n\t\t\t\tisSorted: true,\n\t\t\t\tdataIsSortedInX: true,\n\t\t\t});\n\t\t\tsurface.addDeletable(zAnimationSeries);\n\t\t\tconst totalAnimationSeries = new XyDataSeries(surface.webAssemblyContext2D, {\n\t\t\t\tid: 'totalAnimationSeries',\n\t\t\t\tcontainsNaN: false,\n\t\t\t\tisSorted: true,\n\t\t\t\tdataIsSortedInX: true,\n\t\t\t});\n\t\t\tsurface.addDeletable(totalAnimationSeries);\n\t\t\t(surface.renderableSeries.asArray() as FastMountainRenderableSeries[]).forEach((rs) => {\n\t\t\t\tif (rs.id === 'total') {\n\t\t\t\t\trs.paletteProvider = PaletteFactory.createGradient(\n\t\t\t\t\t\tsurface.webAssemblyContext2D,\n\t\t\t\t\t\tnew GradientParams(new Point(0, 0), new Point(1, 1), [\n\t\t\t\t\t\t\t{ offset: 0, color: twColors.brand[400] },\n\t\t\t\t\t\t\t{ offset: 0.8, color: twColors.brand[600] },\n\t\t\t\t\t\t]),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tenableStroke: true,\n\t\t\t\t\t\t\tenableFill: true,\n\t\t\t\t\t\t\tfillOpacity: 0.17,\n\t\t\t\t\t\t\tpointMarkerOpacity: 0.5,\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\trs.rolloverModifierProps.tooltipColor = getAxisColorName(rs.id as ADXLAxes);\n\t\t\t\trs.rolloverModifierProps.tooltipTemplate = psdRolloverTooltipTemplate;\n\t\t\t\trs.rolloverModifierProps.tooltipTitle =\n\t\t\t\t\trs.id.substring(0, 1).toUpperCase() + rs.id.substring(1) + ' Power Spectral Density';\n\t\t\t\trs.animation = new WaveAnimation({\n\t\t\t\t\tduration: 500,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tsurface.chartModifiers.add(\n\t\t\t\tnew RolloverModifier({\n\t\t\t\t\t// Defines if rollover vertical line is shown\n\t\t\t\t\tshowRolloverLine: true,\n\t\t\t\t\t// Shows the default tooltip\n\t\t\t\t\tshowTooltip: false,\n\t\t\t\t\tyAxisId: PSD_CHART_AXIS_AMPLITUDE_ID,\n\t\t\t\t\t// Optional: Overrides the content of the tooltip\n\t\t\t\t\ttooltipDataTemplate: getTooltipDataTemplate,\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tsurface.chartModifiers.add(\n\t\t\t\tnew CursorModifier({\n\t\t\t\t\t// Defines if crosshair is shown\n\t\t\t\t\tcrosshairStroke: twColors.sky[400],\n\t\t\t\t\tcrosshairStrokeThickness: 1,\n\t\t\t\t\tshowXLine: true,\n\t\t\t\t\tshowYLine: true,\n\t\t\t\t\t// Shows the default tooltip\n\t\t\t\t\tshowTooltip: false,\n\t\t\t\t\tyAxisId: PSD_CHART_AXIS_AMPLITUDE_ID,\n\t\t\t\t\taxisLabelFill: twColors.zinc[900],\n\t\t\t\t\taxisLabelStroke: twColors.zinc[100],\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tanimationSeries: {\n\t\t\t\t\tx: xAnimationSeries,\n\t\t\t\t\ty: yAnimationSeries,\n\t\t\t\t\tz: zAnimationSeries,\n\t\t\t\t\ttotal: totalAnimationSeries,\n\t\t\t\t},\n\t\t\t};\n\t\t}, []),\n\t);\n};\nvar calcTooltipWidth = function (textLength: number = 20, charWidth = 4) {\n\treturn textLength * charWidth + 20;\n};\n/** @ignore */\nvar calcTooltipHeight = function (lines: number = 2, lineHeight = 15) {\n\treturn lineHeight * lines + 16;\n};\n","'use client';\nimport useWebSocket from 'react-use-websocket';\nimport { getHost } from '@/helpers/util';\nimport {\n\tInFlightRequestCallbacks,\n\tInFlightRequestTimeouts,\n\tMoonrakerResponse,\n\tMoonrakerResponseSuccess,\n} from '@/moonraker/types';\nimport { MutableRefObject, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { getLogger } from '@/app/_helpers/logger';\nimport { useKlippyStateHandler } from '@/hooks/useKlippyStateHandler';\nimport {\n\tAxisBase2D,\n\tEDataSeriesType,\n\tEWatermarkPosition,\n\tISciChart2DDefinition,\n\tNumberRange,\n\tSciChartSurface,\n\tTSciChart,\n\tThickness,\n\tXyDataSeries,\n\tbuild2DChart,\n\teasing,\n} from 'scichart';\nimport {\n\tTensor1D,\n\tTensor2D,\n\taddN,\n\tconcat,\n\tconcat2d,\n\tgather,\n\treshape,\n\tsplit,\n\tsum,\n\ttensor1d,\n\ttensor2d,\n\ttidy,\n} from '@tensorflow/tfjs-core';\nimport '@tensorflow/tfjs-backend-webgl';\nimport { powerSpectralDensity, sumPSDs, welch } from '@/app/analysis/periodogram';\nimport { ADXL_STREAM_BUFFER_SIZE } from '@/app/analysis/charts';\nimport { TChartComponentProps } from 'scichart-react/types';\nimport { ChartTheme } from '@/app/analysis/chart-theme';\nimport {\n\tADXL345SensorName,\n\tAccumulatedPSD,\n\tKlipperADXL345SubscriptionData,\n\tKlipperADXL345SubscriptionResponse,\n\tPSD,\n\tklipperADXL345SubscriptionDataSchema,\n\tklipperADXL345SubscriptionResponseSchema,\n} from '@/zods/analysis';\nimport { twJoin } from 'tailwind-merge';\nimport { FullLoadScreen } from '@/components/common/full-load-screen';\nimport { toast } from 'sonner';\n\nconst getWsURL = () => {\n\tconst host = getHost();\n\tif (host == null || host.trim() == '') {\n\t\treturn null;\n\t}\n\tif (typeof window == 'undefined') {\n\t\treturn null;\n\t}\n\treturn `ws://${host}:7125/klippysocket`;\n};\n\nlet REQ_ID = 0;\n\nexport interface RealtimeADXLOptions {\n\tonDataUpdate?: (status: KlipperADXL345SubscriptionData) => void;\n\tonSubscriptionFailure?: ReactCallback<(err: Error) => void>;\n\tonSubscriptionSuccess?: ReactCallback<(header: KlipperADXL345SubscriptionResponse['header']) => void>;\n\tenabled?: boolean;\n\tsensor: ADXL345SensorName;\n}\n\nconst isSuccessResponse = (res: MoonrakerResponse): res is MoonrakerResponseSuccess => {\n\treturn !('error' in res);\n};\n\nexport const useRealtimeADXL = <\n\tResponseType extends MoonrakerResponse,\n\tSuccessResponseType extends MoonrakerResponseSuccess,\n>(\n\toptions: RealtimeADXLOptions,\n) => {\n\tconst [wsUrl, setWsUrl] = useState(getWsURL());\n\tconst inFlightRequests = useRef<InFlightRequestCallbacks<SuccessResponseType['result']>>({});\n\tconst inFlightRequestTimeouts = useRef<InFlightRequestTimeouts>({});\n\tconst [isSubscribed, setIsSubscribed] = useState(false);\n\tconst { onSubscriptionFailure, onDataUpdate, sensor, enabled, onSubscriptionSuccess } = options;\n\tconst isSubscribedRef = useRef(isSubscribed);\n\tisSubscribedRef.current = isSubscribed;\n\tconst kippyState = useKlippyStateHandler();\n\tuseEffect(() => {\n\t\tsetWsUrl(getWsURL());\n\t}, []);\n\tconst { lastJsonMessage, sendJsonMessage, readyState } = useWebSocket<ResponseType>(\n\t\tenabled === false ? null : wsUrl,\n\t\t{\n\t\t\tshouldReconnect: (closeEvent) => {\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tonMessage: (message) => {\n\t\t\t\tif (onDataUpdate && isSubscribedRef.current) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst parsed = JSON.parse(message.data) as ResponseType;\n\t\t\t\t\t\tif (isSuccessResponse(parsed) && parsed.params != null && 'data' in parsed.params) {\n\t\t\t\t\t\t\tconst res = klipperADXL345SubscriptionDataSchema.parse(parsed.params);\n\t\t\t\t\t\t\tonDataUpdate?.(res);\n\t\t\t\t\t\t} else if (!isSuccessResponse(parsed)) {\n\t\t\t\t\t\t\tgetLogger().error('Error in response from klipper socket', parsed);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.warn('OnMessage: Failed to parse message', e, message.data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\treconnectAttempts: Infinity,\n\t\t\treconnectInterval: 3000,\n\t\t\tshare: false,\n\t\t},\n\t);\n\n\tconst subscribe = useCallback(async () => {\n\t\tconst id = ++REQ_ID;\n\t\treturn new Promise<SuccessResponseType['result']>((resolve, reject) => {\n\t\t\tinFlightRequests.current[id] = (err, result) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tif (result && typeof result === 'object' && 'error' in result && result.error) {\n\t\t\t\t\treturn reject(result.error);\n\t\t\t\t}\n\t\t\t\tif (result == null) {\n\t\t\t\t\treturn reject(new Error('No result. Unknown response format.'));\n\t\t\t\t}\n\t\t\t\tresolve(result);\n\t\t\t};\n\t\t\tlet timeout = 10 * 1000;\n\t\t\tinFlightRequestTimeouts.current[id] = window.setTimeout(() => {\n\t\t\t\tinFlightRequests.current[id]?.(new Error('Request timed out'), null);\n\t\t\t\tdelete inFlightRequests.current[id];\n\t\t\t\tdelete inFlightRequestTimeouts.current[id];\n\t\t\t}, timeout); // 10 second timeout.\n\t\t\tsendJsonMessage({\n\t\t\t\tjsonrpc: '2.0',\n\t\t\t\tmethod: 'adxl345/dump_adxl345',\n\t\t\t\tparams: {\n\t\t\t\t\tsensor: sensor,\n\t\t\t\t\tresponse_template: {},\n\t\t\t\t},\n\t\t\t\tid: id,\n\t\t\t});\n\t\t});\n\t}, [sensor, sendJsonMessage]);\n\n\tuseEffect(() => {\n\t\tif (readyState === 1 && kippyState === 'ready' && !isSubscribedRef.current) {\n\t\t\tsubscribe()\n\t\t\t\t.then((res) => {\n\t\t\t\t\tconst result = klipperADXL345SubscriptionResponseSchema.parse(res);\n\t\t\t\t\tgetLogger().info(result, 'Subscribed to ADXL345');\n\t\t\t\t\tsetIsSubscribed(true);\n\t\t\t\t\tonSubscriptionSuccess?.(result.header);\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tgetLogger().error(err);\n\t\t\t\t\tsetIsSubscribed(false);\n\t\t\t\t\tif (onSubscriptionFailure) {\n\t\t\t\t\t\tonSubscriptionFailure(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoast.error('Failed to start accelerometer stream', { description: err.message });\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t} else if (isSubscribedRef.current) {\n\t\t\tsetIsSubscribed(false);\n\t\t}\n\t}, [kippyState, readyState, subscribe, onSubscriptionFailure, onSubscriptionSuccess]);\n\n\tuseEffect(() => {\n\t\tif (lastJsonMessage?.id && inFlightRequests.current[lastJsonMessage.id]) {\n\t\t\twindow.clearTimeout(inFlightRequestTimeouts.current[lastJsonMessage.id]);\n\t\t\tif (isSuccessResponse(lastJsonMessage)) {\n\t\t\t\tinFlightRequests.current[lastJsonMessage.id](null, lastJsonMessage.result);\n\t\t\t} else {\n\t\t\t\tinFlightRequests.current[lastJsonMessage.id](new Error(lastJsonMessage.error.message), null);\n\t\t\t}\n\t\t\tdelete inFlightRequestTimeouts.current[lastJsonMessage.id];\n\t\t\tdelete inFlightRequests.current[lastJsonMessage.id];\n\t\t}\n\t}, [lastJsonMessage]);\n\n\tuseEffect(() => {\n\t\t// cleanup\n\t\treturn () => {\n\t\t\tisSubscribedRef.current = false;\n\t\t\tfor (const reqId in inFlightRequestTimeouts.current) {\n\t\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t\t\tdelete inFlightRequestTimeouts.current[reqId];\n\t\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t\t\tdelete inFlightRequests.current[reqId];\n\t\t\t}\n\t\t};\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\treturn {\n\t\tisSubscribed,\n\t};\n};\n\nconst theme = new ChartTheme();\nexport const useChart = <T,>(\n\tdefinition: ISciChart2DDefinition | null,\n\tinitializer?: ReactCallback<(surface: SciChartSurface) => T>,\n\tindent = true,\n) => {\n\tconst surface = useRef<SciChartSurface | null>(null);\n\tconst [isInitialized, setIsInitialized] = useState(false);\n\tconst data = useRef<T | null>(null);\n\treturn useMemo(\n\t\t() => ({\n\t\t\tforwardProps: {\n\t\t\t\tinitChart: async (rootElement: string | HTMLDivElement) => {\n\t\t\t\t\tlet chart: null | { wasmContext: TSciChart; sciChartSurface: SciChartSurface } = null;\n\t\t\t\t\tif (definition != null) {\n\t\t\t\t\t\tconst orgPadding = definition.surface?.padding;\n\t\t\t\t\t\tconst def = {\n\t\t\t\t\t\t\t...definition,\n\t\t\t\t\t\t\tsurface: {\n\t\t\t\t\t\t\t\t...definition.surface,\n\t\t\t\t\t\t\t\tpadding: new Thickness(\n\t\t\t\t\t\t\t\t\torgPadding?.top ?? 0,\n\t\t\t\t\t\t\t\t\torgPadding?.right ?? 0,\n\t\t\t\t\t\t\t\t\torgPadding?.bottom ?? 0,\n\t\t\t\t\t\t\t\t\t(orgPadding?.left ?? 0) + (indent ? 300 : 0),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t\tchart = await build2DChart(rootElement, def);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchart = await SciChartSurface.create(rootElement, {\n\t\t\t\t\t\t\ttheme: theme,\n\t\t\t\t\t\t\tpadding: new Thickness(0, 0, 0, indent ? 300 : 0),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tchart.sciChartSurface.watermarkPosition = EWatermarkPosition.BottomLeft;\n\t\t\t\t\tchart.sciChartSurface.watermarkRelativeToCanvas = true;\n\t\t\t\t\tsurface.current = chart.sciChartSurface;\n\t\t\t\t\tif (initializer) {\n\t\t\t\t\t\tdata.current = initializer(chart.sciChartSurface);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn { sciChartSurface: chart.sciChartSurface };\n\t\t\t\t},\n\t\t\t\tonInit: () => setIsInitialized(true),\n\t\t\t\tstyle: {\n\t\t\t\t\tmarginLeft: indent ? -300 : 0,\n\t\t\t\t},\n\n\t\t\t\tfallback: <FullLoadScreen className={twJoin(indent && 'ml-[150px]', 'bg-zinc-900')} />,\n\t\t\t} satisfies TChartComponentProps,\n\t\t\tsurface,\n\t\t\tisInitialized,\n\t\t\tdata,\n\t\t}),\n\t\t[indent, isInitialized, definition, initializer],\n\t);\n};\n\nconst defaultAxisMap: KlipperADXL345SubscriptionResponse['header'] = [\n\t`time`,\n\t`x_acceleration`,\n\t`y_acceleration`,\n\t`z_acceleration`,\n];\n\nexport const useADXLFifoTensor = (\n\tdataHeader: KlipperADXL345SubscriptionResponse['header'] = defaultAxisMap,\n\tfifoCapacity: number = 8192,\n) => {\n\tconst buffer = useRef<Tensor2D | null>(null);\n\tconst sampleRate = useRef<number>(0);\n\tconst [dropped, setDropped] = useState(0);\n\tconst take = useCallback((count: number) => {\n\t\tif (buffer.current == null) {\n\t\t\treturn null;\n\t\t}\n\t\tconst max = Math.min(count, buffer.current.shape[0]);\n\t\tconst [out, keep] = split<Tensor2D>(buffer.current, [max, buffer.current.shape[0] - max], 0);\n\t\tbuffer.current.dispose();\n\t\tbuffer.current = keep;\n\t\treturn out;\n\t}, []);\n\tconst axisMap = useMemo(() => {\n\t\treturn [\n\t\t\tdataHeader.findIndex((v) => v.startsWith(`time`)),\n\t\t\tdataHeader.findIndex((v) => v.startsWith(`x_acceleration`)),\n\t\t\tdataHeader.findIndex((v) => v.startsWith(`y_acceleration`)),\n\t\t\tdataHeader.findIndex((v) => v.startsWith(`z_acceleration`)),\n\t\t];\n\t}, [dataHeader]);\n\tconst onData = useCallback(\n\t\t(status: KlipperADXL345SubscriptionData) => {\n\t\t\tconst incoming = gather<Tensor2D>(status.data, axisMap, 1);\n\t\t\tconst newBuffer = buffer.current ? concat2d([buffer.current, incoming], 0) : incoming;\n\t\t\tif (newBuffer !== incoming) {\n\t\t\t\tincoming.dispose();\n\t\t\t}\n\t\t\tbuffer.current?.dispose();\n\t\t\tbuffer.current = newBuffer;\n\t\t\tsampleRate.current = status.data.length / (status.data[status.data.length - 1][0] - status.data[0][0]);\n\t\t\tif (buffer.current.shape[0] > fifoCapacity) {\n\t\t\t\tconsole.debug('Fifo capacity exceeded, dropping frames', buffer.current.shape[0]);\n\t\t\t\tconst drop = buffer.current.shape[0] - fifoCapacity;\n\t\t\t\ttake(drop)?.dispose();\n\t\t\t\tsetDropped((prev) => prev + drop);\n\t\t\t}\n\t\t},\n\t\t[axisMap, fifoCapacity, take],\n\t);\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tbuffer.current?.dispose();\n\t\t\tbuffer.current = null;\n\t\t};\n\t}, []);\n\treturn {\n\t\tonData: onData,\n\t\ttake: take,\n\t\tbuffer: buffer,\n\t\tdropped: dropped,\n\t\tsampleRate: sampleRate,\n\t};\n};\n\nexport const isXySeries = (series: any): series is XyDataSeries => {\n\treturn series.type === EDataSeriesType.Xy;\n};\n\nexport const useBufferedADXLSignal = (\n\tfifoTensor: ReturnType<typeof useADXLFifoTensor>,\n\t/**\n\t * NOTE: Make absolutely sure to dispose of the tensors passed to this function\n\t */\n\tupdateFn: null | ((time: Tensor1D, x: Tensor1D, y: Tensor1D, z: Tensor1D) => void),\n) => {\n\tconst lastUpdate = useRef<number>(new Date().getTime());\n\tconst update = useRef(updateFn);\n\tupdate.current = updateFn;\n\tconst tick = useCallback(async () => {\n\t\tconst sinceLast = new Date().getTime() - lastUpdate.current;\n\t\tif (fifoTensor.buffer.current == null || fifoTensor.buffer.current.shape[0] < ADXL_STREAM_BUFFER_SIZE / 2) {\n\t\t\treturn;\n\t\t}\n\t\tlet toTake = ADXL_STREAM_BUFFER_SIZE / 2;\n\t\tif (fifoTensor.buffer.current.shape[0] > ADXL_STREAM_BUFFER_SIZE * 12) {\n\t\t\ttoTake += ADXL_STREAM_BUFFER_SIZE;\n\t\t}\n\t\tconst data = fifoTensor.take(toTake);\n\t\tif (data == null) {\n\t\t\treturn;\n\t\t}\n\t\tconst [time, x, y, z] = split<Tensor2D>(data, 4, 1);\n\t\tupdate.current?.(\n\t\t\treshape(time, [time.shape[0]]),\n\t\t\treshape(x, [x.shape[0]]),\n\t\t\treshape(y, [y.shape[0]]),\n\t\t\treshape(z, [z.shape[0]]),\n\t\t);\n\t\ttime.dispose();\n\t\tdata.dispose();\n\t\tx.dispose();\n\t\ty.dispose();\n\t\tz.dispose();\n\t}, [fifoTensor]);\n\treturn tick;\n};\n\nexport const useBufferedPSD = (\n\tsampleRate: MutableRefObject<number>,\n\tupdateFn: null | ((x: PSD, y: PSD, z: PSD, total: PSD) => void),\n) => {\n\tconst xref = useRef<Tensor1D>(tensor1d([]));\n\tconst yref = useRef<Tensor1D>(tensor1d([]));\n\tconst zref = useRef<Tensor1D>(tensor1d([]));\n\tconst update = useRef(updateFn);\n\tupdate.current = updateFn;\n\n\tconst onData = useCallback(\n\t\tasync (time: Tensor1D, x: Tensor1D, y: Tensor1D, z: Tensor1D, isDetrended?: boolean) => {\n\t\t\tconst rate = sampleRate.current;\n\t\t\tconst newX = concat([x, xref.current]);\n\t\t\tconst newY = concat([y, yref.current]);\n\t\t\tconst newZ = concat([z, zref.current]);\n\t\t\tx.dispose();\n\t\t\ty.dispose();\n\t\t\tz.dispose();\n\t\t\ttime.dispose();\n\t\t\txref.current.dispose();\n\t\t\tyref.current.dispose();\n\t\t\tzref.current.dispose();\n\t\t\txref.current = newX;\n\t\t\tyref.current = newY;\n\t\t\tzref.current = newZ;\n\t\t\tif (xref.current.shape[0] > rate) {\n\t\t\t\tconst xData = xref.current.clone();\n\t\t\t\tconst yData = yref.current.clone();\n\t\t\t\tconst zData = zref.current.clone();\n\t\t\t\tconst totalData = addN([xData, yData, zData]);\n\t\t\t\txref.current.dispose();\n\t\t\t\tyref.current.dispose();\n\t\t\t\tzref.current.dispose();\n\t\t\t\txref.current = tensor1d([]);\n\t\t\t\tyref.current = tensor1d([]);\n\t\t\t\tzref.current = tensor1d([]);\n\t\t\t\tconst [xpsd, ypsd, zpsd] = await Promise.all([\n\t\t\t\t\tpowerSpectralDensity(xData, rate, { isDetrended: isDetrended }),\n\t\t\t\t\tpowerSpectralDensity(yData, rate, { isDetrended: isDetrended }),\n\t\t\t\t\tpowerSpectralDensity(zData, rate, { isDetrended: isDetrended }),\n\t\t\t\t]);\n\t\t\t\tconst totalpsd = sumPSDs([xpsd, ypsd, zpsd]);\n\t\t\t\txData.dispose();\n\t\t\t\tyData.dispose();\n\t\t\t\tzData.dispose();\n\t\t\t\ttotalData.dispose();\n\t\t\t\tupdate.current?.(xpsd, ypsd, zpsd, totalpsd);\n\t\t\t}\n\t\t},\n\t\t[sampleRate],\n\t);\n\treturn onData;\n};\n\nexport const useAccumulatedPSD = (updateFn?: (result: AccumulatedPSD) => void) => {\n\tconst [isAccumulating, setIsAccumulating] = useState(false);\n\tconst psds = useRef<{ x: PSD[]; y: PSD[]; z: PSD[]; total: PSD[] }>({ x: [], y: [], z: [], total: [] });\n\tconst update = useRef(updateFn);\n\tupdate.current = updateFn;\n\n\tconst start = useCallback(async () => {\n\t\tpsds.current = { x: [], y: [], z: [], total: [] };\n\t\tsetIsAccumulating(true);\n\t}, []);\n\n\tconst stop = useCallback(async () => {\n\t\tconst old = psds.current;\n\t\tconst [x, y, z, total] = await Promise.all([welch(old.x), welch(old.y), welch(old.z), welch(old.total)]);\n\t\tpsds.current = { x: [], y: [], z: [], total: [] };\n\t\tsetIsAccumulating(false);\n\t\treturn { x, y, z, total, source: old };\n\t}, []);\n\n\tconst onData = useCallback(\n\t\tasync (newX: PSD, newY: PSD, newZ: PSD, newTotal: PSD) => {\n\t\t\tif (!isAccumulating) {\n\t\t\t\tconst result = {\n\t\t\t\t\tx: newX,\n\t\t\t\t\ty: newY,\n\t\t\t\t\tz: newZ,\n\t\t\t\t\ttotal: newTotal,\n\t\t\t\t\tsource: {\n\t\t\t\t\t\tx: [newX],\n\t\t\t\t\t\ty: [newY],\n\t\t\t\t\t\tz: [newZ],\n\t\t\t\t\t\ttotal: [newTotal],\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tupdate.current?.(result);\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tpsds.current.x.push(newX);\n\t\t\tpsds.current.y.push(newY);\n\t\t\tpsds.current.z.push(newZ);\n\t\t\tpsds.current.total.push(newTotal);\n\t\t\tconst [x, y, z, total] = await Promise.all([\n\t\t\t\twelch(psds.current.x),\n\t\t\t\twelch(psds.current.y),\n\t\t\t\twelch(psds.current.z),\n\t\t\t\twelch(psds.current.total),\n\t\t\t]);\n\t\t\tconst result = { x, y, z, total, source: psds.current };\n\t\t\tupdate.current?.(result);\n\t\t\treturn result;\n\t\t},\n\t\t[isAccumulating],\n\t);\n\n\treturn useMemo(\n\t\t() => ({\n\t\t\tstartAccumulation: start,\n\t\t\tstopAccumulation: stop,\n\t\t\tonData: onData,\n\t\t\tisAccumulating,\n\t\t}),\n\t\t[isAccumulating, onData, start, stop],\n\t);\n};\n\nexport function useTicker(tickOrTargetFps: () => Promise<void>, tick?: undefined): void;\nexport function useTicker(tickOrTargetFps: number, tick: () => Promise<void>): void;\nexport function useTicker(tickOrTargetFps: number | (() => Promise<void>), tick?: () => Promise<void>) {\n\tif (typeof tickOrTargetFps === 'function') {\n\t\ttick = tickOrTargetFps;\n\t}\n\tif (tick == null) {\n\t\tthrow new Error('Tick function is required');\n\t}\n\tconst fnRef = useRef(tick);\n\tfnRef.current = tick;\n\tconst interval = Math.floor(1000 / (typeof tickOrTargetFps === 'function' ? 50 : tickOrTargetFps));\n\tuseEffect(() => {\n\t\tlet id = 0;\n\t\tconst update = async () => {\n\t\t\tawait fnRef.current();\n\t\t\tid = window.setTimeout(update, interval);\n\t\t};\n\t\tid = window.setTimeout(update, interval);\n\t\treturn () => {\n\t\t\twindow.clearTimeout(id);\n\t\t};\n\t}, [interval]);\n}\n\nconst maximumRangeUnion = (axis: AxisBase2D | (AxisBase2D | null)[]) => {\n\tif (Array.isArray(axis)) {\n\t\treturn axis.reduce((prev, cur) => {\n\t\t\tif (cur == null) {\n\t\t\t\treturn prev;\n\t\t\t}\n\t\t\tconst max = cur.getMaximumRange();\n\t\t\treturn prev.union(max);\n\t\t}, new NumberRange());\n\t}\n\treturn axis.getMaximumRange();\n};\nconst visibleRangeUnion = (axis: AxisBase2D | (AxisBase2D | null)[]) => {\n\tif (Array.isArray(axis)) {\n\t\treturn axis.reduce((prev, cur) => {\n\t\t\tif (cur == null) {\n\t\t\t\treturn prev;\n\t\t\t}\n\t\t\tconst max = cur.visibleRange;\n\t\t\treturn prev.union(max);\n\t\t}, new NumberRange());\n\t}\n\treturn axis.visibleRange;\n};\nconst growByUnion = (axis: AxisBase2D | (AxisBase2D | null)[]) => {\n\tif (Array.isArray(axis)) {\n\t\treturn axis.reduce((prev, cur) => {\n\t\t\tif (cur == null) {\n\t\t\t\treturn prev;\n\t\t\t}\n\t\t\tconst max = cur.growBy ?? new NumberRange();\n\t\t\treturn prev.union(max);\n\t\t}, new NumberRange());\n\t}\n\treturn axis.growBy;\n};\n\nexport function useDynamicAxisRange(\n\taxis: AxisBase2D | (AxisBase2D | null)[] | null,\n\tminimum: NumberRange = new NumberRange(0, 0),\n) {\n\tconst maxRef = useRef<NumberRange | null>(axis ? maximumRangeUnion(axis) : null);\n\tconst lastUpdate = useRef<number>(new Date().getTime());\n\tconst lastChange = useRef<number>(new Date().getTime());\n\n\tconst update = useCallback(\n\t\t(dataRange: NumberRange = minimum) => {\n\t\t\tif (axis == null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst axes = Array.isArray(axis) ? axis : [axis];\n\t\t\tif (maxRef.current == null) {\n\t\t\t\tmaxRef.current = visibleRangeUnion(axis);\n\t\t\t}\n\t\t\tconst sinceLastUpdate = new Date().getTime() - lastUpdate.current;\n\t\t\tconst sinceLastChange = new Date().getTime() - lastChange.current;\n\t\t\tlastUpdate.current = new Date().getTime();\n\t\t\tlet max = maximumRangeUnion(axis);\n\t\t\tif (dataRange) {\n\t\t\t\tmax = max.union(dataRange);\n\t\t\t}\n\t\t\tconst growBy = growByUnion(axis);\n\t\t\tif (growBy) {\n\t\t\t\tmax.growBy(growBy);\n\t\t\t}\n\t\t\tlet newMax: null | number = null;\n\t\t\tlet newMin: null | number = null;\n\t\t\tif (max.max > maxRef.current.max) {\n\t\t\t\tnewMax = max.max;\n\t\t\t}\n\t\t\tif (max.min < maxRef.current.min) {\n\t\t\t\tnewMin = max.min;\n\t\t\t}\n\t\t\tif (newMax != null || newMin != null) {\n\t\t\t\taxes.forEach((a) => {\n\t\t\t\t\tif (maxRef.current == null || a == null) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ta.animateVisibleRange(\n\t\t\t\t\t\tnew NumberRange(\n\t\t\t\t\t\t\tMath.min(newMin ?? maxRef.current.min, minimum.min),\n\t\t\t\t\t\t\tMath.max(newMax ?? maxRef.current.max, minimum.max),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tsinceLastUpdate,\n\t\t\t\t\t\teasing.inOutCirc,\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\tlastChange.current = new Date().getTime();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (sinceLastChange > sinceLastUpdate * 3) {\n\t\t\t\tif (max.max < maxRef.current.max) {\n\t\t\t\t\tnewMax = maxRef.current.max - (maxRef.current.max - max.max);\n\t\t\t\t}\n\t\t\t\tif (max.min > maxRef.current.min) {\n\t\t\t\t\tnewMin = maxRef.current.min + (max.min - maxRef.current.min);\n\t\t\t\t}\n\t\t\t\tif (newMax != null || newMin != null) {\n\t\t\t\t\taxes.forEach((a) => {\n\t\t\t\t\t\tif (maxRef.current == null || a == null) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ta.animateVisibleRange(\n\t\t\t\t\t\t\tnew NumberRange(\n\t\t\t\t\t\t\t\tMath.min(newMin ?? maxRef.current.min, minimum.min),\n\t\t\t\t\t\t\t\tMath.max(newMax ?? maxRef.current.max, minimum.max),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tsinceLastUpdate / 2,\n\t\t\t\t\t\t\teasing.inOutCirc,\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tlastChange.current = new Date().getTime();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[axis, minimum],\n\t);\n\n\treturn update;\n}\n","import { signal as tfSignal, Tensor1D, sum, pow, div, mean, sub, tidy } from '@tensorflow/tfjs-core';\nimport '@tensorflow/tfjs-backend-webgl';\nimport { NumberRange } from 'scichart';\nimport { PSD } from '@/zods/analysis';\n\n/**\n * Returns the ceil of the log2 of the absolute value of the passed number\n * @memberof module:bcijs\n * @function\n * @name nextpow2\n * @param {number} num\n * @returns {number} The ceil of the log2 of the absolute value of the passed number\n * @example\n * nextpow2(8); // 3\n * nextpow2(9); // 4\n * nextpow2(16); // 4\n * nextpow2(30); // 5\n * nextpow2(0); // -Infinity\n */\nexport function nextpow2(num: number): number {\n\treturn Math.ceil(Math.log2(Math.abs(num)));\n}\n\nexport const detrendSignal = (signal: Tensor1D) => tidy(() => sub<Tensor1D>(signal, mean(signal, 0, true)));\n\nconst WINDOW_T_SEC = 0.5;\nconst MAX_FREQ = 200;\n\n/**\n * Estimates the power spectral density of a real-valued input signal using the periodogram method and a hann window.\n * Output units are based on that of the input signal, of the form X^2/Hz, where X is the units of the input signal.\n *\n * @memberof module:bcijs\n * @function\n * @name periodogram\n * @param {number[]} signal - The signal.\n * @param {number} sampleRate - sample rate in Hz\n * @param {Object} [options]\n * @param {number} [options.fftSize=1 << nextpow2(sample_rate * WINDOW_T_SEC - 1)] - Size of the fft to be used. Should be a power of 2.\n * @returns {Object} Object with keys 'estimates' (the psd estimates) and 'frequencies' (the corresponding frequencies in Hz)\n */\nexport async function powerSpectralDensity(\n\tsignal: Tensor1D,\n\tsampleRate: number,\n\toptions?: { fftSize?: number; _scaling?: string; isDetrended?: boolean },\n): Promise<PSD> {\n\tlet { fftSize, _scaling } = Object.assign(\n\t\t{\n\t\t\tfftSize: 1 << nextpow2(sampleRate * WINDOW_T_SEC - 1),\n\t\t\t_scaling: 'psd',\n\t\t},\n\t\toptions,\n\t);\n\t// Validate _scaling\n\tif (_scaling != 'psd' && _scaling != 'none') {\n\t\tthrow new Error('Unknown scaling');\n\t}\n\n\tlet scaling_factor: number = _scaling === 'none' ? 1 : 2;\n\tconst win = tfSignal.hannWindow(fftSize);\n\tlet klipScale = (await tidy(() => div(div(1.0, sum(pow(win, 2))), sampleRate)).array()) as number;\n\n\tconst detrended = options?.isDetrended ? signal : detrendSignal(signal);\n\t// console.log('stft options', sample_rate, signal.size, fftSize);\n\tlet f = tfSignal.stft(detrended, fftSize, Math.floor(fftSize / 2), fftSize, tfSignal.hannWindow);\n\n\tlet x = (await f.array()) as number[][];\n\tf.dispose();\n\tdetrended.dispose();\n\twin.dispose();\n\n\treturn welch(\n\t\tx.map((series) => {\n\t\t\t// Get the power of each FFT bin value\n\t\t\tlet powers: number[] = [];\n\t\t\tlet frequencies: number[] = [];\n\t\t\tlet maxPower = 0;\n\t\t\tlet minPower = 0;\n\t\t\tfor (var i = 0; i < series.length - 1; i += 2) {\n\t\t\t\tconst frequency = (i === 0 ? 0 : i / 2) * (sampleRate / fftSize);\n\t\t\t\tif (frequency > MAX_FREQ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst nextFrequency = ((i + 2) / 2) * (sampleRate / fftSize);\n\t\t\t\t// apply scaling\n\t\t\t\t// magnitude is sqrt(real^2 + imag^2), power is magnitude^2\n\t\t\t\tlet power: number = series[i] ** 2 + series[i + 1] ** 2;\n\t\t\t\tpower *= klipScale;\n\t\t\t\t// Don't scale DC or Nyquist by 2\n\t\t\t\tif (_scaling == 'psd' && i > 0 && nextFrequency < MAX_FREQ) {\n\t\t\t\t\tpower *= scaling_factor;\n\t\t\t\t}\n\t\t\t\tif (power > maxPower) {\n\t\t\t\t\tmaxPower = power;\n\t\t\t\t}\n\t\t\t\tif (power < minPower) {\n\t\t\t\t\tminPower = power;\n\t\t\t\t}\n\t\t\t\tpowers.push(power);\n\t\t\t\tfrequencies.push(frequency);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\testimates: powers,\n\t\t\t\tfrequencies: frequencies,\n\t\t\t\tpowerRange: new NumberRange(minPower, maxPower),\n\t\t\t};\n\t\t}),\n\t);\n}\n\n// Keep this async so that we can potentially move it to the GPU\nexport const welch = async (PSDs: PSD[]): Promise<PSD> => {\n\tif (PSDs.length == 0) throw new Error('Unable to calculate any PSD estimates');\n\tif (PSDs.length == 1) {\n\t\tconsole.warn('Not enough data to compute more than one segment, returning single modified periodogram.');\n\t\treturn PSDs[0];\n\t}\n\n\t// Compute average PSD\n\tlet num_estimates = PSDs[0].estimates.length;\n\tlet avg = new Array(num_estimates).fill(0);\n\tfor (let p = 0; p < PSDs.length; p++) {\n\t\tfor (let i = 0; i < num_estimates; i++) {\n\t\t\tavg[i] += PSDs[p].estimates[i];\n\t\t}\n\t}\n\tlet maxPower = 0;\n\tlet minPower = 0;\n\tfor (let i = 0; i < num_estimates; i++) {\n\t\tavg[i] = avg[i] / PSDs.length;\n\t\tif (avg[i] > maxPower) {\n\t\t\tmaxPower = avg[i];\n\t\t}\n\t\tif (avg[i] < minPower) {\n\t\t\tminPower = avg[i];\n\t\t}\n\t}\n\n\treturn {\n\t\testimates: avg,\n\t\tfrequencies: PSDs[0].frequencies,\n\t\tpowerRange: new NumberRange(minPower, maxPower),\n\t};\n};\n\nexport const sumPSDs = (PSDs: PSD[]): PSD => {\n\tlet num_estimates = PSDs[0].estimates.length;\n\tlet sum = new Array(num_estimates).fill(0);\n\tfor (let p = 0; p < PSDs.length; p++) {\n\t\tfor (let i = 0; i < num_estimates; i++) {\n\t\t\tsum[i] += PSDs[p].estimates[i];\n\t\t}\n\t}\n\tconst { minPower, maxPower } = PSDs.reduce(\n\t\t(acc, psd) => {\n\t\t\tif (psd.powerRange.min < acc.minPower) {\n\t\t\t\tacc.minPower = psd.powerRange.min;\n\t\t\t}\n\t\t\tif (psd.powerRange.max > acc.maxPower) {\n\t\t\t\tacc.maxPower = psd.powerRange.max;\n\t\t\t}\n\t\t\treturn acc;\n\t\t},\n\t\t{ minPower: 0, maxPower: 0 },\n\t);\n\treturn {\n\t\testimates: sum,\n\t\tfrequencies: PSDs[0].frequencies,\n\t\tpowerRange: new NumberRange(minPower, maxPower),\n\t};\n};\n","import { Spinner } from '@/components/common/spinner';\nimport { twJoin } from 'tailwind-merge';\n\nexport const FullLoadScreen = (props: { className?: string }) => {\n\treturn (\n\t\t<div className={twJoin('flex h-full w-full flex-1 items-center justify-center', props.className)}>\n\t\t\t<Spinner className=\"h-8 w-8\" />\n\t\t</div>\n\t);\n};\n","'use client';\nimport { useIsClient } from '@/hooks/isClient';\nimport dynamic from 'next/dynamic';\nimport React, { lazy } from 'react';\nimport { FullLoadScreen } from '@/components/common/full-load-screen';\nexport const NoSSR = (props: React.PropsWithChildren<{ fallback?: React.ReactNode }>) => {\n\tconst isClient = useIsClient();\n\treturn isClient ? <DynamicImport>{props.children}</DynamicImport> : props.fallback ?? <FullLoadScreen />;\n};\nconst DynamicImport = lazy(() =>\n\tPromise.resolve({ default: (props: React.PropsWithChildren) => <>{props.children}</> }),\n);\n","import { twMerge } from 'tailwind-merge';\n\nexport const Spinner: React.FC<{ className?: string; noMargin?: boolean }> = (props) => {\n\treturn (\n\t\t<svg\n\t\t\tclassName={twMerge(\n\t\t\t\t'h-5 w-5 animate-spin text-black dark:text-white',\n\t\t\t\t!props.noMargin ? '-ml-1 mr-3' : '',\n\t\t\t\tprops.className,\n\t\t\t)}\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tfill=\"none\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t>\n\t\t\t<circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n\t\t\t<path\n\t\t\t\tclassName=\"opacity-75\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n\t\t\t></path>\n\t\t</svg>\n\t);\n};\n","'use client';\nimport { useEffect, useState } from 'react';\n\nexport const useIsClient = () => {\n\tconst [isClient, setIsClient] = useState(false);\n\tuseEffect(() => {\n\t\tif (typeof window !== 'undefined') {\n\t\t\tsetIsClient(true);\n\t\t}\n\t}, []);\n\treturn isClient;\n};\n","'use client';\n\nimport { useCallback, useEffect, useState } from 'react';\nimport { atom, useSetRecoilState } from 'recoil';\nimport { useMoonraker } from '@/moonraker/hooks';\n\nexport type KlippyReadyStates = 'ready' | 'error' | 'shutdown' | 'startup' | 'unknown';\n\nexport const useKlippyStateHandler = () => {\n\tconst { query, lastMessage } = useMoonraker({\n\t\tpassThroughUpdateMethods: ['notify_klippy_ready', 'notify_klippy_shutdown', 'notify_klippy_disconnected'],\n\t});\n\tconst [klippyReadyState, setKlippyReadyState] = useState<KlippyReadyStates>('unknown');\n\n\tconst queryKlippyState = useCallback(async () => {\n\t\tif (query != null) {\n\t\t\ttry {\n\t\t\t\tconst serverInfo = await query('server.info');\n\t\t\t\tif (serverInfo?.klippy_state == null) return;\n\t\t\t\tconst klippyState: KlippyReadyStates = serverInfo.klippy_state;\n\t\t\t\tsetKlippyReadyState(klippyState);\n\t\t\t\tif (klippyState === 'startup') {\n\t\t\t\t\t// Query for server info in two seconds as instructed by the moonraker docs.\n\t\t\t\t\t// Seems unnecessary with globally published events?\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tqueryKlippyState();\n\t\t\t\t\t}, 2000);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsetKlippyReadyState('unknown');\n\t\t\t}\n\t\t}\n\t}, [query, setKlippyReadyState]);\n\n\tuseEffect(() => {\n\t\tif (query != null) {\n\t\t\tqueryKlippyState();\n\t\t}\n\t}, [query, queryKlippyState]);\n\n\tuseEffect(() => {\n\t\tif (lastMessage && 'method' in lastMessage && lastMessage.method === 'notify_klippy_ready') {\n\t\t\tsetKlippyReadyState('ready');\n\t\t}\n\t\tif (lastMessage && 'method' in lastMessage && lastMessage.method === 'notify_klippy_shutdown') {\n\t\t\tsetKlippyReadyState('shutdown');\n\t\t}\n\t\tif (lastMessage && 'method' in lastMessage && lastMessage.method === 'notify_klippy_disconnected') {\n\t\t\tsetKlippyReadyState('unknown');\n\t\t\tqueryKlippyState();\n\t\t}\n\t}, [lastMessage, queryKlippyState, setKlippyReadyState]);\n\n\treturn klippyReadyState;\n};\n","// Generated by ts-to-zod (https://www.npmjs.com/package/ts-to-zod)\nimport { z } from 'zod';\n\nexport const aDXL345SensorNameSchema = z.union([\n\tz.literal('toolboard_t0'),\n\tz.literal('toolboard_t1'),\n\tz.literal('controlboard'),\n\tz.literal('rpi'),\n]);\n\nexport const aDXL345ResponseHeaderSchema = z.union([\n\tz.literal('time'),\n\tz.literal('x_acceleration'),\n\tz.literal('y_acceleration'),\n\tz.literal('z_acceleration'),\n]);\n\nexport const klipperADXL345SubscriptionResponseSchema = z.object({\n\theader: z.tuple([\n\t\taDXL345ResponseHeaderSchema,\n\t\taDXL345ResponseHeaderSchema,\n\t\taDXL345ResponseHeaderSchema,\n\t\taDXL345ResponseHeaderSchema,\n\t]),\n});\n\nexport const klipperADXL345SubscriptionDataSchema = z.object({\n\tdata: z.array(z.tuple([z.number(), z.number(), z.number(), z.number()])),\n\toverflows: z.number().optional(),\n});\n\nexport const psdSchema = z.object({\n\tfrequencies: z.array(z.number()),\n\testimates: z.array(z.number()),\n\tpowerRange: z.object({\n\t\tmax: z.number(),\n\t\tmin: z.number(),\n\t}),\n});\n\nexport const accumulatedPSDSchema = z.object({\n\tx: psdSchema,\n\ty: psdSchema,\n\tz: psdSchema,\n\ttotal: psdSchema,\n\tsource: z.object({\n\t\tx: z.array(psdSchema),\n\t\ty: z.array(psdSchema),\n\t\tz: z.array(psdSchema),\n\t\ttotal: z.array(psdSchema),\n\t}),\n});\n\n// Macro data structure\nexport const macroIDSchema = z.string().brand('MacroID');\n\nexport const macroSequenceIDSchema = z.string().brand('MacroSequenceID');\n\nexport const macroRecordingIdSchema = z.string().brand('MacroRecordingID');\n\nexport const macroRecordingRunIdSchema = z.string().brand('MacroRecordingRunID');\n\nexport const macroRecordingSettingsSchema = z\n\t.object({\n\t\tcapturePSD: z.boolean().default(false),\n\t\taccelerometer: aDXL345SensorNameSchema.optional(),\n\t\tcolor: z.string().optional(),\n\t})\n\t.superRefine((val, ctx) => {\n\t\tif (val.capturePSD && val.accelerometer == null) {\n\t\t\tctx.addIssue({\n\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\tmessage: 'Required when recording resonance data',\n\t\t\t\tpath: ['accelerometer'],\n\t\t\t});\n\t\t}\n\t\treturn val;\n\t});\n\nexport const macroRecordingSchema = z.object({\n\tid: macroRecordingIdSchema,\n\tmacroRecordingRunId: macroRecordingRunIdSchema,\n\tmacroId: macroIDSchema,\n\tsequenceId: macroSequenceIDSchema,\n\tstartTimeStamp: z.number(),\n\tendTimeStamp: z.number(),\n\taccelerometer: aDXL345SensorNameSchema,\n\trecordingHardwareName: z.string(),\n\tpsd: accumulatedPSDSchema,\n\tname: z.string(),\n});\n\nexport const macroRecordingSchemaWithoutSourcePSDs = macroRecordingSchema.extend({\n\tpsd: accumulatedPSDSchema.omit({ source: true }),\n});\n\nexport const macroSequenceSchema = z.object({\n\tid: macroSequenceIDSchema,\n\tname: z.string(),\n\trecording: macroRecordingSettingsSchema.nullable(),\n\tgcode: z.string().min(2),\n});\n\nexport const macroSchema = z.object({\n\tid: macroIDSchema,\n\tname: z.string(),\n\tdescription: z.string(),\n\tcreatedAtTimeStamp: z.number(),\n\tupdatedAtTimeStamp: z.number().nullable(),\n\trecordingCount: z.record(macroSequenceIDSchema, z.number()),\n\tsequences: z.array(macroSequenceSchema),\n});\n\nexport const createMacroSchema = macroSchema.omit({\n\trecordingCount: true,\n\tcreatedAtTimeStamp: true,\n\tupdatedAtTimeStamp: true,\n});\n\n// inferred types:\nexport type ADXL345SensorName = z.infer<typeof aDXL345SensorNameSchema>;\n\nexport type ADXL345ResponseHeader = z.infer<typeof aDXL345ResponseHeaderSchema>;\n\nexport type KlipperADXL345SubscriptionResponse = z.infer<typeof klipperADXL345SubscriptionResponseSchema>;\n\nexport type KlipperADXL345SubscriptionData = z.infer<typeof klipperADXL345SubscriptionDataSchema>;\n\nexport type PSD = z.infer<typeof psdSchema>;\n\nexport type AccumulatedPSD = z.infer<typeof accumulatedPSDSchema>;\n\nexport type MacroID = z.infer<typeof macroIDSchema>;\n\nexport type MacroRecordingSettings = z.infer<typeof macroRecordingSettingsSchema>;\n\nexport type MacroRecording = z.infer<typeof macroRecordingSchema>;\n\nexport type MacroRecordingWithoutSourcePSDs = z.infer<typeof macroRecordingSchemaWithoutSourcePSDs>;\n\nexport type MacroSequence = z.infer<typeof macroSequenceSchema>;\n\nexport type Macro = z.infer<typeof macroSchema>;\n"],"names":["tailwind_config","darkMode","content","theme","container","center","padding","screens","extend","fontFamily","sans","defaultTheme","keyframes","ping","opacity","transform","from","height","to","animation","colors","brand","border","input","ring","background","foreground","primary","DEFAULT","secondary","destructive","muted","accent","popover","card","borderRadius","lg","md","sm","fontSize","s","containers","plugins","require","nocompatible","param","addBase","Object","fromEntries","entries","flattenColorPalette","map","key","val","parsed","convert","hsl","concat","startsWith","matchUtilities","backgroundImage","svgToDataUri","value","values","type","fullConfig","resolveConfig","tailwindConfig","twColors","shadableTWColors","keys","filter","twColor","color","c","ChartTheme","SciChartJSDarkv2Theme","constructor","sciChartBackground","loadingAnimationBackground","axisBandsFill","majorGridLineBrush","minorGridLineBrush","strokePalette","fillPalette","isLightBackground","ADXL_STREAM_BUFFER_SIZE","SciChartSurface","configure","wasmUrl","dataUrl","UseCommunityLicense","SIGNAL_CHART_AXIS_SIGNAL_ID","SIGNAL_CHART_AXIS_HISTORY_ID","SIGNAL_CHART_AXIS_AMPLITUDE_ID","getAxisColorName","axis","getAxisColor","NumberRange","useADXLSignalChart","useChart","useCallback","xAxis","CategoryAxis","surface","webAssemblyContext2D","id","autoRange","EAutoRange","Always","maxAutoTicks","drawLabels","drawMinorTickLines","drawMajorTickLines","drawMajorBands","drawMinorGridLines","drawMajorGridLines","xAxes","add","xHistoryAxis","yAxis","NumericAxis","Never","visibleRange","axisAlignment","EAxisAlignment","Left","yAxes","signalData","XyDataSeries","fifoCapacity","containsNaN","isSorted","dataSeriesName","toLocaleUpperCase","dataIsSortedInX","xValues","Array","fill","_","i","yValues","signalSeries","FastLineRenderableSeries","xAxisId","yAxisId","stroke","strokeThickness","dataSeries","effect","GlowEffect","intensity","range","renderableSeries","historyData","historySeries","WaveAnimation","duration","PSD_CHART_AXIS_AMPLITUDE_ID","PSDChartMinimumYVisibleRange","PSDChardNoSeriesDefinition","Thickness","fromNumber","EAxisType","options","labelStyle","inter","fontWeight","labelPostfix","minorsPerMajor","growBy","labelFormat","ENumericFormat","Exponential","autoRangeAnimation","animateInitialRanging","animateSubsequentRanging","easing","inOutCubic","axisTitleStyle","PSDChartDefinition","series","ESeriesType","MountainSeries","xyData","Math","floor","LineSeries","getPSDTooltipLegendTemplate","seriesInfos","svgAnnotation","outputSvgString","y","valuesWithLabels","forEach","seriesInfo","index","textColor","rolloverModifierProps","tooltipColor","push","separator","tooltipTitle","yValue","toFixed","formattedXValue","dataSeriesType","EDataSeriesType","Xyy","rolloverModifierProps1","si","y1Value","abs","width","length","calcTooltipWidth","reduce","prev","cur","psdRolloverTooltipTemplate","rolloverTooltip","valuesBlock","tooltipProps","tooltipTextColor","tooltipBorderColor","parseColorToTArgb","tooltipBGColor","tooltipLabelX","tooltipLabelY","shadowColor","round","tooltipDataTemplate","rolloverModifier","calcTooltipHeight","updateSize","blur","undefined","shadowRGBA","red","green","blue","parseTArgbToHtmlColor","getTooltipDataTemplate","lines","formattedYValue","usePSDChart","xAnimationSeries","addDeletable","yAnimationSeries","zAnimationSeries","totalAnimationSeries","asArray","rs","paletteProvider","PaletteFactory","createGradient","GradientParams","Point","offset","enableStroke","enableFill","fillOpacity","pointMarkerOpacity","tooltipTemplate","substring","toUpperCase","chartModifiers","RolloverModifier","showRolloverLine","showTooltip","CursorModifier","crosshairStroke","sky","crosshairStrokeThickness","showXLine","showYLine","axisLabelFill","zinc","axisLabelStroke","animationSeries","x","z","total","textLength","charWidth","lineHeight","getWsURL","host","getHost","trim","REQ_ID","isSuccessResponse","res","useRealtimeADXL","wsUrl","setWsUrl","useState","inFlightRequests","useRef","inFlightRequestTimeouts","isSubscribed","setIsSubscribed","onSubscriptionFailure","onDataUpdate","sensor","enabled","onSubscriptionSuccess","isSubscribedRef","current","kippyState","useKlippyStateHandler","useEffect","lastJsonMessage","sendJsonMessage","readyState","useWebSocket","shouldReconnect","onMessage","JSON","parse","message","data","params","klipperADXL345SubscriptionDataSchema","getLogger","error","e","console","warn","reconnectAttempts","Infinity","reconnectInterval","share","subscribe","Promise","resolve","reject","err","result","window","setTimeout","jsonrpc","method","response_template","then","klipperADXL345SubscriptionResponseSchema","info","header","catch","toast","description","clearTimeout","reqId","definition","initializer","indent","isInitialized","setIsInitialized","useMemo","forwardProps","initChart","rootElement","chart","orgPadding","def","top","right","bottom","left","build2DChart","create","sciChartSurface","watermarkPosition","EWatermarkPosition","BottomLeft","watermarkRelativeToCanvas","onInit","style","marginLeft","fallback","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","FullLoadScreen","className","twJoin","defaultAxisMap","useADXLFifoTensor","dataHeader","buffer","sampleRate","dropped","setDropped","take","max","min","count","shape","out","keep","split","dispose","axisMap","findIndex","v","onData","incoming","gather","status","newBuffer","concat2d","debug","drop","useBufferedADXLSignal","fifoTensor","updateFn","lastUpdate","Date","getTime","update","tick","toTake","time","reshape","useBufferedPSD","xref","tensor1d","yref","zref","isDetrended","rate","newX","newY","newZ","xData","clone","yData","zData","totalData","addN","xpsd","ypsd","zpsd","all","powerSpectralDensity","totalpsd","sumPSDs","useAccumulatedPSD","isAccumulating","setIsAccumulating","psds","start","stop","old","welch","source","newTotal","startAccumulation","stopAccumulation","useTicker","tickOrTargetFps","fnRef","interval","maximumRangeUnion","isArray","getMaximumRange","union","visibleRangeUnion","growByUnion","useDynamicAxisRange","minimum","maxRef","lastChange","dataRange","axes","sinceLastUpdate","sinceLastChange","newMax","newMin","a","animateVisibleRange","inOutCirc","detrendSignal","tidy","sub","signal","mean","fftSize","_scaling","assign","ceil","log2","scaling_factor","win","tfSignal","hannWindow","klipScale","div","sum","pow","array","detrended","f","stft","powers","frequencies","maxPower","minPower","frequency","nextFrequency","power","estimates","powerRange","PSDs","num_estimates","avg","p","acc","psd","props","Spinner","NoSSR","isClient","useIsClient","DynamicImport","children","lazy","default","Fragment","jsxs","svg","twMerge","noMargin","xmlns","viewBox","circle","cx","cy","r","strokeWidth","path","d","setIsClient","query","lastMessage","useMoonraker","passThroughUpdateMethods","klippyReadyState","setKlippyReadyState","queryKlippyState","serverInfo","klippy_state","klippyState","aDXL345SensorNameSchema","literal","aDXL345ResponseHeaderSchema","object","tuple","number","overflows","optional","psdSchema","accumulatedPSDSchema","macroIDSchema","string","macroSequenceIDSchema","macroRecordingIdSchema","macroRecordingRunIdSchema","macroRecordingSettingsSchema","capturePSD","boolean","accelerometer","superRefine","ctx","addIssue","code","ZodIssueCode","custom","macroRecordingSchema","macroRecordingRunId","macroId","sequenceId","startTimeStamp","endTimeStamp","recordingHardwareName","name","omit","macroSequenceSchema","recording","nullable","gcode","macroSchema","createdAtTimeStamp","updatedAtTimeStamp","recordingCount","record","sequences","createMacroSchema"],"sourceRoot":""}