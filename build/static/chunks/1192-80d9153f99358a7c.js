"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1192,936],{43955:function(e,t,r){r.d(t,{DN:function(){return h},NI:function(){return f}});var n=r(38188),a=r.n(n),o=r(13558),i=r.n(o),s=r(78478),l=r(85982),c=r.n(l),u=r(33619),d=r.n(u),m={darkMode:"class",content:["./pages/**/*.{js,ts,jsx,tsx}","./components/**/*.{js,ts,jsx,tsx}","./helpers/**/*.{js,ts,jsx,tsx}","./app/**/*.{js,ts,jsx,tsx}","./data/**/*.{js,ts,jsx,tsx}"],theme:{container:{center:!0,padding:"2rem",screens:{"2xl":"1400px"}},extend:{fontFamily:{sans:["var(--inter-font)",...i().fontFamily.sans]},keyframes:{ping:{"0%":{opacity:"100"},"75%, 100%":{transform:"scale(2)",opacity:"0"}},"accordion-down":{from:{height:"0"},to:{height:"var(--radix-accordion-content-height)"}},"accordion-up":{from:{height:"var(--radix-accordion-content-height)"},to:{height:"0"}}},animation:{"spin-fast":"spin 0.5s linear infinite","accordion-down":"accordion-down 0.2s ease-out","accordion-up":"accordion-up 0.2s ease-out"},colors:{brand:{50:"#f2ffe1",100:"#deffcc",200:"#bdff99",300:"#9cff66",400:"#7bff33",500:"#5aff00",600:"#48cc00",700:"#369900",800:"#246600",900:"#123300"},border:"hsl(var(--border))",input:"hsl(var(--input))",ring:"hsl(var(--ring))",background:"hsl(var(--background))",foreground:"hsl(var(--foreground))",primary:{DEFAULT:"hsl(var(--brand-400) / 50%)",foreground:"hsl(var(--white))"},secondary:{DEFAULT:"hsl(var(--secondary))",foreground:"hsl(var(--white))"},destructive:{DEFAULT:"hsl(var(--red-400))",foreground:"hsl(var(--black))"},muted:{DEFAULT:"hsl(var(--muted))",foreground:"hsl(var(--muted-foreground))"},accent:{DEFAULT:"hsl(var(--accent))",foreground:"hsl(var(--white))"},popover:{DEFAULT:"hsl(var(--popover))",foreground:"hsl(var(--popover-foreground))"},card:{DEFAULT:"hsl(var(--card))",foreground:"hsl(var(--card-foreground))"}},borderRadius:{lg:"var(--radius)",md:"calc(var(--radius) - 2px)",sm:"calc(var(--radius) - 4px)"},fontSize:{"2xs":"0.6rem",s:"0.8125rem"},containers:{"screen-sm":"640px","screen-md":"768px","screen-lg":"1024px","screen-xl":"1280px","screen-2xl":"1536px"}}},plugins:[r(98750),r(61123),r(83980),r(87224)({nocompatible:!0}),function(e){let{addBase:t,theme:r}=e;t({":root":Object.fromEntries(Object.entries((0,s.default)(r("colors"))).map(e=>{let[t,r]=e,n=c().hex.hsl(r);return["--".concat(t),r.startsWith("#")?"".concat(n[0]," ").concat(n[1],"% ").concat(n[2],"%"):r]}))})},function(e){let{matchUtilities:t,theme:r}=e;t({"bg-grid":e=>({backgroundImage:'url("'.concat(d()('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32" fill="none" stroke="'.concat(e,'"><path d="M0 .5H31.5V32"/></svg>')),'")')}),"bg-grid-small":e=>({backgroundImage:'url("'.concat(d()('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="8" height="8" fill="none" stroke="'.concat(e,'"><path d="M0 .5H31.5V32"/></svg>')),'")')}),"bg-dot":e=>({backgroundImage:'url("'.concat(d()('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="16" height="16" fill="none"><circle fill="'.concat(e,'" id="pattern-circle" cx="10" cy="10" r="1.6257413380501518"></circle></svg>')),'")')})},{values:(0,s.default)(r("backgroundColor")),type:"color"})}]};let p=a()(m),f=p.theme.colors,h=Object.fromEntries(Object.keys(f).filter(e=>{let t=f[e];return null!=t&&"string"!=typeof t&&!("DEFAULT"in t)}).map(e=>[e,f[e]]))},13938:function(e,t,r){r.d(t,{AQ:function(){return o},G0:function(){return i}});var n,a,o,i,s=r(10158),l=r(23377),c=r(58905),u=r(62434),d=r(20295),m=r(55044),p=r(68131),f=r(24189),h=r(64772),x=r(85092),g=r(31533),b=r(48308),y=r(53692),w=r(73875),v=r(67864),S=r(71708),A=r(72366),T=r(8526),N=r(26478);let k=[100,200,400,800,1600,3200,6400,12800,25600,51200],createSignalBuffers=async e=>{let t=await (0,f.z)(e.pipe((0,v.P)(),(0,h.U)(e=>(0,w.Z)(e.data[0][0]).decimalPlaces(0,w.Z.ROUND_FLOOR).toNumber()))),r=new Date().getTime(),n=(0,c.x)(e,p.z).pipe((0,S.b)(e=>(0,c.x)((0,u.D)(e.data),p.z)),(0,h.U)(e=>{let[r,n,a,o]=e;return[(0,w.Z)(r).minus(t).shiftedBy(3),n,a,o]}),(0,x.B)()),a=n.pipe((0,A.e)(1e3),(0,h.U)(e=>e.length<1?1:Math.floor(e.length/e[e.length-1][0].minus(e[0][0]).shiftedBy(-3).toNumber())),(0,T.x)(),(0,x.B)()),o=n.pipe((0,S.b)(e=>{let t=new Date().getTime()-r,n=e[0].toNumber();return t<n?(0,c.x)((0,d.of)(e).pipe((0,N.g)(n-t)),p.z):(0,d.of)(e)}),(0,x.B)()),i=a.pipe((0,h.U)(e=>k.reduce((t,r)=>Math.abs(r-e)<Math.abs(t-e)?r:t,k[0])),(0,T.x)(),(0,x.B)());return{timeStamp:t,signal$:n,timeMappedSignal$:o,specSampleRate$:i,sampleRate$:a}};var C=r(98948),j=r(46126),M=r(73105);let z=0,getSensorEndpoint=e=>{switch(e.type){case"adxl345":return"adxl345/dump_adxl345";case"beacon":return"beacon/dump_accel";case"lis2dw":return"lis2dw/dump_lis2dw";default:throw Error("Sensor type not supported. Must be 'adxl345', 'beacon', or 'lis2dw'")}},isSuccessResponse=e=>null!=e&&"object"==typeof e&&!("error"in e),isKlipperAccelSubscriptionResponse=e=>j.NI.safeParse(e).success,isKlipperAccelSubscriptionData=e=>isSuccessResponse(e)&&null!=e.params&&"data"in e.params&&null!=e.params&&Array.isArray(e.params.data)&&Array.isArray(e.params.data[0])&&4===e.params.data[0].length,detrendFloatSignal=e=>{let t=e.reduce((e,t)=>e+t,0)/e.length;for(let r=0;r<e.length;r++)e[r]-=t;return e},detrendBatch=e=>{let t=detrendFloatSignal(e.map(e=>e[1])),r=detrendFloatSignal(e.map(e=>e[2])),n=detrendFloatSignal(e.map(e=>e[3]));return e.map((e,a)=>[e[0],t[a],r[a],n[a]])},createADXL345Stream=(e,t)=>{let r=(0,M.j)({url:e,deserializer:e=>{try{return JSON.parse(e.data,(e,t,r)=>"0"===e&&"number"==typeof t&&(null==r?void 0:r.source)!=null?(0,w.Z)(t):t)}catch(e){return(0,C.j)().error(e,"Error parsing JSON from klipper socket"),null}}}),n=r.multiplex(()=>({jsonrpc:"2.0",method:getSensorEndpoint(t),params:{sensor:t.name,response_template:{}},id:++z}),()=>null,e=>{if("result"in e&&isKlipperAccelSubscriptionResponse(e.result))return e.result.header,!1;if(isKlipperAccelSubscriptionData(e))return!0;if(!isSuccessResponse(e))throw(0,C.j)().error(e,"Error in response from adxl345 subscription on klipper socket"),Error("".concat(e.error.error,": ").concat(e.error.message));return!1}).pipe((0,x.B)(),(0,g.h)(e=>isKlipperAccelSubscriptionData(e)),(0,h.U)(e=>({...e.params,data:detrendBatch(e.params.data)})),(0,x.B)());return n.subscribe(),{dataStream$:n,close:()=>{r.complete.bind(r)()}}};(n=o||(o={})).START="START",n.STOP="STOP",n.START_ACCUMULATION="START_ACCUMULATION",n.STOP_ACCUMULATION="STOP_ACCUMULATION",(a=i||(i={})).STARTED="STARTED",a.STOPPED="STOPPED",a.ACCUMULATING="ACCUMULATING",a.ACCUMULATED="ACCUMULATED",a.SIGNAL="SIGNAL",a.PSD="PSD",a.RX_RATE="RX_RATE",a.SAMPLE_RATE="SAMPLE_RATE",a.SPEC_SAMPLE_RATE="SPEC_SAMPLE_RATE";let mapToWorkerOutput=e=>(0,h.U)(e),D=new l.x,R=(0,s.p)(()=>new Worker(r.tu(new URL(r.p+r.u(5330),r.b))),D).pipe((0,x.B)()),E=R.pipe((0,g.h)(e=>"psd"===e.type),mapToWorkerOutput(e=>({type:"PSD",payload:e.psd})),(0,x.B)());(0,s.YX)(class{work(e){return e.pipe((0,b.z)(e=>{switch(e.type){case"START":{if(null!=this.stream)throw Error("Stream already started");this.stream=createADXL345Stream(e.payload.url,e.payload.sensor);let setup=async()=>{if(null==this.stream)throw Error("Stream not initialized");this.signalProcessor=await createSignalBuffers(this.stream.dataStream$),this.signalProcessor.signal$.subscribe(e=>D.next({command:"sampleInput",payload:[e[0].toNumber(),e[1],e[2],e[3]]})),this.signalProcessor.specSampleRate$.subscribe(e=>D.next({command:"specSampleRateInput",payload:e}));let e=(0,c.x)((0,u.D)([(0,d.of)({type:"STARTED",payload:this.signalProcessor.timeStamp}),this.signalProcessor.timeMappedSignal$.pipe(mapToWorkerOutput(e=>{let t=new Float64Array([e[0].toNumber(),...e.slice(1)]);return{type:"SIGNAL",payload:t.buffer}})),this.signalProcessor.sampleRate$.pipe(mapToWorkerOutput(e=>({type:"SAMPLE_RATE",payload:e}))),this.signalProcessor.specSampleRate$.pipe(mapToWorkerOutput(e=>({type:"SPEC_SAMPLE_RATE",payload:e}))),this.psdSubscribed?m.E:E]),p.z).pipe((0,y.J)());return this.psdSubscribed||(this.psdSubscribed=!0),e};return(0,u.D)(setup()).pipe((0,y.J)())}case"STOP":return null!=this.stream&&(this.stream.close(),this.stream=null),(0,d.of)({type:"STOPPED"});case"START_ACCUMULATION":if(null==this.signalProcessor)throw Error("Stream not initialized");if(null==R)throw Error("PSD worker not initialized");return D.next({command:"accumulate",payload:!0}),(0,c.x)((0,u.D)([(0,d.of)({type:"ACCUMULATING"}),(0,c.x)((0,u.D)((0,f.z)(R.pipe((0,g.h)(e=>"accumulation_finished"===e.type)))).pipe(mapToWorkerOutput(e=>({type:"ACCUMULATED",payload:e.psd}))),p.z)]),p.z).pipe((0,y.J)());case"STOP_ACCUMULATION":if(null==R)throw Error("Stream not initialized");if(null==R)throw Error("PSD process not initialized");return D.next({command:"accumulate",payload:!1}),m.E;default:var t;throw null===(t=this.stream)||void 0===t||t.close(),this.stream=null,Error("Invalid command")}}))}selectTransferables(e){switch(e.type){case"SIGNAL":return[e.payload];case"PSD":case"ACCUMULATED":return[e.payload.x.estimates.buffer,e.payload.x.frequencies.buffer,e.payload.y.estimates.buffer,e.payload.y.frequencies.buffer,e.payload.z.estimates.buffer,e.payload.z.frequencies.buffer,e.payload.total.estimates.buffer,e.payload.total.frequencies.buffer];default:return[]}}constructor(){this.stream=null,this.signalProcessor=null,this.psdSubscribed=!1}})},315:function(e,t,r){r.d(t,{b:function(){return ChartTheme}});var n=r(68995);let ChartTheme=class ChartTheme extends n.SciChartJSDarkv2Theme{constructor(){super(),this.sciChartBackground="transparent",this.loadingAnimationBackground="transparent",this.axisBandsFill="#20212333",this.majorGridLineBrush="#AAAAAA37",this.minorGridLineBrush="#77777719",this.strokePalette=["#F48420","#AE408E","#209FD9","#264B93"],this.fillPalette=["#F4842077","#AE408E77","#209FD977","#264B9377"],this.isLightBackground=!1,this.loadingAnimationForeground="transparent"}}},29817:function(e,t,r){r.d(t,{Mg:function(){return isXyDataSeries},OH:function(){return x},QR:function(){return useADXLSignalChart},ZA:function(){return usePSDChart},as:function(){return h},ck:function(){return f},jh:function(){return isXyyDataSeries},to:function(){return getPSDTooltipLegendTemplate}});var n=r(68995),a=r(30742),o=r(315),i=r(48488),s=r.n(i),l=r(43955),c=r(39164);n.SciChartSurface.configure({wasmUrl:"/configure/scichart2d.wasm",dataUrl:"/configure/scichart2d.data"}),n.SciChartSurface.UseCommunityLicense();let u=new o.b,d="signal",m="history",p="amplitude",isXyyDataSeries=e=>e.type===n.EDataSeriesType.Xyy,isXyDataSeries=e=>e.type===n.EDataSeriesType.Xy,getAxisColorName=e=>{switch(e){case"x":return"yellow";case"y":return"sky";case"z":return"rose";default:return"brand"}},getAxisColor=e=>l.NI[getAxisColorName(e)];new n.NumberRange(-1e4,1e4);let useADXLSignalChart=e=>(0,a.Q8)(null,(0,c.useCallback)(t=>{let r=getAxisColor(e),a=new n.NumericAxis(t.webAssemblyContext2D,{id:d+e,autoRange:n.EAutoRange.Always,maxAutoTicks:128,drawLabels:!1,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1,drawMinorGridLines:!1,drawMajorGridLines:!1});t.xAxes.add(a);let o=new n.NumericAxis(t.webAssemblyContext2D,{id:m+e,autoRange:n.EAutoRange.Always,drawLabels:!1,drawMinorGridLines:!1,drawMajorTickLines:!1});t.xAxes.add(o);let i=new n.NumericAxis(t.webAssemblyContext2D,{autoRange:n.EAutoRange.Never,visibleRange:new n.NumberRange(-5e3,5e3),drawLabels:!1,id:p+e,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1,drawMinorGridLines:!1,drawMajorGridLines:!1,axisAlignment:n.EAxisAlignment.Left});t.yAxes.add(i);let s=new n.XyDataSeries(t.webAssemblyContext2D,{fifoCapacity:128,containsNaN:!1,isSorted:!0,dataSeriesName:e.toLocaleUpperCase(),dataIsSortedInX:!0,xValues:Array(128).fill(0).map((e,t)=>t),yValues:Array(128).fill(0)}),l=new n.FastLineRenderableSeries(t.webAssemblyContext2D,{xAxisId:d+e,yAxisId:p+e,stroke:r[400],strokeThickness:2,dataSeries:s,effect:new n.GlowEffect(t.webAssemblyContext2D,{intensity:1,range:1})});t.renderableSeries.add(l);let c=new n.XyDataSeries(t.webAssemblyContext2D,{fifoCapacity:25600,containsNaN:!1,isSorted:!0,dataSeriesName:e.toLocaleUpperCase()+" History",dataIsSortedInX:!0,xValues:Array(25600).fill(0).map((e,t)=>3.2*t),yValues:Array(25600).fill(0)}),u=new n.FastLineRenderableSeries(t.webAssemblyContext2D,{stroke:r[500]+"22",strokeThickness:1,opacity:.6,yAxisId:p+e,xAxisId:m+e,dataSeries:c});return t.renderableSeries.add(u),l.animation=new n.WaveAnimation({duration:500}),u.animation=new n.WaveAnimation({duration:500}),{signalData:s,signalSeries:l,historyData:c,historySeries:u,xAxis:a,xHistoryAxis:o,yAxis:i}},[e])),f="amplitude",h=new n.NumberRange(0,1500),x={surface:{theme:u,padding:n.Thickness.fromNumber(0)},xAxes:[{type:n.EAxisType.NumericAxis,options:{visibleRange:new n.NumberRange(0,200),labelStyle:{...s().style,fontSize:13,fontWeight:"600",padding:new n.Thickness(15,15,15,15)},labelPostfix:"Hz",drawMinorGridLines:!0,minorsPerMajor:10,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1}}],yAxes:[{type:n.EAxisType.NumericAxis,options:{id:f,axisAlignment:n.EAxisAlignment.Left,growBy:new n.NumberRange(0,.1),visibleRange:h,labelFormat:n.ENumericFormat.Exponential,labelStyle:{...s().style,fontSize:13,fontWeight:"600",padding:new n.Thickness(15,15,15,15)},autoRangeAnimation:{duration:140,animateInitialRanging:!1,animateSubsequentRanging:!0,easing:n.easing.inOutCubic},drawMinorGridLines:!0,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1,axisTitleStyle:{fontSize:10}}}]},g={...x,series:[{type:n.ESeriesType.MountainSeries,options:{id:"total",yAxisId:f,strokeThickness:3,fill:l.NI.brand[500]+"22",stroke:l.NI.brand[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(128).fill(0).map((e,t)=>Math.floor(t/128*200)),yValues:Array(128).fill(0).map((e,t)=>0)}},{type:n.ESeriesType.LineSeries,options:{id:"z",yAxisId:f,strokeThickness:3,stroke:getAxisColor("z")[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(128).fill(0).map((e,t)=>Math.floor(t/128*200)),yValues:Array(128).fill(0).map((e,t)=>0)}},{type:n.ESeriesType.LineSeries,options:{id:"y",yAxisId:f,strokeThickness:3,stroke:getAxisColor("y")[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(128).fill(0).map((e,t)=>Math.floor(t/128*200)),yValues:Array(128).fill(0).map((e,t)=>0)}},{type:n.ESeriesType.LineSeries,options:{id:"x",yAxisId:f,strokeThickness:3,stroke:getAxisColor("x")[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(128).fill(0).map((e,t)=>Math.floor(t/128*200)),yValues:Array(128).fill(0).map((e,t)=>0)}}]},getPSDTooltipLegendTemplate=(e,t)=>{let r="",a=32,o=[];e.forEach((e,t)=>{let i=e.renderableSeries.rolloverModifierProps.tooltipColor;if(o.push("".concat(e.renderableSeries.rolloverModifierProps.tooltipTitle).concat(":"," ").concat((e.yValue/1e3).toFixed(2)," g^2/Hz @ ").concat(e.formattedXValue)),r+='<text x="'.concat(16,'" y="').concat(a,'" class="text-sm text-medium font-sans" fill="').concat(l.DN[i][400],'">\n		<tspan class="font-bold">').concat(e.renderableSeries.rolloverModifierProps.tooltipTitle,"</tspan>").concat(":"," ").concat((e.yValue/1e3).toFixed(2),' g<tspan y="').concat(a-4,'" class="sup">2</tspan><tspan y=').concat(a,">/Hz</tspan> @ ").concat(e.formattedXValue,"\n		</text>"),a+=20,e.dataSeriesType===n.EDataSeriesType.Xyy){let t=e.renderableSeries.rolloverModifierProps1.tooltipColor;o.push("".concat(e.renderableSeries.rolloverModifierProps1.tooltipTitle).concat(":"," ").concat((e.y1Value/1e3).toFixed(2)," g^2/Hz @ ").concat(e.formattedXValue)),r+='<text x="'.concat(16,'" y="').concat(a,'" class="text-sm text-medium font-sans" fill="').concat(l.DN[t][400],'">\n				<tspan class="font-bold">').concat(e.renderableSeries.rolloverModifierProps1.tooltipTitle,"</tspan>").concat(":"," ").concat((e.y1Value/1e3).toFixed(2),' g<tspan y="').concat(a-4,'" class="sup">2</tspan><tspan y=').concat(a,">/Hz</tspan> @ ").concat(e.formattedXValue,"\n			</text>"),a+=20,r+='<text x="'.concat(16,'" y="').concat(a,'" class="text-sm text-medium font-sans" fill="').concat(l.DN.zinc[400],'">\n				<tspan class="font-bold">Amplitude Difference</tspan>').concat(":"," ").concat(Math.abs((e.y1Value-e.yValue)/1e3).toFixed(2),' g<tspan y="').concat(a-4,'" class="sup">2</tspan><tspan y=').concat(a,">/Hz</tspan>\n			</text>"),a+=20}});let i=0===e.length?0:16+1.7*calcTooltipWidth(o.reduce(function(e,t){return t.length>e?t.length:e},0)),s=0===e.length?0:a;return'<svg width="'.concat(i,'" height="').concat(s,'">\n				<rect rx="8" ry="8" width="100%" height="100%" class="stroke-zinc-400/10 fill-zinc-900/70 stroke-1" />\n                ').concat(r,"\n            </svg>")},psdRolloverTooltipTemplate=(e,t,r)=>{let a="",o=r.tooltipProps,i=o.tooltipTitle,s=o.tooltipColor,c=l.NI[s][100],u=(0,n.parseColorToTArgb)(l.NI[s][400]),d=(0,n.parseColorToTArgb)(l.NI[s][600]),m=o.tooltipLabelX,p=o.tooltipLabelY,f=l.NI[s][900];u.opacity=Math.round(204),d.opacity=Math.round(51);let h=null!==(w=r.tooltipProps.tooltipDataTemplate)&&void 0!==w?w:r.tooltipProps.rolloverModifier.tooltipDataTemplate,x=h(t,i,m,p),g=null!==(v=o.width)&&void 0!==v?v:calcTooltipWidth(x.reduce(function(e,t){return t.length>e?t.length:e},0)),b=null!==(S=o.height)&&void 0!==S?S:calcTooltipHeight(x.length);r.updateSize(g,b),x.forEach(function(e,t){a+='<tspan x="8" dy="1.2em">'.concat(e,"</tspan>")});let y='<feGaussianBlur result="blurOut" in="offOut" stdDeviation="3" />';if(void 0!==f){var w,v,S,A=(0,n.parseColorToTArgb)(f);y='\n			<feColorMatrix result="matrixOut" in="offOut" type="matrix"\n				values="0 0 0 0 \n				'.concat(A.red/255,"\n				0 0 0 0\n				").concat(A.green/255,"\n				0 0 0 0\n				").concat(A.blue/255,"\n				0 0 0 \n				").concat(A.opacity/255,'\n				0 0" \n			/>\n			<feGaussianBlur result="blurOut" in="matrixOut" stdDeviation="3" />')}return'\n		<svg class="scichart__rollover-tooltip transition-all" width="'.concat(g,'" height="').concat(b,'">\n			<defs>\n				<filter id="').concat(e,'" x="0" y="0" width="200%" height="200%">\n					<feOffset result="offOut" in="SourceAlpha" dx="3" dy="3" />\n						\n						').concat(y,'\n					<feBlend in="SourceGraphic" in2="blurOut" mode="normal" />\n				</filter>\n			</defs>\n			<rect rx="8" ry="8" width="100%" height="100%" fill="').concat((0,n.parseTArgbToHtmlColor)(d),'" stroke="').concat((0,n.parseTArgbToHtmlColor)(u),'" stroke-width="2"  filter="url(#').concat(e,'" />\n			<svg width="100%">\n				<text x="8" y="3" class="text-sm font-sans font-semibold" dy="0" fill="').concat(c,'">\n				').concat(a,"\n				</text>\n			</svg>\n		</svg>")},usePSDChart=()=>(0,a.Q8)(g,(0,c.useCallback)(e=>{let t=new n.XyDataSeries(e.webAssemblyContext2D,{id:"xAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});e.addDeletable(t);let r=new n.XyDataSeries(e.webAssemblyContext2D,{id:"yAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});e.addDeletable(r);let a=new n.XyDataSeries(e.webAssemblyContext2D,{id:"zAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});e.addDeletable(a);let o=new n.XyDataSeries(e.webAssemblyContext2D,{id:"totalAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});return e.addDeletable(o),e.renderableSeries.asArray().forEach(e=>{e.rolloverModifierProps.tooltipColor=getAxisColorName(e.id),e.rolloverModifierProps.tooltipTemplate=psdRolloverTooltipTemplate,e.rolloverModifierProps.tooltipTitle=e.id.substring(0,1).toUpperCase()+e.id.substring(1)+" Power Spectral Density",e.animation=new n.WaveAnimation({duration:500})}),e.chartModifiers.add(new n.CursorModifier({crosshairStroke:l.NI.sky[400],crosshairStrokeThickness:1,showXLine:!0,showYLine:!0,showTooltip:!1,tooltipLegendTemplate:getPSDTooltipLegendTemplate,tooltipLegendOffsetX:16,tooltipLegendOffsetY:16,yAxisId:f,axisLabelFill:l.NI.zinc[900],axisLabelStroke:l.NI.zinc[100]})),{animationSeries:{x:t,y:r,z:a,total:o}}},[]));var calcTooltipWidth=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e*t+20},calcTooltipHeight=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return t*e+16}},30742:function(e,t,r){r.d(t,{Q8:function(){return useChart},Tv:function(){return useDynamicAxisRange},ck:function(){return useWorker}});var n=r(72612),a=r(39164),o=r(68995),i=r(315),s=r(63278),l=r(8832),c=r(18954),u=r(96588),d=r(32342),m=r(80461),p=r(13938),f=r(10158),h=r(23377),x=r(85092),g=r(31533),b=r(64772),y=r(76877),w=r(72531),v=r(24189),S=r(54957),A=r(81446);function transformPSD(e){let t={frequencies:Array.from(e.frequencies),estimates:Array.from(e.estimates),powerRange:e.powerRange};return t}let getWsURL=()=>{let e=(0,A.X)();return null==e||""==e.trim()?null:"ws://".concat(e,":7125/klippysocket")},T=new h.x,N=(0,f.p)(()=>new Worker(r.tu(new URL(r.p+r.u(3938),r.b))),T).pipe((0,x.B)()),k=N.pipe((0,g.h)(e=>e.type===p.G0.SIGNAL),(0,b.U)(e=>new Float64Array(e.payload)),(0,y.f)((0,w.R)()),(0,g.h)(e=>e.length>0),(0,b.U)(e=>{let t=new Float64Array(e.length),r=new Float64Array(e.length),n=new Float64Array(e.length),a=new Float64Array(e.length);return e.forEach((e,o)=>{t[o]=e[0],r[o]=e[1],n[o]=e[2],a[o]=e[3]}),[t,r,n,a]}),(0,x.B)()),C=N.pipe((0,g.h)(e=>e.type===p.G0.PSD),(0,b.U)(e=>e.payload),(0,x.B)()),useWorker=(e,t,r,n,o)=>{let i=useAccelerometerWithType(t),[s,l]=(0,a.useState)(getWsURL()),c=(0,a.useRef)(!1),u=(0,a.useRef)(!1),d=(0,a.useRef)(r);d.current=r;let m=(0,a.useRef)(n);m.current=n;let f=(0,a.useCallback)(async()=>{if(u.current)throw Error("Already accumulating");let e=(0,v.z)(N.pipe((0,g.h)(e=>e.type===p.G0.PSD),(0,S.V)(5e3))),t=(0,v.z)(N.pipe((0,g.h)(e=>e.type===p.G0.ACCUMULATING),(0,b.U)(()=>!0),(0,S.V)(5e3)));await e,T.next({type:p.AQ.START_ACCUMULATION}),await t},[]),h=(0,a.useCallback)(async()=>{if(!u.current)throw Error("Not accumulating, cannot stop");let e=(0,v.z)(N.pipe((0,g.h)(e=>e.type===p.G0.ACCUMULATED),(0,b.U)(e=>({x:transformPSD(e.payload.x),y:transformPSD(e.payload.y),z:transformPSD(e.payload.z),total:transformPSD(e.payload.total)})),(0,S.V)(6e4)));return T.next({type:p.AQ.STOP_ACCUMULATION}),await e},[]),x=(0,a.useCallback)(async()=>{if(await new Promise(e=>setTimeout(e,10)),c.current)return;let e=(0,v.z)(N.pipe((0,g.h)(e=>e.type===p.G0.STARTED),(0,S.V)(5e3)));await e},[]);return(0,a.useEffect)(()=>{l(getWsURL())},[]),(0,a.useEffect)(()=>{let e=k.subscribe(e=>{d.current(e)}),t=C.subscribe(e=>{m.current(e)});return()=>{e.unsubscribe(),t.unsubscribe()}},[]),(0,a.useEffect)(()=>{if(e&&null!=s){let e=N.subscribe({next:e=>{switch(e.type){case p.G0.STARTED:c.current=!0;break;case p.G0.STOPPED:c.current=!1;break;case p.G0.ACCUMULATING:u.current=!0;break;case p.G0.ACCUMULATED:u.current=!1;case p.G0.SAMPLE_RATE:case p.G0.SPEC_SAMPLE_RATE:}},error:o});return T.next({type:p.AQ.START,payload:{url:s,sensor:i}}),()=>{c.current=!1,T.next({type:p.AQ.STOP}),e.unsubscribe()}}},[e,o,i,t,s]),{streamStarted:x,startAccumulation:f,stopAccumulation:h}},useAccelerometerWithType=e=>{let t=(0,u.sJ)(d.OS),r=(0,m.YC)(),n="adxl345";if("controlboard"===e&&((null==t?void 0:t.ADXL345SPI)!=null&&(n="adxl345"),(null==t?void 0:t.LIS2DW)!=null&&(n="lis2dw")),"toolboard_t0"===e||"toolboard_t1"===e){var o;let t=null===(o=r.find(t=>t.getToolboardName()===e))||void 0===o?void 0:o.getToolboard();if(null==t)throw Error("No toolboard found for T0");null!=t.ADXL345SPI&&(n="adxl345"),null!=t.LIS2DW&&(n="lis2dw")}return"beacon"===e&&(n="beacon"),(0,a.useMemo)(()=>c.U9.parse({name:e,type:n}),[e,n])},j=new i.b,useChart=function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=(0,a.useRef)(null),[c,u]=(0,a.useState)(!1),d=(0,a.useRef)(null);return(0,a.useMemo)(()=>({forwardProps:{initChart:async n=>{let a=null;if(null!=e){var s,l,c,u,m;let t=null===(s=e.surface)||void 0===s?void 0:s.padding,i={...e,surface:{...e.surface,padding:new o.Thickness(null!==(l=null==t?void 0:t.top)&&void 0!==l?l:0,null!==(c=null==t?void 0:t.right)&&void 0!==c?c:0,null!==(u=null==t?void 0:t.bottom)&&void 0!==u?u:0,(null!==(m=null==t?void 0:t.left)&&void 0!==m?m:0)+(r?300:0))}};a=await (0,o.build2DChart)(n,i)}else a=await o.SciChartSurface.createSingle(n,{theme:j,padding:new o.Thickness(0,0,0,r?300:0)});return a.sciChartSurface.watermarkPosition=o.EWatermarkPosition.BottomLeft,a.sciChartSurface.watermarkRelativeToCanvas=!0,i.current=a.sciChartSurface,t&&(d.current=t(a.sciChartSurface)),{sciChartSurface:a.sciChartSurface}},onInit:()=>u(!0),style:{marginLeft:r?-300:0},fallback:(0,n.jsx)(l.I,{className:(0,s.dV)(r&&"ml-[150px]","bg-zinc-900")})},surface:i,isInitialized:c,data:d}),[r,c,e,t])},maximumRangeUnion=e=>Array.isArray(e)?e.reduce((e,t)=>{if(null==t)return e;let r=t.getMaximumRange();return e.union(r)},new o.NumberRange):e.getMaximumRange(),visibleRangeUnion=e=>Array.isArray(e)?e.reduce((e,t)=>{if(null==t)return e;let r=t.visibleRange;return e.union(r)},new o.NumberRange):e.visibleRange,growByUnion=e=>Array.isArray(e)?e.reduce((e,t)=>{var r;if(null==t)return e;let n=null!==(r=t.growBy)&&void 0!==r?r:new o.NumberRange;return e.union(n)},new o.NumberRange):e.growBy;function useDynamicAxisRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.NumberRange(0,0),r=arguments.length>2?arguments[2]:void 0,n=(0,a.useRef)(e?maximumRangeUnion(e):null),i=(0,a.useRef)(new Date().getTime()),s=(0,a.useRef)(new Date().getTime()),l=(0,a.useCallback)(function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;if(null==e)return;let l=Array.isArray(e)?e:[e];null==n.current&&(n.current=visibleRangeUnion(e));let c=new Date().getTime()-i.current,u=new Date().getTime()-s.current;i.current=new Date().getTime();let d=maximumRangeUnion(e);a&&(d=d.union(a));let m=growByUnion(e);m&&d.growBy(m);let p=null,f=null;if(d.max>n.current.max&&(p=d.max),d.min<n.current.min&&(f=d.min),(null!=p||null!=f)&&u>c){let e=Math.min(null!=f?f:n.current.min,t.min),a=Math.max(null!=p?p:n.current.max,t.max);(e!==n.current.min||a!==n.current.max)&&(n.current=new o.NumberRange(e,a),l.forEach(t=>{if(null==n.current||null==t)return;let i=new o.NumberRange(e,a);t.animateVisibleRange(i,null!=r?r:c,o.easing.inOutQuad)}),s.current=new Date().getTime())}if(u>3e3){d.max<n.current.max&&(p=n.current.max-(n.current.max-d.max)),d.min>n.current.min&&(f=n.current.min+(d.min-n.current.min));let e=Math.min(null!=f?f:n.current.min,t.min),r=Math.max(null!=p?p:n.current.max,t.max);if(r!=n.current.max||e!=n.current.min){l.forEach(t=>{if(null==n.current||null==t)return;let a=new o.NumberRange(e,r);t.animateVisibleRange(a,u/2,o.easing.inOutQuad)}),n.current=new o.NumberRange(e,r),s.current=new Date().getTime();return}}},[r,e,t]);return l}},20936:function(e,t,r){r.d(t,{Q:function(){return MenuBarProvider},Ff:function(){return TopMenu},Er:function(){return useMenuBarProvider},Ty:function(){return useTopMenu}});var n={};r.r(n),r.d(n,{Menubar:function(){return T},MenubarCheckboxItem:function(){return E},MenubarContent:function(){return D},MenubarContentIcon:function(){return j},MenubarGroup:function(){return w},MenubarIcon:function(){return k},MenubarItem:function(){return R},MenubarLabel:function(){return P},MenubarMenu:function(){return MenubarMenu},MenubarPortal:function(){return v},MenubarRadioGroup:function(){return A},MenubarRadioItem:function(){return L},MenubarSeparator:function(){return I},MenubarShortcut:function(){return MenubarShortcut},MenubarSub:function(){return S},MenubarSubContent:function(){return z},MenubarSubTrigger:function(){return M},MenubarTrigger:function(){return C}});var a=r(72612),o=r(65778),i=r(97570),s=r(73790),l=r(39164),c=r(63278),u=r(37734),d=r.n(u),m=r(98987),p=r(90077),f=r(58192),h=r(64929),x=r(39762),g=r(95106),b=r(21137);let y=l.createContext({value:null}),w=f.ZA,v=f.h_,S=f.Tr,A=f.Ee,T=l.forwardRef((e,t)=>{let{className:r,children:n,...o}=e,[i,s]=l.useState(null);return(0,a.jsx)(y.Provider,{value:{value:i},children:(0,a.jsx)(f.fC,{ref:t,value:null!=i?i:void 0,className:(0,h.cn)("flex items-center space-x-1 rounded-md shadow-sm",r),onValueChange:s,...o,children:n})})});(0,h.h)(T,f.fC.displayName);let N=l.createContext({id:""}),MenubarMenu=e=>{let t=l.useId();return(0,a.jsx)(N.Provider,{value:{id:t},children:(0,a.jsx)(f.v2,{...e,value:t})})},k=l.forwardRef((e,t)=>{let{className:r,Icon:n,...o}=e;return l.cloneElement((0,a.jsx)(n,{ref:t,className:(0,h.cn)("size-4 text-white transition-colors group-data-[state=open]:text-white lg:text-white/60",r),...o}))}),C=l.forwardRef((e,t)=>{let{className:r,children:n,asChild:o,...i}=e,{value:u}=l.useContext(y),{id:d}=l.useContext(N),m=o?b.g7:"div";return(0,a.jsxs)(f.xz,{ref:t,className:(0,h.cn)("group relative flex cursor-default select-none items-center outline-none data-[state=open]:text-accent-foreground focus:text-accent-foreground",i.disabled?"cursor-not-allowed opacity-50":"cursor-pointer",r),...i,children:[(0,a.jsx)(x.M,{children:(null==u?void 0:u.replace("radix-",""))==d&&!i.disabled&&(0,a.jsx)(s.E.div,{layoutId:"menubarTrigger",initial:{opacity:0},animate:{opacity:1,transition:{duration:.1,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.1,delay:.1,ease:"easeIn"}},transition:{type:"spring",damping:20,mass:.5,stiffness:450},className:(0,c.dV)("pointer-events-none absolute inset-0 rounded-sm bg-brand-700")})}),(0,a.jsx)(m,{className:"relative z-20 flex flex-1 items-center gap-2 rounded-sm p-3 text-sm font-medium text-accent-foreground",children:n})]})});(0,h.h)(C,f.xz.displayName);let j=l.forwardRef((e,t)=>{let{className:r,Icon:n,...o}=e;return l.cloneElement((0,a.jsx)(n,{ref:t,className:(0,h.cn)("size-4 text-white/60",r),...o}))}),M=l.forwardRef((e,t)=>{let{className:r,inset:n,children:o,...i}=e;return(0,a.jsxs)(f.fF,{ref:t,className:(0,h.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent data-[state=open]:text-accent-foreground focus:bg-accent focus:text-accent-foreground",n&&"pl-8",r),...i,children:[o,(0,a.jsx)(p.XCv,{className:"ml-auto h-4 w-4"})]})});(0,h.h)(M,f.fF.displayName);let z=l.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(f.tu,{ref:t,sideOffset:4,alignOffset:-5,className:(0,h.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...n})});(0,h.h)(z,f.tu.displayName);let D=l.forwardRef((e,t)=>{let{className:r,align:n="start",alignOffset:o=-4,sideOffset:i=8,...s}=e;return(0,a.jsx)(f.h_,{children:(0,a.jsx)(f.VY,{ref:t,align:n,alignOffset:o,sideOffset:i,className:(0,h.cn)("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...s})})});(0,h.h)(D,f.VY.displayName);let R=l.forwardRef((e,t)=>{let{className:r,inset:n,...o}=e;return(0,a.jsx)(f.ck,{ref:t,className:(0,h.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",n&&"pl-8",r),...o})});(0,h.h)(R,f.ck.displayName);let E=l.forwardRef((e,t)=>{let{className:r,children:n,checked:o,...i}=e;return(0,a.jsxs)(f.oC,{ref:t,className:(0,h.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",r),checked:o,...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(f.wU,{children:(0,a.jsx)(p.nQG,{className:"h-4 w-4"})})}),n]})});(0,h.h)(E,f.oC.displayName);let L=l.forwardRef((e,t)=>{let{className:r,children:n,...o}=e;return(0,a.jsxs)(f.Rk,{ref:t,className:(0,h.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",r),...o,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(f.wU,{children:(0,a.jsx)(g.Z,{className:"h-4 w-4 text-brand-400"})})}),n]})});(0,h.h)(L,f.Rk.displayName);let P=l.forwardRef((e,t)=>{let{className:r,inset:n,...o}=e;return(0,a.jsx)(f.__,{ref:t,className:(0,h.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",r),...o})});(0,h.h)(P,f.__.displayName);let I=l.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(f.Z0,{ref:t,className:(0,h.cn)("-mx-1 my-1 h-px bg-muted",r),...n})});(0,h.h)(I,f.Z0.displayName);let MenubarShortcut=e=>{let{className:t,...r}=e;return(0,a.jsx)("span",{className:(0,h.cn)("ml-auto text-xs tracking-widest text-muted-foreground",t),...r})};MenubarShortcut.displayname="MenubarShortcut";var U=r(82157),O=r.n(U),F=r(75663),_=r(64107),B=r(10187),V=r(44649),G=r(56538),X=r(30461),W=r(35209);let MutationModal=e=>{let{open:t,setOpen:r}=e,n=e.isFailed?(0,a.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-800",children:(0,a.jsx)(o,{className:"h-6 w-6 text-red-600 dark:text-red-300","aria-hidden":"true"})}):(0,a.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100 dark:bg-green-700",children:(0,a.jsx)(X,{className:"h-6 w-6 text-green-600 dark:text-green-100","aria-hidden":"true"})}),i=(0,W.Z)("inline-flex w-full justify-center rounded-md border border-transparent px-4 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 focus:ring-offset-zinc-900 sm:text-sm",e.isLoading?"bg-brand-600 text-base font-medium text-white opacity-50 cursor-not-allowed":"bg-brand-600 text-base font-medium text-white hover:bg-brand-700");return(0,a.jsx)(V.u.Root,{show:t,as:l.Fragment,appear:!0,children:(0,a.jsxs)(G.V,{as:"div",className:"relative z-10",onClose:r,children:[(0,a.jsx)(V.u.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-zinc-500 bg-opacity-75 transition-opacity dark:bg-zinc-800 dark:bg-opacity-75"})}),(0,a.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-400 scrollbar-thumb-rounded-md dark:scrollbar-thumb-zinc-600",children:(0,a.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,a.jsx)(V.u.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,a.jsxs)(G.V.Panel,{className:"dark relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all dark:bg-zinc-900 sm:my-8 sm:w-full sm:max-w-sm sm:p-6 md:max-w-lg lg:max-w-xl xl:max-w-3xl",children:[(0,a.jsxs)("div",{children:[e.isLoading?(0,a.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800",children:(0,a.jsxs)("svg",{className:(0,W.Z)("h-6 w-6 animate-spin text-zinc-800 dark:text-zinc-200"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):n,(0,a.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,a.jsx)(G.V.Title,{as:"h3",className:"text-lg font-medium leading-6 text-zinc-900 dark:text-zinc-100",children:e.title}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("div",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:e.children})})]})]}),(0,a.jsx)("div",{className:"mt-5 sm:mt-6",children:(0,a.jsx)("button",{type:"button",className:i,onClick:e.isLoading?void 0:()=>r(!1),disabled:e.isLoading,children:e.dismissText})})]})})})})]})})};var H=r(72426),Z=r(99196);let HelpActions=e=>{let{className:t}=e,[r,n]=(0,l.useState)(!1),[o,i]=(0,l.useState)(!1),[s,c]=(0,l.useState)({title:"",children:null,dismissText:"OK"}),[u,d]=(0,l.useState)({title:"",children:null,dismissText:"OK"}),m=B.S["klippy-extensions"].symlink.useMutation(),p=B.S.mcu.flashAllConnected.useMutation(),f=r?(0,a.jsx)(MutationModal,{...u,setOpen:n,open:r,isFailed:m.isError,isLoading:m.isLoading}):null,h=o?(0,a.jsx)(MutationModal,{...s,setOpen:i,open:o,isFailed:p.isError,isLoading:p.isLoading}):null,x=(0,l.useCallback)(()=>{c({title:"Flash Firmware",children:(0,a.jsx)("p",{children:"Please wait while RatOS is flashing your connected boards..."}),dismissText:"Please wait..."}),i(!0),p.mutateAsync().then(e=>{c({title:"Flashing Complete",children:(0,a.jsx)("p",{dangerouslySetInnerHTML:{__html:e.report.replace(/\n/g,"<br />")}}),dismissText:"OK"})},e=>{c({title:"Flashing Failed",children:"string"==typeof e||e instanceof String?(0,a.jsx)("p",{dangerouslySetInnerHTML:{__html:e.replace(/\n/g,"<br />")}}):(0,a.jsx)("p",{children:"Something wen't wrong while flashing the connected boards, please try again."}),dismissText:"OK"})})},[p]),g=(0,l.useCallback)(()=>{d({title:"Symlink Extensions",children:(0,a.jsx)("p",{children:"Please wait while RatOS is symlinking klippy extensions..."}),dismissText:"Please wait..."}),n(!0),m.mutateAsync({}).then(e=>{d({title:"Symlink Complete",children:(0,a.jsx)("p",{dangerouslySetInnerHTML:{__html:e.report.replace(/\n/g,"<br />")}}),dismissText:"OK"})},e=>{d({title:"Symlink Failed",children:"string"==typeof e||e instanceof String?(0,a.jsx)("p",{dangerouslySetInnerHTML:{__html:e.replace(/\n/g,"<br />")}}):(0,a.jsx)("p",{children:"Something wen't wrong while symlinking the extensions, please try again."}),dismissText:"OK"})})},[m]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(R,{onClick:g,className:"gap-2",children:[(0,a.jsx)(H.Z,{className:"h-4 w-4 text-zinc-400"})," Symlink Extensions"]}),(0,a.jsxs)(R,{onClick:x,className:"gap-2",children:[(0,a.jsx)(Z.Z,{className:"h-4 w-4 text-zinc-400"})," Flash Connected Boards"]}),f,h]})},Q=(0,l.createContext)({registerMenu:()=>{throw Error("No menu registered in context")},unregisterMenu:()=>{throw Error("No menu registered in context")},changed:()=>()=>{}}),useMenuBarProvider=()=>{let e=l.useRef(new Map),t=function(){let e=(0,l.useRef)(new Set);return(0,l.useCallback)(t=>{if("function"==typeof t)return e.current.add(t),()=>{e.current.delete(t)};e.current.forEach(e=>e(t))},[])}(),r=(0,l.useCallback)((r,n)=>{var a;e.current.has(r)&&n===(null===(a=e.current.get(r))||void 0===a?void 0:a.render)||(e.current=new Map(e.current).set(r,{render:n,id:r}),t())},[t]),n=(0,l.useCallback)(r=>{e.current.delete(r),t()},[t]);return{topMenuProps:{menus:e,menusChanged:t},providerProps:{registerMenu:r,unregisterMenu:n,changed:t}}},MenuBarProvider=e=>(0,a.jsx)(Q.Provider,{value:e,children:e.children}),useTopMenu=(e,t)=>{let{registerMenu:r,unregisterMenu:n}=(0,l.useContext)(Q);(0,l.useEffect)(()=>(r(e,t),()=>n(e)),[e,r,t,n])},TopMenu=e=>{var t;let{sidebarOpen:r,setSidebarOpen:u,menus:p,menusChanged:f}=e,[,h]=(0,l.useState)(Array.from(p.current.values()));return t=(0,l.useCallback)(()=>{h(Array.from(p.current.values()))},[p]),(0,l.useEffect)(()=>{let e=f(t);return e},[f,t]),(0,a.jsx)(s.E.div,{className:(0,c.dV)("fixed inset-0 z-50 flex h-14 items-center justify-between gap-12 transition lg:left-72 lg:z-30","border-b border-zinc-900/10 backdrop-blur-sm dark:border-white/10 dark:backdrop-blur lg:left-72",!r&&"backdrop-blur-sm dark:backdrop-blur lg:left-72",r?"bg-background":"bg-background/80 dark:bg-background/50"),children:(0,a.jsx)("div",{className:"mx-auto flex-1",children:(0,a.jsxs)("div",{className:"flex h-16 items-center px-4 lg:justify-between",children:[(0,a.jsx)("div",{className:"flex flex-1 items-center justify-between space-x-4 lg:hidden",children:(0,a.jsx)("div",{className:"flex h-16 shrink-0 items-center",children:(0,a.jsx)(d(),{width:160,height:40,className:"h-8 w-auto",src:m.Z,alt:"Workflow"})})}),(0,a.jsxs)(T,{className:"lg:flex-1",children:[p.current.size>0&&Array.from(p.current.values()).map(e=>{let{id:t,render:r}=e;return(0,a.jsx)(l.Fragment,{children:r(n)},t)}),(0,a.jsx)(I,{className:"flex-1 bg-transparent"}),(0,a.jsxs)(MenubarMenu,{children:[(0,a.jsxs)(C,{className:"flex-nowrap whitespace-nowrap text-nowrap",children:[(0,a.jsx)(k,{Icon:F.Z})," ",(0,a.jsx)("span",{className:"hidden lg:inline",children:"Help"})]}),(0,a.jsxs)(D,{onCloseAutoFocus:e=>e.preventDefault(),children:[(0,a.jsx)(HelpActions,{}),(0,a.jsx)(I,{}),(0,a.jsx)(R,{asChild:!0,className:"gap-2",children:(0,a.jsxs)(O(),{href:"https://os.ratrig.com/docs/introduction",target:"_blank",rel:"noreferrer",children:[(0,a.jsx)(j,{Icon:_.Z})," Docs"]})}),(0,a.jsx)(R,{asChild:!0,className:"gap-2",children:(0,a.jsxs)(O(),{href:"https://github.com/sponsors/miklschmidt",target:"_blank",rel:"noreferrer",children:[(0,a.jsx)(j,{Icon:_.Z})," Donate"]})})]})]}),(0,a.jsx)(MenubarMenu,{children:(0,a.jsxs)(C,{onClick:()=>u(e=>!e),className:"flex-nowrap whitespace-nowrap text-nowrap lg:hidden",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open main menu"}),r?(0,a.jsx)(o,{className:(0,c.dV)("block","-m-0.5 h-5 w-5"),"aria-hidden":"true"}):(0,a.jsx)(i,{className:(0,c.dV)("block","-m-0.5 h-5 w-5"),"aria-hidden":"true"})]})})]})]})})})}},8832:function(e,t,r){r.d(t,{I:function(){return FullLoadScreen}});var n=r(72612),a=r(98130),o=r(63278);let FullLoadScreen=e=>(0,n.jsx)("div",{className:(0,o.dV)("flex h-full w-full flex-1 items-center justify-center",e.className),children:(0,n.jsx)(a.$,{className:"h-8 w-8"})})},56445:function(e,t,r){r.r(t),r.d(t,{NoSSR:function(){return NoSSR}});var n=r(72612),a=r(91302),o=r(39164),i=r(8832);let NoSSR=e=>{var t;let r=(0,a.O)();return r?(0,n.jsx)(s,{children:e.children}):null!==(t=e.fallback)&&void 0!==t?t:(0,n.jsx)(i.I,{})},s=(0,o.lazy)(()=>Promise.resolve({default:e=>(0,n.jsx)(n.Fragment,{children:e.children})}))},98130:function(e,t,r){r.d(t,{$:function(){return Spinner}});var n=r(72612),a=r(63278);let Spinner=e=>{var t,r;return(0,n.jsxs)("svg",{className:(0,a.m6)("h-5 w-5 animate-spin text-black/50 dark:text-white/50",e.noMargin?"":"-ml-1 mr-3",e.className),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-20",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:null!==(t=e.strokeWidth)&&void 0!==t?t:4}),(0,n.jsx)("circle",{className:"opacity-100",cx:"12",cy:"12",r:"10",strokeDasharray:10*Math.PI/3,strokeLinecap:"round",stroke:"currentColor",strokeWidth:null!==(r=e.strokeWidth)&&void 0!==r?r:4})]})}},61946:function(e,t,r){r.d(t,{Jt:function(){return a},uo:function(){return xEndstopOptions}});var n=r(1314);let xEndstopOptions=(e,t)=>{let r=[];if((null==t?void 0:t.toolboard)!=null&&r.push({id:"endstop-toolboard",title:"Physical Endstop",badge:[{color:"sky",children:"".concat(t.toolboard.name).concat(null!=t.toolNumber&&" T".concat(t.toolNumber))}]}),(null==t?void 0:t.axis)===n.po.x){var a,o,i,s;r.push({id:"endstop",title:"Physical Endstop",badge:[{color:"purple",children:null!==(i=null==e?void 0:null===(a=e.controlboard)||void 0===a?void 0:a.name)&&void 0!==i?i:"Control Board"}]}),r.push({id:"sensorless",title:"Sensorless Homing",badge:[{color:"purple",children:null!==(s=null==e?void 0:null===(o=e.controlboard)||void 0===o?void 0:o.name)&&void 0!==s?s:"Control Board"}]})}return r},a={id:"endstop",title:"Physical Endstop",badge:[{color:"purple",children:"Control Board"}]}},91302:function(e,t,r){r.d(t,{O:function(){return useIsClient}});var n=r(39164);let useIsClient=()=>{let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{t(!0)},[]),e}},80461:function(e,t,r){r.d(t,{YC:function(){return useToolheads},yk:function(){return useToolheadConfiguration}});var n=r(11974),a=r(21264),o=r(96588),i=r(39164),s=r(32342),l=r(65667),c=r(22595),u=r(61946),d=r(4840);let useToolheads=()=>{let e=(0,o.sJ)(l.$T),t=(0,i.useMemo)(()=>null==e?void 0:e.filter(Boolean).map(e=>new n.D(e)),[e]);return t},useToolheadConfiguration=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=(0,o.sJ)(l.wm),m=(0,i.useRef)(r);m.current!==r&&r.length>0&&(m.current=r.slice());let p=(0,i.useMemo)(()=>{var r;let a=null===(r=m.current)||void 0===r?void 0:r.filter(Boolean).map(e=>new n.D(e)),o=null==a?void 0:a.find(t=>t.getTool()===e||t.getMotionAxis()===e||t.getExtruderAxis()===e);if(null==o&&t)throw Error("Toolhead with number or axis ".concat(e," not found"));return null!=o?o:null},[t,e,m.current]),[f,h]=(0,i.useState)(!1),x=(0,o._8)(e=>{let{set:t,snapshot:r}=e;return async e=>{var o,i,m,p;let x=new n.D(e),g=await r.getPromise((0,l.AF)(x.getTool()));if(null==g)throw Error("Toolhead ".concat(x.getToolCommand()," not found"));let b=new n.D(g);if(e.extruder.id!=b.getExtruder().id&&null!=e.extruder.stepper){let r=(0,a.WZ)(e.extruder.stepper);null!=r&&t((0,s.ew)(x.getExtruderAxis()),t=>{var n;return null==t?null:{...t,stepper:r.id,current:null!==(n=e.extruder.current)&&void 0!==n?n:.71*r.maxPeakCurrent}})}if((null===(o=e.toolboard)||void 0===o?void 0:o.id)!==(null===(i=b.getToolboard())||void 0===i?void 0:i.id)){if(null==e.toolboard&&"endstop-toolboard"===e.xEndstop.id&&(e.xEndstop=u.Jt),null===(m=e.partFan)||void 0===m?void 0:m.id.endsWith("-toolboard")){let t=(0,d.gL)(null,e).shift();if(null==t)throw Error("No part fan options available for current T".concat(e.toolNumber," configuration"));e.partFan=t}if(null===(p=e.hotendFan)||void 0===p?void 0:p.id.endsWith("-toolboard")){let t=(0,d.Yo)(null,e).shift();if(null==t)throw Error("No hotend fan options available for current T".concat(e.toolNumber," configuration"));e.hotendFan=t}}e.thermistor!==b.getThermistor()&&e.thermistor!==e.hotend.thermistor?h(!0):e.hotend.id==b.getHotend().id||f||(e.thermistor=e.hotend.thermistor);let y=c.PY.extend({toolNumber:c.Qr}).nullable().safeParse({...e,toolNumber:b.getTool()});return y.success&&t((0,l.AF)(b.getTool()),y.data),y}},[f]);return{toolhead:p,setToolhead:x}}},46126:function(e,t,r){r.d(t,{NI:function(){return i},Xz:function(){return x}});var n=r(94594),a=r(18954);let o=n.z.union([n.z.literal("time"),n.z.literal("x_acceleration"),n.z.literal("y_acceleration"),n.z.literal("z_acceleration")]),i=n.z.object({header:n.z.tuple([o,o,o,o])});n.z.object({data:n.z.array(n.z.tuple([n.z.number(),n.z.number(),n.z.number(),n.z.number()])),overflows:n.z.number().optional(),errors:n.z.number().optional()});let s=n.z.object({frequencies:n.z.array(n.z.number()),estimates:n.z.array(n.z.number()),powerRange:n.z.object({max:n.z.number(),min:n.z.number()})}),l=n.z.object({x:s,y:s,z:s,total:s}),c=n.z.string().brand("MacroID"),u=n.z.string().brand("MacroSequenceID"),d=n.z.string().brand("MacroRecordingID"),m=n.z.string().brand("MacroRecordingRunID"),p=n.z.object({capturePSD:n.z.boolean().default(!1),accelerometer:a.Yx.optional(),color:n.z.string().optional()}).superRefine((e,t)=>(e.capturePSD&&null==e.accelerometer&&t.addIssue({code:n.z.ZodIssueCode.custom,message:"Required when recording resonance data",path:["accelerometer"]}),e));n.z.object({id:d,macroRecordingRunId:m,macroId:c,sequenceId:u,startTimeStamp:n.z.number(),endTimeStamp:n.z.number(),accelerometer:a.Yx,recordingHardwareName:n.z.string(),psd:l,name:n.z.string()});let f=n.z.object({id:u,name:n.z.string(),recording:p.nullable(),gcode:n.z.string().min(2)}),h=n.z.object({id:c,name:n.z.string(),description:n.z.string(),createdAtTimeStamp:n.z.number(),updatedAtTimeStamp:n.z.number().nullable(),recordingCount:n.z.record(u,n.z.number()),sequences:n.z.array(f)}),x=h.omit({recordingCount:!0,createdAtTimeStamp:!0,updatedAtTimeStamp:!0})},98987:function(e,t){t.Z={src:"/configure/_next/static/media/logo-white.6051cbc7.svg",height:443,width:1728,blurWidth:0,blurHeight:0}}}]);
//# sourceMappingURL=1192-80d9153f99358a7c.js.map