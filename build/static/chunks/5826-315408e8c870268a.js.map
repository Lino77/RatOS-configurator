{"version":3,"file":"static/chunks/5826-315408e8c870268a.js","mappings":"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","sources":["webpack://_N_E/./components/common/card.tsx","webpack://_N_E/./components/common/error-message.tsx","webpack://_N_E/./components/common/full-load-screen.tsx","webpack://_N_E/./components/common/no-ssr.tsx","webpack://_N_E/./hooks/useKlippyStateHandler.tsx","webpack://_N_E/./components/klippy-state-badge.tsx","webpack://_N_E/./components/moonraker-state-badge.tsx","webpack://_N_E/./components/common/printer-state-header.tsx","webpack://_N_E/./components/common/query-status.tsx","webpack://_N_E/./components/setup-steps/diff-modal.tsx","webpack://_N_E/./components/common/state-circle.tsx","webpack://_N_E/./components/setup-steps/file-changes.tsx","webpack://_N_E/./components/setup-steps/printer-rail-settings.tsx","webpack://_N_E/./components/ui/card.tsx","webpack://_N_E/./hooks/useChangeEffect.tsx","webpack://_N_E/./hooks/useMainsail.tsx","webpack://_N_E/<anon>"],"sourcesContent":["'use client';\nimport { cva } from 'class-variance-authority';\nimport React from 'react';\nimport { type MotionProps, motion } from 'framer-motion';\n\nconst cardVariants = cva([\n\t'relative rounded-lg  bg-white dark:bg-zinc-900/60',\n\t'shadow-[0px_0px_0px_1px_rgba(9,9,11,0.07),0px_2px_2px_0px_rgba(9,9,11,0.05)] dark:shadow-[0px_0px_0px_1px_rgba(255,255,255,0.05)]',\n\t'dark:before:-inset-px dark:before:rounded-xl',\n\t'dark:before:pointer-events-none dark:before:absolute dark:before:shadow-[0px_2px_8px_0px_rgba(0,_0,_0,_0.20),_0px_1px_0px_0px_rgba(255,_255,_255,_0.07)_inset]',\n]);\n\ntype CardProps = React.PropsWithChildren<\n\t{\n\t\tclassName?: string;\n\t} & MotionProps\n>;\n\nexport const Card: React.FC<CardProps> = (props) => {\n\treturn (\n\t\t<motion.div {...props} className={cardVariants({ className: props.className })}>\n\t\t\t{props.children}\n\t\t</motion.div>\n\t);\n};\n","import { XCircleIcon } from '@heroicons/react/24/solid';\nimport React from 'react';\nimport { twMerge } from 'tailwind-merge';\nimport { Banner } from '@/components/common/banner';\n\nexport type ErrorMessageProps = React.PropsWithChildren<{\n\ttitle?: string;\n\tclassName?: string;\n}>;\n\nexport const ErrorMessage: React.FC<ErrorMessageProps> = (props) => {\n\treturn (\n\t\t<Banner\n\t\t\tcolor=\"red\"\n\t\t\tIcon={XCircleIcon}\n\t\t\ttitle={props.title ? 'Error: ' + props.title : 'Error'}\n\t\t\tclassName={twMerge(props.className, 'whitespace-pre-wrap')}\n\t\t>\n\t\t\t{props.children}\n\t\t</Banner>\n\t);\n};\n","import { Spinner } from '@/components/common/spinner';\nimport { twJoin } from 'tailwind-merge';\n\nexport const FullLoadScreen = (props: { className?: string }) => {\n\treturn (\n\t\t<div className={twJoin('flex h-full w-full flex-1 items-center justify-center', props.className)}>\n\t\t\t<Spinner className=\"h-8 w-8\" />\n\t\t</div>\n\t);\n};\n","'use client';\nimport { useIsClient } from '@/hooks/isClient';\nimport dynamic from 'next/dynamic';\nimport React, { lazy } from 'react';\nimport { FullLoadScreen } from '@/components/common/full-load-screen';\nexport const NoSSR = (props: React.PropsWithChildren<{ fallback?: React.ReactNode }>) => {\n\tconst isClient = useIsClient();\n\treturn isClient ? <DynamicImport>{props.children}</DynamicImport> : props.fallback ?? <FullLoadScreen />;\n};\nconst DynamicImport = lazy(() =>\n\tPromise.resolve({ default: (props: React.PropsWithChildren) => <>{props.children}</> }),\n);\n","'use client';\n\nimport { useCallback, useEffect, useState } from 'react';\nimport { atom, useSetRecoilState } from 'recoil';\nimport { useMoonraker } from '@/moonraker/hooks';\n\nexport type KlippyReadyStates = 'ready' | 'error' | 'shutdown' | 'startup' | 'unknown';\n\nexport const useKlippyStateHandler = () => {\n\tconst { query, lastMessage } = useMoonraker({\n\t\tpassThroughUpdateMethods: ['notify_klippy_ready', 'notify_klippy_shutdown', 'notify_klippy_disconnected'],\n\t});\n\tconst [klippyReadyState, setKlippyReadyState] = useState<KlippyReadyStates>('unknown');\n\n\tconst queryKlippyState = useCallback(async () => {\n\t\tif (query != null) {\n\t\t\ttry {\n\t\t\t\tconst serverInfo = await query('server.info');\n\t\t\t\tif (serverInfo?.klippy_state == null) return;\n\t\t\t\tconst klippyState: KlippyReadyStates = serverInfo.klippy_state;\n\t\t\t\tsetKlippyReadyState(klippyState);\n\t\t\t\tif (klippyState === 'startup') {\n\t\t\t\t\t// Query for server info in two seconds as instructed by the moonraker docs.\n\t\t\t\t\t// Seems unnecessary with globally published events?\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tqueryKlippyState();\n\t\t\t\t\t}, 2000);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsetKlippyReadyState('unknown');\n\t\t\t}\n\t\t}\n\t}, [query, setKlippyReadyState]);\n\n\tuseEffect(() => {\n\t\tif (query != null) {\n\t\t\tqueryKlippyState();\n\t\t}\n\t}, [query, queryKlippyState]);\n\n\tuseEffect(() => {\n\t\tif (lastMessage && 'method' in lastMessage && lastMessage.method === 'notify_klippy_ready') {\n\t\t\tsetKlippyReadyState('ready');\n\t\t}\n\t\tif (lastMessage && 'method' in lastMessage && lastMessage.method === 'notify_klippy_shutdown') {\n\t\t\tsetKlippyReadyState('shutdown');\n\t\t}\n\t\tif (lastMessage && 'method' in lastMessage && lastMessage.method === 'notify_klippy_disconnected') {\n\t\t\tsetKlippyReadyState('unknown');\n\t\t\tqueryKlippyState();\n\t\t}\n\t}, [lastMessage, queryKlippyState, setKlippyReadyState]);\n\n\treturn klippyReadyState;\n};\n","'use client';\nimport React from 'react';\nimport { useRecoilValue } from 'recoil';\nimport { twJoin } from 'tailwind-merge';\nimport { KlippyReadyStates, useKlippyStateHandler } from '@/hooks/useKlippyStateHandler';\nimport { Badge, BadgeProps, badgeTextColorStyle } from '@/components/common/badge';\n\ninterface Props {\n\tclassName?: string;\n}\n\nconst klipperStateToText = (klippyState: KlippyReadyStates) => {\n\tswitch (klippyState) {\n\t\tcase 'error':\n\t\t\treturn 'Klipper State: Error';\n\t\tcase 'ready':\n\t\t\treturn 'Klipper State: Ready';\n\t\tcase 'shutdown':\n\t\t\treturn 'Klipper State: Shutdown';\n\t\tcase 'startup':\n\t\t\treturn 'Klipper State: Startup';\n\t\tcase 'unknown':\n\t\t\treturn 'Klipper State: Unknown';\n\t\tdefault:\n\t\t\treturn 'Klipper State: Unknown';\n\t}\n};\n\nexport const KlippyStateBadge: React.FC<Props> = (props) => {\n\tconst klippyState = useKlippyStateHandler();\n\tlet color: BadgeProps['color'] = 'orange';\n\tswitch (klippyState) {\n\t\tcase 'error':\n\t\t\tcolor = 'red';\n\t\t\tbreak;\n\t\tcase 'ready':\n\t\t\tcolor = 'brand';\n\t\t\tbreak;\n\t\tcase 'shutdown':\n\t\t\tcolor = 'orange';\n\t\t\tbreak;\n\t\tcase 'startup':\n\t\t\tcolor = 'yellow';\n\t\t\tbreak;\n\t\tcase 'unknown':\n\t\t\tcolor = 'orange';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tcolor = 'orange';\n\t\t\tbreak;\n\t}\n\n\treturn (\n\t\t<Badge color={color} title={klipperStateToText(klippyState)}>\n\t\t\t<svg className={twJoin(badgeTextColorStyle({ color }), 'h-2 w-2')} fill=\"currentColor\" viewBox=\"0 0 8 8\">\n\t\t\t\t<circle cx={4} cy={4} r={3} />\n\t\t\t</svg>\n\t\t\tKlipper\n\t\t</Badge>\n\t);\n};\n","'use client';\n\nimport React from 'react';\nimport { twJoin } from 'tailwind-merge';\nimport { useMoonraker } from '@/moonraker/hooks';\nimport { Badge, BadgeProps, badgeTextColorStyle } from '@/components/common/badge';\nimport { MoonrakerStatus } from '@/moonraker/types';\n\ninterface Props {\n\tclassName?: string;\n}\n\nconst moonrakerStatusToText = (moonrakerState: MoonrakerStatus | null) => {\n\tswitch (moonrakerState) {\n\t\tcase 'not-running':\n\t\t\treturn 'Moonraker State: Not Running';\n\t\tcase 'connected':\n\t\t\treturn 'Moonraker State: Connected';\n\t\tcase 'connecting':\n\t\t\treturn 'Moonraker State: Connecting';\n\t\tdefault:\n\t\t\treturn 'Moonraker State: Unknown';\n\t}\n};\n\nexport const MoonrakerStateBadge: React.FC<Props> = (props) => {\n\tconst { status } = useMoonraker();\n\tlet color: BadgeProps['color'] = 'orange';\n\tswitch (status) {\n\t\tcase 'not-running':\n\t\t\tcolor = 'red';\n\t\t\tbreak;\n\t\tcase 'connected':\n\t\t\tcolor = 'brand';\n\t\t\tbreak;\n\t\tcase 'connecting':\n\t\t\tcolor = 'yellow';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tcolor = 'orange';\n\t\t\tbreak;\n\t}\n\treturn (\n\t\t<Badge color={color} title={moonrakerStatusToText(status)}>\n\t\t\t<svg className={twJoin(badgeTextColorStyle({ color }), 'h-2 w-2')} fill=\"currentColor\" viewBox=\"0 0 8 8\">\n\t\t\t\t<circle cx={4} cy={4} r={3} />\n\t\t\t</svg>\n\t\t\tMoonraker\n\t\t</Badge>\n\t);\n};\n","import { twJoin, twMerge } from 'tailwind-merge';\nimport { useIsClient } from '@/hooks/isClient';\nimport { Badge } from '@/components/common/badge';\nimport { useMainsailQuery } from '@/hooks/useMainsail';\nimport { useMoonrakerQuery, usePrinterObjectQuery } from '@/moonraker/hooks';\nimport { trpc } from '@/utils/trpc';\nimport React, { Fragment, useMemo } from 'react';\nimport { KlippyStateBadge } from '@/components/klippy-state-badge';\nimport { MoonrakerStateBadge } from '@/components/moonraker-state-badge';\nimport { LoadablePrinterState } from '@/recoil/printer';\nimport { useRecoilValue } from 'recoil';\n\ninterface PrinterHeaderProps {\n\tstateColorClass?: string;\n\tbreadcrumb?: React.ReactNode[];\n\tbadges?: React.ReactNode;\n\ttitle: React.ReactNode;\n\tdescription: React.ReactNode;\n}\n\nexport const PrinterHeader: React.FC<PrinterHeaderProps> = (props) => {\n\treturn (\n\t\t<div className=\"mt-6 @container\">\n\t\t\t<div className=\"border-t border-white/10 bg-zinc-700/15 backdrop-blur-sm\">\n\t\t\t\t<div className=\"mx-auto flex max-w-7xl flex-row items-center justify-between gap-x-8 gap-y-4 px-4 py-4\">\n\t\t\t\t\t<div className=\"flex items-center gap-x-3\">\n\t\t\t\t\t\t<div className={twMerge('flex-none rounded-full bg-green-400/10 p-1 text-zinc-400', props.stateColorClass)}>\n\t\t\t\t\t\t\t<div className=\"h-2 w-2 rounded-full bg-current\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h1 className=\"flex gap-x-3 text-base leading-7\">\n\t\t\t\t\t\t\t{props.breadcrumb?.map((bc, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Fragment key={index}>\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-semibold text-white\">{bc}</span>\n\t\t\t\t\t\t\t\t\t\t{index < (props.breadcrumb?.length ?? 0) - 1 && <span className=\"text-zinc-400\">/</span>}\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"capitalize\">{props.badges}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<header className=\"sticky top-14 z-10 flex flex-grow-0 items-center gap-1 border-y border-b-white/10 border-t-white/5 bg-zinc-700/10 backdrop-blur-sm\">\n\t\t\t\t<div className=\"mx-auto w-full max-w-7xl gap-x-8 px-4 py-4\">\n\t\t\t\t\t<h3 className=\"dark:focus-ring-0 flex h-auto flex-1 border-none p-0 text-xl font-medium focus:ring-0 focus:ring-offset-0\">\n\t\t\t\t\t\t{props.title}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<p className=\"dark:focus-ring-0 flex h-auto flex-1 border-none p-0 text-base font-medium text-muted-foreground focus:ring-0 focus:ring-offset-0 dark:text-muted-foreground\">\n\t\t\t\t\t\t{props.description}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t</div>\n\t);\n};\n\nexport const PrinterStateHeader: React.FC<{ title?: string; description: string }> = (props) => {\n\tconst printerName = useMainsailQuery('general.printername', { initialData: 'Loading...' });\n\tconst savedPrinter = useRecoilValue(LoadablePrinterState);\n\tconst klippyState = useMoonrakerQuery('server.info');\n\tconst printerStateQuery = usePrinterObjectQuery('print_stats');\n\tconst printerState = printerStateQuery.data?.print_stats.state;\n\tconst breadCrumbs = useMemo(() => {\n\t\tconst crumbs: string[] = [printerName.data ?? 'RatOS'];\n\t\tif (klippyState.isLoading) {\n\t\t\tcrumbs.push('Loading...');\n\t\t} else if (savedPrinter?.name) {\n\t\t\tcrumbs.push(savedPrinter.name);\n\t\t}\n\t\treturn crumbs;\n\t}, [klippyState.isLoading, printerName.data, savedPrinter?.name]);\n\tconst isClient = useIsClient();\n\treturn isClient ? (\n\t\t<PrinterHeader\n\t\t\tstateColorClass={twJoin(\n\t\t\t\tklippyState.data?.klippy_state === 'error' && 'bg-red-400/10 text-red-400',\n\t\t\t\tklippyState.data?.klippy_state === 'startup' && 'bg-amber-400/10 text-amber-400',\n\t\t\t\tklippyState.data?.klippy_state === 'ready' && 'bg-green-400/10 text-green-400',\n\t\t\t\tklippyState.data?.klippy_state === 'shutdown' && 'bg-red-400/10 text-red-400',\n\t\t\t)}\n\t\t\tbreadcrumb={breadCrumbs}\n\t\t\tbadges={\n\t\t\t\t<Badge\n\t\t\t\t\tclassName=\"order-first capitalize @screen-sm:order-none\"\n\t\t\t\t\tcolor={\n\t\t\t\t\t\tprinterState === undefined\n\t\t\t\t\t\t\t? 'gray'\n\t\t\t\t\t\t\t: printerState == 'canceled'\n\t\t\t\t\t\t\t\t? 'pink'\n\t\t\t\t\t\t\t\t: printerState == 'complete'\n\t\t\t\t\t\t\t\t\t? 'green'\n\t\t\t\t\t\t\t\t\t: printerState == 'error'\n\t\t\t\t\t\t\t\t\t\t? 'red'\n\t\t\t\t\t\t\t\t\t\t: printerState === 'paused'\n\t\t\t\t\t\t\t\t\t\t\t? 'sky'\n\t\t\t\t\t\t\t\t\t\t\t: printerState === 'printing'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'yellow'\n\t\t\t\t\t\t\t\t\t\t\t\t: printerState === 'standby'\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'brand'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'gray'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{printerState === undefined ? 'Offline' : printerState ?? 'Loading...'}\n\t\t\t\t</Badge>\n\t\t\t}\n\t\t\ttitle={props.title}\n\t\t\tdescription={props.description}\n\t\t/>\n\t) : (\n\t\t<PrinterStateLoadingHeader />\n\t);\n};\n\nexport const PrinterConnectionHeader: React.FC<{ title?: string; description: string }> = (props) => {\n\tconst printerName = useMainsailQuery('general.printername', { initialData: 'Loading...' });\n\tconst savedPrinter = useRecoilValue(LoadablePrinterState);\n\tconst klippyState = useMoonrakerQuery('server.info');\n\tconst isClient = useIsClient();\n\tconst breadCrumbs = useMemo(() => {\n\t\tconst crumbs: string[] = [printerName.data ?? 'RatOS'];\n\t\tif (klippyState.isLoading) {\n\t\t\tcrumbs.push('Loading...');\n\t\t} else if (savedPrinter?.name) {\n\t\t\tcrumbs.push(savedPrinter.name);\n\t\t}\n\t\treturn crumbs;\n\t}, [klippyState.isLoading, printerName.data, savedPrinter?.name]);\n\treturn isClient ? (\n\t\t<PrinterHeader\n\t\t\tstateColorClass={twJoin(\n\t\t\t\tklippyState.data?.klippy_state === 'error' && 'bg-red-400/10 text-red-400',\n\t\t\t\tklippyState.data?.klippy_state === 'startup' && 'bg-amber-400/10 text-amber-400',\n\t\t\t\tklippyState.data?.klippy_state === 'ready' && 'bg-green-400/10 text-green-400',\n\t\t\t\tklippyState.data?.klippy_state === 'shutdown' && 'bg-red-400/10 text-red-400',\n\t\t\t)}\n\t\t\tbreadcrumb={breadCrumbs}\n\t\t\tbadges={\n\t\t\t\t<div className=\"inline-flex space-x-1 sm:flex-row-reverse sm:justify-end sm:space-x-2 sm:space-y-0 md:flex-row\">\n\t\t\t\t\t<KlippyStateBadge />\n\t\t\t\t\t<MoonrakerStateBadge />\n\t\t\t\t</div>\n\t\t\t}\n\t\t\ttitle={props.title}\n\t\t\tdescription={props.description}\n\t\t/>\n\t) : (\n\t\t<PrinterStateLoadingHeader />\n\t);\n};\n\nexport const PrinterStateLoadingHeader: React.FC = () => (\n\t<PrinterHeader\n\t\tstateColorClass=\"bg-gray-400/10 text-gray-400\"\n\t\tbreadcrumb={['RatOS', 'Loading...']}\n\t\ttitle=\"Loading printer state...\"\n\t\tdescription=\"Please wait while RatOS loads your printer state\"\n\t\tbadges={\n\t\t\t<div className=\"flex space-x-1 sm:flex-row-reverse sm:justify-end sm:space-x-2 sm:space-y-0 md:flex-row\">\n\t\t\t\t<KlippyStateBadge />\n\t\t\t\t<MoonrakerStateBadge />\n\t\t\t</div>\n\t\t}\n\t/>\n);\n","'use client';\nimport { TRPCClientErrorLike } from '@trpc/client';\nimport { UseTRPCQueryResult } from '@trpc/react-query/src/shared/hooks/types';\nimport { AppRouter } from '@/server/routers';\nimport { ErrorMessage } from '@/components/common/error-message';\nimport { Spinner } from '@/components/common/spinner';\nimport { motion } from 'framer-motion';\nimport { AnimatedContainer } from '@/components/common/animated-container';\nimport { UseQueryResult } from '@tanstack/react-query';\n\nexport const QueryStatus = (query: UseQueryResult<any, any>) => {\n\tlet content = null;\n\tif (query.isError) {\n\t\tcontent = (\n\t\t\t<div className=\"mb-4\">\n\t\t\t\t<ErrorMessage>{query.error?.message}</ErrorMessage>\n\t\t\t</div>\n\t\t);\n\t}\n\tif (query.isLoading) {\n\t\tcontent = (\n\t\t\t<div className=\"mb-4 flex items-center justify-center\">\n\t\t\t\t<Spinner />\n\t\t\t</div>\n\t\t);\n\t}\n\treturn <AnimatedContainer>{content}</AnimatedContainer>;\n};\n","'use client';\n/* This example requires Tailwind CSS v2.0+ */\nimport React, { Fragment, useCallback, useMemo, useState } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { parseDiff, Diff, DiffType, ViewType, HunkData, TokenizeOptions, tokenize, markEdits } from 'react-diff-view';\nimport type { FileState } from '@/server/routers/printer';\nimport 'react-diff-view/style/index.css';\nimport { XMarkIcon } from '@heroicons/react/20/solid';\nimport { Button } from '@/components/common/button';\nimport { twJoin, twMerge } from 'tailwind-merge';\n\ninterface ModalProps {\n\ttitle: string;\n\tdiff: string;\n\tstate: FileState;\n\tisOpen: boolean;\n\tbuttons?: React.ReactNode;\n\toverwrite?: () => void;\n\tignore?: () => void;\n\tsetIsOpen: (open: boolean) => void;\n}\n\nconst TwoColumns = (props: { className?: string }) => {\n\treturn (\n\t\t<svg\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\tstrokeWidth=\"1.5\"\n\t\t\tstroke=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={twMerge('h-6 w-6', props.className)}\n\t\t>\n\t\t\t<path\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\td=\"M 12 4.5 L 12 19.5 M 4.125 19.5 L 19.875 19.5 C 20.496 19.5 21 18.996 21 18.375 L 21 5.625 C 21 5.004 20.496 4.5 19.875 4.5 L 4.125 4.5 C 3.504 4.5 3 5.004 3 5.625 L 3 18.375 C 3 18.996 3.504 19.5 4.125 19.5 Z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n};\nconst SingleColumn = (props: { className?: string }) => {\n\treturn (\n\t\t<svg\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\tstrokeWidth=\"1.5\"\n\t\t\tstroke=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={twMerge('h-6 w-6', props.className)}\n\t\t>\n\t\t\t<path\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\td=\"M 4.125 19.5 L 19.875 19.5 C 20.496 19.5 21 18.996 21 18.375 L 21 5.625 C 21 5.004 20.496 4.5 19.875 4.5 L 4.125 4.5 C 3.504 4.5 3 5.004 3 5.625 L 3 18.375 C 3 18.996 3.504 19.5 4.125 19.5 Z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n};\n\nconst proccessTokens = (hunks: HunkData[]) => {\n\tif (!hunks) {\n\t\treturn undefined;\n\t}\n\n\tconst options: TokenizeOptions = {\n\t\thighlight: false,\n\t\tenhancers: [markEdits(hunks, { type: 'block' })],\n\t};\n\n\ttry {\n\t\treturn tokenize(hunks, options);\n\t} catch (ex) {\n\t\treturn undefined;\n\t}\n};\n\nexport const DiffModal: React.FC<ModalProps> = (props) => {\n\tconst { isOpen, setIsOpen } = props;\n\tconst [viewType, setViewType] = useState<ViewType>('unified');\n\n\tconst close = useCallback(() => {\n\t\tsetIsOpen(false);\n\t}, [setIsOpen]);\n\n\tconst files = useMemo(() => {\n\t\treturn parseDiff(props.diff);\n\t}, [props.diff]);\n\tconst diffType: DiffType = props.state === 'changed' ? 'modify' : props.state === 'created' ? 'add' : 'delete';\n\n\treturn (\n\t\t<Transition.Root show={isOpen} as={Fragment} appear={true}>\n\t\t\t<Dialog\n\t\t\t\tas=\"div\"\n\t\t\t\tclassName=\"git-diff fixed inset-0 z-50 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-400 scrollbar-thumb-rounded-md dark:scrollbar-thumb-zinc-600\"\n\t\t\t\tonClose={close}\n\t\t\t>\n\t\t\t\t<div className=\"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0\">\n\t\t\t\t\t<Transition.Child\n\t\t\t\t\t\tas={Fragment}\n\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Dialog.Overlay className=\"fixed inset-0 bg-zinc-500 bg-opacity-75 transition-opacity dark:bg-zinc-950 dark:bg-opacity-75\" />\n\t\t\t\t\t</Transition.Child>\n\n\t\t\t\t\t{/* This element is to trick the browser into centering the modal contents. */}\n\t\t\t\t\t<span className=\"hidden sm:inline-block sm:h-screen sm:align-middle\" aria-hidden=\"true\">\n\t\t\t\t\t\t&#8203;\n\t\t\t\t\t</span>\n\t\t\t\t\t<Transition.Child\n\t\t\t\t\t\tas={Fragment}\n\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\tenterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\tenterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\tleaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\tleaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"relative inline-flex max-h-[80vh] max-w-screen-2xl transform flex-col overflow-hidden rounded-lg bg-white py-4 text-left align-bottom shadow-xl transition-all dark:bg-zinc-800 sm:my-8 sm:w-full sm:py-6 sm:align-middle\">\n\t\t\t\t\t\t\t<Dialog.Title\n\t\t\t\t\t\t\t\tas=\"h3\"\n\t\t\t\t\t\t\t\tclassName=\"flex items-center justify-between border-b border-zinc-200 px-4 pb-4 text-lg font-semibold leading-6 text-zinc-900 dark:border-zinc-700 dark:text-zinc-100 sm:px-6\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>{props.title}</div>\n\t\t\t\t\t\t\t\t<div className=\"relative flex flex-nowrap items-center space-x-2 text-zinc-500 dark:text-zinc-400\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t\t\t\t\tviewType === 'unified'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'cursor-default text-sky-600 dark:text-sky-400'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'hover:text-zinc-800 dark:hover:text-zinc-100',\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setViewType('unified')}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Unified View\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<SingleColumn className=\"h-6 w-6\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t\t\t\t\tviewType === 'split'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'cursor-default text-sky-600 dark:text-sky-400'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'hover:text-zinc-800 dark:hover:text-zinc-100',\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setViewType('split')}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Split View\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<TwoColumns className=\"h-6 w-6\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<div className=\"!ml-4 !mr-1 h-6 border-l border-l-zinc-200 dark:border-l-zinc-800\"></div>\n\t\t\t\t\t\t\t\t\t<button className=\"hover:text-zinc-800 dark:hover:text-zinc-100\" onClick={close}>\n\t\t\t\t\t\t\t\t\t\t<XMarkIcon className=\"h-6 w-6\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Dialog.Title>\n\t\t\t\t\t\t\t<div className=\"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-400 scrollbar-thumb-rounded-md dark:scrollbar-thumb-zinc-600\">\n\t\t\t\t\t\t\t\t{files.map(({ hunks }, i) => (\n\t\t\t\t\t\t\t\t\t<Diff key={i} hunks={hunks} viewType={viewType} diffType={diffType} tokens={proccessTokens(hunks)} />\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex-end flex flex-row items-center justify-end space-x-2 border-t border-zinc-200 px-4 pt-4 dark:border-zinc-700 sm:px-6 sm:pt-6\">\n\t\t\t\t\t\t\t\t{props.buttons ?? null}\n\t\t\t\t\t\t\t\t<Button variant=\"plain\" onClick={close}>\n\t\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Transition.Child>\n\t\t\t\t</div>\n\t\t\t</Dialog>\n\t\t</Transition.Root>\n\t);\n};\n","import { cva, VariantProps } from 'class-variance-authority';\nimport React from 'react';\nimport { twMerge } from 'tailwind-merge';\nimport type { Intents } from '@/components/common/button';\n\ntype IntentNoOutline = Exclude<Intents, 'outline'>;\n\ntype StateIntents = { [key in IntentNoOutline]: string };\n\nexport const StateCircleVariants = cva('flex-none rounded-full p-1 relative flex', {\n\tvariants: {\n\t\tstate: {\n\t\t\tsuccess: 'dark:text-green-400 text-green-500 bg-green-400/20',\n\t\t\tinfo: 'dark:text-sky-400 text-sky-500 bg-sky-400/20',\n\t\t\twarning: 'dark:text-yellow-400 text-yellow-500 bg-yellow-400/20',\n\t\t\tdanger: 'dark:text-rose-400 text-rose-500 bg-rose-400/20',\n\t\t\tindeterminate: 'dark:text-zinc-400 text-zinc-500 bg-zinc-500/20',\n\t\t\tplain: 'dark:text-zinc-400 text-zinc-500 bg-zinc-500/20',\n\t\t\tprimary: 'dark:text-brand-400 text-brand-500 bg-brand-500/20',\n\t\t} satisfies StateIntents,\n\t},\n});\n\nexport type StateCircleProps = VariantProps<typeof StateCircleVariants> & {\n\tping?: boolean;\n\ttitle?: string;\n\tpingClassName?: string;\n};\n\nexport const StateCircle: React.FC<StateCircleProps> = (props) => {\n\treturn (\n\t\t<div className={StateCircleVariants(props)}>\n\t\t\t<div\n\t\t\t\ttitle={props.title}\n\t\t\t\tclassName={twMerge(\n\t\t\t\t\t'absolute inset-0 transition-all duration-700',\n\t\t\t\t\tprops.ping ? 'opacity-100' : 'opacity-0',\n\t\t\t\t\tprops.pingClassName ?? 'z-2',\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={twMerge('absolute inset-0 inline-flex animate-ping rounded-full bg-current opacity-0 ease-out')}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"h-2 w-2 rounded-full bg-current\" />\n\t\t</div>\n\t);\n};\n","import React, { Fragment, useCallback, useEffect, useMemo, useState } from 'react';\nimport { SerializedPrinterConfiguration } from '@/zods/printer-configuration';\nimport { trpc } from '@/utils/trpc';\nimport { useQuery } from '@tanstack/react-query';\nimport type { FilesToWriteWithState, FileState } from '@/server/routers/printer';\nimport { DiffModal } from '@/components/setup-steps/diff-modal';\nimport { twJoin } from 'tailwind-merge';\nimport { Menu, Transition } from '@headlessui/react';\nimport { EllipsisVerticalIcon } from '@heroicons/react/20/solid';\nimport { StateCircle } from '@/components/common/state-circle';\nimport { Badge } from '@/components/common/badge';\nimport { Button, Intents } from '@/components/common/button';\nimport { useChangeEffect } from '@/hooks/useChangeEffect';\nimport { CheckIcon } from '@heroicons/react/24/outline';\nimport { QueryStatus } from '@/components/common/query-status';\n\ninterface FileChangesProps {\n\tserializedConfig: SerializedPrinterConfiguration | null;\n\tonFilesToOverwriteChange: (files: string[]) => void;\n\tonFilesToIgnoreChange: (files: string[]) => void;\n}\n\ninterface ChangedFileProps {\n\tfile: Unpacked<FilesToWriteWithState>;\n\tisMarkedOverwritten: boolean;\n\tisMarkedIgnored: boolean;\n\taddFileToOverwrite: (fileName: string) => void;\n\tremoveFileToOverwrite: (fileName: string) => void;\n\taddFileToIgnore: (fileName: string) => void;\n\tremoveFileToIgnore: (fileName: string) => void;\n}\n\nconst statuses: { [key in FileState]: string } = {\n\tcreated: 'text-green-700 bg-green-50 ring-green-600/20',\n\tunchanged: 'text-zinc-600 bg-zinc-50 ring-zinc-500/10',\n\tchanged: 'text-yellow-800 bg-yellow-50 ring-yellow-600/20',\n\tremoved: 'text-rose-700 bg-rose-50 ring-rose-600/20',\n};\n\ntype Action = {\n\taction: (fileName: string) => void;\n\tintent: Intents;\n\ttitle: string;\n};\n\nconst ChangedFile: React.FC<ChangedFileProps> = (props) => {\n\tconst {\n\t\taddFileToIgnore,\n\t\taddFileToOverwrite,\n\t\tfile,\n\t\tremoveFileToIgnore,\n\t\tremoveFileToOverwrite,\n\t\tisMarkedIgnored,\n\t\tisMarkedOverwritten,\n\t} = props;\n\n\tconst [isDiffModalOpen, setIsDiffModalOpen] = useState(false);\n\tconst showDiffModal = useCallback((file: Unpacked<FilesToWriteWithState>) => {\n\t\tsetIsDiffModalOpen(true);\n\t}, []);\n\n\tconst wouldOtherwiseBeWritten =\n\t\t(file.state === 'changed' && (file.overwrite || isMarkedOverwritten)) ||\n\t\tfile.state === 'created' ||\n\t\tfile.state === 'removed';\n\tconst isOverwritable = file.state === 'changed';\n\tconst isIgnorable = file.state === 'created' || file.state === 'removed' || file.state === 'changed';\n\tconst isIgnored = isMarkedIgnored;\n\tconst isOverwritten = isMarkedOverwritten || (file.overwrite && file.exists);\n\tconst needsExplicitAction =\n\t\tisIgnorable && !isIgnored && !isOverwritten && !wouldOtherwiseBeWritten && file.changedFromConfig === true;\n\tconst isDeleted = file.state === 'removed' && !isIgnored;\n\tconst isCreated = file.state === 'created' && !isIgnored;\n\tconst isChanged = file.state === 'changed' && !isIgnored && isOverwritten;\n\n\tconst actions = useMemo(() => {\n\t\tif (file.fileName === 'RatOS.cfg') {\n\t\t\treturn [];\n\t\t}\n\t\tlet skip: null | Action = null;\n\t\tlet ignore: null | Action = null;\n\t\tlet overwrite: null | Action = null;\n\t\tlet write: null | Action = null;\n\t\tlet remove: null | Action = null;\n\t\tif (isOverwritten && !isIgnored) {\n\t\t\tskip = {\n\t\t\t\ttitle: 'Skip',\n\t\t\t\tintent: 'indeterminate',\n\t\t\t\taction: isMarkedOverwritten ? removeFileToOverwrite : addFileToIgnore,\n\t\t\t};\n\t\t} else if (isOverwritable) {\n\t\t\toverwrite = {\n\t\t\t\ttitle: 'Overwrite',\n\t\t\t\tintent: 'warning',\n\t\t\t\taction: isMarkedIgnored ? removeFileToIgnore : addFileToOverwrite,\n\t\t\t};\n\t\t}\n\t\tif (isIgnorable && !isIgnored) {\n\t\t\tignore = {\n\t\t\t\ttitle: 'Ignore',\n\t\t\t\tintent: needsExplicitAction ? 'danger' : 'indeterminate',\n\t\t\t\taction: addFileToIgnore,\n\t\t\t};\n\t\t} else if (isIgnored) {\n\t\t\tif (file.state === 'removed') {\n\t\t\t\tremove = {\n\t\t\t\t\ttitle: 'Delete',\n\t\t\t\t\tintent: 'danger',\n\t\t\t\t\taction: removeFileToIgnore,\n\t\t\t\t};\n\t\t\t} else if (isIgnorable) {\n\t\t\t\twrite = {\n\t\t\t\t\ttitle: 'Write',\n\t\t\t\t\tintent: 'success',\n\t\t\t\t\taction: removeFileToIgnore,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn [skip, ignore, overwrite, write, remove].filter(Boolean);\n\t}, [\n\t\taddFileToIgnore,\n\t\taddFileToOverwrite,\n\t\tfile.fileName,\n\t\tfile.state,\n\t\tisIgnorable,\n\t\tisIgnored,\n\t\tisMarkedIgnored,\n\t\tisMarkedOverwritten,\n\t\tisOverwritable,\n\t\tisOverwritten,\n\t\tneedsExplicitAction,\n\t\tremoveFileToIgnore,\n\t\tremoveFileToOverwrite,\n\t]);\n\n\tconst fileState: Intents = useMemo(() => {\n\t\tif (needsExplicitAction) {\n\t\t\treturn 'danger';\n\t\t}\n\t\tif (file.state === 'changed') {\n\t\t\tif ((isIgnored && file.overwrite) || (isOverwritten && !file.overwrite)) {\n\t\t\t\treturn 'warning';\n\t\t\t} else if (isOverwritten) {\n\t\t\t\treturn 'success';\n\t\t\t} else {\n\t\t\t\treturn 'indeterminate';\n\t\t\t}\n\t\t}\n\t\tif (file.state === 'created') {\n\t\t\tif (isIgnored) {\n\t\t\t\treturn 'danger';\n\t\t\t} else {\n\t\t\t\treturn 'success';\n\t\t\t}\n\t\t}\n\t\tif (file.state === 'removed') {\n\t\t\tif (!isIgnored) {\n\t\t\t\treturn 'warning';\n\t\t\t}\n\t\t}\n\t\treturn 'indeterminate';\n\t}, [file.overwrite, file.state, isIgnored, isOverwritten, needsExplicitAction]);\n\n\tconst [shouldPing] = useChangeEffect([fileState], 4000);\n\n\treturn (\n\t\t<li key={file.fileName} className=\"flex items-center justify-between gap-x-6 py-5\">\n\t\t\t{file?.diff != null && (\n\t\t\t\t<DiffModal\n\t\t\t\t\tdiff={file.diff}\n\t\t\t\t\ttitle={`Changes to ${file.fileName}`}\n\t\t\t\t\tstate={file.state}\n\t\t\t\t\tsetIsOpen={setIsDiffModalOpen}\n\t\t\t\t\tbuttons={actions.map((a) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\ta.action(file.fileName);\n\t\t\t\t\t\t\t\t\tsetIsDiffModalOpen(false);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvariant={a.intent}\n\t\t\t\t\t\t\t\tkey={a.title}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{a.title}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\tisOpen={isDiffModalOpen}\n\t\t\t\t></DiffModal>\n\t\t\t)}\n\t\t\t<div className=\"min-w-0\">\n\t\t\t\t<div className=\"flex items-center gap-x-3\">\n\t\t\t\t\t<StateCircle state={fileState} ping={shouldPing} />\n\t\t\t\t\t<p className=\"text-sm font-medium leading-6 text-zinc-900 dark:text-zinc-100\">{file.fileName}</p>\n\t\t\t\t\t<Badge\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tcolor={\n\t\t\t\t\t\t\tfile.state === 'changed'\n\t\t\t\t\t\t\t\t? !file.changedFromConfig\n\t\t\t\t\t\t\t\t\t? 'sky'\n\t\t\t\t\t\t\t\t\t: 'yellow'\n\t\t\t\t\t\t\t\t: file.state === 'created'\n\t\t\t\t\t\t\t\t\t? 'green'\n\t\t\t\t\t\t\t\t\t: file.state === 'removed'\n\t\t\t\t\t\t\t\t\t\t? 'rose'\n\t\t\t\t\t\t\t\t\t\t: 'gray'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{file.state === 'changed'\n\t\t\t\t\t\t\t? file.changedFromConfig\n\t\t\t\t\t\t\t\t? 'Pending changes'\n\t\t\t\t\t\t\t\t: 'Changed on disk'\n\t\t\t\t\t\t\t: file.state === 'created'\n\t\t\t\t\t\t\t\t? 'New file'\n\t\t\t\t\t\t\t\t: file.state === 'removed'\n\t\t\t\t\t\t\t\t\t? 'Deleted'\n\t\t\t\t\t\t\t\t\t: 'No updates'}\n\t\t\t\t\t</Badge>\n\t\t\t\t\t{file.changedOnDisk && (\n\t\t\t\t\t\t<Badge size=\"sm\" color=\"sky\">\n\t\t\t\t\t\t\tChanged on disk\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mt-1 flex items-center gap-x-2 text-xs leading-5 text-zinc-500 dark:text-zinc-400\">\n\t\t\t\t\t<p className=\"\">\n\t\t\t\t\t\t{file.state === 'changed' &&\n\t\t\t\t\t\t\t(isOverwritten && !isIgnored\n\t\t\t\t\t\t\t\t? 'File will be backed up and overwritten.' +\n\t\t\t\t\t\t\t\t\t(file.fileName != 'RatOS.cfg' ? ` Any changes you've made can be recovered from the backup.` : '')\n\t\t\t\t\t\t\t\t: !needsExplicitAction\n\t\t\t\t\t\t\t\t\t? 'File will be skipped.'\n\t\t\t\t\t\t\t\t\t: 'Please review the changes and make a decision.')}\n\t\t\t\t\t\t{file.state === 'created' && (isIgnored ? 'File will be skipped.' : 'File will be created.')}\n\t\t\t\t\t\t{file.state === 'removed' && (!isIgnored ? 'File will be deleted.' : 'File will remain untouched.')}\n\t\t\t\t\t\t{file.state === 'unchanged' &&\n\t\t\t\t\t\t\t(file.changedOnDisk ? 'File has user modifications.' : 'File remains untouched.')}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"flex flex-none items-center gap-x-4\">\n\t\t\t\t<div className=\"flex flex-none items-center\">\n\t\t\t\t\t{needsExplicitAction ? (\n\t\t\t\t\t\t<Button variant=\"info\" onClick={() => showDiffModal(file)}>\n\t\t\t\t\t\t\tReview changes\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<CheckIcon className=\"h-5 w-5 text-green-500 dark:text-brand-500\" aria-hidden=\"true\" />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<Menu as=\"div\" className=\"relative flex-none\">\n\t\t\t\t\t<Menu.Button className=\"-m-2.5 block p-2.5 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-100\">\n\t\t\t\t\t\t<span className=\"sr-only\">Open options</span>\n\t\t\t\t\t\t<EllipsisVerticalIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\n\t\t\t\t\t</Menu.Button>\n\t\t\t\t\t<Transition\n\t\t\t\t\t\tas={Fragment}\n\t\t\t\t\t\tenter=\"transition ease-out duration-100\"\n\t\t\t\t\t\tenterFrom=\"transform opacity-0 scale-95\"\n\t\t\t\t\t\tenterTo=\"transform opacity-100 scale-100\"\n\t\t\t\t\t\tleave=\"transition ease-in duration-75\"\n\t\t\t\t\t\tleaveFrom=\"transform opacity-100 scale-100\"\n\t\t\t\t\t\tleaveTo=\"transform opacity-0 scale-95\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Menu.Items className=\"absolute right-0 z-10 mt-2 w-32 origin-top-right rounded-md bg-white py-2 shadow-lg ring-1 ring-zinc-900/5 focus:outline-none dark:bg-zinc-900 dark:ring-zinc-100/5\">\n\t\t\t\t\t\t\t{actions.map((action) => (\n\t\t\t\t\t\t\t\t<Menu.Item key={action.title}>\n\t\t\t\t\t\t\t\t\t{({ active, disabled }) => (\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => action.action(file.fileName)}\n\t\t\t\t\t\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t\t\t\t\t\tactive ? 'bg-zinc-50 dark:bg-zinc-800' : '',\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled ? 'cursor-not-allowed opacity-50' : 'cursor-pointer',\n\t\t\t\t\t\t\t\t\t\t\t\t'block px-3 py-1 text-sm leading-6 text-zinc-800 dark:text-zinc-200',\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{action.title}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t<Menu.Item disabled={file.diff == null}>\n\t\t\t\t\t\t\t\t{({ active, disabled }) => (\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tonClick={() => showDiffModal(file)}\n\t\t\t\t\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t\t\t\t\tactive ? 'bg-zinc-50 dark:bg-zinc-800' : '',\n\t\t\t\t\t\t\t\t\t\t\tdisabled ? 'cursor-not-allowed opacity-50' : 'cursor-pointer',\n\t\t\t\t\t\t\t\t\t\t\t'block px-3 py-1 text-sm leading-6 text-zinc-800 dark:text-zinc-200',\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tView diff\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t</Menu.Items>\n\t\t\t\t\t</Transition>\n\t\t\t\t</Menu>\n\t\t\t</div>\n\t\t</li>\n\t);\n};\n\nexport const FileChanges: React.FC<FileChangesProps> = (props) => {\n\tconst { serializedConfig, onFilesToIgnoreChange, onFilesToOverwriteChange } = props;\n\tconst [filesToOverwrite, setFilesToOverwrite] = useState<string[]>([]);\n\n\tconst addFileToOverwrite = useCallback((fileName: string) => {\n\t\tsetFilesToOverwrite((files) => (files.includes(fileName) ? files : [...files, fileName]));\n\t}, []);\n\n\tconst removeFileToOverwrite = useCallback((fileName: string) => {\n\t\tsetFilesToOverwrite((files) => (files.includes(fileName) ? files.filter((file) => file !== fileName) : files));\n\t}, []);\n\n\tconst [filesToIgnore, setFilesToIgnore] = useState<string[]>([]);\n\n\tconst addFileToIgnore = useCallback((fileName: string) => {\n\t\tsetFilesToIgnore((files) => (files.includes(fileName) ? files : [...files, fileName]));\n\t}, []);\n\n\tconst removeFileToIgnore = useCallback((fileName: string) => {\n\t\tsetFilesToIgnore((files) => (files.includes(fileName) ? files.filter((file) => file !== fileName) : files));\n\t}, []);\n\n\tuseEffect(() => {\n\t\tonFilesToOverwriteChange(filesToOverwrite);\n\t}, [filesToOverwrite, onFilesToOverwriteChange]);\n\tuseEffect(() => {\n\t\tonFilesToIgnoreChange(filesToIgnore);\n\t}, [filesToIgnore, onFilesToIgnoreChange]);\n\n\tconst client = trpc.useUtils().client;\n\tconst filesToWrite = useQuery({\n\t\tqueryKey: ['printer.filesToWrite', serializedConfig],\n\t\tqueryFn: async () => {\n\t\t\tconst res = await client.printer.getFilesToWrite.mutate({\n\t\t\t\tconfig: serializedConfig ?? ({} as any),\n\t\t\t});\n\t\t\treturn res;\n\t\t},\n\t\tenabled: serializedConfig != null,\n\t});\n\treturn (\n\t\t<>\n\t\t\t<ul role=\"list\" className=\"divide-y divide-zinc-100 dark:divide-zinc-800\">\n\t\t\t\t{filesToWrite.data?.map((fileToWrite) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ChangedFile\n\t\t\t\t\t\t\tkey={fileToWrite.fileName}\n\t\t\t\t\t\t\tfile={fileToWrite}\n\t\t\t\t\t\t\tisMarkedIgnored={filesToIgnore.includes(fileToWrite.fileName)}\n\t\t\t\t\t\t\tisMarkedOverwritten={filesToOverwrite.includes(fileToWrite.fileName)}\n\t\t\t\t\t\t\taddFileToIgnore={addFileToIgnore}\n\t\t\t\t\t\t\taddFileToOverwrite={addFileToOverwrite}\n\t\t\t\t\t\t\tremoveFileToIgnore={removeFileToIgnore}\n\t\t\t\t\t\t\tremoveFileToOverwrite={removeFileToOverwrite}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t\t<QueryStatus {...filesToWrite} />\n\t\t</>\n\t);\n};\n","import { Dropdown } from '@/components/forms/dropdown';\nimport { Board } from '@/zods/boards';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Drivers } from '@/data/drivers';\nimport { findPreset, Steppers } from '@/data/steppers';\nimport { BadgeProps, badgeBackgroundColorStyle, badgeBorderColorStyle } from '@/components/common/badge';\nimport { TextInput } from '@/components/forms/text-input';\nimport { Banner } from '@/components/common/banner';\nimport { BoltIcon, LightBulbIcon } from '@heroicons/react/24/outline';\nimport { useRecoilValue, useSetRecoilState } from 'recoil';\nimport { FireIcon } from '@heroicons/react/24/solid';\nimport {\n\tBasePrinterRail,\n\tPrinterAxis,\n\tPrinterRailDefinition,\n\tgetSupportedVoltages,\n\tmatchesDefaultRail,\n} from '@/zods/motion';\nimport { deserializeDriver, serializePrinterRail } from '@/utils/serialization';\nimport { PrinterRailState, PrinterRailsState } from '@/recoil/printer';\nimport { useToolheads } from '@/hooks/useToolheadConfiguration';\nimport { trpc } from '@/utils/trpc';\nimport { twMerge } from 'tailwind-merge';\nimport { z } from 'zod';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { Card } from '@/components/common/card';\nimport { CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\n\nconst railArray = z.array(BasePrinterRail);\n\ninterface PrinterRailSettingsProps {\n\tselectedBoard: Board | null;\n\tprinterRail: Zod.infer<typeof BasePrinterRail>;\n\tprinterRailDefault: Zod.infer<typeof PrinterRailDefinition>;\n\tperformanceMode?: boolean | null;\n\terrors?: z.inferFormattedError<typeof BasePrinterRail>;\n\t/**\n\t * This component should always be rendered to ensure the settings are updated when\n\t * switching performance mode, even if it isn't visible.\n\t */\n\tisVisible?: boolean;\n}\n\nexport const PrinterRailSettings: React.FC<PrinterRailSettingsProps> = (props) => {\n\tconst toolheads = useToolheads();\n\tconst toolhead = toolheads.find((th) => th.getExtruderAxis() === props.printerRail.axis);\n\tconst canBeExtruderlessBoard = toolheads.every((th) => th.hasToolboard());\n\tconst usesToolboard = toolhead?.getExtruderAxis() === props.printerRailDefault.axis && toolhead?.hasToolboard();\n\tconst board = usesToolboard ? toolhead.getToolboard() : props.selectedBoard;\n\tconst [performanceMode, setPerformanceMode] = useState(!!props.performanceMode);\n\tconst setPrinterRail = useSetRecoilState(PrinterRailState(props.printerRail.axis));\n\tconst printerRails = useRecoilValue(PrinterRailsState);\n\tconst [motorSlot, setMotorSlot] = useState(\n\t\tprops.printerRail.motorSlot && props.selectedBoard?.motorSlots?.[props.printerRail.motorSlot]\n\t\t\t? props.printerRail.motorSlot\n\t\t\t: undefined,\n\t);\n\tconst integratedDriver = board?.integratedDrivers\n\t\t? board.integratedDrivers[\n\t\t\t\tmotorSlot ?? (props.printerRail.axis.startsWith('extruder') ? PrinterAxis.extruder : props.printerRail.axis)\n\t\t\t] ??\n\t\t\tboard.integratedDrivers[\n\t\t\t\tprops.printerRail.axis.startsWith('extruder') ? PrinterAxis.extruder : props.printerRail.axis\n\t\t\t]\n\t\t: null;\n\tconst [driver, setDriver] = useState(\n\t\tintegratedDriver != null\n\t\t\t? deserializeDriver(integratedDriver) ?? props.printerRail.driver\n\t\t\t: props.printerRail.driver,\n\t);\n\tconst [stepper, setStepper] = useState(props.printerRail.stepper);\n\tconst [homingSpeed, setHomingSpeed] = useState(\n\t\tperformanceMode\n\t\t\t? props.printerRailDefault.performanceMode?.homingSpeed ?? props.printerRailDefault.homingSpeed\n\t\t\t: props.printerRailDefault.homingSpeed,\n\t);\n\tconst errorCount =\n\t\tprops.errors == null\n\t\t\t? 0\n\t\t\t: Object.keys(props.errors).reduce((acc, key) => {\n\t\t\t\t\tconst objKey = key as keyof typeof props.errors;\n\t\t\t\t\tconst keyErrors = props.errors?.[objKey];\n\t\t\t\t\tif (keyErrors == null) {\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t}\n\t\t\t\t\tconst count = Array.isArray(keyErrors) ? keyErrors.length : keyErrors._errors.length;\n\t\t\t\t\treturn acc + count;\n\t\t\t\t}, 0);\n\n\tconst isSlotInUse = useCallback(\n\t\t(slot: string | undefined) => {\n\t\t\tif (slot == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn printerRails.some((pr) => {\n\t\t\t\tconst railToolhead = toolheads.find((th) => th.getExtruderAxis() === pr.axis);\n\t\t\t\tif (pr.axis === props.printerRail.axis) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (railToolhead?.hasToolboard()) {\n\t\t\t\t\t// The rail is an extruder rail and the toolhead has a toolboard, no chance of conflict.\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn pr.motorSlot === slot;\n\t\t\t});\n\t\t},\n\t\t[printerRails, props.printerRail.axis, toolheads],\n\t);\n\n\tconst guessMotorSlot = trpc.mcu.reversePinLookup.useQuery(\n\t\t{\n\t\t\taxis: props.printerRail.axis,\n\t\t\tcanUseExtruderlessConfigs: canBeExtruderlessBoard,\n\t\t\tboardPath: board?.path ?? '',\n\t\t},\n\t\t{ enabled: !!board },\n\t);\n\tuseEffect(() => {\n\t\tif (guessMotorSlot.data && motorSlot == null && board?.motorSlots?.[guessMotorSlot.data] != null) {\n\t\t\tsetMotorSlot(guessMotorSlot.data);\n\t\t}\n\t}, [board, guessMotorSlot.data, motorSlot, props.printerRailDefault.axis]);\n\n\tconst supportedVoltages = getSupportedVoltages(board, driver).map((v) => {\n\t\treturn {\n\t\t\t...v,\n\t\t\tbadge:\n\t\t\t\tfindPreset(stepper, driver, v.id, undefined, performanceMode) != null\n\t\t\t\t\t? ({\n\t\t\t\t\t\t\tchildren: 'Tuned Preset',\n\t\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\t} satisfies BadgeProps)\n\t\t\t\t\t: undefined,\n\t\t};\n\t});\n\tconst [voltage, setVoltage] = useState(\n\t\tsupportedVoltages.find((v) => v.id === props.printerRail.voltage) ??\n\t\t\tsupportedVoltages.find(\n\t\t\t\t(v) =>\n\t\t\t\t\tv.id ===\n\t\t\t\t\t(performanceMode && props.printerRailDefault.performanceMode?.voltage\n\t\t\t\t\t\t? props.printerRailDefault.performanceMode.voltage\n\t\t\t\t\t\t: props.printerRailDefault.voltage),\n\t\t\t) ??\n\t\t\tsupportedVoltages[0],\n\t);\n\tconst [current, setCurrent] = useState(props.printerRail.current);\n\tconst defaultPreset = useMemo(\n\t\t() =>\n\t\t\tfindPreset(\n\t\t\t\tprops.printerRailDefault.stepper,\n\t\t\t\tprops.printerRailDefault.driver,\n\t\t\t\tprops.printerRailDefault.voltage,\n\t\t\t\tprops.printerRailDefault.current,\n\t\t\t),\n\t\t[props.printerRailDefault],\n\t);\n\tconst recommendedPreset = useMemo(\n\t\t() => findPreset(stepper, driver, voltage.id, undefined, performanceMode),\n\t\t[stepper, driver, voltage, performanceMode],\n\t);\n\tconst matchingPreset = useMemo(\n\t\t() => findPreset(stepper, driver, voltage.id, current, performanceMode),\n\t\t[stepper, driver, voltage, performanceMode, current],\n\t);\n\n\tconst supportedDrivers = Drivers.filter((d) => {\n\t\treturn d.protocol === 'UART' || board?.stepperSPI != null;\n\t}).map((d) => {\n\t\treturn {\n\t\t\t...d,\n\t\t\tbadge:\n\t\t\t\tfindPreset(stepper, d, voltage.id, undefined, performanceMode) != null\n\t\t\t\t\t? ({\n\t\t\t\t\t\t\tchildren: 'Tuned Preset',\n\t\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\t} satisfies BadgeProps)\n\t\t\t\t\t: undefined,\n\t\t};\n\t});\n\tconst steppers = Steppers.map((s) => {\n\t\treturn {\n\t\t\t...s,\n\t\t\tbadge:\n\t\t\t\tfindPreset(s, driver, voltage.id, undefined, performanceMode) != null\n\t\t\t\t\t? ({\n\t\t\t\t\t\t\tchildren: 'Tuned Preset',\n\t\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\t} satisfies BadgeProps)\n\t\t\t\t\t: undefined,\n\t\t};\n\t});\n\n\tuseEffect(() => {\n\t\t// If current rail configuration matches the default rail configuration, adapt current and voltage\n\t\t// to match the performance mode when performance mode changes.\n\t\tif (matchesDefaultRail(props.printerRail, props.printerRailDefault, !props.performanceMode)) {\n\t\t\tif (props.performanceMode && props.printerRailDefault.performanceMode) {\n\t\t\t\tsetHomingSpeed(props.printerRailDefault.performanceMode.homingSpeed ?? props.printerRail.homingSpeed);\n\t\t\t\tif (props.printerRailDefault.performanceMode.voltage != null) {\n\t\t\t\t\tsetVoltage(\n\t\t\t\t\t\tsupportedVoltages.find(\n\t\t\t\t\t\t\t(sv) => sv.id === (props.printerRailDefault.performanceMode?.voltage ?? props.printerRailDefault.voltage),\n\t\t\t\t\t\t) ?? supportedVoltages[0],\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (props.printerRailDefault.performanceMode.current != null) {\n\t\t\t\t\tsetCurrent(props.printerRailDefault.performanceMode.current);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetHomingSpeed(props.printerRailDefault.homingSpeed);\n\t\t\t\tsetVoltage(supportedVoltages.find((sv) => sv.id === props.printerRailDefault.voltage) ?? supportedVoltages[0]);\n\t\t\t\tsetCurrent(props.printerRailDefault.current);\n\t\t\t}\n\t\t}\n\t\tsetPerformanceMode(!!props.performanceMode);\n\t\t// We don't want to react to anything other than performance mode changes.\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [props.performanceMode]);\n\n\tuseEffect(() => {\n\t\tconst currentVoltage = supportedVoltages.find((sv) => sv.id === voltage.id);\n\t\tif (!currentVoltage) {\n\t\t\tsetVoltage(\n\t\t\t\trecommendedPreset\n\t\t\t\t\t? supportedVoltages.find((sv) => sv.id === recommendedPreset.voltage) ?? supportedVoltages[0]\n\t\t\t\t\t: supportedVoltages[0],\n\t\t\t);\n\t\t\tif (recommendedPreset) {\n\t\t\t\tsetCurrent(recommendedPreset.run_current);\n\t\t\t}\n\t\t}\n\t}, [supportedVoltages, voltage, recommendedPreset]);\n\n\tuseEffect(() => {\n\t\tconst newState = {\n\t\t\taxis: props.printerRail.axis,\n\t\t\taxisDescription: props.printerRail.axisDescription,\n\t\t\trotationDistance: props.printerRail.rotationDistance,\n\t\t\thomingSpeed: homingSpeed,\n\t\t\tmotorSlot: motorSlot,\n\t\t\tdriver,\n\t\t\tvoltage: voltage.id,\n\t\t\tstepper,\n\t\t\tcurrent,\n\t\t};\n\t\tconst serializedNew = serializePrinterRail(newState);\n\t\tconst serializedOld = serializePrinterRail(props.printerRail);\n\t\tconst isDirty = Object.keys(serializedNew).some((key) => {\n\t\t\treturn serializedNew[key as keyof typeof serializedNew] !== serializedOld[key as keyof typeof serializedNew];\n\t\t});\n\t\tif (isDirty) {\n\t\t\tsetPrinterRail(serializedNew);\n\t\t}\n\t}, [current, driver, props.printerRail, homingSpeed, setPrinterRail, stepper, voltage.id, motorSlot]);\n\n\tconst isRecommendedPresetCompatible = recommendedPreset && recommendedPreset.run_current === current;\n\tconst railName =\n\t\tprops.printerRail.axis === 'extruder'\n\t\t\t? 'Extruder T0'\n\t\t\t: props.printerRail.axis === PrinterAxis.extruder1\n\t\t\t\t? 'Extruder T1'\n\t\t\t\t: 'Stepper ' + props.printerRail.axis.toLocaleUpperCase();\n\tconst motorSlotOptions =\n\t\tboard?.motorSlots != null && Object.keys(board.motorSlots).length > 0\n\t\t\t? Object.keys(board.motorSlots)\n\t\t\t\t\t.map((ms) => {\n\t\t\t\t\t\tif (board.motorSlots?.[ms].title == null) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst hasDiagPin = board.motorSlots?.[ms].diag_pin != null;\n\t\t\t\t\t\tconst hasEndstopPin = board.motorSlots?.[ms].endstop_pin != null;\n\t\t\t\t\t\tconst isInUse = isSlotInUse(ms);\n\t\t\t\t\t\tconst disabled =\n\t\t\t\t\t\t\t(props.printerRailDefault.axis.startsWith('x') || props.printerRailDefault.axis.startsWith('y')) &&\n\t\t\t\t\t\t\t!hasDiagPin;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: ms,\n\t\t\t\t\t\t\ttitle: board.motorSlots?.[ms].title,\n\t\t\t\t\t\t\tdisabled: disabled,\n\t\t\t\t\t\t\tbadge: [\n\t\t\t\t\t\t\t\t!hasDiagPin\n\t\t\t\t\t\t\t\t\t? ({ children: 'No diag pin', color: disabled ? 'red' : 'gray' } satisfies BadgeProps)\n\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t\t!hasEndstopPin ? ({ children: 'No endstop pin', color: 'gray' } satisfies BadgeProps) : undefined,\n\t\t\t\t\t\t\t\tisInUse === true ? ({ children: 'In use', color: 'orange' } satisfies BadgeProps) : undefined,\n\t\t\t\t\t\t\t].filter(Boolean),\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t\t.filter(Boolean)\n\t\t\t: null;\n\tconst motorSlotBadge = useMemo(() => {\n\t\tif (motorSlot == null || board?.motorSlots?.[motorSlot].title == null) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst hasDiagPin = board.motorSlots?.[motorSlot].diag_pin != null;\n\t\tconst disabled =\n\t\t\t(props.printerRailDefault.axis.startsWith('x') || props.printerRailDefault.axis.startsWith('y')) && !hasDiagPin;\n\t\treturn !hasDiagPin && disabled ? ({ children: 'No diag pin', color: 'red' } satisfies BadgeProps) : undefined;\n\t}, [board, motorSlot, props.printerRailDefault.axis]);\n\treturn (\n\t\t<AnimatePresence>\n\t\t\t{props.isVisible && (\n\t\t\t\t<Card\n\t\t\t\t\tkey={props.printerRail.axis}\n\t\t\t\t\texit={{ opacity: 0, scale: 0.9, y: -40 }}\n\t\t\t\t\tinitial={{ opacity: 0, scale: 0.9, y: 40 }}\n\t\t\t\t\tanimate={{ opacity: 1, scale: 1, y: 0 }}\n\t\t\t\t\tclassName={twMerge(\n\t\t\t\t\t\t'break-inside-avoid-column',\n\t\t\t\t\t\terrorCount > 0 && badgeBorderColorStyle({ color: 'red' }),\n\t\t\t\t\t\terrorCount > 0 && badgeBackgroundColorStyle({ color: 'red' }),\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<CardHeader className=\"\">\n\t\t\t\t\t\t<CardTitle className={twMerge(errorCount > 0 && 'text-red-900/80 dark:text-red-100')}>{railName}</CardTitle>\n\t\t\t\t\t\t<CardDescription className={twMerge(errorCount > 0 && 'text-red-800/80 dark:text-red-100/60')}>\n\t\t\t\t\t\t\t{props.printerRail.axisDescription}\n\t\t\t\t\t\t</CardDescription>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n\t\t\t\t\t\t{motorSlotOptions && (\n\t\t\t\t\t\t\t<div className=\"col-span-2\">\n\t\t\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t\t\tlabel=\"Motor Slot\"\n\t\t\t\t\t\t\t\t\toptions={motorSlotOptions}\n\t\t\t\t\t\t\t\t\terror={props.errors?.motorSlot?._errors.join('\\n')}\n\t\t\t\t\t\t\t\t\tonSelect={(ms) => {\n\t\t\t\t\t\t\t\t\t\tsetMotorSlot(ms.id);\n\t\t\t\t\t\t\t\t\t\tif (board?.integratedDrivers?.[ms.id] != null) {\n\t\t\t\t\t\t\t\t\t\t\tsetDriver(deserializeDriver(board.integratedDrivers[ms.id]) ?? driver);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tvalue={motorSlot ? motorSlotOptions.find((ms) => ms.id === motorSlot) : undefined}\n\t\t\t\t\t\t\t\t\tbadge={motorSlotBadge}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div className=\"col-span-2\">\n\t\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t\tlabel=\"Driver\"\n\t\t\t\t\t\t\t\toptions={supportedDrivers}\n\t\t\t\t\t\t\t\tonSelect={setDriver}\n\t\t\t\t\t\t\t\tvalue={driver}\n\t\t\t\t\t\t\t\tdisabled={integratedDriver != null}\n\t\t\t\t\t\t\t\tbadge={[\n\t\t\t\t\t\t\t\t\tintegratedDriver != null\n\t\t\t\t\t\t\t\t\t\t? ({ children: 'Integrated', color: 'sky' } satisfies BadgeProps)\n\t\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t\t\tusesToolboard ? ({ children: 'Toolboard', color: 'yellow' } satisfies BadgeProps) : undefined,\n\t\t\t\t\t\t\t\t].filter(Boolean)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-span-2\">\n\t\t\t\t\t\t\t<Dropdown label=\"Stepper\" options={steppers} onSelect={setStepper} value={stepper} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-span-1\">\n\t\t\t\t\t\t\t<Dropdown label=\"Voltage\" options={supportedVoltages} onSelect={setVoltage} value={voltage} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-span-1\">\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tlabel=\"Current\"\n\t\t\t\t\t\t\t\tvalue={current}\n\t\t\t\t\t\t\t\tonChange={setCurrent}\n\t\t\t\t\t\t\t\tinputMode=\"decimal\"\n\t\t\t\t\t\t\t\tstep=\"any\"\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tmax={driver.maxCurrent}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{stepper.maxPeakCurrent / 1.41 < current && (\n\t\t\t\t\t\t\t<Banner Icon={FireIcon} color=\"yellow\" title=\"Stepper overcurrent!\" className=\"col-span-2\">\n\t\t\t\t\t\t\t\tYour stepper motor is rated for {Math.floor((stepper.maxPeakCurrent * 100) / 1.41) / 100}A RMS, but you\n\t\t\t\t\t\t\t\tare using {current}A.\n\t\t\t\t\t\t\t</Banner>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{matchingPreset != null && (\n\t\t\t\t\t\t\t<Banner Icon={LightBulbIcon} color=\"brand\" title=\"Driver tuning applied!\" className=\"col-span-2\">\n\t\t\t\t\t\t\t\tRatOS preset applied automatically.\n\t\t\t\t\t\t\t</Banner>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{matchingPreset?.run_current !== defaultPreset?.run_current &&\n\t\t\t\t\t\t\trecommendedPreset &&\n\t\t\t\t\t\t\t!isRecommendedPresetCompatible && (\n\t\t\t\t\t\t\t\t<Banner\n\t\t\t\t\t\t\t\t\tIcon={BoltIcon}\n\t\t\t\t\t\t\t\t\tcolor=\"sky\"\n\t\t\t\t\t\t\t\t\ttitle=\"Recommended tuning preset available at different current\"\n\t\t\t\t\t\t\t\t\tclassName=\"col-span-2\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tRatOS has a recommended preset for your current settings at {recommendedPreset.run_current}A. You can{' '}\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName=\"cursor-pointer font-bold underline hover:no-underline\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => setCurrent(recommendedPreset.run_current)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tchange the current to {recommendedPreset.run_current}A\n\t\t\t\t\t\t\t\t\t</span>{' '}\n\t\t\t\t\t\t\t\t\tto apply the preset automatically.\n\t\t\t\t\t\t\t\t</Banner>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\t\t\t)}\n\t\t</AnimatePresence>\n\t);\n};\n","import * as React from 'react';\n\nimport { cn } from '@/helpers/utils';\n\nconst CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n\t({ className, ...props }, ref) => (\n\t\t<div ref={ref} className={cn('flex flex-col space-y-1.5 p-6', className)} {...props} />\n\t),\n);\n(CardHeader as React.FC).displayName = 'CardHeader';\n\nconst CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(\n\t({ className, ...props }, ref) => (\n\t\t<h3 ref={ref} className={cn('font-semibold leading-none tracking-tight', className)} {...props} />\n\t),\n);\n(CardTitle as React.FC).displayName = 'CardTitle';\n\nconst CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n\t({ className, ...props }, ref) => (\n\t\t<p ref={ref} className={cn('text-sm text-muted-foreground', className)} {...props} />\n\t),\n);\n(CardDescription as React.FC).displayName = 'CardDescription';\n\nconst CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n\t({ className, ...props }, ref) => <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />,\n);\n(CardContent as React.FC).displayName = 'CardContent';\n\nconst CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n\t({ className, ...props }, ref) => (\n\t\t<div ref={ref} className={cn('flex items-center p-6 pt-0', className)} {...props} />\n\t),\n);\n(CardFooter as React.FC).displayName = 'CardFooter';\n\nexport { CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n","import { useCallback, useEffect, useRef, useState } from 'react';\n\nexport const useChangeEffect = (deps: unknown[], clearAfter?: number, resetTimeoutOnChange: boolean = false) => {\n\tconst [hasChanged, setHasChanged] = useState(0);\n\tconst lastDeps = useRef([...deps]);\n\tuseEffect(() => {\n\t\tlet changed = false;\n\t\tlastDeps.current.forEach((dep, i) => {\n\t\t\tif (dep !== deps[i]) {\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\t\tif (changed) {\n\t\t\tsetHasChanged((hasChanged) => (resetTimeoutOnChange ? hasChanged + 1 : 1));\n\t\t}\n\t\tlastDeps.current = [...deps];\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [...deps]);\n\n\tconst clear = useCallback(() => {\n\t\tsetHasChanged(0);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (clearAfter != null && hasChanged > 0) {\n\t\t\tconst timeout = setTimeout(() => {\n\t\t\t\tsetHasChanged(0);\n\t\t\t}, clearAfter);\n\t\t\treturn () => {\n\t\t\t\tclearTimeout(timeout);\n\t\t\t};\n\t\t}\n\t\treturn;\n\t}, [clearAfter, hasChanged]);\n\n\treturn [hasChanged > 0, clear] as const;\n};\n\nexport const useDelayedChangeEffect = (\n\tdeps: unknown[],\n\tdelay: number,\n\tclearAfter?: number,\n\tresetTimeoutOnChange: boolean = false,\n) => {\n\tconst [changeCount, setChangeCount] = useState(0);\n\tconst lastDeps = useRef([...deps]);\n\tconst timeout = useRef<number | null>(null);\n\tuseEffect(() => {\n\t\tif (typeof window === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tlet changed = false;\n\t\tlastDeps.current.forEach((dep, i) => {\n\t\t\tif (dep !== deps[i]) {\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\t\tif (changed) {\n\t\t\tconst trigger = () => setChangeCount((hasChanged) => (resetTimeoutOnChange ? hasChanged + 1 : 1));\n\t\t\ttimeout.current = window.setTimeout(() => {\n\t\t\t\ttrigger();\n\t\t\t\ttimeout.current = null;\n\t\t\t}, delay);\n\t\t}\n\t\tlastDeps.current = [...deps];\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [...deps]);\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (timeout.current) {\n\t\t\t\tclearTimeout(timeout.current);\n\t\t\t}\n\t\t};\n\t}, []);\n\tconst [hasChanged, clear] = useChangeEffect([changeCount], clearAfter, resetTimeoutOnChange);\n\treturn [hasChanged, clear] as const;\n};\n","import { useCallback } from 'react';\nimport { useMoonraker, useNamespacedItemMutation, useNamespacedItemQuery } from '@/moonraker/hooks';\nimport { UseMutationOptions, UseQueryOptions } from '@tanstack/react-query';\nimport { MoonrakerDBItemResponse, MoonrakerDBValue, MoonrakerNamespaceKeys } from '@/moonraker/types';\n\nexport const useMainsailQuery = <\n\tK extends MoonrakerNamespaceKeys<'mainsail'>,\n\tV extends MoonrakerDBValue<'mainsail', K>,\n>(\n\tkey: K,\n\toptions?: Omit<UseQueryOptions<V, unknown, V, 'mainsail'[]>, 'queryKey' | 'queryFn'>,\n) => useNamespacedItemQuery('mainsail', key, options);\n\nexport const useMainsailMutation = <\n\tK extends MoonrakerNamespaceKeys<'mainsail'>,\n\tV extends MoonrakerDBValue<'mainsail', K>,\n>(\n\tkey: K,\n\toptions?: Omit<UseMutationOptions<MoonrakerDBItemResponse<V>, unknown, V>, 'mutationKey' | 'mutationFn'>,\n) => useNamespacedItemMutation('mainsail', key, options);\n\nexport function useMainsail() {\n\tconst moonraker = useMoonraker();\n\tconst getMainsailItem = useCallback(\n\t\tasync <K extends MoonrakerNamespaceKeys<'mainsail'>, V extends MoonrakerDBValue<'mainsail', K>>(\n\t\t\tkey: MoonrakerNamespaceKeys<'mainsail'>,\n\t\t): Promise<V> => {\n\t\t\treturn (await moonraker.getItem('mainsail', key)) as V;\n\t\t},\n\t\t[moonraker],\n\t);\n\tconst saveMainsailItem = useCallback(\n\t\tasync <K extends MoonrakerNamespaceKeys<'mainsail'>, V extends MoonrakerDBValue<'mainsail', K>>(\n\t\t\tkey: K,\n\t\t\tvalue: V,\n\t\t): Promise<MoonrakerDBItemResponse<V>> => {\n\t\t\treturn await moonraker.saveItem('mainsail', key, value as V);\n\t\t},\n\t\t[moonraker],\n\t);\n\n\treturn {\n\t\tgetItem: getMainsailItem,\n\t\tsaveItem: saveMainsailItem,\n\t};\n}\n"],"names":["cardVariants","cva","Card","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","motion","div","props","className","children","ErrorMessage","Banner","color","Icon","XCircleIcon","title","twMerge","FullLoadScreen","twJoin","Spinner","NoSSR","isClient","useIsClient","DynamicImport","fallback","lazy","Promise","resolve","default","Fragment","useKlippyStateHandler","query","lastMessage","useMoonraker","passThroughUpdateMethods","klippyReadyState","setKlippyReadyState","useState","queryKlippyState","useCallback","serverInfo","klippy_state","klippyState","setTimeout","e","useEffect","method","klipperStateToText","KlippyStateBadge","jsx_runtime","jsxs","Badge","svg","badgeTextColorStyle","fill","viewBox","circle","cx","cy","r","moonrakerStatusToText","moonrakerState","MoonrakerStateBadge","status","PrinterHeader","stateColorClass","h1","breadcrumb","map","bc","index","span","length","badges","header","h3","p","description","PrinterStateHeader","printerStateQuery","printerName","useMainsailQuery","initialData","savedPrinter","useRecoilValue","LoadablePrinterState","useMoonrakerQuery","usePrinterObjectQuery","printerState","data","print_stats","state","breadCrumbs","useMemo","crumbs","isLoading","push","name","undefined","PrinterStateLoadingHeader","PrinterConnectionHeader","QueryStatus","content","isError","error","message","AnimatedContainer","TwoColumns","strokeWidth","stroke","xmlns","path","strokeLinecap","strokeLinejoin","d","SingleColumn","proccessTokens","hunks","options","highlight","enhancers","markEdits","type","tokenize","ex","DiffModal","isOpen","setIsOpen","viewType","setViewType","close","files","parseDiff","diff","diffType","Transition","Root","show","as","appear","Dialog","onClose","Child","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Overlay","aria-hidden","Title","button","onClick","XMarkIcon","param","i","Diff","tokens","buttons","Button","variant","StateCircleVariants","variants","success","info","warning","danger","indeterminate","plain","primary","StateCircle","ping","pingClassName","ChangedFile","addFileToIgnore","addFileToOverwrite","file","removeFileToIgnore","removeFileToOverwrite","isMarkedIgnored","isMarkedOverwritten","isDiffModalOpen","setIsDiffModalOpen","showDiffModal","wouldOtherwiseBeWritten","overwrite","isOverwritable","isIgnorable","isOverwritten","exists","needsExplicitAction","changedFromConfig","actions","fileName","skip","ignore","write","remove","intent","action","filter","Boolean","fileState","shouldPing","useChangeEffect","li","concat","a","size","changedOnDisk","isIgnored","CheckIcon","Menu","EllipsisVerticalIcon","Items","Item","active","disabled","FileChanges","filesToWrite","serializedConfig","onFilesToIgnoreChange","onFilesToOverwriteChange","filesToOverwrite","setFilesToOverwrite","includes","filesToIgnore","setFilesToIgnore","client","trpc","useUtils","useQuery","queryKey","queryFn","res","printer","getFilesToWrite","mutate","config","enabled","ul","role","fileToWrite","z","array","BasePrinterRail","PrinterRailSettings","board","deserializeDriver","supportedVoltages","toolheads","useToolheads","toolhead","find","th","getExtruderAxis","printerRail","axis","canBeExtruderlessBoard","every","hasToolboard","usesToolboard","printerRailDefault","getToolboard","selectedBoard","performanceMode","setPerformanceMode","setPrinterRail","useSetRecoilState","PrinterRailState","printerRails","PrinterRailsState","motorSlot","setMotorSlot","motorSlots","integratedDriver","integratedDrivers","startsWith","PrinterAxis","extruder","driver","setDriver","stepper","setStepper","homingSpeed","setHomingSpeed","errorCount","errors","Object","keys","reduce","acc","key","keyErrors","count","Array","isArray","_errors","isSlotInUse","slot","some","railToolhead","pr","guessMotorSlot","mcu","reversePinLookup","canUseExtruderlessConfigs","boardPath","getSupportedVoltages","v","badge","findPreset","id","voltage","setVoltage","current","setCurrent","defaultPreset","recommendedPreset","matchingPreset","supportedDrivers","Drivers","protocol","stepperSPI","steppers","Steppers","s","matchesDefaultRail","sv","currentVoltage","run_current","newState","axisDescription","rotationDistance","serializedNew","serializePrinterRail","serializedOld","isDirty","isRecommendedPresetCompatible","railName","extruder1","toLocaleUpperCase","motorSlotOptions","ms","hasDiagPin","diag_pin","hasEndstopPin","endstop_pin","isInUse","motorSlotBadge","AnimatePresence","isVisible","exit","opacity","scale","y","initial","animate","badgeBorderColorStyle","badgeBackgroundColorStyle","CardHeader","CardTitle","CardDescription","CardContent","Dropdown","label","join","onSelect","value","TextInput","onChange","inputMode","step","min","max","maxCurrent","maxPeakCurrent","FireIcon","Math","floor","LightBulbIcon","BoltIcon","React","ref","cn","displayName","CardFooter","deps","clearAfter","resetTimeoutOnChange","hasChanged","setHasChanged","lastDeps","useRef","changed","forEach","dep","clear","timeout","clearTimeout","useDelayedChangeEffect","delay","changeCount","setChangeCount","trigger","window","useNamespacedItemQuery"],"sourceRoot":""}