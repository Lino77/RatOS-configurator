{"version":3,"file":"static/chunks/5826-8534877b9ef7e1a9.js","mappings":"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","sources":["webpack://_N_E/./components/common/error-message.tsx","webpack://_N_E/./components/common/full-load-screen.tsx","webpack://_N_E/./components/common/no-ssr.tsx","webpack://_N_E/./hooks/useKlippyStateHandler.tsx","webpack://_N_E/./components/klippy-state-badge.tsx","webpack://_N_E/./components/moonraker-state-badge.tsx","webpack://_N_E/./components/common/printer-state-header.tsx","webpack://_N_E/./components/common/query-status.tsx","webpack://_N_E/./components/setup-steps/diff-modal.tsx","webpack://_N_E/./components/common/state-circle.tsx","webpack://_N_E/./components/setup-steps/file-changes.tsx","webpack://_N_E/./components/setup-steps/printer-rail-settings.tsx","webpack://_N_E/./hooks/useChangeEffect.tsx","webpack://_N_E/./hooks/useMainsail.tsx","webpack://_N_E/<anon>"],"sourcesContent":["import { XCircleIcon } from '@heroicons/react/24/solid';\nimport React from 'react';\nimport { twMerge } from 'tailwind-merge';\nimport { Banner } from '@/components/common/banner';\n\nexport type ErrorMessageProps = React.PropsWithChildren<{\n\ttitle?: string;\n\tclassName?: string;\n}>;\n\nexport const ErrorMessage: React.FC<ErrorMessageProps> = (props) => {\n\treturn (\n\t\t<Banner\n\t\t\tcolor=\"red\"\n\t\t\tIcon={XCircleIcon}\n\t\t\ttitle={props.title ? 'Error: ' + props.title : 'Error'}\n\t\t\tclassName={twMerge(props.className, 'whitespace-pre-wrap')}\n\t\t>\n\t\t\t{props.children}\n\t\t</Banner>\n\t);\n};\n","import { Spinner } from '@/components/common/spinner';\nimport { twJoin } from 'tailwind-merge';\n\nexport const FullLoadScreen = (props: { className?: string }) => {\n\treturn (\n\t\t<div className={twJoin('flex h-full w-full flex-1 items-center justify-center', props.className)}>\n\t\t\t<Spinner className=\"h-8 w-8\" />\n\t\t</div>\n\t);\n};\n","'use client';\nimport { useIsClient } from '@/hooks/isClient';\nimport dynamic from 'next/dynamic';\nimport React, { lazy } from 'react';\nimport { FullLoadScreen } from '@/components/common/full-load-screen';\nexport const NoSSR = (props: React.PropsWithChildren<{ fallback?: React.ReactNode }>) => {\n\tconst isClient = useIsClient();\n\treturn isClient ? <DynamicImport>{props.children}</DynamicImport> : props.fallback ?? <FullLoadScreen />;\n};\nconst DynamicImport = lazy(() =>\n\tPromise.resolve({ default: (props: React.PropsWithChildren) => <>{props.children}</> }),\n);\n","'use client';\n\nimport { useCallback, useEffect, useState } from 'react';\nimport { atom, useSetRecoilState } from 'recoil';\nimport { useMoonraker } from '@/moonraker/hooks';\n\nexport type KlippyReadyStates = 'ready' | 'error' | 'shutdown' | 'startup' | 'unknown';\n\nexport const useKlippyStateHandler = () => {\n\tconst { query, lastMessage } = useMoonraker({\n\t\tpassThroughUpdateMethods: ['notify_klippy_ready', 'notify_klippy_shutdown', 'notify_klippy_disconnected'],\n\t});\n\tconst [klippyReadyState, setKlippyReadyState] = useState<KlippyReadyStates>('unknown');\n\n\tconst queryKlippyState = useCallback(async () => {\n\t\tif (query != null) {\n\t\t\ttry {\n\t\t\t\tconst serverInfo = await query('server.info');\n\t\t\t\tif (serverInfo?.klippy_state == null) return;\n\t\t\t\tconst klippyState: KlippyReadyStates = serverInfo.klippy_state;\n\t\t\t\tsetKlippyReadyState(klippyState);\n\t\t\t\tif (klippyState === 'startup') {\n\t\t\t\t\t// Query for server info in two seconds as instructed by the moonraker docs.\n\t\t\t\t\t// Seems unnecessary with globally published events?\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tqueryKlippyState();\n\t\t\t\t\t}, 2000);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsetKlippyReadyState('unknown');\n\t\t\t}\n\t\t}\n\t}, [query, setKlippyReadyState]);\n\n\tuseEffect(() => {\n\t\tif (query != null) {\n\t\t\tqueryKlippyState();\n\t\t}\n\t}, [query, queryKlippyState]);\n\n\tuseEffect(() => {\n\t\tif (lastMessage && 'method' in lastMessage && lastMessage.method === 'notify_klippy_ready') {\n\t\t\tsetKlippyReadyState('ready');\n\t\t}\n\t\tif (lastMessage && 'method' in lastMessage && lastMessage.method === 'notify_klippy_shutdown') {\n\t\t\tsetKlippyReadyState('shutdown');\n\t\t}\n\t\tif (lastMessage && 'method' in lastMessage && lastMessage.method === 'notify_klippy_disconnected') {\n\t\t\tsetKlippyReadyState('unknown');\n\t\t\tqueryKlippyState();\n\t\t}\n\t}, [lastMessage, queryKlippyState, setKlippyReadyState]);\n\n\treturn klippyReadyState;\n};\n","'use client';\nimport React from 'react';\nimport { useRecoilValue } from 'recoil';\nimport { twJoin } from 'tailwind-merge';\nimport { KlippyReadyStates, useKlippyStateHandler } from '@/hooks/useKlippyStateHandler';\nimport { Badge, BadgeProps, badgeTextColorStyle } from '@/components/common/badge';\n\ninterface Props {\n\tclassName?: string;\n}\n\nconst klipperStateToText = (klippyState: KlippyReadyStates) => {\n\tswitch (klippyState) {\n\t\tcase 'error':\n\t\t\treturn 'Klipper State: Error';\n\t\tcase 'ready':\n\t\t\treturn 'Klipper State: Ready';\n\t\tcase 'shutdown':\n\t\t\treturn 'Klipper State: Shutdown';\n\t\tcase 'startup':\n\t\t\treturn 'Klipper State: Startup';\n\t\tcase 'unknown':\n\t\t\treturn 'Klipper State: Unknown';\n\t\tdefault:\n\t\t\treturn 'Klipper State: Unknown';\n\t}\n};\n\nexport const KlippyStateBadge: React.FC<Props> = (props) => {\n\tconst klippyState = useKlippyStateHandler();\n\tlet color: BadgeProps['color'] = 'orange';\n\tswitch (klippyState) {\n\t\tcase 'error':\n\t\t\tcolor = 'red';\n\t\t\tbreak;\n\t\tcase 'ready':\n\t\t\tcolor = 'brand';\n\t\t\tbreak;\n\t\tcase 'shutdown':\n\t\t\tcolor = 'orange';\n\t\t\tbreak;\n\t\tcase 'startup':\n\t\t\tcolor = 'yellow';\n\t\t\tbreak;\n\t\tcase 'unknown':\n\t\t\tcolor = 'orange';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tcolor = 'orange';\n\t\t\tbreak;\n\t}\n\n\treturn (\n\t\t<Badge color={color} title={klipperStateToText(klippyState)}>\n\t\t\t<svg className={twJoin(badgeTextColorStyle({ color }), 'h-2 w-2')} fill=\"currentColor\" viewBox=\"0 0 8 8\">\n\t\t\t\t<circle cx={4} cy={4} r={3} />\n\t\t\t</svg>\n\t\t\tKlipper\n\t\t</Badge>\n\t);\n};\n","'use client';\n\nimport React from 'react';\nimport { twJoin } from 'tailwind-merge';\nimport { useMoonraker } from '@/moonraker/hooks';\nimport { Badge, BadgeProps, badgeTextColorStyle } from '@/components/common/badge';\nimport { MoonrakerStatus } from '@/moonraker/types';\n\ninterface Props {\n\tclassName?: string;\n}\n\nconst moonrakerStatusToText = (moonrakerState: MoonrakerStatus | null) => {\n\tswitch (moonrakerState) {\n\t\tcase 'not-running':\n\t\t\treturn 'Moonraker State: Not Running';\n\t\tcase 'connected':\n\t\t\treturn 'Moonraker State: Connected';\n\t\tcase 'connecting':\n\t\t\treturn 'Moonraker State: Connecting';\n\t\tdefault:\n\t\t\treturn 'Moonraker State: Unknown';\n\t}\n};\n\nexport const MoonrakerStateBadge: React.FC<Props> = (props) => {\n\tconst { status } = useMoonraker();\n\tlet color: BadgeProps['color'] = 'orange';\n\tswitch (status) {\n\t\tcase 'not-running':\n\t\t\tcolor = 'red';\n\t\t\tbreak;\n\t\tcase 'connected':\n\t\t\tcolor = 'brand';\n\t\t\tbreak;\n\t\tcase 'connecting':\n\t\t\tcolor = 'yellow';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tcolor = 'orange';\n\t\t\tbreak;\n\t}\n\treturn (\n\t\t<Badge color={color} title={moonrakerStatusToText(status)}>\n\t\t\t<svg className={twJoin(badgeTextColorStyle({ color }), 'h-2 w-2')} fill=\"currentColor\" viewBox=\"0 0 8 8\">\n\t\t\t\t<circle cx={4} cy={4} r={3} />\n\t\t\t</svg>\n\t\t\tMoonraker\n\t\t</Badge>\n\t);\n};\n","import { twJoin, twMerge } from 'tailwind-merge';\nimport { useIsClient } from '@/hooks/isClient';\nimport { Badge } from '@/components/common/badge';\nimport { useMainsailQuery } from '@/hooks/useMainsail';\nimport { useMoonrakerQuery, usePrinterObjectQuery } from '@/moonraker/hooks';\nimport { trpc } from '@/utils/trpc';\nimport React, { Fragment, useMemo } from 'react';\nimport { KlippyStateBadge } from '@/components/klippy-state-badge';\nimport { MoonrakerStateBadge } from '@/components/moonraker-state-badge';\nimport { LoadablePrinterState } from '@/recoil/printer';\nimport { useRecoilValue } from 'recoil';\n\ninterface PrinterHeaderProps {\n\tstateColorClass?: string;\n\tbreadcrumb?: React.ReactNode[];\n\tbadges?: React.ReactNode;\n\ttitle: React.ReactNode;\n\tdescription: React.ReactNode;\n}\n\nexport const PrinterHeader: React.FC<PrinterHeaderProps> = (props) => {\n\treturn (\n\t\t<div className=\"mt-6 @container\">\n\t\t\t<div className=\"border-t border-white/10 bg-zinc-700/15 backdrop-blur-sm\">\n\t\t\t\t<div className=\"mx-auto flex max-w-7xl flex-row items-center justify-between gap-x-8 gap-y-4 px-4 py-4\">\n\t\t\t\t\t<div className=\"flex items-center gap-x-3\">\n\t\t\t\t\t\t<div className={twMerge('flex-none rounded-full bg-green-400/10 p-1 text-zinc-400', props.stateColorClass)}>\n\t\t\t\t\t\t\t<div className=\"h-2 w-2 rounded-full bg-current\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h1 className=\"flex gap-x-3 text-base leading-7\">\n\t\t\t\t\t\t\t{props.breadcrumb?.map((bc, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Fragment key={index}>\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-semibold text-white\">{bc}</span>\n\t\t\t\t\t\t\t\t\t\t{index < (props.breadcrumb?.length ?? 0) - 1 && <span className=\"text-zinc-400\">/</span>}\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"capitalize\">{props.badges}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<header className=\"sticky top-14 z-10 flex flex-grow-0 items-center gap-1 border-y border-b-white/10 border-t-white/5 bg-zinc-700/10 backdrop-blur-sm\">\n\t\t\t\t<div className=\"mx-auto w-full max-w-7xl gap-x-8 px-4 py-4\">\n\t\t\t\t\t<h3 className=\"dark:focus-ring-0 flex h-auto flex-1 border-none p-0 text-xl font-medium focus:ring-0 focus:ring-offset-0\">\n\t\t\t\t\t\t{props.title}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<p className=\"dark:focus-ring-0 flex h-auto flex-1 border-none p-0 text-base font-medium text-muted-foreground focus:ring-0 focus:ring-offset-0 dark:text-muted-foreground\">\n\t\t\t\t\t\t{props.description}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t</div>\n\t);\n};\n\nexport const PrinterStateHeader: React.FC<{ title?: string; description: string }> = (props) => {\n\tconst printerName = useMainsailQuery('general.printername', { initialData: 'Loading...' });\n\tconst savedPrinter = useRecoilValue(LoadablePrinterState);\n\tconst klippyState = useMoonrakerQuery('server.info');\n\tconst printerStateQuery = usePrinterObjectQuery('print_stats');\n\tconst printerState = printerStateQuery.data?.print_stats.state;\n\tconst breadCrumbs = useMemo(() => {\n\t\tconst crumbs: string[] = [printerName.data ?? 'RatOS'];\n\t\tif (klippyState.isLoading) {\n\t\t\tcrumbs.push('Loading...');\n\t\t} else if (savedPrinter?.name) {\n\t\t\tcrumbs.push(savedPrinter.name);\n\t\t}\n\t\treturn crumbs;\n\t}, [klippyState.isLoading, printerName.data, savedPrinter?.name]);\n\tconst isClient = useIsClient();\n\treturn isClient ? (\n\t\t<PrinterHeader\n\t\t\tstateColorClass={twJoin(\n\t\t\t\tklippyState.data?.klippy_state === 'error' && 'bg-red-400/10 text-red-400',\n\t\t\t\tklippyState.data?.klippy_state === 'startup' && 'bg-amber-400/10 text-amber-400',\n\t\t\t\tklippyState.data?.klippy_state === 'ready' && 'bg-green-400/10 text-green-400',\n\t\t\t\tklippyState.data?.klippy_state === 'shutdown' && 'bg-red-400/10 text-red-400',\n\t\t\t)}\n\t\t\tbreadcrumb={breadCrumbs}\n\t\t\tbadges={\n\t\t\t\t<Badge\n\t\t\t\t\tclassName=\"order-first capitalize @screen-sm:order-none\"\n\t\t\t\t\tcolor={\n\t\t\t\t\t\tprinterState === undefined\n\t\t\t\t\t\t\t? 'gray'\n\t\t\t\t\t\t\t: printerState == 'canceled'\n\t\t\t\t\t\t\t\t? 'pink'\n\t\t\t\t\t\t\t\t: printerState == 'complete'\n\t\t\t\t\t\t\t\t\t? 'green'\n\t\t\t\t\t\t\t\t\t: printerState == 'error'\n\t\t\t\t\t\t\t\t\t\t? 'red'\n\t\t\t\t\t\t\t\t\t\t: printerState === 'paused'\n\t\t\t\t\t\t\t\t\t\t\t? 'sky'\n\t\t\t\t\t\t\t\t\t\t\t: printerState === 'printing'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'yellow'\n\t\t\t\t\t\t\t\t\t\t\t\t: printerState === 'standby'\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'brand'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'gray'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{printerState === undefined ? 'Offline' : printerState ?? 'Loading...'}\n\t\t\t\t</Badge>\n\t\t\t}\n\t\t\ttitle={props.title}\n\t\t\tdescription={props.description}\n\t\t/>\n\t) : (\n\t\t<PrinterStateLoadingHeader />\n\t);\n};\n\nexport const PrinterConnectionHeader: React.FC<{ title?: string; description: string }> = (props) => {\n\tconst printerName = useMainsailQuery('general.printername', { initialData: 'Loading...' });\n\tconst savedPrinter = useRecoilValue(LoadablePrinterState);\n\tconst klippyState = useMoonrakerQuery('server.info');\n\tconst isClient = useIsClient();\n\tconst breadCrumbs = useMemo(() => {\n\t\tconst crumbs: string[] = [printerName.data ?? 'RatOS'];\n\t\tif (klippyState.isLoading) {\n\t\t\tcrumbs.push('Loading...');\n\t\t} else if (savedPrinter?.name) {\n\t\t\tcrumbs.push(savedPrinter.name);\n\t\t}\n\t\treturn crumbs;\n\t}, [klippyState.isLoading, printerName.data, savedPrinter?.name]);\n\treturn isClient ? (\n\t\t<PrinterHeader\n\t\t\tstateColorClass={twJoin(\n\t\t\t\tklippyState.data?.klippy_state === 'error' && 'bg-red-400/10 text-red-400',\n\t\t\t\tklippyState.data?.klippy_state === 'startup' && 'bg-amber-400/10 text-amber-400',\n\t\t\t\tklippyState.data?.klippy_state === 'ready' && 'bg-green-400/10 text-green-400',\n\t\t\t\tklippyState.data?.klippy_state === 'shutdown' && 'bg-red-400/10 text-red-400',\n\t\t\t)}\n\t\t\tbreadcrumb={breadCrumbs}\n\t\t\tbadges={\n\t\t\t\t<div className=\"inline-flex space-x-1 sm:flex-row-reverse sm:justify-end sm:space-x-2 sm:space-y-0 md:flex-row\">\n\t\t\t\t\t<KlippyStateBadge />\n\t\t\t\t\t<MoonrakerStateBadge />\n\t\t\t\t</div>\n\t\t\t}\n\t\t\ttitle={props.title}\n\t\t\tdescription={props.description}\n\t\t/>\n\t) : (\n\t\t<PrinterStateLoadingHeader />\n\t);\n};\n\nexport const PrinterStateLoadingHeader: React.FC = () => (\n\t<PrinterHeader\n\t\tstateColorClass=\"bg-gray-400/10 text-gray-400\"\n\t\tbreadcrumb={['RatOS', 'Loading...']}\n\t\ttitle=\"Loading printer state...\"\n\t\tdescription=\"Please wait while RatOS loads your printer state\"\n\t\tbadges={\n\t\t\t<div className=\"flex space-x-1 sm:flex-row-reverse sm:justify-end sm:space-x-2 sm:space-y-0 md:flex-row\">\n\t\t\t\t<KlippyStateBadge />\n\t\t\t\t<MoonrakerStateBadge />\n\t\t\t</div>\n\t\t}\n\t/>\n);\n","'use client';\nimport { TRPCClientErrorLike } from '@trpc/client';\nimport { UseTRPCQueryResult } from '@trpc/react-query/src/shared/hooks/types';\nimport { AppRouter } from '@/server/routers';\nimport { ErrorMessage } from '@/components/common/error-message';\nimport { Spinner } from '@/components/common/spinner';\nimport { motion } from 'framer-motion';\nimport { AnimatedContainer } from '@/components/common/animated-container';\nimport { UseQueryResult } from '@tanstack/react-query';\n\nexport const QueryStatus = (query: UseQueryResult<any, any>) => {\n\tlet content = null;\n\tif (query.isError) {\n\t\tcontent = (\n\t\t\t<div className=\"mb-4\">\n\t\t\t\t<ErrorMessage>{query.error?.message}</ErrorMessage>\n\t\t\t</div>\n\t\t);\n\t}\n\tif (query.isLoading) {\n\t\tcontent = (\n\t\t\t<div className=\"mb-4 flex items-center justify-center\">\n\t\t\t\t<Spinner />\n\t\t\t</div>\n\t\t);\n\t}\n\treturn <AnimatedContainer>{content}</AnimatedContainer>;\n};\n","'use client';\n/* This example requires Tailwind CSS v2.0+ */\nimport React, { Fragment, useCallback, useMemo, useState } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { parseDiff, Diff, DiffType, ViewType, HunkData, TokenizeOptions, tokenize, markEdits } from 'react-diff-view';\nimport type { FileState } from '@/server/routers/printer';\nimport 'react-diff-view/style/index.css';\nimport { XMarkIcon } from '@heroicons/react/20/solid';\nimport { Button } from '@/components/common/button';\nimport { twJoin, twMerge } from 'tailwind-merge';\n\ninterface ModalProps {\n\ttitle: string;\n\tdiff: string;\n\tstate: FileState;\n\tisOpen: boolean;\n\tbuttons?: React.ReactNode;\n\toverwrite?: () => void;\n\tignore?: () => void;\n\tsetIsOpen: (open: boolean) => void;\n}\n\nconst TwoColumns = (props: { className?: string }) => {\n\treturn (\n\t\t<svg\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\tstrokeWidth=\"1.5\"\n\t\t\tstroke=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={twMerge('h-6 w-6', props.className)}\n\t\t>\n\t\t\t<path\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\td=\"M 12 4.5 L 12 19.5 M 4.125 19.5 L 19.875 19.5 C 20.496 19.5 21 18.996 21 18.375 L 21 5.625 C 21 5.004 20.496 4.5 19.875 4.5 L 4.125 4.5 C 3.504 4.5 3 5.004 3 5.625 L 3 18.375 C 3 18.996 3.504 19.5 4.125 19.5 Z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n};\nconst SingleColumn = (props: { className?: string }) => {\n\treturn (\n\t\t<svg\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\tstrokeWidth=\"1.5\"\n\t\t\tstroke=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={twMerge('h-6 w-6', props.className)}\n\t\t>\n\t\t\t<path\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\td=\"M 4.125 19.5 L 19.875 19.5 C 20.496 19.5 21 18.996 21 18.375 L 21 5.625 C 21 5.004 20.496 4.5 19.875 4.5 L 4.125 4.5 C 3.504 4.5 3 5.004 3 5.625 L 3 18.375 C 3 18.996 3.504 19.5 4.125 19.5 Z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n};\n\nconst proccessTokens = (hunks: HunkData[]) => {\n\tif (!hunks) {\n\t\treturn undefined;\n\t}\n\n\tconst options: TokenizeOptions = {\n\t\thighlight: false,\n\t\tenhancers: [markEdits(hunks, { type: 'block' })],\n\t};\n\n\ttry {\n\t\treturn tokenize(hunks, options);\n\t} catch (ex) {\n\t\treturn undefined;\n\t}\n};\n\nexport const DiffModal: React.FC<ModalProps> = (props) => {\n\tconst { isOpen, setIsOpen } = props;\n\tconst [viewType, setViewType] = useState<ViewType>('unified');\n\n\tconst close = useCallback(() => {\n\t\tsetIsOpen(false);\n\t}, [setIsOpen]);\n\n\tconst files = useMemo(() => {\n\t\treturn parseDiff(props.diff);\n\t}, [props.diff]);\n\tconst diffType: DiffType = props.state === 'changed' ? 'modify' : props.state === 'created' ? 'add' : 'delete';\n\n\treturn (\n\t\t<Transition.Root show={isOpen} as={Fragment} appear={true}>\n\t\t\t<Dialog\n\t\t\t\tas=\"div\"\n\t\t\t\tclassName=\"git-diff fixed inset-0 z-50 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-400 scrollbar-thumb-rounded-md dark:scrollbar-thumb-zinc-600\"\n\t\t\t\tonClose={close}\n\t\t\t>\n\t\t\t\t<div className=\"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0\">\n\t\t\t\t\t<Transition.Child\n\t\t\t\t\t\tas={Fragment}\n\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\tenterFrom=\"opacity-0\"\n\t\t\t\t\t\tenterTo=\"opacity-100\"\n\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\tleaveFrom=\"opacity-100\"\n\t\t\t\t\t\tleaveTo=\"opacity-0\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Dialog.Overlay className=\"fixed inset-0 bg-zinc-500 bg-opacity-75 transition-opacity dark:bg-zinc-950 dark:bg-opacity-75\" />\n\t\t\t\t\t</Transition.Child>\n\n\t\t\t\t\t{/* This element is to trick the browser into centering the modal contents. */}\n\t\t\t\t\t<span className=\"hidden sm:inline-block sm:h-screen sm:align-middle\" aria-hidden=\"true\">\n\t\t\t\t\t\t&#8203;\n\t\t\t\t\t</span>\n\t\t\t\t\t<Transition.Child\n\t\t\t\t\t\tas={Fragment}\n\t\t\t\t\t\tenter=\"ease-out duration-300\"\n\t\t\t\t\t\tenterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t\tenterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\tleave=\"ease-in duration-200\"\n\t\t\t\t\t\tleaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n\t\t\t\t\t\tleaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"relative inline-flex max-h-[80vh] max-w-screen-2xl transform flex-col overflow-hidden rounded-lg bg-white py-4 text-left align-bottom shadow-xl transition-all dark:bg-zinc-800 sm:my-8 sm:w-full sm:py-6 sm:align-middle\">\n\t\t\t\t\t\t\t<Dialog.Title\n\t\t\t\t\t\t\t\tas=\"h3\"\n\t\t\t\t\t\t\t\tclassName=\"flex items-center justify-between border-b border-zinc-200 px-4 pb-4 text-lg font-semibold leading-6 text-zinc-900 dark:border-zinc-700 dark:text-zinc-100 sm:px-6\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>{props.title}</div>\n\t\t\t\t\t\t\t\t<div className=\"relative flex flex-nowrap items-center space-x-2 text-zinc-500 dark:text-zinc-400\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t\t\t\t\tviewType === 'unified'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'cursor-default text-sky-600 dark:text-sky-400'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'hover:text-zinc-800 dark:hover:text-zinc-100',\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setViewType('unified')}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Unified View\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<SingleColumn className=\"h-6 w-6\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t\t\t\t\tviewType === 'split'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'cursor-default text-sky-600 dark:text-sky-400'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'hover:text-zinc-800 dark:hover:text-zinc-100',\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setViewType('split')}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Split View\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<TwoColumns className=\"h-6 w-6\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<div className=\"!ml-4 !mr-1 h-6 border-l border-l-zinc-200 dark:border-l-zinc-800\"></div>\n\t\t\t\t\t\t\t\t\t<button className=\"hover:text-zinc-800 dark:hover:text-zinc-100\" onClick={close}>\n\t\t\t\t\t\t\t\t\t\t<XMarkIcon className=\"h-6 w-6\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Dialog.Title>\n\t\t\t\t\t\t\t<div className=\"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-400 scrollbar-thumb-rounded-md dark:scrollbar-thumb-zinc-600\">\n\t\t\t\t\t\t\t\t{files.map(({ hunks }, i) => (\n\t\t\t\t\t\t\t\t\t<Diff key={i} hunks={hunks} viewType={viewType} diffType={diffType} tokens={proccessTokens(hunks)} />\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex-end flex flex-row items-center justify-end space-x-2 border-t border-zinc-200 px-4 pt-4 dark:border-zinc-700 sm:px-6 sm:pt-6\">\n\t\t\t\t\t\t\t\t{props.buttons ?? null}\n\t\t\t\t\t\t\t\t<Button variant=\"plain\" onClick={close}>\n\t\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Transition.Child>\n\t\t\t\t</div>\n\t\t\t</Dialog>\n\t\t</Transition.Root>\n\t);\n};\n","import { cva, VariantProps } from 'class-variance-authority';\nimport React from 'react';\nimport { twMerge } from 'tailwind-merge';\nimport type { Intents } from '@/components/common/button';\n\ntype IntentNoOutline = Exclude<Intents, 'outline'>;\n\ntype StateIntents = { [key in IntentNoOutline]: string };\n\nexport const StateCircleVariants = cva('flex-none rounded-full p-1 relative flex', {\n\tvariants: {\n\t\tstate: {\n\t\t\tsuccess: 'dark:text-green-400 text-green-500 bg-green-400/20',\n\t\t\tinfo: 'dark:text-sky-400 text-sky-500 bg-sky-400/20',\n\t\t\twarning: 'dark:text-yellow-400 text-yellow-500 bg-yellow-400/20',\n\t\t\tdanger: 'dark:text-rose-400 text-rose-500 bg-rose-400/20',\n\t\t\tindeterminate: 'dark:text-zinc-400 text-zinc-500 bg-zinc-500/20',\n\t\t\tplain: 'dark:text-zinc-400 text-zinc-500 bg-zinc-500/20',\n\t\t\tprimary: 'dark:text-brand-400 text-brand-500 bg-brand-500/20',\n\t\t} satisfies StateIntents,\n\t},\n});\n\nexport type StateCircleProps = VariantProps<typeof StateCircleVariants> & {\n\tping?: boolean;\n\ttitle?: string;\n\tpingClassName?: string;\n};\n\nexport const StateCircle: React.FC<StateCircleProps> = (props) => {\n\treturn (\n\t\t<div className={StateCircleVariants(props)}>\n\t\t\t<div\n\t\t\t\ttitle={props.title}\n\t\t\t\tclassName={twMerge(\n\t\t\t\t\t'absolute inset-0 transition-all duration-700',\n\t\t\t\t\tprops.ping ? 'opacity-100' : 'opacity-0',\n\t\t\t\t\tprops.pingClassName ?? 'z-2',\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={twMerge('absolute inset-0 inline-flex animate-ping rounded-full bg-current opacity-0 ease-out')}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"h-2 w-2 rounded-full bg-current\" />\n\t\t</div>\n\t);\n};\n","import React, { Fragment, useCallback, useEffect, useMemo, useState } from 'react';\nimport { SerializedPrinterConfiguration } from '@/zods/printer-configuration';\nimport { trpc } from '@/utils/trpc';\nimport { useQuery } from '@tanstack/react-query';\nimport type { FilesToWriteWithState, FileState } from '@/server/routers/printer';\nimport { DiffModal } from '@/components/setup-steps/diff-modal';\nimport { twJoin } from 'tailwind-merge';\nimport { Menu, Transition } from '@headlessui/react';\nimport { EllipsisVerticalIcon } from '@heroicons/react/20/solid';\nimport { StateCircle } from '@/components/common/state-circle';\nimport { Badge } from '@/components/common/badge';\nimport { Button, Intents } from '@/components/common/button';\nimport { useChangeEffect } from '@/hooks/useChangeEffect';\nimport { CheckIcon } from '@heroicons/react/24/outline';\nimport { QueryStatus } from '@/components/common/query-status';\n\ninterface FileChangesProps {\n\tserializedConfig: SerializedPrinterConfiguration | null;\n\tonFilesToOverwriteChange: (files: string[]) => void;\n\tonFilesToIgnoreChange: (files: string[]) => void;\n}\n\ninterface ChangedFileProps {\n\tfile: Unpacked<FilesToWriteWithState>;\n\tisMarkedOverwritten: boolean;\n\tisMarkedIgnored: boolean;\n\taddFileToOverwrite: (fileName: string) => void;\n\tremoveFileToOverwrite: (fileName: string) => void;\n\taddFileToIgnore: (fileName: string) => void;\n\tremoveFileToIgnore: (fileName: string) => void;\n}\n\nconst statuses: { [key in FileState]: string } = {\n\tcreated: 'text-green-700 bg-green-50 ring-green-600/20',\n\tunchanged: 'text-zinc-600 bg-zinc-50 ring-zinc-500/10',\n\tchanged: 'text-yellow-800 bg-yellow-50 ring-yellow-600/20',\n\tremoved: 'text-rose-700 bg-rose-50 ring-rose-600/20',\n};\n\ntype Action = {\n\taction: (fileName: string) => void;\n\tintent: Intents;\n\ttitle: string;\n};\n\nconst ChangedFile: React.FC<ChangedFileProps> = (props) => {\n\tconst {\n\t\taddFileToIgnore,\n\t\taddFileToOverwrite,\n\t\tfile,\n\t\tremoveFileToIgnore,\n\t\tremoveFileToOverwrite,\n\t\tisMarkedIgnored,\n\t\tisMarkedOverwritten,\n\t} = props;\n\n\tconst [isDiffModalOpen, setIsDiffModalOpen] = useState(false);\n\tconst showDiffModal = useCallback((file: Unpacked<FilesToWriteWithState>) => {\n\t\tsetIsDiffModalOpen(true);\n\t}, []);\n\n\tconst wouldOtherwiseBeWritten =\n\t\t(file.state === 'changed' && (file.overwrite || isMarkedOverwritten)) ||\n\t\tfile.state === 'created' ||\n\t\tfile.state === 'removed';\n\tconst isOverwritable = file.state === 'changed';\n\tconst isIgnorable = file.state === 'created' || file.state === 'removed' || file.state === 'changed';\n\tconst isIgnored = isMarkedIgnored;\n\tconst isOverwritten = isMarkedOverwritten || (file.overwrite && file.exists);\n\tconst needsExplicitAction =\n\t\tisIgnorable && !isIgnored && !isOverwritten && !wouldOtherwiseBeWritten && file.changedFromConfig === true;\n\tconst isDeleted = file.state === 'removed' && !isIgnored;\n\tconst isCreated = file.state === 'created' && !isIgnored;\n\tconst isChanged = file.state === 'changed' && !isIgnored && isOverwritten;\n\n\tconst actions = useMemo(() => {\n\t\tif (file.fileName === 'RatOS.cfg') {\n\t\t\treturn [];\n\t\t}\n\t\tlet skip: null | Action = null;\n\t\tlet ignore: null | Action = null;\n\t\tlet overwrite: null | Action = null;\n\t\tlet write: null | Action = null;\n\t\tlet remove: null | Action = null;\n\t\tif (isOverwritten && !isIgnored) {\n\t\t\tskip = {\n\t\t\t\ttitle: 'Skip',\n\t\t\t\tintent: 'indeterminate',\n\t\t\t\taction: isMarkedOverwritten ? removeFileToOverwrite : addFileToIgnore,\n\t\t\t};\n\t\t} else if (isOverwritable) {\n\t\t\toverwrite = {\n\t\t\t\ttitle: 'Overwrite',\n\t\t\t\tintent: 'warning',\n\t\t\t\taction: isMarkedIgnored ? removeFileToIgnore : addFileToOverwrite,\n\t\t\t};\n\t\t}\n\t\tif (isIgnorable && !isIgnored) {\n\t\t\tignore = {\n\t\t\t\ttitle: 'Ignore',\n\t\t\t\tintent: needsExplicitAction ? 'danger' : 'indeterminate',\n\t\t\t\taction: addFileToIgnore,\n\t\t\t};\n\t\t} else if (isIgnored) {\n\t\t\tif (file.state === 'removed') {\n\t\t\t\tremove = {\n\t\t\t\t\ttitle: 'Delete',\n\t\t\t\t\tintent: 'danger',\n\t\t\t\t\taction: removeFileToIgnore,\n\t\t\t\t};\n\t\t\t} else if (isIgnorable) {\n\t\t\t\twrite = {\n\t\t\t\t\ttitle: 'Write',\n\t\t\t\t\tintent: 'success',\n\t\t\t\t\taction: removeFileToIgnore,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn [skip, ignore, overwrite, write, remove].filter(Boolean);\n\t}, [\n\t\taddFileToIgnore,\n\t\taddFileToOverwrite,\n\t\tfile.fileName,\n\t\tfile.state,\n\t\tisIgnorable,\n\t\tisIgnored,\n\t\tisMarkedIgnored,\n\t\tisMarkedOverwritten,\n\t\tisOverwritable,\n\t\tisOverwritten,\n\t\tneedsExplicitAction,\n\t\tremoveFileToIgnore,\n\t\tremoveFileToOverwrite,\n\t]);\n\n\tconst fileState: Intents = useMemo(() => {\n\t\tif (needsExplicitAction) {\n\t\t\treturn 'danger';\n\t\t}\n\t\tif (file.state === 'changed') {\n\t\t\tif ((isIgnored && file.overwrite) || (isOverwritten && !file.overwrite)) {\n\t\t\t\treturn 'warning';\n\t\t\t} else if (isOverwritten) {\n\t\t\t\treturn 'success';\n\t\t\t} else {\n\t\t\t\treturn 'indeterminate';\n\t\t\t}\n\t\t}\n\t\tif (file.state === 'created') {\n\t\t\tif (isIgnored) {\n\t\t\t\treturn 'danger';\n\t\t\t} else {\n\t\t\t\treturn 'success';\n\t\t\t}\n\t\t}\n\t\tif (file.state === 'removed') {\n\t\t\tif (!isIgnored) {\n\t\t\t\treturn 'warning';\n\t\t\t}\n\t\t}\n\t\treturn 'indeterminate';\n\t}, [file.overwrite, file.state, isIgnored, isOverwritten, needsExplicitAction]);\n\n\tconst [shouldPing] = useChangeEffect([fileState], 4000);\n\n\treturn (\n\t\t<li key={file.fileName} className=\"flex items-center justify-between gap-x-6 py-5\">\n\t\t\t{file?.diff != null && (\n\t\t\t\t<DiffModal\n\t\t\t\t\tdiff={file.diff}\n\t\t\t\t\ttitle={`Changes to ${file.fileName}`}\n\t\t\t\t\tstate={file.state}\n\t\t\t\t\tsetIsOpen={setIsDiffModalOpen}\n\t\t\t\t\tbuttons={actions.map((a) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\ta.action(file.fileName);\n\t\t\t\t\t\t\t\t\tsetIsDiffModalOpen(false);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvariant={a.intent}\n\t\t\t\t\t\t\t\tkey={a.title}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{a.title}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\tisOpen={isDiffModalOpen}\n\t\t\t\t></DiffModal>\n\t\t\t)}\n\t\t\t<div className=\"min-w-0\">\n\t\t\t\t<div className=\"flex items-center gap-x-3\">\n\t\t\t\t\t<StateCircle state={fileState} ping={shouldPing} />\n\t\t\t\t\t<p className=\"text-sm font-medium leading-6 text-zinc-900 dark:text-zinc-100\">{file.fileName}</p>\n\t\t\t\t\t<Badge\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tcolor={\n\t\t\t\t\t\t\tfile.state === 'changed'\n\t\t\t\t\t\t\t\t? !file.changedFromConfig\n\t\t\t\t\t\t\t\t\t? 'sky'\n\t\t\t\t\t\t\t\t\t: 'yellow'\n\t\t\t\t\t\t\t\t: file.state === 'created'\n\t\t\t\t\t\t\t\t\t? 'green'\n\t\t\t\t\t\t\t\t\t: file.state === 'removed'\n\t\t\t\t\t\t\t\t\t\t? 'rose'\n\t\t\t\t\t\t\t\t\t\t: 'gray'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{file.state === 'changed'\n\t\t\t\t\t\t\t? file.changedFromConfig\n\t\t\t\t\t\t\t\t? 'Pending changes'\n\t\t\t\t\t\t\t\t: 'Changed on disk'\n\t\t\t\t\t\t\t: file.state === 'created'\n\t\t\t\t\t\t\t\t? 'New file'\n\t\t\t\t\t\t\t\t: file.state === 'removed'\n\t\t\t\t\t\t\t\t\t? 'Deleted'\n\t\t\t\t\t\t\t\t\t: 'No updates'}\n\t\t\t\t\t</Badge>\n\t\t\t\t\t{file.changedOnDisk && (\n\t\t\t\t\t\t<Badge size=\"sm\" color=\"sky\">\n\t\t\t\t\t\t\tChanged on disk\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mt-1 flex items-center gap-x-2 text-xs leading-5 text-zinc-500 dark:text-zinc-400\">\n\t\t\t\t\t<p className=\"\">\n\t\t\t\t\t\t{file.state === 'changed' &&\n\t\t\t\t\t\t\t(isOverwritten && !isIgnored\n\t\t\t\t\t\t\t\t? 'File will be backed up and overwritten.' +\n\t\t\t\t\t\t\t\t\t(file.fileName != 'RatOS.cfg' ? ` Any changes you've made can be recovered from the backup.` : '')\n\t\t\t\t\t\t\t\t: !needsExplicitAction\n\t\t\t\t\t\t\t\t\t? 'File will be skipped.'\n\t\t\t\t\t\t\t\t\t: 'Please review the changes and make a decision.')}\n\t\t\t\t\t\t{file.state === 'created' && (isIgnored ? 'File will be skipped.' : 'File will be created.')}\n\t\t\t\t\t\t{file.state === 'removed' && (!isIgnored ? 'File will be deleted.' : 'File will remain untouched.')}\n\t\t\t\t\t\t{file.state === 'unchanged' &&\n\t\t\t\t\t\t\t(file.changedOnDisk ? 'File has user modifications.' : 'File remains untouched.')}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"flex flex-none items-center gap-x-4\">\n\t\t\t\t<div className=\"flex flex-none items-center\">\n\t\t\t\t\t{needsExplicitAction ? (\n\t\t\t\t\t\t<Button variant=\"info\" onClick={() => showDiffModal(file)}>\n\t\t\t\t\t\t\tReview changes\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<CheckIcon className=\"h-5 w-5 text-green-500 dark:text-brand-500\" aria-hidden=\"true\" />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<Menu as=\"div\" className=\"relative flex-none\">\n\t\t\t\t\t<Menu.Button className=\"-m-2.5 block p-2.5 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-100\">\n\t\t\t\t\t\t<span className=\"sr-only\">Open options</span>\n\t\t\t\t\t\t<EllipsisVerticalIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\n\t\t\t\t\t</Menu.Button>\n\t\t\t\t\t<Transition\n\t\t\t\t\t\tas={Fragment}\n\t\t\t\t\t\tenter=\"transition ease-out duration-100\"\n\t\t\t\t\t\tenterFrom=\"transform opacity-0 scale-95\"\n\t\t\t\t\t\tenterTo=\"transform opacity-100 scale-100\"\n\t\t\t\t\t\tleave=\"transition ease-in duration-75\"\n\t\t\t\t\t\tleaveFrom=\"transform opacity-100 scale-100\"\n\t\t\t\t\t\tleaveTo=\"transform opacity-0 scale-95\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Menu.Items className=\"absolute right-0 z-10 mt-2 w-32 origin-top-right rounded-md bg-white py-2 shadow-lg ring-1 ring-zinc-900/5 focus:outline-none dark:bg-zinc-900 dark:ring-zinc-100/5\">\n\t\t\t\t\t\t\t{actions.map((action) => (\n\t\t\t\t\t\t\t\t<Menu.Item key={action.title}>\n\t\t\t\t\t\t\t\t\t{({ active, disabled }) => (\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => action.action(file.fileName)}\n\t\t\t\t\t\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t\t\t\t\t\tactive ? 'bg-zinc-50 dark:bg-zinc-800' : '',\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled ? 'cursor-not-allowed opacity-50' : 'cursor-pointer',\n\t\t\t\t\t\t\t\t\t\t\t\t'block px-3 py-1 text-sm leading-6 text-zinc-800 dark:text-zinc-200',\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{action.title}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t<Menu.Item disabled={file.diff == null}>\n\t\t\t\t\t\t\t\t{({ active, disabled }) => (\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tonClick={() => showDiffModal(file)}\n\t\t\t\t\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t\t\t\t\tactive ? 'bg-zinc-50 dark:bg-zinc-800' : '',\n\t\t\t\t\t\t\t\t\t\t\tdisabled ? 'cursor-not-allowed opacity-50' : 'cursor-pointer',\n\t\t\t\t\t\t\t\t\t\t\t'block px-3 py-1 text-sm leading-6 text-zinc-800 dark:text-zinc-200',\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tView diff\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t</Menu.Items>\n\t\t\t\t\t</Transition>\n\t\t\t\t</Menu>\n\t\t\t</div>\n\t\t</li>\n\t);\n};\n\nexport const FileChanges: React.FC<FileChangesProps> = (props) => {\n\tconst { serializedConfig, onFilesToIgnoreChange, onFilesToOverwriteChange } = props;\n\tconst [filesToOverwrite, setFilesToOverwrite] = useState<string[]>([]);\n\n\tconst addFileToOverwrite = useCallback((fileName: string) => {\n\t\tsetFilesToOverwrite((files) => (files.includes(fileName) ? files : [...files, fileName]));\n\t}, []);\n\n\tconst removeFileToOverwrite = useCallback((fileName: string) => {\n\t\tsetFilesToOverwrite((files) => (files.includes(fileName) ? files.filter((file) => file !== fileName) : files));\n\t}, []);\n\n\tconst [filesToIgnore, setFilesToIgnore] = useState<string[]>([]);\n\n\tconst addFileToIgnore = useCallback((fileName: string) => {\n\t\tsetFilesToIgnore((files) => (files.includes(fileName) ? files : [...files, fileName]));\n\t}, []);\n\n\tconst removeFileToIgnore = useCallback((fileName: string) => {\n\t\tsetFilesToIgnore((files) => (files.includes(fileName) ? files.filter((file) => file !== fileName) : files));\n\t}, []);\n\n\tuseEffect(() => {\n\t\tonFilesToOverwriteChange(filesToOverwrite);\n\t}, [filesToOverwrite, onFilesToOverwriteChange]);\n\tuseEffect(() => {\n\t\tonFilesToIgnoreChange(filesToIgnore);\n\t}, [filesToIgnore, onFilesToIgnoreChange]);\n\n\tconst client = trpc.useUtils().client;\n\tconst filesToWrite = useQuery({\n\t\tqueryKey: ['printer.filesToWrite', serializedConfig],\n\t\tqueryFn: async () => {\n\t\t\tconst res = await client.printer.getFilesToWrite.mutate({\n\t\t\t\tconfig: serializedConfig ?? ({} as any),\n\t\t\t});\n\t\t\treturn res;\n\t\t},\n\t\tenabled: serializedConfig != null,\n\t});\n\treturn (\n\t\t<>\n\t\t\t<ul role=\"list\" className=\"divide-y divide-zinc-100 dark:divide-zinc-800\">\n\t\t\t\t{filesToWrite.data?.map((fileToWrite) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ChangedFile\n\t\t\t\t\t\t\tkey={fileToWrite.fileName}\n\t\t\t\t\t\t\tfile={fileToWrite}\n\t\t\t\t\t\t\tisMarkedIgnored={filesToIgnore.includes(fileToWrite.fileName)}\n\t\t\t\t\t\t\tisMarkedOverwritten={filesToOverwrite.includes(fileToWrite.fileName)}\n\t\t\t\t\t\t\taddFileToIgnore={addFileToIgnore}\n\t\t\t\t\t\t\taddFileToOverwrite={addFileToOverwrite}\n\t\t\t\t\t\t\tremoveFileToIgnore={removeFileToIgnore}\n\t\t\t\t\t\t\tremoveFileToOverwrite={removeFileToOverwrite}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t\t<QueryStatus {...filesToWrite} />\n\t\t</>\n\t);\n};\n","import { Dropdown } from '@/components/forms/dropdown';\nimport { Board } from '@/zods/boards';\nimport React, { startTransition, useCallback, useEffect, useMemo, useState } from 'react';\nimport { Drivers } from '@/data/drivers';\nimport { findPreset, Steppers } from '@/data/steppers';\nimport { BadgeProps, badgeBackgroundColorStyle, badgeBorderColorStyle } from '@/components/common/badge';\nimport { TextInput } from '@/components/forms/text-input';\nimport { Banner } from '@/components/common/banner';\nimport { BoltIcon, LightBulbIcon } from '@heroicons/react/24/outline';\nimport { useRecoilValue, useSetRecoilState } from 'recoil';\nimport { FireIcon } from '@heroicons/react/24/solid';\nimport {\n\tBasePrinterRail,\n\tPrinterAxis,\n\tPrinterRailDefinition,\n\tgetSupportedVoltages,\n\tmatchesDefaultRail,\n} from '@/zods/motion';\nimport { deserializeDriver, serializePrinterRail } from '@/utils/serialization';\nimport { PrinterRailState, PrinterRailsState } from '@/recoil/printer';\nimport { useToolheads } from '@/hooks/useToolheadConfiguration';\nimport { trpc } from '@/utils/trpc';\nimport { twMerge } from 'tailwind-merge';\nimport { z } from 'zod';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { Card } from '@/components/common/card';\nimport { CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\n\nconst railArray = z.array(BasePrinterRail);\n\ninterface PrinterRailSettingsProps {\n\tselectedBoard: Board | null;\n\tprinterRail: Zod.infer<typeof BasePrinterRail>;\n\tprinterRailDefault: Zod.infer<typeof PrinterRailDefinition>;\n\tperformanceMode?: boolean | null;\n\terrors?: z.inferFormattedError<typeof BasePrinterRail>;\n\t/**\n\t * This component should always be rendered to ensure the settings are updated when\n\t * switching performance mode, even if it isn't visible.\n\t */\n\tisVisible?: boolean;\n}\n\nexport const PrinterRailSettings: React.FC<PrinterRailSettingsProps> = (props) => {\n\tconst toolheads = useToolheads();\n\tconst toolhead = toolheads.find((th) => th.getExtruderAxis() === props.printerRail.axis);\n\tconst canBeExtruderlessBoard = toolheads.every((th) => th.hasToolboard());\n\tconst usesToolboard = toolhead?.getExtruderAxis() === props.printerRailDefault.axis && toolhead?.hasToolboard();\n\tconst board = usesToolboard ? toolhead.getToolboard() : props.selectedBoard;\n\tconst [performanceMode, setPerformanceMode] = useState(!!props.performanceMode);\n\tconst setPrinterRail = useSetRecoilState(PrinterRailState(props.printerRail.axis));\n\tconst printerRails = useRecoilValue(PrinterRailsState);\n\tconst [motorSlot, setMotorSlot] = useState(\n\t\tprops.printerRail.motorSlot && props.selectedBoard?.motorSlots?.[props.printerRail.motorSlot]\n\t\t\t? props.printerRail.motorSlot\n\t\t\t: undefined,\n\t);\n\tconst integratedDriver = board?.integratedDrivers\n\t\t? board.integratedDrivers[\n\t\t\t\tmotorSlot ?? (props.printerRail.axis.startsWith('extruder') ? PrinterAxis.extruder : props.printerRail.axis)\n\t\t\t] ??\n\t\t\tboard.integratedDrivers[\n\t\t\t\tprops.printerRail.axis.startsWith('extruder') ? PrinterAxis.extruder : props.printerRail.axis\n\t\t\t]\n\t\t: null;\n\tconst [driver, setDriver] = useState(\n\t\tintegratedDriver != null\n\t\t\t? deserializeDriver(integratedDriver) ?? props.printerRail.driver\n\t\t\t: props.printerRail.driver,\n\t);\n\tconst [stepper, setStepper] = useState(props.printerRail.stepper);\n\tconst [homingSpeed, setHomingSpeed] = useState(\n\t\tperformanceMode\n\t\t\t? props.printerRailDefault.performanceMode?.homingSpeed ?? props.printerRailDefault.homingSpeed\n\t\t\t: props.printerRailDefault.homingSpeed,\n\t);\n\tconst errorCount =\n\t\tprops.errors == null\n\t\t\t? 0\n\t\t\t: Object.keys(props.errors).reduce((acc, key) => {\n\t\t\t\t\tconst objKey = key as keyof typeof props.errors;\n\t\t\t\t\tconst keyErrors = props.errors?.[objKey];\n\t\t\t\t\tif (keyErrors == null) {\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t}\n\t\t\t\t\tconst count = Array.isArray(keyErrors) ? keyErrors.length : keyErrors._errors.length;\n\t\t\t\t\treturn acc + count;\n\t\t\t\t}, 0);\n\n\tconst isSlotInUse = useCallback(\n\t\t(slot: string | undefined) => {\n\t\t\tif (slot == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn printerRails.some((pr) => {\n\t\t\t\tconst railToolhead = toolheads.find((th) => th.getExtruderAxis() === pr.axis);\n\t\t\t\tif (pr.axis === props.printerRail.axis) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (railToolhead?.hasToolboard()) {\n\t\t\t\t\t// The rail is an extruder rail and the toolhead has a toolboard, no chance of conflict.\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn pr.motorSlot === slot;\n\t\t\t});\n\t\t},\n\t\t[printerRails, props.printerRail.axis, toolheads],\n\t);\n\n\tconst guessMotorSlot = trpc.mcu.reversePinLookup.useQuery(\n\t\t{\n\t\t\taxis: props.printerRail.axis,\n\t\t\tcanUseExtruderlessConfigs: canBeExtruderlessBoard,\n\t\t\tboardPath: board?.path ?? '',\n\t\t},\n\t\t{ enabled: !!board },\n\t);\n\tuseEffect(() => {\n\t\tif (guessMotorSlot.data && motorSlot == null && board?.motorSlots?.[guessMotorSlot.data] != null) {\n\t\t\tstartTransition(() => {\n\t\t\t\tsetMotorSlot(guessMotorSlot.data ? guessMotorSlot.data : undefined);\n\t\t\t});\n\t\t}\n\t}, [board, guessMotorSlot.data, motorSlot, props.printerRailDefault.axis]);\n\n\tconst supportedVoltages = getSupportedVoltages(board, driver).map((v) => {\n\t\treturn {\n\t\t\t...v,\n\t\t\tbadge:\n\t\t\t\tfindPreset(stepper, driver, v.id, undefined, performanceMode) != null\n\t\t\t\t\t? ({\n\t\t\t\t\t\t\tchildren: 'Tuned Preset',\n\t\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\t} satisfies BadgeProps)\n\t\t\t\t\t: undefined,\n\t\t};\n\t});\n\tconst [voltage, setVoltage] = useState(\n\t\tsupportedVoltages.find((v) => v.id === props.printerRail.voltage) ??\n\t\t\tsupportedVoltages.find(\n\t\t\t\t(v) =>\n\t\t\t\t\tv.id ===\n\t\t\t\t\t(performanceMode && props.printerRailDefault.performanceMode?.voltage\n\t\t\t\t\t\t? props.printerRailDefault.performanceMode.voltage\n\t\t\t\t\t\t: props.printerRailDefault.voltage),\n\t\t\t) ??\n\t\t\tsupportedVoltages[0],\n\t);\n\tconst [current, setCurrent] = useState(props.printerRail.current);\n\tconst defaultPreset = useMemo(\n\t\t() =>\n\t\t\tfindPreset(\n\t\t\t\tprops.printerRailDefault.stepper,\n\t\t\t\tprops.printerRailDefault.driver,\n\t\t\t\tprops.printerRailDefault.voltage,\n\t\t\t\tprops.printerRailDefault.current,\n\t\t\t),\n\t\t[props.printerRailDefault],\n\t);\n\tconst recommendedPreset = useMemo(\n\t\t() => findPreset(stepper, driver, voltage.id, undefined, performanceMode),\n\t\t[stepper, driver, voltage, performanceMode],\n\t);\n\tconst matchingPreset = useMemo(\n\t\t() => findPreset(stepper, driver, voltage.id, current, performanceMode),\n\t\t[stepper, driver, voltage, performanceMode, current],\n\t);\n\n\tconst supportedDrivers = Drivers.filter((d) => {\n\t\treturn d.protocol === 'UART' || board?.stepperSPI != null;\n\t}).map((d) => {\n\t\treturn {\n\t\t\t...d,\n\t\t\tbadge:\n\t\t\t\tfindPreset(stepper, d, voltage.id, undefined, performanceMode) != null\n\t\t\t\t\t? ({\n\t\t\t\t\t\t\tchildren: 'Tuned Preset',\n\t\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\t} satisfies BadgeProps)\n\t\t\t\t\t: undefined,\n\t\t};\n\t});\n\tconst steppers = Steppers.map((s) => {\n\t\treturn {\n\t\t\t...s,\n\t\t\tbadge:\n\t\t\t\tfindPreset(s, driver, voltage.id, undefined, performanceMode) != null\n\t\t\t\t\t? ({\n\t\t\t\t\t\t\tchildren: 'Tuned Preset',\n\t\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\t} satisfies BadgeProps)\n\t\t\t\t\t: undefined,\n\t\t};\n\t});\n\n\tuseEffect(() => {\n\t\t// If current rail configuration matches the default rail configuration, adapt current and voltage\n\t\t// to match the performance mode when performance mode changes.\n\t\tif (matchesDefaultRail(props.printerRail, props.printerRailDefault, !props.performanceMode)) {\n\t\t\tif (props.performanceMode && props.printerRailDefault.performanceMode) {\n\t\t\t\tsetHomingSpeed(props.printerRailDefault.performanceMode.homingSpeed ?? props.printerRail.homingSpeed);\n\t\t\t\tif (props.printerRailDefault.performanceMode.voltage != null) {\n\t\t\t\t\tsetVoltage(\n\t\t\t\t\t\tsupportedVoltages.find(\n\t\t\t\t\t\t\t(sv) => sv.id === (props.printerRailDefault.performanceMode?.voltage ?? props.printerRailDefault.voltage),\n\t\t\t\t\t\t) ?? supportedVoltages[0],\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (props.printerRailDefault.performanceMode.current != null) {\n\t\t\t\t\tsetCurrent(props.printerRailDefault.performanceMode.current);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetHomingSpeed(props.printerRailDefault.homingSpeed);\n\t\t\t\tsetVoltage(supportedVoltages.find((sv) => sv.id === props.printerRailDefault.voltage) ?? supportedVoltages[0]);\n\t\t\t\tsetCurrent(props.printerRailDefault.current);\n\t\t\t}\n\t\t}\n\t\tsetPerformanceMode(!!props.performanceMode);\n\t\t// We don't want to react to anything other than performance mode changes.\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [props.performanceMode]);\n\n\tuseEffect(() => {\n\t\tconst currentVoltage = supportedVoltages.find((sv) => sv.id === voltage.id);\n\t\tif (!currentVoltage) {\n\t\t\tsetVoltage(\n\t\t\t\trecommendedPreset\n\t\t\t\t\t? supportedVoltages.find((sv) => sv.id === recommendedPreset.voltage) ?? supportedVoltages[0]\n\t\t\t\t\t: supportedVoltages[0],\n\t\t\t);\n\t\t\tif (recommendedPreset) {\n\t\t\t\tsetCurrent(recommendedPreset.run_current);\n\t\t\t}\n\t\t}\n\t}, [supportedVoltages, voltage, recommendedPreset]);\n\n\tuseEffect(() => {\n\t\tconst newState = {\n\t\t\taxis: props.printerRail.axis,\n\t\t\taxisDescription: props.printerRail.axisDescription,\n\t\t\trotationDistance: props.printerRail.rotationDistance,\n\t\t\thomingSpeed: homingSpeed,\n\t\t\tmotorSlot: motorSlot,\n\t\t\tdriver,\n\t\t\tvoltage: voltage.id,\n\t\t\tstepper,\n\t\t\tcurrent,\n\t\t};\n\t\tconst serializedNew = serializePrinterRail(newState);\n\t\tconst serializedOld = serializePrinterRail(props.printerRail);\n\t\tconst isDirty = Object.keys(serializedNew).some((key) => {\n\t\t\treturn serializedNew[key as keyof typeof serializedNew] !== serializedOld[key as keyof typeof serializedNew];\n\t\t});\n\t\tif (isDirty) {\n\t\t\tstartTransition(() => {\n\t\t\t\tsetPrinterRail(serializedNew);\n\t\t\t});\n\t\t}\n\t}, [current, driver, props.printerRail, homingSpeed, setPrinterRail, stepper, voltage.id, motorSlot]);\n\n\tconst isRecommendedPresetCompatible = recommendedPreset && recommendedPreset.run_current === current;\n\tconst railName =\n\t\tprops.printerRail.axis === 'extruder'\n\t\t\t? 'Extruder T0'\n\t\t\t: props.printerRail.axis === PrinterAxis.extruder1\n\t\t\t\t? 'Extruder T1'\n\t\t\t\t: 'Stepper ' + props.printerRail.axis.toLocaleUpperCase();\n\tconst motorSlotOptions =\n\t\tboard?.motorSlots != null && Object.keys(board.motorSlots).length > 0\n\t\t\t? Object.keys(board.motorSlots)\n\t\t\t\t\t.map((ms) => {\n\t\t\t\t\t\tif (board.motorSlots?.[ms].title == null) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst hasDiagPin = board.motorSlots?.[ms].diag_pin != null;\n\t\t\t\t\t\tconst hasEndstopPin = board.motorSlots?.[ms].endstop_pin != null;\n\t\t\t\t\t\tconst isInUse = isSlotInUse(ms);\n\t\t\t\t\t\tconst disabled =\n\t\t\t\t\t\t\t(props.printerRailDefault.axis.startsWith('x') || props.printerRailDefault.axis.startsWith('y')) &&\n\t\t\t\t\t\t\t!hasDiagPin;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: ms,\n\t\t\t\t\t\t\ttitle: board.motorSlots?.[ms].title,\n\t\t\t\t\t\t\tdisabled: disabled,\n\t\t\t\t\t\t\tbadge: [\n\t\t\t\t\t\t\t\t!hasDiagPin\n\t\t\t\t\t\t\t\t\t? ({ children: 'No diag pin', color: disabled ? 'red' : 'gray' } satisfies BadgeProps)\n\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t\t!hasEndstopPin ? ({ children: 'No endstop pin', color: 'gray' } satisfies BadgeProps) : undefined,\n\t\t\t\t\t\t\t\tisInUse === true ? ({ children: 'In use', color: 'orange' } satisfies BadgeProps) : undefined,\n\t\t\t\t\t\t\t].filter(Boolean),\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t\t.filter(Boolean)\n\t\t\t: null;\n\tconst motorSlotBadge = useMemo(() => {\n\t\tif (motorSlot == null || board?.motorSlots?.[motorSlot].title == null) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst hasDiagPin = board.motorSlots?.[motorSlot].diag_pin != null;\n\t\tconst disabled =\n\t\t\t(props.printerRailDefault.axis.startsWith('x') || props.printerRailDefault.axis.startsWith('y')) && !hasDiagPin;\n\t\treturn !hasDiagPin && disabled ? ({ children: 'No diag pin', color: 'red' } satisfies BadgeProps) : undefined;\n\t}, [board, motorSlot, props.printerRailDefault.axis]);\n\treturn (\n\t\t<AnimatePresence>\n\t\t\t{props.isVisible && (\n\t\t\t\t<Card\n\t\t\t\t\tkey={props.printerRail.axis}\n\t\t\t\t\texit={{ opacity: 0, scale: 0.9, y: -40 }}\n\t\t\t\t\tinitial={{ opacity: 0, scale: 0.9, y: 40 }}\n\t\t\t\t\tanimate={{ opacity: 1, scale: 1, y: 0 }}\n\t\t\t\t\tclassName={twMerge(\n\t\t\t\t\t\t'break-inside-avoid-column',\n\t\t\t\t\t\terrorCount > 0 && badgeBorderColorStyle({ color: 'red' }),\n\t\t\t\t\t\terrorCount > 0 && badgeBackgroundColorStyle({ color: 'red' }),\n\t\t\t\t\t\terrorCount > 0 && 'ring-1',\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<CardHeader className=\"\">\n\t\t\t\t\t\t<CardTitle className={twMerge(errorCount > 0 && 'text-red-900/80 dark:text-red-100')}>{railName}</CardTitle>\n\t\t\t\t\t\t<CardDescription className={twMerge(errorCount > 0 && 'text-red-800/80 dark:text-red-100/60')}>\n\t\t\t\t\t\t\t{props.printerRail.axisDescription}\n\t\t\t\t\t\t</CardDescription>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent className=\"@2xs:grid-cols-2 grid grid-cols-1 gap-4\">\n\t\t\t\t\t\t{motorSlotOptions && (\n\t\t\t\t\t\t\t<div className=\"col-span-full\">\n\t\t\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t\t\tlabel=\"Motor Slot\"\n\t\t\t\t\t\t\t\t\toptions={motorSlotOptions}\n\t\t\t\t\t\t\t\t\terror={props.errors?.motorSlot?._errors.join('\\n')}\n\t\t\t\t\t\t\t\t\tonSelect={(ms) => {\n\t\t\t\t\t\t\t\t\t\tsetMotorSlot(ms.id);\n\t\t\t\t\t\t\t\t\t\tif (board?.integratedDrivers?.[ms.id] != null) {\n\t\t\t\t\t\t\t\t\t\t\tsetDriver(deserializeDriver(board.integratedDrivers[ms.id]) ?? driver);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tvalue={motorSlot ? motorSlotOptions.find((ms) => ms.id === motorSlot) : undefined}\n\t\t\t\t\t\t\t\t\tbadge={motorSlotBadge}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div className=\"col-span-full\">\n\t\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t\tlabel=\"Driver\"\n\t\t\t\t\t\t\t\toptions={supportedDrivers}\n\t\t\t\t\t\t\t\tonSelect={setDriver}\n\t\t\t\t\t\t\t\tvalue={driver}\n\t\t\t\t\t\t\t\tdisabled={integratedDriver != null}\n\t\t\t\t\t\t\t\tbadge={[\n\t\t\t\t\t\t\t\t\tintegratedDriver != null\n\t\t\t\t\t\t\t\t\t\t? ({ children: 'Integrated', color: 'sky' } satisfies BadgeProps)\n\t\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t\t\tusesToolboard ? ({ children: 'Toolboard', color: 'yellow' } satisfies BadgeProps) : undefined,\n\t\t\t\t\t\t\t\t].filter(Boolean)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-span-full\">\n\t\t\t\t\t\t\t<Dropdown label=\"Stepper\" options={steppers} onSelect={setStepper} value={stepper} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-span-1\">\n\t\t\t\t\t\t\t<Dropdown label=\"Voltage\" options={supportedVoltages} onSelect={setVoltage} value={voltage} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-span-1\">\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tlabel=\"Current\"\n\t\t\t\t\t\t\t\tvalue={current}\n\t\t\t\t\t\t\t\tonChange={setCurrent}\n\t\t\t\t\t\t\t\tinputMode=\"decimal\"\n\t\t\t\t\t\t\t\tstep=\"any\"\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tmax={driver.maxCurrent}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{stepper.maxPeakCurrent / 1.41 < current && (\n\t\t\t\t\t\t\t<Banner Icon={FireIcon} color=\"yellow\" title=\"Stepper overcurrent!\" className=\"col-span-full\">\n\t\t\t\t\t\t\t\tYour stepper motor is rated for {Math.floor((stepper.maxPeakCurrent * 100) / 1.41) / 100}A RMS, but you\n\t\t\t\t\t\t\t\tare using {current}A.\n\t\t\t\t\t\t\t</Banner>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{matchingPreset != null && (\n\t\t\t\t\t\t\t<Banner Icon={LightBulbIcon} color=\"brand\" title=\"Driver tuning applied!\" className=\"col-span-full\">\n\t\t\t\t\t\t\t\tRatOS preset applied automatically.\n\t\t\t\t\t\t\t</Banner>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{matchingPreset?.run_current !== defaultPreset?.run_current &&\n\t\t\t\t\t\t\trecommendedPreset &&\n\t\t\t\t\t\t\t!isRecommendedPresetCompatible && (\n\t\t\t\t\t\t\t\t<Banner\n\t\t\t\t\t\t\t\t\tIcon={BoltIcon}\n\t\t\t\t\t\t\t\t\tcolor=\"sky\"\n\t\t\t\t\t\t\t\t\ttitle=\"Recommended tuning preset available at different current\"\n\t\t\t\t\t\t\t\t\tclassName=\"col-span-full\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tRatOS has a recommended preset for your current settings at {recommendedPreset.run_current}A. You can{' '}\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName=\"cursor-pointer font-bold underline hover:no-underline\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => setCurrent(recommendedPreset.run_current)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tchange the current to {recommendedPreset.run_current}A\n\t\t\t\t\t\t\t\t\t</span>{' '}\n\t\t\t\t\t\t\t\t\tto apply the preset automatically.\n\t\t\t\t\t\t\t\t</Banner>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\t\t\t)}\n\t\t</AnimatePresence>\n\t);\n};\n","import { useCallback, useEffect, useRef, useState } from 'react';\n\nexport const useChangeEffect = (deps: unknown[], clearAfter?: number, resetTimeoutOnChange: boolean = false) => {\n\tconst [hasChanged, setHasChanged] = useState(0);\n\tconst lastDeps = useRef([...deps]);\n\tuseEffect(() => {\n\t\tlet changed = false;\n\t\tlastDeps.current.forEach((dep, i) => {\n\t\t\tif (dep !== deps[i]) {\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\t\tif (changed) {\n\t\t\tsetHasChanged((hasChanged) => (resetTimeoutOnChange ? hasChanged + 1 : 1));\n\t\t}\n\t\tlastDeps.current = [...deps];\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [...deps]);\n\n\tconst clear = useCallback(() => {\n\t\tsetHasChanged(0);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (clearAfter != null && hasChanged > 0) {\n\t\t\tconst timeout = setTimeout(() => {\n\t\t\t\tsetHasChanged(0);\n\t\t\t}, clearAfter);\n\t\t\treturn () => {\n\t\t\t\tclearTimeout(timeout);\n\t\t\t};\n\t\t}\n\t\treturn;\n\t}, [clearAfter, hasChanged]);\n\n\treturn [hasChanged > 0, clear] as const;\n};\n\nexport const useDelayedChangeEffect = (\n\tdeps: unknown[],\n\tdelay: number,\n\tclearAfter?: number,\n\tresetTimeoutOnChange: boolean = false,\n) => {\n\tconst [changeCount, setChangeCount] = useState(0);\n\tconst lastDeps = useRef([...deps]);\n\tconst timeout = useRef<number | null>(null);\n\tuseEffect(() => {\n\t\tif (typeof window === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tlet changed = false;\n\t\tlastDeps.current.forEach((dep, i) => {\n\t\t\tif (dep !== deps[i]) {\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\t\tif (changed) {\n\t\t\tconst trigger = () => setChangeCount((hasChanged) => (resetTimeoutOnChange ? hasChanged + 1 : 1));\n\t\t\ttimeout.current = window.setTimeout(() => {\n\t\t\t\ttrigger();\n\t\t\t\ttimeout.current = null;\n\t\t\t}, delay);\n\t\t}\n\t\tlastDeps.current = [...deps];\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [...deps]);\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (timeout.current) {\n\t\t\t\tclearTimeout(timeout.current);\n\t\t\t}\n\t\t};\n\t}, []);\n\tconst [hasChanged, clear] = useChangeEffect([changeCount], clearAfter, resetTimeoutOnChange);\n\treturn [hasChanged, clear] as const;\n};\n","import { useCallback } from 'react';\nimport { useMoonraker, useNamespacedItemMutation, useNamespacedItemQuery } from '@/moonraker/hooks';\nimport { UseMutationOptions, UseQueryOptions } from '@tanstack/react-query';\nimport { MoonrakerDBItemResponse, MoonrakerDBValue, MoonrakerNamespaceKeys } from '@/moonraker/types';\n\nexport const useMainsailQuery = <\n\tK extends MoonrakerNamespaceKeys<'mainsail'>,\n\tV extends MoonrakerDBValue<'mainsail', K>,\n>(\n\tkey: K,\n\toptions?: Omit<UseQueryOptions<V, unknown, V, 'mainsail'[]>, 'queryKey' | 'queryFn'>,\n) => useNamespacedItemQuery('mainsail', key, options);\n\nexport const useMainsailMutation = <\n\tK extends MoonrakerNamespaceKeys<'mainsail'>,\n\tV extends MoonrakerDBValue<'mainsail', K>,\n>(\n\tkey: K,\n\toptions?: Omit<UseMutationOptions<MoonrakerDBItemResponse<V>, unknown, V>, 'mutationKey' | 'mutationFn'>,\n) => useNamespacedItemMutation('mainsail', key, options);\n\nexport function useMainsail() {\n\tconst moonraker = useMoonraker();\n\tconst getMainsailItem = useCallback(\n\t\tasync <K extends MoonrakerNamespaceKeys<'mainsail'>, V extends MoonrakerDBValue<'mainsail', K>>(\n\t\t\tkey: MoonrakerNamespaceKeys<'mainsail'>,\n\t\t): Promise<V> => {\n\t\t\treturn (await moonraker.getItem('mainsail', key)) as V;\n\t\t},\n\t\t[moonraker],\n\t);\n\tconst saveMainsailItem = useCallback(\n\t\tasync <K extends MoonrakerNamespaceKeys<'mainsail'>, V extends MoonrakerDBValue<'mainsail', K>>(\n\t\t\tkey: K,\n\t\t\tvalue: V,\n\t\t): Promise<MoonrakerDBItemResponse<V>> => {\n\t\t\treturn await moonraker.saveItem('mainsail', key, value as V);\n\t\t},\n\t\t[moonraker],\n\t);\n\n\treturn {\n\t\tgetItem: getMainsailItem,\n\t\tsaveItem: saveMainsailItem,\n\t};\n}\n"],"names":["ErrorMessage","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","Banner","color","Icon","XCircleIcon","title","props","className","twMerge","children","FullLoadScreen","div","twJoin","Spinner","NoSSR","isClient","useIsClient","DynamicImport","fallback","lazy","Promise","resolve","default","Fragment","useKlippyStateHandler","query","lastMessage","useMoonraker","passThroughUpdateMethods","klippyReadyState","setKlippyReadyState","useState","queryKlippyState","useCallback","serverInfo","klippy_state","klippyState","setTimeout","e","useEffect","method","klipperStateToText","KlippyStateBadge","jsx_runtime","jsxs","Badge","svg","badgeTextColorStyle","fill","viewBox","circle","cx","cy","r","moonrakerStatusToText","moonrakerState","MoonrakerStateBadge","status","PrinterHeader","stateColorClass","h1","breadcrumb","map","bc","index","span","length","badges","header","h3","p","description","PrinterStateHeader","printerStateQuery","printerName","useMainsailQuery","initialData","savedPrinter","useRecoilValue","LoadablePrinterState","useMoonrakerQuery","usePrinterObjectQuery","printerState","data","print_stats","state","breadCrumbs","useMemo","crumbs","isLoading","push","name","undefined","PrinterStateLoadingHeader","PrinterConnectionHeader","QueryStatus","content","isError","error","message","AnimatedContainer","TwoColumns","strokeWidth","stroke","xmlns","path","strokeLinecap","strokeLinejoin","d","SingleColumn","proccessTokens","hunks","options","highlight","enhancers","markEdits","type","tokenize","ex","DiffModal","isOpen","setIsOpen","viewType","setViewType","close","files","parseDiff","diff","diffType","Transition","Root","show","as","appear","Dialog","onClose","Child","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Overlay","aria-hidden","Title","button","onClick","XMarkIcon","param","i","Diff","tokens","buttons","Button","variant","StateCircleVariants","cva","variants","success","info","warning","danger","indeterminate","plain","primary","StateCircle","ping","pingClassName","ChangedFile","addFileToIgnore","addFileToOverwrite","file","removeFileToIgnore","removeFileToOverwrite","isMarkedIgnored","isMarkedOverwritten","isDiffModalOpen","setIsDiffModalOpen","showDiffModal","wouldOtherwiseBeWritten","overwrite","isOverwritable","isIgnorable","isOverwritten","exists","needsExplicitAction","changedFromConfig","actions","fileName","skip","ignore","write","remove","intent","action","filter","Boolean","fileState","shouldPing","useChangeEffect","li","concat","a","size","changedOnDisk","isIgnored","CheckIcon","Menu","EllipsisVerticalIcon","Items","Item","active","disabled","FileChanges","filesToWrite","serializedConfig","onFilesToIgnoreChange","onFilesToOverwriteChange","filesToOverwrite","setFilesToOverwrite","includes","filesToIgnore","setFilesToIgnore","client","trpc","useUtils","useQuery","queryKey","queryFn","res","printer","getFilesToWrite","mutate","config","enabled","ul","role","fileToWrite","z","array","BasePrinterRail","PrinterRailSettings","board","deserializeDriver","supportedVoltages","toolheads","useToolheads","toolhead","find","th","getExtruderAxis","printerRail","axis","canBeExtruderlessBoard","every","hasToolboard","usesToolboard","printerRailDefault","getToolboard","selectedBoard","performanceMode","setPerformanceMode","setPrinterRail","useSetRecoilState","PrinterRailState","printerRails","PrinterRailsState","motorSlot","setMotorSlot","motorSlots","integratedDriver","integratedDrivers","startsWith","PrinterAxis","extruder","driver","setDriver","stepper","setStepper","homingSpeed","setHomingSpeed","errorCount","errors","Object","keys","reduce","acc","key","keyErrors","count","Array","isArray","_errors","isSlotInUse","slot","some","railToolhead","pr","guessMotorSlot","mcu","reversePinLookup","canUseExtruderlessConfigs","boardPath","startTransition","getSupportedVoltages","v","badge","findPreset","id","voltage","setVoltage","current","setCurrent","defaultPreset","recommendedPreset","matchingPreset","supportedDrivers","Drivers","protocol","stepperSPI","steppers","Steppers","s","matchesDefaultRail","sv","currentVoltage","run_current","newState","axisDescription","rotationDistance","serializedNew","serializePrinterRail","serializedOld","isDirty","isRecommendedPresetCompatible","railName","extruder1","toLocaleUpperCase","motorSlotOptions","ms","hasDiagPin","diag_pin","hasEndstopPin","endstop_pin","isInUse","motorSlotBadge","AnimatePresence","isVisible","Card","exit","opacity","scale","y","initial","animate","badgeBorderColorStyle","badgeBackgroundColorStyle","CardHeader","CardTitle","CardDescription","CardContent","Dropdown","label","join","onSelect","value","TextInput","onChange","inputMode","step","min","max","maxCurrent","maxPeakCurrent","FireIcon","Math","floor","LightBulbIcon","BoltIcon","deps","clearAfter","resetTimeoutOnChange","hasChanged","setHasChanged","lastDeps","useRef","changed","forEach","dep","clear","timeout","clearTimeout","useDelayedChangeEffect","delay","changeCount","setChangeCount","trigger","window","useNamespacedItemQuery"],"sourceRoot":""}