"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2240],{68559:function(e,r,t){t.d(r,{N:function(){return useDebounce}});var o=t(49738);let useDebounce=function(e,r){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,o.useRef)(),l=(0,o.useRef)([]);return(0,o.useEffect)(()=>()=>{n.current&&clearTimeout(n.current)},[]),(0,o.useCallback)(function(){for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];if(l.current=i,n.current){if(!t)return;clearTimeout(n.current),n.current=void 0}n.current=setTimeout(()=>{e(...l.current),n.current=void 0},r)},[r,t,e])}},17471:function(e,r,t){t.d(r,{i:function(){return AnimatedContainer}});var o=t(26248),n=t(68559),l=t(99699),i=t(21629),a=t(49738),d=t(50962);let AnimatedContainer=e=>{let[r,t]=(0,a.useState)(0),s=(0,a.useRef)(r);s.current=r;let[u,c]=(0,a.useState)(!1),h=(0,a.useRef)(u);h.current=u;let p=(0,a.useRef)(null);(0,l.Z)(p,e=>{e.contentRect.height!==s.current&&t(e.contentRect.height)});let f=(0,n.N)((0,a.useCallback)(()=>{c(!0)},[]),200,!0),m=(0,n.N)((0,a.useCallback)(()=>{c(!1)},[]),200,!0);return(0,o.jsx)(i.E.div,{className:(0,d.d)(e.containerClassName,u?"overflow-visible":"overflow-hidden"),style:{height:r},onAnimationComplete:f,onAnimationStart:m,animate:{height:r},children:(0,o.jsx)("div",{ref:p,className:e.className,children:e.children})})}},26418:function(e,r,t){t.d(r,{j:function(){return Banner}});var o=t(26248);t(49738);var n=t(73323),l=t(44838),i=t(50962),a=t(73918);let d=(0,a.j)("rounded-md p-4 border",{variants:{color:{red:[(0,n.xU)({color:"red"}),(0,n.iA)({color:"red"}),(0,n._1)({color:"red"})],yellow:[(0,n.xU)({color:"yellow"}),(0,n.iA)({color:"yellow"}),(0,n._1)({color:"yellow"})],orange:[(0,n.xU)({color:"orange"}),(0,n.iA)({color:"orange"}),(0,n._1)({color:"orange"})],green:[(0,n.xU)({color:"green"}),(0,n.iA)({color:"green"}),(0,n._1)({color:"green"})],lime:[(0,n.xU)({color:"lime"}),(0,n.iA)({color:"lime"}),(0,n._1)({color:"lime"})],blue:[(0,n.xU)({color:"blue"}),(0,n.iA)({color:"blue"}),(0,n._1)({color:"blue"})],sky:[(0,n.xU)({color:"sky"}),(0,n.iA)({color:"sky"}),(0,n._1)({color:"sky"})],indigo:[(0,n.xU)({color:"indigo"}),(0,n.iA)({color:"indigo"}),(0,n._1)({color:"indigo"})],purple:[(0,n.xU)({color:"purple"}),(0,n.iA)({color:"purple"}),(0,n._1)({color:"purple"})],pink:[(0,n.xU)({color:"pink"}),(0,n.iA)({color:"pink"}),(0,n._1)({color:"pink"})],brand:[(0,n.xU)({color:"brand"}),(0,n.iA)({color:"brand"}),(0,n._1)({color:"brand"})],gray:[(0,n.xU)({color:"gray"}),(0,n.iA)({color:"gray"}),(0,n._1)({color:"gray"})]}},defaultVariants:{color:"gray"}}),Banner=e=>{let{Icon:r,className:t,title:n}=e;return(0,o.jsx)("div",{className:(0,l.m)(d({color:e.color}),e.className),children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)(r,{className:(0,i.d)("h-5 w-5"),"aria-hidden":"true"})}),(0,o.jsxs)("div",{className:"ml-3 flex-1",children:[(0,o.jsx)("h3",{className:(0,i.d)("text-sm font-bold"),children:e.title}),(0,o.jsx)("div",{className:"mt-2 text-sm",children:(0,o.jsx)("div",{children:e.children})})]})]})})}},23709:function(e,r,t){t.d(r,{LV:function(){return DropdownWithPrinterQuery},Lt:function(){return Dropdown}});var o=t(26248),n=t(49738),l=t(53614),i=t(50962),a=t(44838),d=t(73323),s=t(64918),u=t(81503),c=t(80434),h=t(88116),p=t(27432),f=t(90077),m=t(66908),x=t(17635),g=t(99771),v=t(40514),b=t(73727),y=t(17471);let OnDropdownOpened=e=>{let{open:r,onShown:t}=e;return(0,n.useEffect)(()=>{r&&t()},[r,t]),null},useDropdownPrinterQueryState=(e,r,t,o)=>{var l;let[i,a]=(0,n.useState)(!1),d=(0,c.useSerializedPrinterConfiguration)(),u=null!=r?r:t?{}:void 0;u&&null!=t&&(u[t]=d);let h=s.SX.printer[e].useQuery(u,{enabled:i||o,keepPreviousData:!0});return{options:null!==(l=h.data)&&void 0!==l?l:[],onShown:()=>a(!0),isFetching:h.isFetching}},DropdownWithPrinterQuery=e=>{let{query:r,vars:t,serializedPrinterConfiguration:l,...i}=e,{value:a}=i,d=(null==a?void 0:a.badge)!=null,s=useDropdownPrinterQueryState(r,t,l,d),u=s.options.find(e=>e.id===(null==a?void 0:a.id)),c=null!=u?u:a;return(0,o.jsx)(n.Suspense,{children:(0,o.jsx)(Dropdown,{...i,...s,value:c})})},badgeDescription=e=>e?Array.isArray(e)?e.map(e=>e.children).join(", "):e.children:"",Dropdown=e=>{var r;let{onSelect:t,value:s}=e,[c,k]=n.useState(!1),j=(0,n.useCallback)(r=>{let o=e.options.find(e=>e.id===r);o&&(null==t||t(o))},[t,e.options]),C=!1==e.sort?e.options:e.options.slice(0).sort((e,r)=>e.title.localeCompare(r.title)),N=(0,i.d)(e.error&&"ring-red-500 ring-2 text-red-900 placeholder-red-300 dark:text-red-400 dark:placeholder-red-700"),[w]=(0,h.u)(),S=(Array.isArray(null==s?void 0:s.badge)?s.badge:(null==s?void 0:s.badge)?[s.badge]:[]).concat(Array.isArray(e.badge)?e.badge:e.badge?[e.badge]:[]),P=e.help?(0,o.jsx)("div",{className:"mb-2 whitespace-pre-line text-sm text-sky-200/50 opacity-70",id:"email-description",children:e.help}):null;return(0,o.jsxs)(p.J2,{open:c,onOpenChange:k,children:[(0,o.jsx)(x._,{className:(0,a.m)("block text-sm font-semibold leading-6 text-zinc-700 dark:text-zinc-300",e.error&&"text-red-600 dark:text-red-400"),children:e.label}),P,e.onShown&&(0,o.jsx)(OnDropdownOpened,{open:c,onShown:e.onShown}),(0,o.jsx)(p.xo,{asChild:!0,children:(0,o.jsxs)(m.z,{variant:"outline",role:"combobox","aria-expanded":c,className:(0,i.d)("w-full justify-between bg-zinc-800 px-2",N),children:[(0,o.jsxs)("span",{className:"flex flex-1 items-center justify-start gap-2 text-left",children:[(0,o.jsx)("span",{className:"min-w-0 flex-1 items-center truncate",children:null!==(r=null==s?void 0:s.title)&&void 0!==r?r:"Pick from the list..."}),(0,o.jsx)("span",{className:(0,i.d)("flex items-center space-x-1",!e.disabled&&"-mr-2"),children:S&&S.map((r,t)=>{var o;return(0,n.createElement)(d.Ct,{...r,key:t,color:null!==(o=r.color)&&void 0!==o?o:e.disabled?"plain":r.color,size:"sm"})})})]}),!e.disabled&&(0,o.jsx)(f.jnn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,o.jsx)("div",{ref:w,children:e.error&&(0,o.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:e.error})}),(0,o.jsxs)(p.yk,{className:"min-w-[var(--radix-popover-trigger-width)] p-0",children:[(0,o.jsxs)(g.mY,{children:[(0,o.jsx)(g.sZ,{placeholder:"Search for option...",className:"h-9"}),(0,o.jsxs)(g.e8,{children:[(0,o.jsx)(g.rb,{children:"No option found."}),(0,o.jsx)(g.fu,{children:C.map(e=>(0,o.jsxs)(g.di,{value:e.title+badgeDescription(e.badge)+e.id,onSelect:()=>{j(e.id),k(!1)},className:(0,i.d)("gap-2",(null==s?void 0:s.id)===e.id&&"text-brand-400 aria-selected:text-brand-400 hover:text-brand-400"),children:[e.badge&&(Array.isArray(e.badge)?e.badge.map((e,r)=>(0,n.createElement)(d.Ct,{...e,color:e.color,size:"sm",key:r})):(0,o.jsx)(d.Ct,{...e.badge,color:e.badge.color,size:"sm"})),e.title,(0,o.jsx)(l,{className:(0,v.cn)("ml-auto h-4 w-4 text-brand-400",(null==s?void 0:s.id)===e.id?"opacity-100":"opacity-0")})]},e.id))})]})]}),(0,o.jsx)(y.i,{children:e.isFetching&&(0,o.jsx)(b.U5,{className:"flex justify-center px-3 py-2 text-sm text-zinc-400 dark:text-zinc-500",children:(0,o.jsx)(u.$,{})})})]})]})}},48542:function(e,r,t){t.d(r,{o:function(){return TextInput}});var o=t(26248),n=t(96148),l=t(6181),i=t(33964),a=t(43920),d=t(32836),s=t.n(d),u=t(49738),c=t(50962),h=t(63440);let TextInput=e=>{let r=(0,u.useRef)(s()(e)),{onChange:t}=e,[d,p]=(0,u.useState)(!1);(0,c.d)("h-5 w-5",(e.error,"text-red-500"));let f=e.error?(0,o.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:(0,o.jsx)(i,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})}):null,m=(0,c.d)(e.error&&"border-red-300 text-red-900 placeholder-red-300 ring-red-500 dark:ring-red-500 dark:text-red-400 dark:placeholder-red-700"),x=e.error?(0,o.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",id:r.current+"-error",children:e.error}):null,g=e.help?(0,o.jsx)("p",{className:"mt-2 text-sm text-zinc-500",id:"email-description",children:e.help}):null,v=(0,u.useCallback)(r=>{null==t||t("number"===e.type?parseFloat(r.currentTarget.value):r.currentTarget.value)},[t,e.type]),b=(0,u.useCallback)(()=>{p(e=>!e)},[]),y="password"===e.type?(0,o.jsx)("div",{onClick:b,className:"absolute inset-y-0 ".concat(null!=f?"right-6":"right-0"," flex cursor-pointer items-center pr-3"),children:d?(0,o.jsx)(n,{className:"h-5 w-5 text-zinc-400"}):(0,o.jsx)(l,{className:"h-5 w-5 text-zinc-400"})}):null;return(0,o.jsxs)("div",{children:[(0,o.jsx)(a._,{className:"block text-sm font-semibold leading-6 text-zinc-700 dark:text-zinc-300",children:e.label}),(0,o.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,o.jsx)(h.I,{...e,type:d?"text":e.type,className:m,placeholder:e.placeholder,defaultValue:e.defaultValue,value:e.value,onChange:v,variant:e.error?"error":"default","aria-invalid":!!e.error,"aria-describedby":e.error?r.current+"-error":void 0}),f,y]}),null!=x?x:g]})}},17635:function(e,r,t){t.d(r,{_:function(){return s}});var o=t(26248),n=t(49738),l=t(43920),i=t(73918),a=t(40514);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),s=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,o.jsx)(l.f,{ref:r,className:(0,a.cn)(d(),t),...n})});(0,a.h)(s,l.f.displayName)},24740:function(e,r,t){t.d(r,{Jt:function(){return n},uo:function(){return xEndstopOptions}});var o=t(78185);let xEndstopOptions=(e,r)=>{let t=[];if((null==r?void 0:r.toolboard)!=null&&t.push({id:"endstop-toolboard",title:"Physical Endstop",badge:[{color:"sky",children:"".concat(r.toolboard.name," T").concat(r.toolNumber)}]}),(null==r?void 0:r.axis)===o.po.x){var n,l,i,a;t.push({id:"endstop",title:"Physical Endstop",badge:[{color:"purple",children:null!==(i=null==e?void 0:null===(n=e.controlboard)||void 0===n?void 0:n.name)&&void 0!==i?i:"Control Board"}]}),t.push({id:"sensorless",title:"Sensorless Homing",badge:[{color:"purple",children:null!==(a=null==e?void 0:null===(l=e.controlboard)||void 0===l?void 0:l.name)&&void 0!==a?a:"Control Board"}]})}return t},n={id:"endstop",title:"Physical Endstop",badge:[{color:"purple",children:"Control Board"}]}},80434:function(e,r,t){t.r(r),t.d(r,{ControllerFanState:function(){return v},LoadablePrinterConfigurationState:function(){return y},PerformanceModeState:function(){return m},PrinterConfigurationState:function(){return b},StandstillStealthState:function(){return g},StealthchopState:function(){return x},serializePartialPrinterConfiguration:function(){return serializePartialPrinterConfiguration},serializePrinterConfiguration:function(){return serializePrinterConfiguration},usePrinterConfiguration:function(){return usePrinterConfiguration},useSerializedPrinterConfiguration:function(){return useSerializedPrinterConfiguration}});var o=t(55797),n=t(94594),l=t(21899),i=t(24948),a=t(83587),d=t(85582),s=t(49738),u=t(97370),c=t(48418),h=t(57674),p=t(17710),f=t(72931);let m=(0,o.cn)({key:"PerformanceMode",default:!1,effects:[(0,f.rR)(),(0,a.ok)({refine:(0,d.getRefineCheckerForZodSchema)(n.z.boolean().optional().nullable())})]}),x=(0,o.cn)({key:"Stealchop",default:!1,effects:[(0,f.rR)(),(0,a.ok)({refine:(0,d.getRefineCheckerForZodSchema)(n.z.boolean().optional().nullable())})]}),g=(0,o.cn)({key:"StandstillStealth",default:!1,effects:[(0,f.rR)(),(0,a.ok)({refine:(0,d.getRefineCheckerForZodSchema)(n.z.boolean().optional().nullable())})]}),v=(0,o.cn)({key:"ControllerFan",default:p.z2,effects:[(0,f.rR)(),(0,a.ok)({refine:(0,d.getRefineCheckerForZodSchema)(l.XG.nullable())})]}),b=(0,o.nZ)({key:"PrinterConfiguration",get:async e=>{let{get:r}=e,{printer:t,printerSize:n,performanceMode:l,stealthchop:a,standstillStealth:d,rails:s,controlboard:p,controllerFan:f,toolheads:b}=r((0,o.k9)({printer:c.H6,printerSize:c.hq,performanceMode:m,stealthchop:x,standstillStealth:g,rails:c.q7,controlboard:c.OS,controllerFan:v,toolheads:h.$T})),y=i.jz.safeParse({printer:null==t?null:{...t,defaults:{...t.defaults,toolheads:null==t?void 0:t.defaults.toolheads.map(e=>(0,u.m6)(e))}},size:n,performanceMode:l,stealthchop:a,standstillStealth:d,rails:s,controlboard:p,controllerFan:f,toolheads:b});return!1===y.success&&console.error(y.error.flatten().fieldErrors),y.success?y.data:null}}),y=(0,o.nZ)({key:"LoadablePrinterConfigurationState",get:async e=>{let{get:r}=e,t=r((0,o.Qv)(b));return({hasValue:()=>t.contents,hasError:()=>null,loading:()=>null})[t.state]()}}),serializePrinterConfiguration=e=>{let r={printer:e.printer.id,toolheads:e.toolheads.map(e=>(0,u.m6)(e)),size:e.size,controlboard:e.controlboard.id,controllerFan:e.controllerFan.id,performanceMode:e.performanceMode,stealthchop:e.stealthchop,standstillStealth:e.standstillStealth,rails:e.rails.map(e=>(0,u.Yz)(e))};return i.q_.parse(r)},serializePartialPrinterConfiguration=e=>{var r,t,o,n;let l=null==e?void 0:null===(r=e.toolheads)||void 0===r?void 0:r.map(e=>(0,u.od)(e)),a={printer:null==e?void 0:null===(t=e.printer)||void 0===t?void 0:t.id,toolheads:l,size:null==e?void 0:e.size,controlboard:null==e?void 0:null===(o=e.controlboard)||void 0===o?void 0:o.id,controllerFan:null==e?void 0:null===(n=e.controllerFan)||void 0===n?void 0:n.id,performanceMode:null==e?void 0:e.performanceMode,stealthchop:null==e?void 0:e.stealthchop,standstillStealth:null==e?void 0:e.standstillStealth};return i.NN.parse(a)},useSerializedPrinterConfiguration=()=>{let e=(0,o.sJ)(b),r=(0,s.useMemo)(()=>serializePartialPrinterConfiguration(null!=e?e:{}),[e]);return r},usePrinterConfiguration=()=>{let[e,r]=(0,o.FV)(c.H6),[t,n]=(0,o.FV)(c.hq),[l,a]=(0,o.FV)(c.OS),[d,s]=(0,o.FV)(m),[u,h]=(0,o.FV)(x),[p,f]=(0,o.FV)(g),[y,k]=(0,o.FV)(v),j=(0,o.sJ)(c.q7),C=(0,o.sJ)(b),N=useSerializedPrinterConfiguration(),w=i.dl.safeParse(C);return{selectedPrinter:e,setSelectedPrinter:r,selectedPrinterOption:t,setSelectedPrinterOption:n,selectedBoard:l,setSelectedBoard:a,performanceMode:d,setPerformanceMode:s,stealthchop:u,setStealthchop:h,standstillStealth:p,setStandstillStealth:f,selectedPrinterRails:j,selectedControllerFan:y,setSelectedControllerFan:k,partialPrinterConfiguration:C,serializedPrinterConfiguration:N,parsedPrinterConfiguration:w}}},33334:function(e,r,t){t.d(r,{YC:function(){return useToolheads},yk:function(){return useToolheadConfiguration}});var o=t(51758),n=t(97370),l=t(55797),i=t(49738),a=t(48418),d=t(57674),s=t(89553),u=t(24740),c=t(17710);let useToolheads=()=>{let e=(0,l.sJ)(d.$T),r=(0,i.useMemo)(()=>null==e?void 0:e.filter(Boolean).map(e=>new o.D(e)),[e]);return r},useToolheadConfiguration=function(e){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=(0,l.sJ)(d.wm),h=(0,i.useRef)(t);h.current!==t&&t.length>0&&(h.current=t.slice());let p=(0,i.useMemo)(()=>{var t;let n=null===(t=h.current)||void 0===t?void 0:t.filter(Boolean).map(e=>new o.D(e)),l=null==n?void 0:n.find(r=>r.getTool()===e||r.getMotionAxis()===e||r.getExtruderAxis()===e);if(null==l&&r)throw Error("Toolhead with number or axis ".concat(e," not found"));return null!=l?l:null},[r,e,h.current]),[f,m]=(0,i.useState)(!1),x=(0,l._8)(e=>{let{set:r,snapshot:t}=e;return async e=>{var l,i,h,p;let x=new o.D(e),g=await t.getPromise((0,d.AF)(x.getTool()));if(null==g)throw Error("Toolhead ".concat(x.getToolCommand()," not found"));let v=new o.D(g);if(e.extruder.id!=v.getExtruder().id&&null!=e.extruder.stepper){let t=(0,n.WZ)(e.extruder.stepper);null!=t&&r((0,a.ew)(x.getExtruderAxis()),r=>{var o;return null==r?null:{...r,stepper:t.id,current:null!==(o=e.extruder.current)&&void 0!==o?o:.71*t.maxPeakCurrent}})}if((null===(l=e.toolboard)||void 0===l?void 0:l.id)!==(null===(i=v.getToolboard())||void 0===i?void 0:i.id)){if(null==e.toolboard&&"endstop-toolboard"===e.xEndstop.id&&(e.xEndstop=u.Jt),null===(h=e.partFan)||void 0===h?void 0:h.id.endsWith("-toolboard")){let r=(0,c.gL)(null,e).shift();if(null==r)throw Error("No part fan options available for current T".concat(e.toolNumber," configuration"));e.partFan=r}if(null===(p=e.hotendFan)||void 0===p?void 0:p.id.endsWith("-toolboard")){let r=(0,c.Yo)(null,e).shift();if(null==r)throw Error("No hotend fan options available for current T".concat(e.toolNumber," configuration"));e.hotendFan=r}}e.thermistor!==v.getThermistor()&&e.thermistor!==e.hotend.thermistor?m(!0):e.hotend.id==v.getHotend().id||f||(e.thermistor=e.hotend.thermistor);let b=s.PY.extend({toolNumber:s.Qr}).nullable().safeParse({...e,toolNumber:v.getTool()});return b.success&&r((0,d.AF)(v.getTool()),b.data),b}},[f]);return{toolhead:p,setToolhead:x}}}}]);
//# sourceMappingURL=2240-503f398d910cc873.js.map