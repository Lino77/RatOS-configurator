{"version":3,"file":"static/chunks/app/analysis/page-39ab3953642c5738.js","mappings":"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","sources":["webpack://_N_E/./node_modules/.pnpm/@heroicons+react@2.0.14_react@18.2.0/node_modules/@heroicons/react/20/solid/MicrophoneIcon.js","webpack://_N_E/./node_modules/.pnpm/@heroicons+react@2.0.14_react@18.2.0/node_modules/@heroicons/react/24/outline/PuzzlePieceIcon.js","webpack://_N_E/?8ac1","webpack://_N_E/./app/_hooks/toolhead.ts","webpack://_N_E/./app/analysis/realtime-analysis-chart.tsx","webpack://_N_E/./node_modules/.pnpm/lucide-react@0.363.0_react@18.2.0/node_modules/lucide-react/dist/esm/icons/pencil-ruler.js","webpack://_N_E/./node_modules/.pnpm/@radix-ui+react-slider@1.1.2_@types+react@18.2.21_react-dom@18.2.0_react@18.2.0/node_modules/@radix-ui/react-slider/dist/index.mjs","webpack://_N_E/./components/ui/slider.tsx","webpack://_N_E/./app/analysis/analysis.tsx","webpack://_N_E/./components/ui/skeleton.tsx","webpack://_N_E/./app/analysis/loading.tsx","webpack://_N_E/./app/analysis/page.tsx","webpack://_N_E/./app/_helpers/signal.ts","webpack://_N_E/./components/ui/menubar.tsx","webpack://_N_E/./app/topmenu.tsx","webpack://_N_E/./components/common/card.tsx","webpack://_N_E/./components/ui/input.tsx","webpack://_N_E/./data/endstops.ts","webpack://_N_E/./helpers/utils.ts","webpack://_N_E/./hooks/useToolheadConfiguration.tsx","webpack://_N_E/./public/logo-white.svg","webpack://_N_E/./node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/native.js","webpack://_N_E/./node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/rng.js","webpack://_N_E/./node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/stringify.js","webpack://_N_E/./node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/v4.js","webpack://_N_E/./node_modules/.pnpm/@radix-ui+number@1.0.1/node_modules/@radix-ui/number/dist/index.mjs","webpack://_N_E/./node_modules/.pnpm/@radix-ui+react-use-previous@1.0.1_@types+react@18.2.21_react@18.2.0/node_modules/@radix-ui/react-use-previous/dist/index.mjs","webpack://_N_E/./node_modules/.pnpm/@swc+helpers@0.5.2/node_modules/@swc/helpers/esm/_tagged_template_literal.js","webpack://_N_E/./node_modules/.pnpm/clsx@2.0.0/node_modules/clsx/dist/clsx.mjs","webpack://_N_E/./node_modules/.pnpm/class-variance-authority@0.7.0/node_modules/class-variance-authority/dist/index.mjs","webpack://_N_E/<anon>"],"sourcesContent":["const React = require(\"react\");\n\nfunction MicrophoneIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z\"\n  }));\n}\n\nconst ForwardRef = React.forwardRef(MicrophoneIcon);\nmodule.exports = ForwardRef;","const React = require(\"react\");\n\nfunction PuzzlePieceIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M14.25 6.087c0-.355.186-.676.401-.959.221-.29.349-.634.349-1.003 0-1.036-1.007-1.875-2.25-1.875s-2.25.84-2.25 1.875c0 .369.128.713.349 1.003.215.283.401.604.401.959v0a.64.64 0 01-.657.643 48.39 48.39 0 01-4.163-.3c.186 1.613.293 3.25.315 4.907a.656.656 0 01-.658.663v0c-.355 0-.676-.186-.959-.401a1.647 1.647 0 00-1.003-.349c-1.036 0-1.875 1.007-1.875 2.25s.84 2.25 1.875 2.25c.369 0 .713-.128 1.003-.349.283-.215.604-.401.959-.401v0c.31 0 .555.26.532.57a48.039 48.039 0 01-.642 5.056c1.518.19 3.058.309 4.616.354a.64.64 0 00.657-.643v0c0-.355-.186-.676-.401-.959a1.647 1.647 0 01-.349-1.003c0-1.035 1.008-1.875 2.25-1.875 1.243 0 2.25.84 2.25 1.875 0 .369-.128.713-.349 1.003-.215.283-.4.604-.4.959v0c0 .333.277.599.61.58a48.1 48.1 0 005.427-.63 48.05 48.05 0 00.582-4.717.532.532 0 00-.533-.57v0c-.355 0-.676.186-.959.401-.29.221-.634.349-1.003.349-1.035 0-1.875-1.007-1.875-2.25s.84-2.25 1.875-2.25c.37 0 .713.128 1.003.349.283.215.604.401.96.401v0a.656.656 0 00.658-.663 48.422 48.422 0 00-.37-5.36c-1.886.342-3.81.574-5.766.689a.578.578 0 01-.61-.58v0z\"\n  }));\n}\n\nconst ForwardRef = React.forwardRef(PuzzlePieceIcon);\nmodule.exports = ForwardRef;","import(/* webpackMode: \"eager\" */ \"/home/runner/work/RatOS-configurator/RatOS-configurator/src/app/analysis/page.tsx\")","import { useCallback } from 'react';\nimport { useMoonrakerMutation } from '@/moonraker/hooks';\n\nexport const useGcodeCommand = () => {\n\tconst executeGcode = useMoonrakerMutation('printer.gcode.script');\n\n\treturn useCallback(async (command: TemplateStringsArray, ...args: (number | string)[]) => {\n\t\tconst result = [command[0]];\n\t\targs.forEach((arg, i) => {\n\t\t\tresult.push(arg.toString(), command[i + 1]);\n\t\t});\n\t\tconst gcode = result.join('') as GCode;\n\t\tconst gcodeRes = await executeGcode.mutateAsync({ script: gcode });\n\t\tconsole.log(gcode, gcodeRes);\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n};\n","'use client';\n\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\n\nimport { useToolheads } from '@/hooks/useToolheadConfiguration';\nimport { Card } from '@/components/common/card';\nimport {\n\tPSDChartMinimumYVisibleRange,\n\tPSD_CHART_AXIS_AMPLITUDE_ID,\n\tuseADXLSignalChart,\n\tusePSDChart,\n} from '@/app/analysis/charts';\nimport { twJoin } from 'tailwind-merge';\nimport { SciChartReact } from 'scichart-react';\nimport {\n\tuseADXLFifoTensor,\n\tuseAccumulatedPSD,\n\tuseBufferedADXLSignal,\n\tuseBufferedPSD,\n\tuseDynamicAxisRange,\n\tuseRealtimeADXL,\n\tuseTicker,\n} from '@/app/analysis/hooks';\nimport { MountainAnimation, NumberRange, SciChartSurface, easing } from 'scichart';\nimport { detrendSignal } from '@/app/analysis/periodogram';\nimport { FullLoadScreen } from '@/components/common/full-load-screen';\nimport { MacroRecordingSettings } from '@/zods/analysis';\nimport { useRecoilValue } from 'recoil';\nimport { ControlboardState } from '@/recoil/printer';\n\nSciChartSurface.configure({\n\twasmUrl: '/configure/scichart2d.wasm',\n\tdataUrl: '/configure/scichart2d.data',\n});\n\nexport const useRealtimeAnalysisChart = (accelerometer?: MacroRecordingSettings['accelerometer']) => {\n\tconst [isChartEnabled, setIsChartEnabled] = useState(false);\n\tconst toolheads = useToolheads();\n\tconst controlBoard = useRecoilValue(ControlboardState);\n\tconst adxl = accelerometer ?? toolheads[0].getYAccelerometerName();\n\tconst adxlHardwareName =\n\t\t(adxl === 'controlboard'\n\t\t\t? controlBoard?.name\n\t\t\t: adxl === 'toolboard_t0'\n\t\t\t\t? toolheads[0].getToolboard()?.name\n\t\t\t\t: adxl === 'toolboard_t1'\n\t\t\t\t\t? toolheads[1].getToolboard()?.name\n\t\t\t\t\t: adxl === 'rpi'\n\t\t\t\t\t\t? 'Raspberry Pi'\n\t\t\t\t\t\t: 'N/A') ?? 'N/A';\n\tconst psdChart = usePSDChart();\n\tconst xSignalChart = useADXLSignalChart('x');\n\tconst ySignalChart = useADXLSignalChart('y');\n\tconst zSignalChart = useADXLSignalChart('z');\n\n\tconst xSignalYAxis = xSignalChart.data.current?.yAxis ?? null;\n\tconst ySignalYAxis = ySignalChart.data.current?.yAxis ?? null;\n\tconst zSignalYAxis = zSignalChart.data.current?.yAxis ?? null;\n\tconst updateSignalChartRange = useDynamicAxisRange([xSignalYAxis, ySignalYAxis, zSignalYAxis]);\n\n\tconst psdYAxis = psdChart.surface.current?.yAxes.getById(PSD_CHART_AXIS_AMPLITUDE_ID) ?? null;\n\tconst updatePsdChartRange = useDynamicAxisRange(psdYAxis, PSDChartMinimumYVisibleRange);\n\n\tconst fifo = useADXLFifoTensor();\n\tconst timeSinceLastPsd = useRef<number>(new Date().getTime());\n\n\tuseEffect(() => {\n\t\tif (isChartEnabled) {\n\t\t\t// Reset time since last PSD calculation\n\t\t\ttimeSinceLastPsd.current = new Date().getTime();\n\t\t}\n\t}, [isChartEnabled]);\n\n\tconst psds = useAccumulatedPSD((res) => {\n\t\tconst surface = psdChart.surface.current;\n\t\tif (surface == null) {\n\t\t\treturn;\n\t\t}\n\t\tconst elapsed = new Date().getTime() - timeSinceLastPsd.current;\n\t\ttimeSinceLastPsd.current = new Date().getTime();\n\t\tconst animationDS = psdChart.data.current?.animationSeries;\n\t\tif (animationDS == null) {\n\t\t\tthrow new Error('No animation data series');\n\t\t}\n\t\tanimationDS.x.clear();\n\t\tanimationDS.y.clear();\n\t\tanimationDS.z.clear();\n\t\tanimationDS.total.clear();\n\t\tanimationDS.x.appendRange(res.x.frequencies, res.x.estimates);\n\t\tanimationDS.y.appendRange(res.y.frequencies, res.y.estimates);\n\t\tanimationDS.z.appendRange(res.z.frequencies, res.z.estimates);\n\t\tanimationDS.total.appendRange(res.total.frequencies, res.total.estimates);\n\t\tsurface.renderableSeries\n\t\t\t.getById('x')\n\t\t\t.runAnimation(new MountainAnimation({ duration: elapsed, ease: easing.inOutCirc, dataSeries: animationDS.x }));\n\t\tsurface.renderableSeries\n\t\t\t.getById('y')\n\t\t\t.runAnimation(new MountainAnimation({ duration: elapsed, ease: easing.inOutCirc, dataSeries: animationDS.y }));\n\t\tsurface.renderableSeries\n\t\t\t.getById('z')\n\t\t\t.runAnimation(new MountainAnimation({ duration: elapsed, ease: easing.inOutCirc, dataSeries: animationDS.z }));\n\t\tsurface.renderableSeries\n\t\t\t.getById('total')\n\t\t\t.runAnimation(\n\t\t\t\tnew MountainAnimation({ duration: elapsed, ease: easing.inOutCirc, dataSeries: animationDS.total }),\n\t\t\t);\n\t\tupdatePsdChartRange(new NumberRange(res.total.powerRange.min, res.total.powerRange.max));\n\t});\n\tconst updatePsd = useBufferedPSD(fifo.sampleRate, psds.onData);\n\tconst updateSignals = useBufferedADXLSignal(fifo, async (time, x, y, z) => {\n\t\t// Center the signals by subtracting the mean\n\t\tconst dX = detrendSignal(x);\n\t\tconst dY = detrendSignal(y);\n\t\tconst dZ = detrendSignal(z);\n\t\tx.dispose();\n\t\ty.dispose();\n\t\tz.dispose();\n\t\tPromise.all([time.array(), dX.array(), dY.array(), dZ.array()]).then(([timeData, xData, yData, zData]) => {\n\t\t\txSignalChart.data.current?.signalData.appendRange(timeData, xData);\n\t\t\tySignalChart.data.current?.signalData.appendRange(timeData, yData);\n\t\t\tzSignalChart.data.current?.signalData.appendRange(timeData, zData);\n\t\t\txSignalChart.data.current?.historyData.appendRange(timeData, xData);\n\t\t\tySignalChart.data.current?.historyData.appendRange(timeData, yData);\n\t\t\tzSignalChart.data.current?.historyData.appendRange(timeData, zData);\n\t\t});\n\t\tupdateSignalChartRange();\n\t\tupdatePsd(time, dX, dY, dZ, true);\n\t});\n\tuseTicker(updateSignals);\n\n\tuseRealtimeADXL({\n\t\tsensor: adxl,\n\t\tenabled: isChartEnabled,\n\t\tonDataUpdate: fifo.onData,\n\t});\n\treturn useMemo(\n\t\t() => ({\n\t\t\tisChartEnabled,\n\t\t\tsetIsChartEnabled,\n\t\t\tpsds,\n\t\t\tcurrentAccelerometer: adxl,\n\t\t\tcurrentAccelerometerHardwareName: adxlHardwareName,\n\t\t\tchartProps: {\n\t\t\t\txSignalChart,\n\t\t\t\tySignalChart,\n\t\t\t\tzSignalChart,\n\t\t\t\tpsdChart,\n\t\t\t},\n\t\t}),\n\t\t[isChartEnabled, psds, adxl, adxlHardwareName, xSignalChart, ySignalChart, zSignalChart, psdChart],\n\t);\n};\n\ntype RealtimeAnalysisChartProps = ReturnType<typeof useRealtimeAnalysisChart>['chartProps'];\n\nexport const RealtimeAnalysisChart: React.FC<RealtimeAnalysisChartProps> = ({\n\txSignalChart,\n\tySignalChart,\n\tzSignalChart,\n\tpsdChart,\n}) => {\n\treturn (\n\t\t<div className=\"flex max-h-full min-h-full flex-col space-y-4 @container\">\n\t\t\t{/* <Toolbar buttons={toolbarButtons} /> */}\n\t\t\t<div className=\"grid grid-cols-1 gap-4 @screen-lg:grid-cols-3\">\n\t\t\t\t<Card className=\"flex max-h-32 min-h-32 overflow-hidden @screen-lg:max-h-72 @screen-lg:min-h-72\">\n\t\t\t\t\t<h3 className=\"text-md absolute left-0 right-0 top-0 flex items-center space-x-2 p-4 font-semibold\">\n\t\t\t\t\t\t<div className={twJoin('flex-none rounded-full bg-yellow-400/10 p-1 text-yellow-400')}>\n\t\t\t\t\t\t\t<div className=\"h-2 w-2 rounded-full bg-current\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span className=\"text-zinc-100\">X Signal</span>\n\t\t\t\t\t</h3>\n\t\t\t\t\t<SciChartReact\n\t\t\t\t\t\t{...xSignalChart.forwardProps}\n\t\t\t\t\t\tclassName=\"flex-1 rounded-lg\"\n\t\t\t\t\t\tfallback={<FullLoadScreen className=\"ml-[150px] bg-zinc-900\" />}\n\t\t\t\t\t/>\n\t\t\t\t</Card>\n\t\t\t\t<Card className=\"flex max-h-32 min-h-32 overflow-hidden @screen-lg:max-h-72 @screen-lg:min-h-72\">\n\t\t\t\t\t<h3 className=\"text-md absolute left-0 right-0 top-0 flex items-center space-x-2 p-4 font-semibold\">\n\t\t\t\t\t\t<div className={twJoin('flex-none rounded-full bg-sky-400/10 p-1 text-sky-400')}>\n\t\t\t\t\t\t\t<div className=\"h-2 w-2 rounded-full bg-current\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span className=\"text-zinc-100\">Y Signal</span>\n\t\t\t\t\t</h3>\n\t\t\t\t\t<SciChartReact\n\t\t\t\t\t\t{...ySignalChart.forwardProps}\n\t\t\t\t\t\tclassName=\"flex-1 rounded-lg\"\n\t\t\t\t\t\tfallback={<FullLoadScreen className=\"ml-[150px] bg-zinc-900\" />}\n\t\t\t\t\t/>\n\t\t\t\t</Card>\n\t\t\t\t<Card className=\"flex max-h-32 min-h-32 overflow-hidden @screen-lg:max-h-72 @screen-lg:min-h-72\">\n\t\t\t\t\t<h3 className=\"text-md absolute left-0 right-0 top-0 flex items-center space-x-2 p-4 font-semibold\">\n\t\t\t\t\t\t<div className={twJoin('flex-none rounded-full bg-rose-400/10 p-1 text-rose-400')}>\n\t\t\t\t\t\t\t<div className=\"h-2 w-2 rounded-full bg-current\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span className=\"text-zinc-100\">Z Signal</span>\n\t\t\t\t\t</h3>\n\t\t\t\t\t<SciChartReact\n\t\t\t\t\t\t{...zSignalChart.forwardProps}\n\t\t\t\t\t\tclassName=\"flex-1 rounded-lg\"\n\t\t\t\t\t\tfallback={<FullLoadScreen className=\"ml-[150px] bg-zinc-900\" />}\n\t\t\t\t\t/>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t\t<Card className=\"flex flex-1 overflow-hidden\">\n\t\t\t\t<SciChartReact\n\t\t\t\t\t{...psdChart.forwardProps}\n\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\tfallback={<FullLoadScreen className=\"ml-[150px] bg-zinc-900\" />}\n\t\t\t\t/>\n\t\t\t</Card>\n\t\t</div>\n\t);\n};\n","/**\n * @license lucide-react v0.363.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PencilRuler = createLucideIcon(\"PencilRuler\", [\n  [\"path\", { d: \"m15 5 4 4\", key: \"1mk7zo\" }],\n  [\n    \"path\",\n    { d: \"M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13\", key: \"orapub\" }\n  ],\n  [\"path\", { d: \"m8 6 2-2\", key: \"115y1s\" }],\n  [\"path\", { d: \"m2 22 5.5-1.5L21.17 6.83a2.82 2.82 0 0 0-4-4L3.5 16.5Z\", key: \"hes763\" }],\n  [\"path\", { d: \"m18 16 2-2\", key: \"ee94s4\" }],\n  [\n    \"path\",\n    {\n      d: \"m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17\",\n      key: \"cfq27r\"\n    }\n  ]\n]);\n\nexport { PencilRuler as default };\n//# sourceMappingURL=pencil-ruler.js.map\n","import $g1Vy2$babelruntimehelpersesmextends from \"@babel/runtime/helpers/esm/extends\";\nimport {forwardRef as $g1Vy2$forwardRef, useState as $g1Vy2$useState, useRef as $g1Vy2$useRef, createElement as $g1Vy2$createElement, useMemo as $g1Vy2$useMemo, useEffect as $g1Vy2$useEffect} from \"react\";\nimport {clamp as $g1Vy2$clamp} from \"@radix-ui/number\";\nimport {composeEventHandlers as $g1Vy2$composeEventHandlers} from \"@radix-ui/primitive\";\nimport {useComposedRefs as $g1Vy2$useComposedRefs} from \"@radix-ui/react-compose-refs\";\nimport {createContextScope as $g1Vy2$createContextScope} from \"@radix-ui/react-context\";\nimport {useControllableState as $g1Vy2$useControllableState} from \"@radix-ui/react-use-controllable-state\";\nimport {useDirection as $g1Vy2$useDirection} from \"@radix-ui/react-direction\";\nimport {usePrevious as $g1Vy2$usePrevious} from \"@radix-ui/react-use-previous\";\nimport {useSize as $g1Vy2$useSize} from \"@radix-ui/react-use-size\";\nimport {Primitive as $g1Vy2$Primitive} from \"@radix-ui/react-primitive\";\nimport {createCollection as $g1Vy2$createCollection} from \"@radix-ui/react-collection\";\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst $faa2e61a3361514f$var$PAGE_KEYS = [\n    'PageUp',\n    'PageDown'\n];\nconst $faa2e61a3361514f$var$ARROW_KEYS = [\n    'ArrowUp',\n    'ArrowDown',\n    'ArrowLeft',\n    'ArrowRight'\n];\nconst $faa2e61a3361514f$var$BACK_KEYS = {\n    'from-left': [\n        'Home',\n        'PageDown',\n        'ArrowDown',\n        'ArrowLeft'\n    ],\n    'from-right': [\n        'Home',\n        'PageDown',\n        'ArrowDown',\n        'ArrowRight'\n    ],\n    'from-bottom': [\n        'Home',\n        'PageDown',\n        'ArrowDown',\n        'ArrowLeft'\n    ],\n    'from-top': [\n        'Home',\n        'PageDown',\n        'ArrowUp',\n        'ArrowLeft'\n    ]\n};\n/* -------------------------------------------------------------------------------------------------\n * Slider\n * -----------------------------------------------------------------------------------------------*/ const $faa2e61a3361514f$var$SLIDER_NAME = 'Slider';\nconst [$faa2e61a3361514f$var$Collection, $faa2e61a3361514f$var$useCollection, $faa2e61a3361514f$var$createCollectionScope] = $g1Vy2$createCollection($faa2e61a3361514f$var$SLIDER_NAME);\nconst [$faa2e61a3361514f$var$createSliderContext, $faa2e61a3361514f$export$ef72632d7b901f97] = $g1Vy2$createContextScope($faa2e61a3361514f$var$SLIDER_NAME, [\n    $faa2e61a3361514f$var$createCollectionScope\n]);\nconst [$faa2e61a3361514f$var$SliderProvider, $faa2e61a3361514f$var$useSliderContext] = $faa2e61a3361514f$var$createSliderContext($faa2e61a3361514f$var$SLIDER_NAME);\nconst $faa2e61a3361514f$export$472062a354075cee = /*#__PURE__*/ $g1Vy2$forwardRef((props, forwardedRef)=>{\n    const { name: name , min: min = 0 , max: max = 100 , step: step = 1 , orientation: orientation = 'horizontal' , disabled: disabled = false , minStepsBetweenThumbs: minStepsBetweenThumbs = 0 , defaultValue: defaultValue = [\n        min\n    ] , value: value1 , onValueChange: onValueChange = ()=>{} , onValueCommit: onValueCommit = ()=>{} , inverted: inverted = false , ...sliderProps } = props;\n    const [slider, setSlider] = $g1Vy2$useState(null);\n    const composedRefs = $g1Vy2$useComposedRefs(forwardedRef, (node)=>setSlider(node)\n    );\n    const thumbRefs = $g1Vy2$useRef(new Set());\n    const valueIndexToChangeRef = $g1Vy2$useRef(0);\n    const isHorizontal = orientation === 'horizontal'; // We set this to true by default so that events bubble to forms without JS (SSR)\n    const isFormControl = slider ? Boolean(slider.closest('form')) : true;\n    const SliderOrientation = isHorizontal ? $faa2e61a3361514f$var$SliderHorizontal : $faa2e61a3361514f$var$SliderVertical;\n    const [values = [], setValues] = $g1Vy2$useControllableState({\n        prop: value1,\n        defaultProp: defaultValue,\n        onChange: (value)=>{\n            var _thumbs$valueIndexToC;\n            const thumbs = [\n                ...thumbRefs.current\n            ];\n            (_thumbs$valueIndexToC = thumbs[valueIndexToChangeRef.current]) === null || _thumbs$valueIndexToC === void 0 || _thumbs$valueIndexToC.focus();\n            onValueChange(value);\n        }\n    });\n    const valuesBeforeSlideStartRef = $g1Vy2$useRef(values);\n    function handleSlideStart(value) {\n        const closestIndex = $faa2e61a3361514f$var$getClosestValueIndex(values, value);\n        updateValues(value, closestIndex);\n    }\n    function handleSlideMove(value) {\n        updateValues(value, valueIndexToChangeRef.current);\n    }\n    function handleSlideEnd() {\n        const prevValue = valuesBeforeSlideStartRef.current[valueIndexToChangeRef.current];\n        const nextValue = values[valueIndexToChangeRef.current];\n        const hasChanged = nextValue !== prevValue;\n        if (hasChanged) onValueCommit(values);\n    }\n    function updateValues(value, atIndex, { commit: commit  } = {\n        commit: false\n    }) {\n        const decimalCount = $faa2e61a3361514f$var$getDecimalCount(step);\n        const snapToStep = $faa2e61a3361514f$var$roundValue(Math.round((value - min) / step) * step + min, decimalCount);\n        const nextValue = $g1Vy2$clamp(snapToStep, [\n            min,\n            max\n        ]);\n        setValues((prevValues = [])=>{\n            const nextValues = $faa2e61a3361514f$var$getNextSortedValues(prevValues, nextValue, atIndex);\n            if ($faa2e61a3361514f$var$hasMinStepsBetweenValues(nextValues, minStepsBetweenThumbs * step)) {\n                valueIndexToChangeRef.current = nextValues.indexOf(nextValue);\n                const hasChanged = String(nextValues) !== String(prevValues);\n                if (hasChanged && commit) onValueCommit(nextValues);\n                return hasChanged ? nextValues : prevValues;\n            } else return prevValues;\n        });\n    }\n    return /*#__PURE__*/ $g1Vy2$createElement($faa2e61a3361514f$var$SliderProvider, {\n        scope: props.__scopeSlider,\n        disabled: disabled,\n        min: min,\n        max: max,\n        valueIndexToChangeRef: valueIndexToChangeRef,\n        thumbs: thumbRefs.current,\n        values: values,\n        orientation: orientation\n    }, /*#__PURE__*/ $g1Vy2$createElement($faa2e61a3361514f$var$Collection.Provider, {\n        scope: props.__scopeSlider\n    }, /*#__PURE__*/ $g1Vy2$createElement($faa2e61a3361514f$var$Collection.Slot, {\n        scope: props.__scopeSlider\n    }, /*#__PURE__*/ $g1Vy2$createElement(SliderOrientation, $g1Vy2$babelruntimehelpersesmextends({\n        \"aria-disabled\": disabled,\n        \"data-disabled\": disabled ? '' : undefined\n    }, sliderProps, {\n        ref: composedRefs,\n        onPointerDown: $g1Vy2$composeEventHandlers(sliderProps.onPointerDown, ()=>{\n            if (!disabled) valuesBeforeSlideStartRef.current = values;\n        }),\n        min: min,\n        max: max,\n        inverted: inverted,\n        onSlideStart: disabled ? undefined : handleSlideStart,\n        onSlideMove: disabled ? undefined : handleSlideMove,\n        onSlideEnd: disabled ? undefined : handleSlideEnd,\n        onHomeKeyDown: ()=>!disabled && updateValues(min, 0, {\n                commit: true\n            })\n        ,\n        onEndKeyDown: ()=>!disabled && updateValues(max, values.length - 1, {\n                commit: true\n            })\n        ,\n        onStepKeyDown: ({ event: event , direction: stepDirection  })=>{\n            if (!disabled) {\n                const isPageKey = $faa2e61a3361514f$var$PAGE_KEYS.includes(event.key);\n                const isSkipKey = isPageKey || event.shiftKey && $faa2e61a3361514f$var$ARROW_KEYS.includes(event.key);\n                const multiplier = isSkipKey ? 10 : 1;\n                const atIndex = valueIndexToChangeRef.current;\n                const value = values[atIndex];\n                const stepInDirection = step * multiplier * stepDirection;\n                updateValues(value + stepInDirection, atIndex, {\n                    commit: true\n                });\n            }\n        }\n    })))), isFormControl && values.map((value, index)=>/*#__PURE__*/ $g1Vy2$createElement($faa2e61a3361514f$var$BubbleInput, {\n            key: index,\n            name: name ? name + (values.length > 1 ? '[]' : '') : undefined,\n            value: value\n        })\n    ));\n});\n/*#__PURE__*/ Object.assign($faa2e61a3361514f$export$472062a354075cee, {\n    displayName: $faa2e61a3361514f$var$SLIDER_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * SliderHorizontal\n * -----------------------------------------------------------------------------------------------*/ const [$faa2e61a3361514f$var$SliderOrientationProvider, $faa2e61a3361514f$var$useSliderOrientationContext] = $faa2e61a3361514f$var$createSliderContext($faa2e61a3361514f$var$SLIDER_NAME, {\n    startEdge: 'left',\n    endEdge: 'right',\n    size: 'width',\n    direction: 1\n});\nconst $faa2e61a3361514f$var$SliderHorizontal = /*#__PURE__*/ $g1Vy2$forwardRef((props, forwardedRef)=>{\n    const { min: min , max: max , dir: dir , inverted: inverted , onSlideStart: onSlideStart , onSlideMove: onSlideMove , onSlideEnd: onSlideEnd , onStepKeyDown: onStepKeyDown , ...sliderProps } = props;\n    const [slider, setSlider] = $g1Vy2$useState(null);\n    const composedRefs = $g1Vy2$useComposedRefs(forwardedRef, (node)=>setSlider(node)\n    );\n    const rectRef = $g1Vy2$useRef();\n    const direction = $g1Vy2$useDirection(dir);\n    const isDirectionLTR = direction === 'ltr';\n    const isSlidingFromLeft = isDirectionLTR && !inverted || !isDirectionLTR && inverted;\n    function getValueFromPointer(pointerPosition) {\n        const rect = rectRef.current || slider.getBoundingClientRect();\n        const input = [\n            0,\n            rect.width\n        ];\n        const output = isSlidingFromLeft ? [\n            min,\n            max\n        ] : [\n            max,\n            min\n        ];\n        const value = $faa2e61a3361514f$var$linearScale(input, output);\n        rectRef.current = rect;\n        return value(pointerPosition - rect.left);\n    }\n    return /*#__PURE__*/ $g1Vy2$createElement($faa2e61a3361514f$var$SliderOrientationProvider, {\n        scope: props.__scopeSlider,\n        startEdge: isSlidingFromLeft ? 'left' : 'right',\n        endEdge: isSlidingFromLeft ? 'right' : 'left',\n        direction: isSlidingFromLeft ? 1 : -1,\n        size: \"width\"\n    }, /*#__PURE__*/ $g1Vy2$createElement($faa2e61a3361514f$var$SliderImpl, $g1Vy2$babelruntimehelpersesmextends({\n        dir: direction,\n        \"data-orientation\": \"horizontal\"\n    }, sliderProps, {\n        ref: composedRefs,\n        style: {\n            ...sliderProps.style,\n            ['--radix-slider-thumb-transform']: 'translateX(-50%)'\n        },\n        onSlideStart: (event)=>{\n            const value = getValueFromPointer(event.clientX);\n            onSlideStart === null || onSlideStart === void 0 || onSlideStart(value);\n        },\n        onSlideMove: (event)=>{\n            const value = getValueFromPointer(event.clientX);\n            onSlideMove === null || onSlideMove === void 0 || onSlideMove(value);\n        },\n        onSlideEnd: ()=>{\n            rectRef.current = undefined;\n            onSlideEnd === null || onSlideEnd === void 0 || onSlideEnd();\n        },\n        onStepKeyDown: (event)=>{\n            const slideDirection = isSlidingFromLeft ? 'from-left' : 'from-right';\n            const isBackKey = $faa2e61a3361514f$var$BACK_KEYS[slideDirection].includes(event.key);\n            onStepKeyDown === null || onStepKeyDown === void 0 || onStepKeyDown({\n                event: event,\n                direction: isBackKey ? -1 : 1\n            });\n        }\n    })));\n});\n/* -------------------------------------------------------------------------------------------------\n * SliderVertical\n * -----------------------------------------------------------------------------------------------*/ const $faa2e61a3361514f$var$SliderVertical = /*#__PURE__*/ $g1Vy2$forwardRef((props, forwardedRef)=>{\n    const { min: min , max: max , inverted: inverted , onSlideStart: onSlideStart , onSlideMove: onSlideMove , onSlideEnd: onSlideEnd , onStepKeyDown: onStepKeyDown , ...sliderProps } = props;\n    const sliderRef = $g1Vy2$useRef(null);\n    const ref = $g1Vy2$useComposedRefs(forwardedRef, sliderRef);\n    const rectRef = $g1Vy2$useRef();\n    const isSlidingFromBottom = !inverted;\n    function getValueFromPointer(pointerPosition) {\n        const rect = rectRef.current || sliderRef.current.getBoundingClientRect();\n        const input = [\n            0,\n            rect.height\n        ];\n        const output = isSlidingFromBottom ? [\n            max,\n            min\n        ] : [\n            min,\n            max\n        ];\n        const value = $faa2e61a3361514f$var$linearScale(input, output);\n        rectRef.current = rect;\n        return value(pointerPosition - rect.top);\n    }\n    return /*#__PURE__*/ $g1Vy2$createElement($faa2e61a3361514f$var$SliderOrientationProvider, {\n        scope: props.__scopeSlider,\n        startEdge: isSlidingFromBottom ? 'bottom' : 'top',\n        endEdge: isSlidingFromBottom ? 'top' : 'bottom',\n        size: \"height\",\n        direction: isSlidingFromBottom ? 1 : -1\n    }, /*#__PURE__*/ $g1Vy2$createElement($faa2e61a3361514f$var$SliderImpl, $g1Vy2$babelruntimehelpersesmextends({\n        \"data-orientation\": \"vertical\"\n    }, sliderProps, {\n        ref: ref,\n        style: {\n            ...sliderProps.style,\n            ['--radix-slider-thumb-transform']: 'translateY(50%)'\n        },\n        onSlideStart: (event)=>{\n            const value = getValueFromPointer(event.clientY);\n            onSlideStart === null || onSlideStart === void 0 || onSlideStart(value);\n        },\n        onSlideMove: (event)=>{\n            const value = getValueFromPointer(event.clientY);\n            onSlideMove === null || onSlideMove === void 0 || onSlideMove(value);\n        },\n        onSlideEnd: ()=>{\n            rectRef.current = undefined;\n            onSlideEnd === null || onSlideEnd === void 0 || onSlideEnd();\n        },\n        onStepKeyDown: (event)=>{\n            const slideDirection = isSlidingFromBottom ? 'from-bottom' : 'from-top';\n            const isBackKey = $faa2e61a3361514f$var$BACK_KEYS[slideDirection].includes(event.key);\n            onStepKeyDown === null || onStepKeyDown === void 0 || onStepKeyDown({\n                event: event,\n                direction: isBackKey ? -1 : 1\n            });\n        }\n    })));\n});\n/* -------------------------------------------------------------------------------------------------\n * SliderImpl\n * -----------------------------------------------------------------------------------------------*/ const $faa2e61a3361514f$var$SliderImpl = /*#__PURE__*/ $g1Vy2$forwardRef((props, forwardedRef)=>{\n    const { __scopeSlider: __scopeSlider , onSlideStart: onSlideStart , onSlideMove: onSlideMove , onSlideEnd: onSlideEnd , onHomeKeyDown: onHomeKeyDown , onEndKeyDown: onEndKeyDown , onStepKeyDown: onStepKeyDown , ...sliderProps } = props;\n    const context = $faa2e61a3361514f$var$useSliderContext($faa2e61a3361514f$var$SLIDER_NAME, __scopeSlider);\n    return /*#__PURE__*/ $g1Vy2$createElement($g1Vy2$Primitive.span, $g1Vy2$babelruntimehelpersesmextends({}, sliderProps, {\n        ref: forwardedRef,\n        onKeyDown: $g1Vy2$composeEventHandlers(props.onKeyDown, (event)=>{\n            if (event.key === 'Home') {\n                onHomeKeyDown(event); // Prevent scrolling to page start\n                event.preventDefault();\n            } else if (event.key === 'End') {\n                onEndKeyDown(event); // Prevent scrolling to page end\n                event.preventDefault();\n            } else if ($faa2e61a3361514f$var$PAGE_KEYS.concat($faa2e61a3361514f$var$ARROW_KEYS).includes(event.key)) {\n                onStepKeyDown(event); // Prevent scrolling for directional key presses\n                event.preventDefault();\n            }\n        }),\n        onPointerDown: $g1Vy2$composeEventHandlers(props.onPointerDown, (event)=>{\n            const target = event.target;\n            target.setPointerCapture(event.pointerId); // Prevent browser focus behaviour because we focus a thumb manually when values change.\n            event.preventDefault(); // Touch devices have a delay before focusing so won't focus if touch immediately moves\n            // away from target (sliding). We want thumb to focus regardless.\n            if (context.thumbs.has(target)) target.focus();\n            else onSlideStart(event);\n        }),\n        onPointerMove: $g1Vy2$composeEventHandlers(props.onPointerMove, (event)=>{\n            const target = event.target;\n            if (target.hasPointerCapture(event.pointerId)) onSlideMove(event);\n        }),\n        onPointerUp: $g1Vy2$composeEventHandlers(props.onPointerUp, (event)=>{\n            const target = event.target;\n            if (target.hasPointerCapture(event.pointerId)) {\n                target.releasePointerCapture(event.pointerId);\n                onSlideEnd(event);\n            }\n        })\n    }));\n});\n/* -------------------------------------------------------------------------------------------------\n * SliderTrack\n * -----------------------------------------------------------------------------------------------*/ const $faa2e61a3361514f$var$TRACK_NAME = 'SliderTrack';\nconst $faa2e61a3361514f$export$105594979f116971 = /*#__PURE__*/ $g1Vy2$forwardRef((props, forwardedRef)=>{\n    const { __scopeSlider: __scopeSlider , ...trackProps } = props;\n    const context = $faa2e61a3361514f$var$useSliderContext($faa2e61a3361514f$var$TRACK_NAME, __scopeSlider);\n    return /*#__PURE__*/ $g1Vy2$createElement($g1Vy2$Primitive.span, $g1Vy2$babelruntimehelpersesmextends({\n        \"data-disabled\": context.disabled ? '' : undefined,\n        \"data-orientation\": context.orientation\n    }, trackProps, {\n        ref: forwardedRef\n    }));\n});\n/*#__PURE__*/ Object.assign($faa2e61a3361514f$export$105594979f116971, {\n    displayName: $faa2e61a3361514f$var$TRACK_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * SliderRange\n * -----------------------------------------------------------------------------------------------*/ const $faa2e61a3361514f$var$RANGE_NAME = 'SliderRange';\nconst $faa2e61a3361514f$export$a5cf38a7a000fe77 = /*#__PURE__*/ $g1Vy2$forwardRef((props, forwardedRef)=>{\n    const { __scopeSlider: __scopeSlider , ...rangeProps } = props;\n    const context = $faa2e61a3361514f$var$useSliderContext($faa2e61a3361514f$var$RANGE_NAME, __scopeSlider);\n    const orientation = $faa2e61a3361514f$var$useSliderOrientationContext($faa2e61a3361514f$var$RANGE_NAME, __scopeSlider);\n    const ref = $g1Vy2$useRef(null);\n    const composedRefs = $g1Vy2$useComposedRefs(forwardedRef, ref);\n    const valuesCount = context.values.length;\n    const percentages = context.values.map((value)=>$faa2e61a3361514f$var$convertValueToPercentage(value, context.min, context.max)\n    );\n    const offsetStart = valuesCount > 1 ? Math.min(...percentages) : 0;\n    const offsetEnd = 100 - Math.max(...percentages);\n    return /*#__PURE__*/ $g1Vy2$createElement($g1Vy2$Primitive.span, $g1Vy2$babelruntimehelpersesmextends({\n        \"data-orientation\": context.orientation,\n        \"data-disabled\": context.disabled ? '' : undefined\n    }, rangeProps, {\n        ref: composedRefs,\n        style: {\n            ...props.style,\n            [orientation.startEdge]: offsetStart + '%',\n            [orientation.endEdge]: offsetEnd + '%'\n        }\n    }));\n});\n/*#__PURE__*/ Object.assign($faa2e61a3361514f$export$a5cf38a7a000fe77, {\n    displayName: $faa2e61a3361514f$var$RANGE_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * SliderThumb\n * -----------------------------------------------------------------------------------------------*/ const $faa2e61a3361514f$var$THUMB_NAME = 'SliderThumb';\nconst $faa2e61a3361514f$export$2c1b491743890dec = /*#__PURE__*/ $g1Vy2$forwardRef((props, forwardedRef)=>{\n    const getItems = $faa2e61a3361514f$var$useCollection(props.__scopeSlider);\n    const [thumb, setThumb] = $g1Vy2$useState(null);\n    const composedRefs = $g1Vy2$useComposedRefs(forwardedRef, (node)=>setThumb(node)\n    );\n    const index = $g1Vy2$useMemo(()=>thumb ? getItems().findIndex((item)=>item.ref.current === thumb\n        ) : -1\n    , [\n        getItems,\n        thumb\n    ]);\n    return /*#__PURE__*/ $g1Vy2$createElement($faa2e61a3361514f$var$SliderThumbImpl, $g1Vy2$babelruntimehelpersesmextends({}, props, {\n        ref: composedRefs,\n        index: index\n    }));\n});\nconst $faa2e61a3361514f$var$SliderThumbImpl = /*#__PURE__*/ $g1Vy2$forwardRef((props, forwardedRef)=>{\n    const { __scopeSlider: __scopeSlider , index: index , ...thumbProps } = props;\n    const context = $faa2e61a3361514f$var$useSliderContext($faa2e61a3361514f$var$THUMB_NAME, __scopeSlider);\n    const orientation = $faa2e61a3361514f$var$useSliderOrientationContext($faa2e61a3361514f$var$THUMB_NAME, __scopeSlider);\n    const [thumb, setThumb] = $g1Vy2$useState(null);\n    const composedRefs = $g1Vy2$useComposedRefs(forwardedRef, (node)=>setThumb(node)\n    );\n    const size = $g1Vy2$useSize(thumb); // We cast because index could be `-1` which would return undefined\n    const value = context.values[index];\n    const percent = value === undefined ? 0 : $faa2e61a3361514f$var$convertValueToPercentage(value, context.min, context.max);\n    const label = $faa2e61a3361514f$var$getLabel(index, context.values.length);\n    const orientationSize = size === null || size === void 0 ? void 0 : size[orientation.size];\n    const thumbInBoundsOffset = orientationSize ? $faa2e61a3361514f$var$getThumbInBoundsOffset(orientationSize, percent, orientation.direction) : 0;\n    $g1Vy2$useEffect(()=>{\n        if (thumb) {\n            context.thumbs.add(thumb);\n            return ()=>{\n                context.thumbs.delete(thumb);\n            };\n        }\n    }, [\n        thumb,\n        context.thumbs\n    ]);\n    return /*#__PURE__*/ $g1Vy2$createElement(\"span\", {\n        style: {\n            transform: 'var(--radix-slider-thumb-transform)',\n            position: 'absolute',\n            [orientation.startEdge]: `calc(${percent}% + ${thumbInBoundsOffset}px)`\n        }\n    }, /*#__PURE__*/ $g1Vy2$createElement($faa2e61a3361514f$var$Collection.ItemSlot, {\n        scope: props.__scopeSlider\n    }, /*#__PURE__*/ $g1Vy2$createElement($g1Vy2$Primitive.span, $g1Vy2$babelruntimehelpersesmextends({\n        role: \"slider\",\n        \"aria-label\": props['aria-label'] || label,\n        \"aria-valuemin\": context.min,\n        \"aria-valuenow\": value,\n        \"aria-valuemax\": context.max,\n        \"aria-orientation\": context.orientation,\n        \"data-orientation\": context.orientation,\n        \"data-disabled\": context.disabled ? '' : undefined,\n        tabIndex: context.disabled ? undefined : 0\n    }, thumbProps, {\n        ref: composedRefs,\n        style: value === undefined ? {\n            display: 'none'\n        } : props.style,\n        onFocus: $g1Vy2$composeEventHandlers(props.onFocus, ()=>{\n            context.valueIndexToChangeRef.current = index;\n        })\n    }))));\n});\n/*#__PURE__*/ Object.assign($faa2e61a3361514f$export$2c1b491743890dec, {\n    displayName: $faa2e61a3361514f$var$THUMB_NAME\n});\n/* -----------------------------------------------------------------------------------------------*/ const $faa2e61a3361514f$var$BubbleInput = (props)=>{\n    const { value: value , ...inputProps } = props;\n    const ref = $g1Vy2$useRef(null);\n    const prevValue = $g1Vy2$usePrevious(value); // Bubble value change to parents (e.g form change event)\n    $g1Vy2$useEffect(()=>{\n        const input = ref.current;\n        const inputProto = window.HTMLInputElement.prototype;\n        const descriptor = Object.getOwnPropertyDescriptor(inputProto, 'value');\n        const setValue = descriptor.set;\n        if (prevValue !== value && setValue) {\n            const event = new Event('input', {\n                bubbles: true\n            });\n            setValue.call(input, value);\n            input.dispatchEvent(event);\n        }\n    }, [\n        prevValue,\n        value\n    ]);\n    /**\n   * We purposefully do not use `type=\"hidden\"` here otherwise forms that\n   * wrap it will not be able to access its value via the FormData API.\n   *\n   * We purposefully do not add the `value` attribute here to allow the value\n   * to be set programatically and bubble to any parent form `onChange` event.\n   * Adding the `value` will cause React to consider the programatic\n   * dispatch a duplicate and it will get swallowed.\n   */ return /*#__PURE__*/ $g1Vy2$createElement(\"input\", $g1Vy2$babelruntimehelpersesmextends({\n        style: {\n            display: 'none'\n        }\n    }, inputProps, {\n        ref: ref,\n        defaultValue: value\n    }));\n};\nfunction $faa2e61a3361514f$var$getNextSortedValues(prevValues = [], nextValue, atIndex) {\n    const nextValues = [\n        ...prevValues\n    ];\n    nextValues[atIndex] = nextValue;\n    return nextValues.sort((a, b)=>a - b\n    );\n}\nfunction $faa2e61a3361514f$var$convertValueToPercentage(value, min, max) {\n    const maxSteps = max - min;\n    const percentPerStep = 100 / maxSteps;\n    const percentage = percentPerStep * (value - min);\n    return $g1Vy2$clamp(percentage, [\n        0,\n        100\n    ]);\n}\n/**\n * Returns a label for each thumb when there are two or more thumbs\n */ function $faa2e61a3361514f$var$getLabel(index, totalValues) {\n    if (totalValues > 2) return `Value ${index + 1} of ${totalValues}`;\n    else if (totalValues === 2) return [\n        'Minimum',\n        'Maximum'\n    ][index];\n    else return undefined;\n}\n/**\n * Given a `values` array and a `nextValue`, determine which value in\n * the array is closest to `nextValue` and return its index.\n *\n * @example\n * // returns 1\n * getClosestValueIndex([10, 30], 25);\n */ function $faa2e61a3361514f$var$getClosestValueIndex(values, nextValue) {\n    if (values.length === 1) return 0;\n    const distances = values.map((value)=>Math.abs(value - nextValue)\n    );\n    const closestDistance = Math.min(...distances);\n    return distances.indexOf(closestDistance);\n}\n/**\n * Offsets the thumb centre point while sliding to ensure it remains\n * within the bounds of the slider when reaching the edges\n */ function $faa2e61a3361514f$var$getThumbInBoundsOffset(width, left, direction) {\n    const halfWidth = width / 2;\n    const halfPercent = 50;\n    const offset = $faa2e61a3361514f$var$linearScale([\n        0,\n        halfPercent\n    ], [\n        0,\n        halfWidth\n    ]);\n    return (halfWidth - offset(left) * direction) * direction;\n}\n/**\n * Gets an array of steps between each value.\n *\n * @example\n * // returns [1, 9]\n * getStepsBetweenValues([10, 11, 20]);\n */ function $faa2e61a3361514f$var$getStepsBetweenValues(values) {\n    return values.slice(0, -1).map((value, index)=>values[index + 1] - value\n    );\n}\n/**\n * Verifies the minimum steps between all values is greater than or equal\n * to the expected minimum steps.\n *\n * @example\n * // returns false\n * hasMinStepsBetweenValues([1,2,3], 2);\n *\n * @example\n * // returns true\n * hasMinStepsBetweenValues([1,2,3], 1);\n */ function $faa2e61a3361514f$var$hasMinStepsBetweenValues(values, minStepsBetweenValues) {\n    if (minStepsBetweenValues > 0) {\n        const stepsBetweenValues = $faa2e61a3361514f$var$getStepsBetweenValues(values);\n        const actualMinStepsBetweenValues = Math.min(...stepsBetweenValues);\n        return actualMinStepsBetweenValues >= minStepsBetweenValues;\n    }\n    return true;\n} // https://github.com/tmcw-up-for-adoption/simple-linear-scale/blob/master/index.js\nfunction $faa2e61a3361514f$var$linearScale(input, output) {\n    return (value)=>{\n        if (input[0] === input[1] || output[0] === output[1]) return output[0];\n        const ratio = (output[1] - output[0]) / (input[1] - input[0]);\n        return output[0] + ratio * (value - input[0]);\n    };\n}\nfunction $faa2e61a3361514f$var$getDecimalCount(value) {\n    return (String(value).split('.')[1] || '').length;\n}\nfunction $faa2e61a3361514f$var$roundValue(value, decimalCount) {\n    const rounder = Math.pow(10, decimalCount);\n    return Math.round(value * rounder) / rounder;\n}\nconst $faa2e61a3361514f$export$be92b6f5f03c0fe9 = $faa2e61a3361514f$export$472062a354075cee;\nconst $faa2e61a3361514f$export$13921ac0cc260818 = $faa2e61a3361514f$export$105594979f116971;\nconst $faa2e61a3361514f$export$9a58ef0d7ad3278c = $faa2e61a3361514f$export$a5cf38a7a000fe77;\nconst $faa2e61a3361514f$export$6521433ed15a34db = $faa2e61a3361514f$export$2c1b491743890dec;\n\n\n\n\nexport {$faa2e61a3361514f$export$ef72632d7b901f97 as createSliderScope, $faa2e61a3361514f$export$472062a354075cee as Slider, $faa2e61a3361514f$export$105594979f116971 as SliderTrack, $faa2e61a3361514f$export$a5cf38a7a000fe77 as SliderRange, $faa2e61a3361514f$export$2c1b491743890dec as SliderThumb, $faa2e61a3361514f$export$be92b6f5f03c0fe9 as Root, $faa2e61a3361514f$export$13921ac0cc260818 as Track, $faa2e61a3361514f$export$9a58ef0d7ad3278c as Range, $faa2e61a3361514f$export$6521433ed15a34db as Thumb};\n//# sourceMappingURL=index.mjs.map\n","'use client';\n\nimport * as React from 'react';\nimport * as SliderPrimitive from '@radix-ui/react-slider';\n\nimport { cn, setDisplayName } from '@/helpers/utils';\n\nconst Slider = React.forwardRef<\n\tReact.ElementRef<typeof SliderPrimitive.Root>,\n\tReact.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n\t<SliderPrimitive.Root\n\t\tref={ref}\n\t\tclassName={cn('relative flex w-full touch-none select-none items-center', className)}\n\t\t{...props}\n\t>\n\t\t<SliderPrimitive.Track\n\t\t\tclassName={cn(\n\t\t\t\t'relative h-1.5 w-full grow rounded-full bg-zinc-400/10',\n\t\t\t\t'dark:before:pointer-events-none dark:before:absolute dark:before:-inset-[1px] dark:before:rounded-full dark:before:transition-all',\n\t\t\t\t'dark:before:shadow-[0px_-1px_0px_0px_hsl(var(--zinc-400)_/_15%)_inset,_inset_0px_1px_2px_0px_rgba(0,0,0,0.55)]',\n\t\t\t)}\n\t\t>\n\t\t\t<SliderPrimitive.Range\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'absolute h-full rounded-full bg-brand-400/80',\n\t\t\t\t\t'dark:before:pointer-events-none dark:before:absolute dark:before:-inset-[1px] dark:before:rounded-full dark:before:transition-all',\n\t\t\t\t\t'dark:before:shadow-[inset_0px_-1px_0px_0px_hsl(var(--brand-200)_/_20%),_inset_0px_1px_2px_0px_rgba(0,0,0,0.55)]',\n\t\t\t\t)}\n\t\t\t/>\n\t\t</SliderPrimitive.Track>\n\t\t<SliderPrimitive.Thumb\n\t\t\tclassName={cn(\n\t\t\t\t'block h-4 w-4 rounded-full border border-zinc-700 bg-zinc-700 shadow transition-colors',\n\t\t\t\t'focus-visible:outline-none focus-visible:ring-0 disabled:pointer-events-none disabled:opacity-50',\n\t\t\t\t'shadow-[0px_0px_0px_1px_rgba(9,9,11,0.07),0px_2px_2px_0px_rgba(9,9,11,0.05)] dark:shadow-[0px_0px_0px_1px_rgba(255,255,255,0.03)]',\n\t\t\t\t'dark:before:inset-px dark:before:rounded-full',\n\t\t\t\t'dark:before:pointer-events-none dark:before:absolute dark:before:shadow-[0px_2px_8px_0px_hsl(var(--zinc-900)),_0px_1px_0px_0px_hsl(var(--zinc-400)_/_20%)_inset]',\n\t\t\t)}\n\t\t/>\n\t</SliderPrimitive.Root>\n));\nsetDisplayName(Slider, SliderPrimitive.Root.displayName);\n\nexport { Slider };\n","'use client';\n\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\n\nimport { MicrophoneIcon } from '@heroicons/react/20/solid';\nimport { useGcodeCommand } from '@/app/_hooks/toolhead';\nimport { twJoin } from 'tailwind-merge';\nimport { DotFilledIcon } from '@radix-ui/react-icons';\nimport { Spinner } from '@/components/common/spinner';\nimport { SciChartSurface } from 'scichart';\nimport { useTopMenu } from '@/app/topmenu';\nimport { RealtimeAnalysisChart, useRealtimeAnalysisChart } from '@/app/analysis/realtime-analysis-chart';\nimport { PuzzlePieceIcon } from '@heroicons/react/24/outline';\nimport Link from 'next/link';\nimport { trpc } from '@/utils/trpc';\nimport { Macro, MacroRecording, MacroRecordingSettings } from '@/zods/analysis';\nimport * as uuid from 'uuid';\nimport { toast } from 'sonner';\nimport { useRouter } from 'next/navigation';\nimport { getLogger } from '@/app/_helpers/logger';\nimport { PencilRuler } from 'lucide-react';\nimport { Slider } from '@/components/ui/slider';\nimport { Input } from '@/components/ui/input';\nimport { UseTRPCMutationOptions } from '@trpc/react-query/shared';\n\nSciChartSurface.configure({\n\twasmUrl: '/configure/scichart2d.wasm',\n\tdataUrl: '/configure/scichart2d.data',\n});\n\nconst TARGET_OSC_TIME = 500;\n\nconst useOscillator = (G: ReturnType<typeof useGcodeCommand>, isEnabled: boolean = false) => {\n\tconst [frequency, setFrequency] = useState(0);\n\tconst frequencyRef = useRef(frequency);\n\tfrequencyRef.current = frequency;\n\tconst [axis, setAxis] = useState<'x' | 'y' | 'a' | 'b'>('x');\n\tconst axisRef = useRef(axis);\n\taxisRef.current = axis;\n\tconst isOscillating = useRef(false);\n\tconst isEnabledRef = useRef(isEnabled);\n\tisEnabledRef.current = isEnabled;\n\n\tconst oscillate = useCallback(async () => {\n\t\tif (frequencyRef.current <= 0) {\n\t\t\treturn;\n\t\t}\n\t\t// time to do a full oscillation (250ms t_seq)\n\t\tconst oscTime = 500 / frequencyRef.current;\n\t\t// aim for TARGET_OSC_TIME to allow for relatively fast updates\n\t\tconst macroTime = Math.floor(Math.max(250, TARGET_OSC_TIME - (TARGET_OSC_TIME % oscTime)));\n\t\tisOscillating.current = true;\n\t\tconst direction = axisRef.current === 'a' ? '1,1' : axisRef.current === 'b' ? '1,-1' : axisRef.current;\n\t\tconst beforeGcode = new Date().getTime();\n\t\ttry {\n\t\t\tawait G`\n\t\t\tOSCILLATE FREQ=${frequencyRef.current} TIME=${macroTime / 1000} AXIS=${direction}\n\t\t\t`;\n\t\t\tconst gcodeDuration = new Date().getTime() - beforeGcode;\n\t\t\tisOscillating.current = false;\n\t\t\tif (frequencyRef.current > 0 && isEnabledRef.current && gcodeDuration > macroTime / 2) {\n\t\t\t\toscillate();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tisOscillating.current = false;\n\t\t\tgetLogger().error('Failed to oscillate', e);\n\t\t\ttoast.error('Failed to oscillate', {\n\t\t\t\tdescription: `\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p>An error occurred while trying to oscillate the printer:</p>\n\t\t\t\t\t\t<pre class=\"text-wrap mt-4 text-rose-400 font-medium whitespace-pre-wrap\">${e instanceof Error ? e.message : e instanceof String ? e : 'Unknown error'}</pre>\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t});\n\t\t}\n\t}, [G]);\n\tuseEffect(() => {\n\t\tif (frequency > 0 && !isOscillating.current && isEnabled) {\n\t\t\toscillate();\n\t\t}\n\t}, [oscillate, frequency, isEnabled]);\n\n\treturn { frequency, setFrequency, axis, setAxis } as const;\n};\n\nconst macroRecordingMutationOptions: Parameters<typeof trpc.analysis.saveRecording.useMutation>[0] = {\n\tonError(error, variables) {\n\t\tgetLogger().error('Failed to save macro sequence recording', {\n\t\t\terror,\n\t\t\tvariables: { ...variables, psd: 'removed from log..' },\n\t\t});\n\t},\n};\n\nexport const Analysis = () => {\n\tconst router = useRouter();\n\tconst [adxl, setAdxl] = useState<MacroRecordingSettings['accelerometer']>(undefined);\n\tconst {\n\t\tisChartEnabled,\n\t\tsetIsChartEnabled,\n\t\tchartProps,\n\t\tpsds,\n\t\tcurrentAccelerometer,\n\t\tcurrentAccelerometerHardwareName,\n\t} = useRealtimeAnalysisChart(adxl);\n\tconst [macros] = trpc.analysis.getMacros.useSuspenseQuery({ limit: 10 });\n\tconst { mutateAsync: mutateRecordingAsync } = trpc.analysis.saveRecording.useMutation(macroRecordingMutationOptions);\n\n\tconst [isRecording, setIsRecording] = useState(false);\n\tconst [isMacroRunning, setIsMacroRunning] = useState(false);\n\tconst G = useGcodeCommand();\n\n\tconst { frequency, setFrequency, axis, setAxis } = useOscillator(G, isChartEnabled && !isMacroRunning);\n\n\tconst runMacro = useCallback(\n\t\t<T extends (...args: Parameters<T>) => Promise<any>>(macro: T, ...args: Parameters<T>) =>\n\t\t\tasync () => {\n\t\t\t\tsetFrequency(0);\n\t\t\t\tsetIsMacroRunning(true);\n\t\t\t\tsetIsChartEnabled(true);\n\t\t\t\ttry {\n\t\t\t\t\tawait macro(...args);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tgetLogger().error(`Macro run failed`, e);\n\t\t\t\t\ttoast.error('Macro failed', {\n\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\te instanceof Error\n\t\t\t\t\t\t\t\t? e.message\n\t\t\t\t\t\t\t\t: e instanceof String\n\t\t\t\t\t\t\t\t\t? e\n\t\t\t\t\t\t\t\t\t: 'An unknown error occurred while running the macro',\n\t\t\t\t\t});\n\t\t\t\t} finally {\n\t\t\t\t\tsetIsMacroRunning(false);\n\t\t\t\t\tsetIsRecording(false);\n\t\t\t\t\tsetIsChartEnabled(false);\n\t\t\t\t}\n\t\t\t},\n\t\t[setFrequency, setIsChartEnabled],\n\t);\n\n\tconst MacroIcon = useMemo(\n\t\t() =>\n\t\t\tisRecording ? (\n\t\t\t\t<DotFilledIcon className=\"h-4 w-4 scale-150 text-red-400\" />\n\t\t\t) : isMacroRunning ? (\n\t\t\t\t<Spinner noMargin={true} className=\"h-4 w-4\" />\n\t\t\t) : (\n\t\t\t\t<PuzzlePieceIcon className=\"h-4 w-4\" />\n\t\t\t),\n\t\t[isMacroRunning, isRecording],\n\t);\n\n\tconst buildMacro = useCallback(\n\t\t(macro: Macro) =>\n\t\t\trunMacro(async () => {\n\t\t\t\tconst macroRunId = uuid.v4();\n\t\t\t\tconst mutations: Promise<any>[] = [];\n\t\t\t\tconst sequences = macro.sequences.map((sequence) => async () => {\n\t\t\t\t\tconst startTs = new Date().getTime();\n\t\t\t\t\tsetAdxl(sequence.recording?.accelerometer);\n\t\t\t\t\tif (sequence.recording?.capturePSD) {\n\t\t\t\t\t\tawait psds.startAccumulation();\n\t\t\t\t\t\tsetIsRecording(true);\n\t\t\t\t\t}\n\t\t\t\t\tawait G`\n\t\t\t\t\t\t${sequence.gcode}\n\t\t\t\t\t\tM400\n\t\t\t\t\t`;\n\t\t\t\t\tif (sequence.recording?.capturePSD) {\n\t\t\t\t\t\tconst psd = await psds.stopAccumulation();\n\t\t\t\t\t\tsetIsRecording(false);\n\t\t\t\t\t\tmutations.push(\n\t\t\t\t\t\t\tmutateRecordingAsync({\n\t\t\t\t\t\t\t\trecording: {\n\t\t\t\t\t\t\t\t\tid: uuid.v4(),\n\t\t\t\t\t\t\t\t\tmacroRecordingRunId: macroRunId,\n\t\t\t\t\t\t\t\t\tmacroId: macro.id,\n\t\t\t\t\t\t\t\t\tsequenceId: sequence.id,\n\t\t\t\t\t\t\t\t\tstartTimeStamp: startTs,\n\t\t\t\t\t\t\t\t\tendTimeStamp: new Date().getTime(),\n\t\t\t\t\t\t\t\t\tpsd,\n\t\t\t\t\t\t\t\t\tname: sequence.name,\n\t\t\t\t\t\t\t\t\taccelerometer: currentAccelerometer,\n\t\t\t\t\t\t\t\t\trecordingHardwareName: currentAccelerometerHardwareName,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tawait sequences.reduce((p, f) => p.then(f), Promise.resolve());\n\t\t\t\tconst macroRunToast = toast.loading('Saving recordings...', {\n\t\t\t\t\tdescription: 'Please wait for recordings to be saved.',\n\t\t\t\t});\n\t\t\t\ttry {\n\t\t\t\t\tawait Promise.all(mutations);\n\t\t\t\t\ttoast.success('Macro run completed', {\n\t\t\t\t\t\tid: macroRunToast,\n\t\t\t\t\t\tdescription: `Macro \"${macro.name}\" completed successfully`,\n\t\t\t\t\t\taction: {\n\t\t\t\t\t\t\tlabel: 'View Result',\n\t\t\t\t\t\t\tonClick: () => router.push(`/analysis/macros/${macro.id}/recordings`), // Todo fix a view of the actual result graph.\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\ttoast.error('Macro run failed', {\n\t\t\t\t\t\tid: macroRunToast,\n\t\t\t\t\t\tdescription: `An error occurred while saving macro result data for \"${macro.name}\"`,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}),\n\t\t[G, mutateRecordingAsync, psds, currentAccelerometer, currentAccelerometerHardwareName, router, runMacro],\n\t);\n\n\tuseTopMenu(\n\t\t'analysis',\n\t\tuseCallback(\n\t\t\t(Menu) => (\n\t\t\t\t<>\n\t\t\t\t\t<Menu.MenubarMenu>\n\t\t\t\t\t\t<Menu.MenubarTrigger className=\"flex-nowrap space-x-2 whitespace-nowrap text-nowrap\">\n\t\t\t\t\t\t\t<MicrophoneIcon className={twJoin('h-4 w-4', isChartEnabled && 'text-brand-400')} />{' '}\n\t\t\t\t\t\t\t<span className=\"hidden lg:inline\">Stream</span>\n\t\t\t\t\t\t</Menu.MenubarTrigger>\n\t\t\t\t\t\t<Menu.MenubarContent onCloseAutoFocus={(e) => e.preventDefault()}>\n\t\t\t\t\t\t\t<Menu.MenubarItem\n\t\t\t\t\t\t\t\tdisabled={isChartEnabled || isMacroRunning}\n\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\tsetIsChartEnabled(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tStart\n\t\t\t\t\t\t\t</Menu.MenubarItem>\n\t\t\t\t\t\t\t<Menu.MenubarItem\n\t\t\t\t\t\t\t\tdisabled={!isChartEnabled || isMacroRunning}\n\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\tsetIsChartEnabled(false);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tStop\n\t\t\t\t\t\t\t</Menu.MenubarItem>\n\t\t\t\t\t\t</Menu.MenubarContent>\n\t\t\t\t\t</Menu.MenubarMenu>\n\t\t\t\t\t<Menu.MenubarMenu>\n\t\t\t\t\t\t<Menu.MenubarTrigger className=\"flex-nowrap space-x-2 whitespace-nowrap text-nowrap\">\n\t\t\t\t\t\t\t<PencilRuler className=\"size-4\" /> <span className=\"hidden lg:inline\">Tools</span>\n\t\t\t\t\t\t</Menu.MenubarTrigger>\n\t\t\t\t\t\t<Menu.MenubarContent onCloseAutoFocus={(e) => e.preventDefault()}>\n\t\t\t\t\t\t\t<Menu.MenubarItem\n\t\t\t\t\t\t\t\tdisabled={isMacroRunning}\n\t\t\t\t\t\t\t\tonSelect={runMacro(async () => {\n\t\t\t\t\t\t\t\t\tawait G`MAYBE_HOME`;\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tHome Printer\n\t\t\t\t\t\t\t</Menu.MenubarItem>\n\t\t\t\t\t\t\t<Menu.MenubarSeparator />\n\n\t\t\t\t\t\t\t<Menu.MenubarSub>\n\t\t\t\t\t\t\t\t<Menu.MenubarSubTrigger>Oscillator</Menu.MenubarSubTrigger>\n\t\t\t\t\t\t\t\t<Menu.MenubarSubContent>\n\t\t\t\t\t\t\t\t\t<Menu.MenubarRadioGroup value={axis} onValueChange={(e) => setAxis(e as 'x' | 'y' | 'a' | 'b')}>\n\t\t\t\t\t\t\t\t\t\t<Menu.MenubarRadioItem\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"x\"\n\t\t\t\t\t\t\t\t\t\t\tclassName={twJoin(axis === 'x' && frequency > 0 && 'font-semibold text-brand-400')}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tOscillate in X\n\t\t\t\t\t\t\t\t\t\t</Menu.MenubarRadioItem>\n\t\t\t\t\t\t\t\t\t\t<Menu.MenubarRadioItem\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"y\"\n\t\t\t\t\t\t\t\t\t\t\tclassName={twJoin(axis === 'y' && frequency > 0 && 'font-semibold text-brand-400')}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tOscillate in Y\n\t\t\t\t\t\t\t\t\t\t</Menu.MenubarRadioItem>\n\t\t\t\t\t\t\t\t\t\t<Menu.MenubarRadioItem\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"a\"\n\t\t\t\t\t\t\t\t\t\t\tclassName={twJoin(axis === 'a' && frequency > 0 && 'font-semibold text-brand-400')}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tOscillate in A\n\t\t\t\t\t\t\t\t\t\t</Menu.MenubarRadioItem>\n\t\t\t\t\t\t\t\t\t\t<Menu.MenubarRadioItem\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"b\"\n\t\t\t\t\t\t\t\t\t\t\tclassName={twJoin(axis === 'b' && frequency > 0 && 'font-semibold text-brand-400')}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tOscillate in B\n\t\t\t\t\t\t\t\t\t\t</Menu.MenubarRadioItem>\n\t\t\t\t\t\t\t\t\t</Menu.MenubarRadioGroup>\n\t\t\t\t\t\t\t\t\t<Menu.MenubarSeparator />\n\t\t\t\t\t\t\t\t\t<div className=\"min-w-48 p-4\">\n\t\t\t\t\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mt-4\"\n\t\t\t\t\t\t\t\t\t\t\tmax={200}\n\t\t\t\t\t\t\t\t\t\t\tvalue={[frequency]}\n\t\t\t\t\t\t\t\t\t\t\tonValueChange={(val) => setFrequency(val[0])}\n\t\t\t\t\t\t\t\t\t\t\tstep={0.1}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<h3 className=\"mt-4 text-center text-2xl font-medium tracking-tight\">\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tsize={1}\n\t\t\t\t\t\t\t\t\t\t\t\tmax={200}\n\t\t\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\t\t\tonKeyUp={(e) => e.stopPropagation()}\n\t\t\t\t\t\t\t\t\t\t\t\tonKeyDown={(e) => e.stopPropagation()}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"m-0 inline min-w-0 border-none bg-transparent p-0 text-right font-mono text-3xl font-medium tracking-tight\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={frequency.toFixed(1)}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: frequency.toFixed(1).length + 'rem' }}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setFrequency(parseFloat(e.target.value))}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\tHz\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Menu.MenubarSubContent>\n\t\t\t\t\t\t\t</Menu.MenubarSub>\n\t\t\t\t\t\t</Menu.MenubarContent>\n\t\t\t\t\t</Menu.MenubarMenu>\n\t\t\t\t\t<Menu.MenubarMenu>\n\t\t\t\t\t\t<Menu.MenubarTrigger className=\"flex-nowrap space-x-2 whitespace-nowrap text-nowrap\">\n\t\t\t\t\t\t\t{MacroIcon} <span className=\"hidden lg:inline\">Macros</span>\n\t\t\t\t\t\t</Menu.MenubarTrigger>\n\t\t\t\t\t\t<Menu.MenubarContent onCloseAutoFocus={(e) => e.preventDefault()}>\n\t\t\t\t\t\t\t{macros.result?.map((macro) => (\n\t\t\t\t\t\t\t\t<Menu.MenubarItem key={macro.id} disabled={isMacroRunning} onSelect={buildMacro(macro)}>\n\t\t\t\t\t\t\t\t\t{macro.name}\n\t\t\t\t\t\t\t\t</Menu.MenubarItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t<Menu.MenubarSeparator />\n\t\t\t\t\t\t\t<Menu.MenubarItem disabled={isMacroRunning} asChild={true}>\n\t\t\t\t\t\t\t\t<Link href=\"/analysis/macros\">View all macros</Link>\n\t\t\t\t\t\t\t</Menu.MenubarItem>\n\t\t\t\t\t\t\t<Menu.MenubarSeparator />\n\t\t\t\t\t\t\t<Menu.MenubarItem disabled={true}>Abort</Menu.MenubarItem>\n\t\t\t\t\t\t</Menu.MenubarContent>\n\t\t\t\t\t</Menu.MenubarMenu>\n\t\t\t\t</>\n\t\t\t),\n\t\t\t[\n\t\t\t\tisChartEnabled,\n\t\t\t\tisMacroRunning,\n\t\t\t\trunMacro,\n\t\t\t\tfrequency,\n\t\t\t\taxis,\n\t\t\t\tMacroIcon,\n\t\t\t\tmacros.result,\n\t\t\t\tsetIsChartEnabled,\n\t\t\t\tG,\n\t\t\t\tsetAxis,\n\t\t\t\tsetFrequency,\n\t\t\t\tbuildMacro,\n\t\t\t],\n\t\t),\n\t);\n\n\treturn <RealtimeAnalysisChart {...chartProps} />;\n};\n","import { cn } from '@/helpers/utils';\n\nfunction Skeleton({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n\treturn <div className={cn('animate-pulse rounded-md bg-zinc-400/10', className)} {...props} />;\n}\n\nexport { Skeleton };\n","import { Card } from '@/components/common/card';\nimport { FullLoadScreen } from '@/components/common/full-load-screen';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { twJoin } from 'tailwind-merge';\nexport default function Loading() {\n\t// Or a custom loading skeleton component\n\treturn (\n\t\t<div className=\"h-full p-4 @container\">\n\t\t\t<div className=\"flex max-h-full min-h-full flex-col space-y-4 @container\">\n\t\t\t\t<div className=\"grid grid-cols-1 gap-4 @screen-lg:grid-cols-3\">\n\t\t\t\t\t<Card className=\"flex max-h-32 min-h-32 overflow-hidden @screen-lg:max-h-72 @screen-lg:min-h-72\">\n\t\t\t\t\t\t<h3 className=\"text-md absolute left-0 right-0 top-0 flex items-center space-x-2 p-4 font-semibold\">\n\t\t\t\t\t\t\t<div className={twJoin('flex-none rounded-full bg-yellow-400/10 p-1 text-yellow-400')}>\n\t\t\t\t\t\t\t\t<div className=\"h-2 w-2 rounded-full bg-current\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Skeleton className=\"h-4 w-32\" />\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<FullLoadScreen className=\"\" />\n\t\t\t\t\t</Card>\n\t\t\t\t\t<Card className=\"flex max-h-32 min-h-32 overflow-hidden @screen-lg:max-h-72 @screen-lg:min-h-72\">\n\t\t\t\t\t\t<h3 className=\"text-md absolute left-0 right-0 top-0 flex items-center space-x-2 p-4 font-semibold\">\n\t\t\t\t\t\t\t<div className={twJoin('flex-none rounded-full bg-sky-400/10 p-1 text-sky-400')}>\n\t\t\t\t\t\t\t\t<div className=\"h-2 w-2 rounded-full bg-current\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Skeleton className=\"h-4 w-32\" />\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<FullLoadScreen className=\"\" />\n\t\t\t\t\t</Card>\n\t\t\t\t\t<Card className=\"flex max-h-32 min-h-32 overflow-hidden @screen-lg:max-h-72 @screen-lg:min-h-72\">\n\t\t\t\t\t\t<h3 className=\"text-md absolute left-0 right-0 top-0 flex items-center space-x-2 p-4 font-semibold\">\n\t\t\t\t\t\t\t<div className={twJoin('flex-none rounded-full bg-rose-400/10 p-1 text-rose-400')}>\n\t\t\t\t\t\t\t\t<div className=\"h-2 w-2 rounded-full bg-current\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Skeleton className=\"h-4 w-32\" />\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<FullLoadScreen className=\"\" />\n\t\t\t\t\t</Card>\n\t\t\t\t</div>\n\t\t\t\t<Card className=\"relative flex flex-1 overflow-hidden\">\n\t\t\t\t\t<FullLoadScreen className=\"absolute inset-0\" />\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","'use client';\nimport React from 'react';\nimport { Analysis } from '@/app/analysis/analysis';\nimport { Spinner } from '@/components/common/spinner';\nimport { NoSSR } from '@/components/common/no-ssr';\nimport Loading from '@/app/analysis/loading';\n\nexport default function Page() {\n\treturn (\n\t\t<NoSSR fallback={<Loading />}>\n\t\t\t<div className=\"h-full p-4 @container\">\n\t\t\t\t<Analysis />\n\t\t\t\t{/* <BeltTension /> */}\n\t\t\t</div>\n\t\t</NoSSR>\n\t);\n}\n","import { useCallback, useEffect, useRef } from 'react';\n\n/**\n * Usage:\n *\n * const clickedSave = createSignal<Doc>();\n *\n * clickedSave(doc => {\n *   // do something to save the doc, or when the doc is saved\n * })\n *\n * clickedSave(doc);\n */\nexport interface SignalListener<T> {\n\t(event: T): void;\n}\nexport interface SignalUnsubscriber {\n\t(): void;\n}\nexport interface SignalSubscriber<T> {\n\t(listener: SignalListener<T>): SignalUnsubscriber;\n}\nexport interface SignalDispatcher<T> {\n\t(event: T): void;\n}\nexport type Signal<T> = SignalSubscriber<T> & SignalDispatcher<T>;\nexport type SignalReturn = SignalUnsubscriber & void;\n\nexport function useNewSignal<T = void>(): Signal<T> {\n\tconst subscribers = useRef(new Set<SignalListener<T>>());\n\treturn useCallback((eventOrListener: any): any => {\n\t\tif (typeof eventOrListener === 'function') {\n\t\t\tsubscribers.current.add(eventOrListener);\n\t\t\treturn () => {\n\t\t\t\tsubscribers.current.delete(eventOrListener);\n\t\t\t};\n\t\t} else {\n\t\t\tsubscribers.current.forEach((listener) => listener(eventOrListener));\n\t\t}\n\t}, []);\n}\n\nexport function useSignal<T = void>(signal: Signal<T>, listener: SignalListener<T>): void {\n\tuseEffect(() => {\n\t\tconst unsubscribe = signal(listener);\n\t\treturn unsubscribe;\n\t}, [signal, listener]);\n}\n","'use client';\n\nimport * as React from 'react';\nimport { CheckIcon, ChevronRightIcon, DotFilledIcon } from '@radix-ui/react-icons';\nimport * as MenubarPrimitive from '@radix-ui/react-menubar';\n\nimport { cn, setDisplayName } from '@/helpers/utils';\n\nconst MenubarMenu = MenubarPrimitive.Menu;\n\nconst MenubarGroup = MenubarPrimitive.Group;\n\nconst MenubarPortal = MenubarPrimitive.Portal;\n\nconst MenubarSub = MenubarPrimitive.Sub;\n\nconst MenubarRadioGroup = MenubarPrimitive.RadioGroup;\n\nconst Menubar = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.Root>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n\t<MenubarPrimitive.Root\n\t\tref={ref}\n\t\tclassName={cn('flex items-center space-x-1 rounded-md shadow-sm', className)}\n\t\t{...props}\n\t/>\n));\nsetDisplayName(Menubar, MenubarPrimitive.Root.displayName);\n\nconst MenubarTrigger = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.Trigger>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n\t<MenubarPrimitive.Trigger\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none data-[state=open]:bg-accent data-[state=open]:text-accent-foreground focus:bg-accent focus:text-accent-foreground',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t/>\n));\nsetDisplayName(MenubarTrigger, MenubarPrimitive.Trigger.displayName);\n\nconst MenubarSubTrigger = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n\t\tinset?: boolean;\n\t}\n>(({ className, inset, children, ...props }, ref) => (\n\t<MenubarPrimitive.SubTrigger\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent data-[state=open]:text-accent-foreground focus:bg-accent focus:text-accent-foreground',\n\t\t\tinset && 'pl-8',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t>\n\t\t{children}\n\t\t<ChevronRightIcon className=\"ml-auto h-4 w-4\" />\n\t</MenubarPrimitive.SubTrigger>\n));\nsetDisplayName(MenubarSubTrigger, MenubarPrimitive.SubTrigger.displayName);\n\nconst MenubarSubContent = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.SubContent>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n\t<MenubarPrimitive.SubContent\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t/>\n));\nsetDisplayName(MenubarSubContent, MenubarPrimitive.SubContent.displayName);\n\nconst MenubarContent = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.Content>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(({ className, align = 'start', alignOffset = -4, sideOffset = 8, ...props }, ref) => (\n\t<MenubarPrimitive.Portal>\n\t\t<MenubarPrimitive.Content\n\t\t\tref={ref}\n\t\t\talign={align}\n\t\t\talignOffset={alignOffset}\n\t\t\tsideOffset={sideOffset}\n\t\t\tclassName={cn(\n\t\t\t\t'z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\t{...props}\n\t\t/>\n\t</MenubarPrimitive.Portal>\n));\nsetDisplayName(MenubarContent, MenubarPrimitive.Content.displayName);\n\nconst MenubarItem = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.Item>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n\t\tinset?: boolean;\n\t}\n>(({ className, inset, ...props }, ref) => (\n\t<MenubarPrimitive.Item\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground',\n\t\t\tinset && 'pl-8',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t/>\n));\nsetDisplayName(MenubarItem, MenubarPrimitive.Item.displayName);\n\nconst MenubarCheckboxItem = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n\t<MenubarPrimitive.CheckboxItem\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground',\n\t\t\tclassName,\n\t\t)}\n\t\tchecked={checked}\n\t\t{...props}\n\t>\n\t\t<span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n\t\t\t<MenubarPrimitive.ItemIndicator>\n\t\t\t\t<CheckIcon className=\"h-4 w-4\" />\n\t\t\t</MenubarPrimitive.ItemIndicator>\n\t\t</span>\n\t\t{children}\n\t</MenubarPrimitive.CheckboxItem>\n));\nsetDisplayName(MenubarCheckboxItem, MenubarPrimitive.CheckboxItem.displayName);\n\nconst MenubarRadioItem = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.RadioItem>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n\t<MenubarPrimitive.RadioItem\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t>\n\t\t<span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n\t\t\t<MenubarPrimitive.ItemIndicator>\n\t\t\t\t<DotFilledIcon className=\"h-4 w-4 fill-current\" />\n\t\t\t</MenubarPrimitive.ItemIndicator>\n\t\t</span>\n\t\t{children}\n\t</MenubarPrimitive.RadioItem>\n));\nsetDisplayName(MenubarRadioItem, MenubarPrimitive.RadioItem.displayName);\n\nconst MenubarLabel = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.Label>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n\t\tinset?: boolean;\n\t}\n>(({ className, inset, ...props }, ref) => (\n\t<MenubarPrimitive.Label\n\t\tref={ref}\n\t\tclassName={cn('px-2 py-1.5 text-sm font-semibold', inset && 'pl-8', className)}\n\t\t{...props}\n\t/>\n));\nsetDisplayName(MenubarLabel, MenubarPrimitive.Label.displayName);\n\nconst MenubarSeparator = React.forwardRef<\n\tReact.ElementRef<typeof MenubarPrimitive.Separator>,\n\tReact.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n\t<MenubarPrimitive.Separator ref={ref} className={cn('-mx-1 my-1 h-px bg-muted', className)} {...props} />\n));\nsetDisplayName(MenubarSeparator, MenubarPrimitive.Separator.displayName);\n\nconst MenubarShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {\n\treturn <span className={cn('ml-auto text-xs tracking-widest text-muted-foreground', className)} {...props} />;\n};\nMenubarShortcut.displayname = 'MenubarShortcut';\n\nexport {\n\tMenubar,\n\tMenubarMenu,\n\tMenubarTrigger,\n\tMenubarContent,\n\tMenubarItem,\n\tMenubarSeparator,\n\tMenubarLabel,\n\tMenubarCheckboxItem,\n\tMenubarRadioGroup,\n\tMenubarRadioItem,\n\tMenubarPortal,\n\tMenubarSubContent,\n\tMenubarSubTrigger,\n\tMenubarGroup,\n\tMenubarSub,\n\tMenubarShortcut,\n};\n","import { XMarkIcon, Bars3Icon, BookOpenIcon } from '@heroicons/react/24/outline';\nimport { motion } from 'framer-motion';\nimport React, { createContext, useCallback, useContext, useEffect, useState } from 'react';\nimport { twJoin } from 'tailwind-merge';\nimport Image from 'next/image';\nimport logoWhite from '@/public/logo-white.svg';\nimport { Signal, useNewSignal, useSignal } from '@/app/_helpers/signal';\nimport * as Menu from '@/components/ui/menubar';\nimport Link from 'next/link';\nimport { CircleHelp } from 'lucide-react';\n\ntype MenuId = Nominal<string, 'MenuId'>;\ntype MenuEntryRenderer = (menu: typeof Menu) => React.ReactNode;\ntype RegisterMenu = (id: MenuId, renderFn: MenuEntryRenderer) => void;\ntype UnregisterMenu = (id: MenuId) => void;\ntype MenusChangedSignal = Signal<void>;\ntype MenuOptions = {\n\tid: MenuId;\n\trender: MenuEntryRenderer;\n};\ntype MenusMap = Map<MenuId, MenuOptions>;\ntype MenuBarContextValue = { registerMenu: RegisterMenu; unregisterMenu: UnregisterMenu; changed: MenusChangedSignal };\ntype TopMenuProps = {\n\tsidebarOpen: boolean;\n\tsetSidebarOpen: (open: boolean) => void;\n\tmenus: React.MutableRefObject<MenusMap>;\n\tmenusChanged: MenusChangedSignal;\n};\n\nconst MenuBarContext = createContext<MenuBarContextValue>({\n\tregisterMenu: () => {\n\t\tthrow new Error('No menu registered in context');\n\t},\n\tunregisterMenu: () => {\n\t\tthrow new Error('No menu registered in context');\n\t},\n\tchanged: () => {\n\t\treturn () => {};\n\t},\n});\n\nexport const useMenuBarProvider = () => {\n\tconst menus = React.useRef<MenusMap>(new Map());\n\tconst menusChanged = useNewSignal() satisfies MenusChangedSignal;\n\tconst registerMenu = useCallback(\n\t\t(id: MenuId, renderFn: MenuEntryRenderer) => {\n\t\t\tif (menus.current.has(id) && renderFn === menus.current.get(id)?.render) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconsole.log('registering', id);\n\t\t\tmenus.current = new Map(menus.current).set(id, { render: renderFn, id: id });\n\t\t\tmenusChanged();\n\t\t},\n\t\t[menusChanged],\n\t);\n\n\tconst unregisterMenu = useCallback(\n\t\t(id: MenuId) => {\n\t\t\tconsole.log('unregistering', id);\n\t\t\tmenus.current.delete(id);\n\t\t\tmenusChanged();\n\t\t},\n\t\t[menusChanged],\n\t);\n\n\treturn {\n\t\ttopMenuProps: { menus, menusChanged },\n\t\tproviderProps: { registerMenu, unregisterMenu, changed: menusChanged } satisfies MenuBarContextValue,\n\t};\n};\n\nexport const MenuBarProvider: React.FC<React.PropsWithChildren<MenuBarContextValue>> = (props) => {\n\treturn <MenuBarContext.Provider value={props}>{props.children}</MenuBarContext.Provider>;\n};\n\nexport const useTopMenu = (id: string, renderReactCallback: MenuEntryRenderer) => {\n\tconst { registerMenu, unregisterMenu } = useContext(MenuBarContext);\n\tuseEffect(() => {\n\t\tregisterMenu(id as MenuId, renderReactCallback);\n\t\treturn () => unregisterMenu(id as MenuId);\n\t}, [id, registerMenu, renderReactCallback, unregisterMenu]);\n};\n\nexport const TopMenu: React.FC<TopMenuProps> = ({ sidebarOpen, setSidebarOpen, menus, menusChanged }) => {\n\tconst [menu, setMenu] = useState(Array.from(menus.current.values()));\n\tuseSignal(\n\t\tmenusChanged,\n\t\tuseCallback(() => {\n\t\t\tsetMenu(Array.from(menus.current.values()));\n\t\t}, [menus]),\n\t);\n\tconst mobileMenuButton = (\n\t\t<button\n\t\t\tonClick={() => setSidebarOpen(true)}\n\t\t\tclassName=\"inline-flex items-center justify-center rounded-md p-2 text-zinc-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 focus:ring-offset-zinc-800\"\n\t\t>\n\t\t\t<span className=\"sr-only\">Open main menu</span>\n\t\t\t{sidebarOpen ? (\n\t\t\t\t<XMarkIcon className={twJoin('block', 'h-5 w-5')} aria-hidden=\"true\" />\n\t\t\t) : (\n\t\t\t\t<Bars3Icon className={twJoin('block', 'h-5 w-5')} aria-hidden=\"true\" />\n\t\t\t)}\n\t\t</button>\n\t);\n\treturn (\n\t\t<motion.div\n\t\t\tclassName={twJoin(\n\t\t\t\t'fixed inset-0 z-50 flex h-14 items-center justify-between gap-12 transition lg:left-72 lg:z-30',\n\t\t\t\t'border-b border-zinc-900/10 backdrop-blur-sm dark:border-white/10 dark:backdrop-blur lg:left-72',\n\t\t\t\t!sidebarOpen && 'backdrop-blur-sm dark:backdrop-blur lg:left-72',\n\t\t\t\tsidebarOpen ? 'bg-background' : 'bg-background/80 dark:bg-background/50',\n\t\t\t)}\n\t\t>\n\t\t\t<div className=\"mx-auto flex-1\">\n\t\t\t\t<div className=\"flex h-16 items-center px-4 lg:justify-between\">\n\t\t\t\t\t<div className=\"flex flex-1 items-center justify-between space-x-4 lg:hidden\">\n\t\t\t\t\t\t<div className=\"flex h-16 shrink-0 items-center\">\n\t\t\t\t\t\t\t<Image width={160} height={40} className=\"h-8 w-auto\" src={logoWhite} alt=\"Workflow\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{menus.current.size === 0 && mobileMenuButton}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Menu.Menubar className=\"lg:flex-1\">\n\t\t\t\t\t\t{menus.current.size > 0 &&\n\t\t\t\t\t\t\tArray.from(menus.current.values()).map(({ id, render }) => (\n\t\t\t\t\t\t\t\t<React.Fragment key={id}>{render(Menu)}</React.Fragment>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t<Menu.MenubarSeparator className=\"flex-1 bg-transparent\" />\n\t\t\t\t\t\t<Menu.MenubarMenu>\n\t\t\t\t\t\t\t<Menu.MenubarTrigger className=\"flex-nowrap space-x-2 whitespace-nowrap text-nowrap\">\n\t\t\t\t\t\t\t\t<CircleHelp className=\"size-4\" /> <span className=\"hidden lg:inline\">Help</span>\n\t\t\t\t\t\t\t</Menu.MenubarTrigger>\n\t\t\t\t\t\t\t<Menu.MenubarContent onCloseAutoFocus={(e) => e.preventDefault()}>\n\t\t\t\t\t\t\t\t<Menu.MenubarItem asChild={true}>\n\t\t\t\t\t\t\t\t\t<Link href=\"https://os.ratrig.com/docs/introduction\" target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\t\t\t\t\t\tDocs\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Menu.MenubarItem>\n\t\t\t\t\t\t\t\t<Menu.MenubarItem asChild={true}>\n\t\t\t\t\t\t\t\t\t<Link href=\"https://github.com/sponsors/miklschmidt\" target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\t\t\t\t\t\tDonate\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Menu.MenubarItem>\n\t\t\t\t\t\t\t</Menu.MenubarContent>\n\t\t\t\t\t\t</Menu.MenubarMenu>\n\n\t\t\t\t\t\t<Menu.MenubarMenu>\n\t\t\t\t\t\t\t<Menu.MenubarTrigger asChild={true} className=\"flex-nowrap whitespace-nowrap text-nowrap lg:hidden\">\n\t\t\t\t\t\t\t\t{mobileMenuButton}\n\t\t\t\t\t\t\t</Menu.MenubarTrigger>\n\t\t\t\t\t\t</Menu.MenubarMenu>\n\t\t\t\t\t</Menu.Menubar>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</motion.div>\n\t);\n};\n","import { cva } from 'class-variance-authority';\nimport React from 'react';\n\nconst cardVariants = cva([\n\t'relative rounded-lg  bg-white dark:bg-zinc-900/60',\n\t'shadow-[0px_0px_0px_1px_rgba(9,9,11,0.07),0px_2px_2px_0px_rgba(9,9,11,0.05)] dark:shadow-[0px_0px_0px_1px_rgba(255,255,255,0.05)]',\n\t'dark:before:-inset-px dark:before:rounded-xl',\n\t'dark:before:pointer-events-none dark:before:absolute dark:before:shadow-[0px_2px_8px_0px_rgba(0,_0,_0,_0.20),_0px_1px_0px_0px_rgba(255,_255,_255,_0.07)_inset]',\n]);\n\ntype CardProps = React.PropsWithChildren<{\n\tclassName?: string;\n}>;\n\nexport const Card: React.FC<CardProps> = (props) => {\n\treturn <div className={cardVariants({ className: props.className })}>{props.children}</div>;\n};\n","import * as React from 'react';\n\nimport { cn, setDisplayName } from '@/helpers/utils';\n\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(({ className, type, ...props }, ref) => {\n\treturn (\n\t\t<input\n\t\t\ttype={type}\n\t\t\tclassName={cn(\n\t\t\t\t'flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors',\n\t\t\t\t'file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground',\n\t\t\t\t'focus:border-brand-400/70 focus:outline-none focus:ring-1 focus:ring-transparent disabled:cursor-not-allowed disabled:opacity-50',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\tref={ref}\n\t\t\t{...props}\n\t\t/>\n\t);\n});\nsetDisplayName(Input, 'Input');\n\nexport { Input };\n","import { z } from 'zod';\nimport { Endstop } from '@/zods/hardware';\nimport { PrinterAxis } from '@/zods/motion';\nimport type { SerializedPartialPrinterConfiguration } from '@/zods/printer-configuration';\nimport type { SerializedPartialToolheadConfiguration } from '@/zods/toolhead';\n\nexport const xEndstopOptions = (\n\tconfig?: SerializedPartialPrinterConfiguration | null,\n\ttoolheadConfig?: SerializedPartialToolheadConfiguration | null,\n): z.infer<typeof Endstop>[] => {\n\tconst endstops: z.infer<typeof Endstop>[] = [];\n\tif (toolheadConfig?.toolboard != null) {\n\t\tendstops.push({ id: 'endstop-toolboard' as const, title: 'Physical Endstop (toolboard)' });\n\t}\n\tif (toolheadConfig?.axis === PrinterAxis.x) {\n\t\tendstops.push({ id: 'endstop' as const, title: 'Physical Endstop' });\n\t\tendstops.push({ id: 'sensorless' as const, title: 'Sensorless Homing' });\n\t}\n\treturn endstops;\n};\n\nexport const defaultXEndstop = { id: 'endstop' as const, title: 'Physical Endstop' };\n\nexport const yEndstopOptions = (\n\tconfig?: SerializedPartialPrinterConfiguration | null,\n\ttoolheadConfig?: SerializedPartialToolheadConfiguration | null,\n): z.infer<typeof Endstop>[] => [\n\t{ id: 'endstop' as const, title: 'Physical Endstop' },\n\t{ id: 'sensorless' as const, title: 'Sensorless Homing' },\n];\n","import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n\treturn twMerge(clsx(inputs));\n}\n\nexport function setDisplayName(Component: React.ComponentType<any>, name: string | undefined) {\n\t(Component as any).displayName = name;\n}\n","import { ToolheadHelper } from '@/helpers/toolhead';\nimport { deserializeStepper } from '@/utils/serialization';\nimport { useRecoilCallback, useRecoilValue } from 'recoil';\nimport { useMemo, useRef, useState } from 'react';\nimport { PrinterRailState } from '@/recoil/printer';\nimport { PrinterAxis } from '@/zods/motion';\nimport { LoadablePrinterToolheadsState, PrinterToolheadState, PrinterToolheadsState } from '@/recoil/toolhead';\nimport { BaseToolheadConfiguration, ToolheadConfiguration, ToolNumber, ToolOrAxis } from '@/zods/toolhead';\nimport { defaultXEndstop } from '@/data/endstops';\nimport { hotendFanOptions, partFanOptions } from '@/data/fans';\n\nexport const useToolhead = (toolOrAxis: ToolOrAxis | PrinterAxis | undefined) => {\n\tconst toolheadConfigs = useRecoilValue(PrinterToolheadsState);\n\tconst toolhead = useMemo(() => {\n\t\tif (toolOrAxis == null) {\n\t\t\treturn null;\n\t\t}\n\t\tconst toolheads = toolheadConfigs?.filter(Boolean).map((th) => new ToolheadHelper(th));\n\t\tconst th = toolheads?.find(\n\t\t\t(th) => th.getTool() === toolOrAxis || th.getMotionAxis() === toolOrAxis || th.getExtruderAxis() === toolOrAxis,\n\t\t);\n\t\treturn th;\n\t}, [toolOrAxis, toolheadConfigs]);\n\treturn toolhead;\n};\n\nexport const useToolheads = () => {\n\tconst toolheadConfigs = useRecoilValue(PrinterToolheadsState);\n\tconst toolheads = useMemo(() => {\n\t\treturn toolheadConfigs?.filter(Boolean).map((th) => new ToolheadHelper(th));\n\t}, [toolheadConfigs]);\n\treturn toolheads;\n};\n\ntype MaybeToolhead<T extends boolean> = T extends true ? ToolheadHelper<any> : ToolheadHelper<any> | null;\n\nexport const useToolheadConfiguration = <T extends boolean = true>(\n\ttoolOrAxis: ToolOrAxis | PrinterAxis | undefined,\n\terrorIfNotExist: T = true as T,\n) => {\n\tconst toolheadConfigs = useRecoilValue(LoadablePrinterToolheadsState);\n\tconst toolheadConfigsRef = useRef(toolheadConfigs);\n\tif (toolheadConfigsRef.current !== toolheadConfigs && toolheadConfigs.length > 0) {\n\t\ttoolheadConfigsRef.current = toolheadConfigs.slice();\n\t}\n\tconst toolhead = useMemo(() => {\n\t\tconst toolheads = toolheadConfigsRef.current?.filter(Boolean).map((th) => new ToolheadHelper(th));\n\t\tconst th = toolheads?.find(\n\t\t\t(th) => th.getTool() === toolOrAxis || th.getMotionAxis() === toolOrAxis || th.getExtruderAxis() === toolOrAxis,\n\t\t);\n\t\tif (th == null && errorIfNotExist) {\n\t\t\tthrow new Error(`Toolhead with number or axis ${toolOrAxis} not found`);\n\t\t}\n\t\treturn th ?? null;\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [errorIfNotExist, toolOrAxis, toolheadConfigsRef.current]);\n\tconst [hasManuallySelectedThermistor, setHasManuallySelectedThermistor] = useState(false);\n\n\tconst setToolhead = useRecoilCallback(\n\t\t({ set, snapshot }) =>\n\t\t\tasync (th: ToolheadConfiguration<any>) => {\n\t\t\t\tconst helper = new ToolheadHelper(th);\n\t\t\t\tconst currentConfig = await snapshot.getPromise(PrinterToolheadState(helper.getTool()));\n\t\t\t\tif (currentConfig == null) {\n\t\t\t\t\tthrow new Error(`Toolhead ${helper.getToolCommand()} not found`);\n\t\t\t\t}\n\t\t\t\tconst current = new ToolheadHelper(currentConfig);\n\t\t\t\tif (th.extruder.id != current.getExtruder().id) {\n\t\t\t\t\tif (th.extruder.stepper != null) {\n\t\t\t\t\t\tconst stepper = deserializeStepper(th.extruder.stepper);\n\t\t\t\t\t\tif (stepper != null) {\n\t\t\t\t\t\t\tset(PrinterRailState(helper.getExtruderAxis()), (rail) => {\n\t\t\t\t\t\t\t\treturn rail == null\n\t\t\t\t\t\t\t\t\t? null\n\t\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t\t...rail,\n\t\t\t\t\t\t\t\t\t\t\tstepper: stepper.id,\n\t\t\t\t\t\t\t\t\t\t\tcurrent: th.extruder.current ?? stepper.maxPeakCurrent * 0.71,\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (th.toolboard?.id !== current.getToolboard()?.id) {\n\t\t\t\t\t// Reset toolboard dependent options\n\t\t\t\t\tif (th.toolboard == null && th.xEndstop.id === 'endstop-toolboard') {\n\t\t\t\t\t\tth.xEndstop = defaultXEndstop;\n\t\t\t\t\t}\n\t\t\t\t\tif (th.partFan?.id.endsWith('-toolboard')) {\n\t\t\t\t\t\tconst newFan = partFanOptions(null, th).shift();\n\t\t\t\t\t\tif (newFan == null) {\n\t\t\t\t\t\t\tthrow new Error(`No part fan options available for current T${th.toolNumber} configuration`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tth.partFan = newFan;\n\t\t\t\t\t}\n\t\t\t\t\tif (th.hotendFan?.id.endsWith('-toolboard')) {\n\t\t\t\t\t\tconst newFan = hotendFanOptions(null, th).shift();\n\t\t\t\t\t\tif (newFan == null) {\n\t\t\t\t\t\t\tthrow new Error(`No hotend fan options available for current T${th.toolNumber} configuration`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tth.hotendFan = newFan;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (th.thermistor !== current.getThermistor() && th.thermistor !== th.hotend.thermistor) {\n\t\t\t\t\tsetHasManuallySelectedThermistor(true);\n\t\t\t\t} else if (th.hotend.id != current.getHotend().id && !hasManuallySelectedThermistor) {\n\t\t\t\t\tth.thermistor = th.hotend.thermistor;\n\t\t\t\t}\n\t\t\t\tconst val = BaseToolheadConfiguration.extend({ toolNumber: ToolNumber })\n\t\t\t\t\t.nullable()\n\t\t\t\t\t.safeParse({ ...th, toolNumber: current.getTool() });\n\t\t\t\tif (val.success) {\n\t\t\t\t\tset(PrinterToolheadState(current.getTool()), val.data);\n\t\t\t\t}\n\t\t\t\treturn val;\n\t\t\t},\n\t\t[hasManuallySelectedThermistor],\n\t);\n\treturn {\n\t\ttoolhead: toolhead as MaybeToolhead<T>,\n\t\tsetToolhead,\n\t};\n};\n","export default {\"src\":\"/configure/_next/static/media/logo-white.6051cbc7.svg\",\"height\":443,\"width\":1728,\"blurWidth\":0,\"blurHeight\":0};","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","function $ae6933e535247d3d$export$7d15b64cf5a3a4c4(value, [min, max]) {\n    return Math.min(max, Math.max(min, value));\n}\n\n\n\n\nexport {$ae6933e535247d3d$export$7d15b64cf5a3a4c4 as clamp};\n//# sourceMappingURL=index.mjs.map\n","import {useRef as $8LvvK$useRef, useMemo as $8LvvK$useMemo} from \"react\";\n\n\nfunction $010c2913dbd2fe3d$export$5cae361ad82dce8b(value) {\n    const ref = $8LvvK$useRef({\n        value: value,\n        previous: value\n    }); // We compare values before making an update to ensure that\n    // a change has been made. This ensures the previous value is\n    // persisted correctly between renders.\n    return $8LvvK$useMemo(()=>{\n        if (ref.current.value !== value) {\n            ref.current.previous = ref.current.value;\n            ref.current.value = value;\n        }\n        return ref.current.previous;\n    }, [\n        value\n    ]);\n}\n\n\n\n\nexport {$010c2913dbd2fe3d$export$5cae361ad82dce8b as usePrevious};\n//# sourceMappingURL=index.mjs.map\n","export function _tagged_template_literal(strings, raw) {\n    if (!raw) raw = strings.slice(0);\n\n    return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));\n}\nexport { _tagged_template_literal as _ };\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f);else for(t in e)e[t]&&(n&&(n+=\" \"),n+=t);return n}export function clsx(){for(var e,t,f=0,n=\"\";f<arguments.length;)(e=arguments[f++])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import { clsx } from \"clsx\";\nconst falsyToString = (value)=>typeof value === \"boolean\" ? \"\".concat(value) : value === 0 ? \"0\" : value;\nexport const cx = clsx;\nexport const cva = (base, config)=>{\n    return (props)=>{\n        var ref;\n        if ((config === null || config === void 0 ? void 0 : config.variants) == null) return cx(base, props === null || props === void 0 ? void 0 : props.class, props === null || props === void 0 ? void 0 : props.className);\n        const { variants , defaultVariants  } = config;\n        const getVariantClassNames = Object.keys(variants).map((variant)=>{\n            const variantProp = props === null || props === void 0 ? void 0 : props[variant];\n            const defaultVariantProp = defaultVariants === null || defaultVariants === void 0 ? void 0 : defaultVariants[variant];\n            if (variantProp === null) return null;\n            const variantKey = falsyToString(variantProp) || falsyToString(defaultVariantProp);\n            return variants[variant][variantKey];\n        });\n        const propsWithoutUndefined = props && Object.entries(props).reduce((acc, param)=>{\n            let [key, value] = param;\n            if (value === undefined) {\n                return acc;\n            }\n            acc[key] = value;\n            return acc;\n        }, {});\n        const getCompoundVariantClassNames = config === null || config === void 0 ? void 0 : (ref = config.compoundVariants) === null || ref === void 0 ? void 0 : ref.reduce((acc, param1)=>{\n            let { class: cvClass , className: cvClassName , ...compoundVariantOptions } = param1;\n            return Object.entries(compoundVariantOptions).every((param)=>{\n                let [key, value] = param;\n                return Array.isArray(value) ? value.includes({\n                    ...defaultVariants,\n                    ...propsWithoutUndefined\n                }[key]) : ({\n                    ...defaultVariants,\n                    ...propsWithoutUndefined\n                })[key] === value;\n            }) ? [\n                ...acc,\n                cvClass,\n                cvClassName\n            ] : acc;\n        }, []);\n        return cx(base, getVariantClassNames, getCompoundVariantClassNames, props === null || props === void 0 ? void 0 : props.class, props === null || props === void 0 ? void 0 : props.className);\n    };\n};\n\n\n//# sourceMappingURL=index.mjs.map"],"names":["React","__webpack_require__","ForwardRef","forwardRef","title","titleId","props","svgRef","createElement","Object","assign","xmlns","viewBox","fill","ref","id","d","module","exports","strokeWidth","stroke","strokeLinecap","strokeLinejoin","Promise","resolve","then","bind","useGcodeCommand","executeGcode","useMoonrakerMutation","useCallback","command","args","result","forEach","arg","i","push","toString","gcode","join","gcodeRes","mutateAsync","script","console","log","SciChartSurface","configure","wasmUrl","dataUrl","useRealtimeAnalysisChart","toolheads","xSignalChart","ySignalChart","zSignalChart","psdChart","adxl","isChartEnabled","setIsChartEnabled","useState","useToolheads","controlBoard","useRecoilValue","ControlboardState","accelerometer","getYAccelerometerName","adxlHardwareName","name","getToolboard","usePSDChart","useADXLSignalChart","xSignalYAxis","data","current","yAxis","ySignalYAxis","zSignalYAxis","updateSignalChartRange","useDynamicAxisRange","psdYAxis","surface","yAxes","getById","PSD_CHART_AXIS_AMPLITUDE_ID","updatePsdChartRange","PSDChartMinimumYVisibleRange","fifo","useADXLFifoTensor","timeSinceLastPsd","useRef","Date","getTime","useEffect","psds","useAccumulatedPSD","elapsed","animationDS","animationSeries","x","clear","y","z","total","appendRange","res","frequencies","estimates","renderableSeries","runAnimation","MountainAnimation","duration","ease","easing","inOutCirc","dataSeries","NumberRange","powerRange","min","max","updatePsd","useBufferedPSD","sampleRate","onData","updateSignals","useBufferedADXLSignal","time","dX","detrendSignal","dY","dZ","dispose","all","array","timeData","xData","yData","zData","param","signalData","historyData","useTicker","useRealtimeADXL","sensor","enabled","onDataUpdate","useMemo","currentAccelerometer","currentAccelerometerHardwareName","chartProps","RealtimeAnalysisChart","jsx_runtime","jsxs","div","className","Card","h3","jsx","twJoin","span","SciChartReact","forwardProps","fallback","FullLoadScreen","PencilRuler","createLucideIcon","Z","key","$faa2e61a3361514f$var$PAGE_KEYS","$faa2e61a3361514f$var$ARROW_KEYS","$faa2e61a3361514f$var$BACK_KEYS","$faa2e61a3361514f$var$SLIDER_NAME","$faa2e61a3361514f$var$Collection","$faa2e61a3361514f$var$useCollection","$faa2e61a3361514f$var$createCollectionScope","react_collection_dist","B","$faa2e61a3361514f$var$createSliderContext","$faa2e61a3361514f$export$ef72632d7b901f97","react_context_dist","b","$faa2e61a3361514f$var$SliderProvider","$faa2e61a3361514f$var$useSliderContext","$faa2e61a3361514f$export$472062a354075cee","react","forwardedRef","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","value1","onValueChange","onValueCommit","inverted","sliderProps","slider","setSlider","composedRefs","react_compose_refs_dist","e","node","thumbRefs","Set","valueIndexToChangeRef","isFormControl","Boolean","closest","SliderOrientation","isHorizontal","$faa2e61a3361514f$var$SliderHorizontal","$faa2e61a3361514f$var$SliderVertical","values","setValues","react_use_controllable_state_dist","T","prop","defaultProp","onChange","_thumbs$valueIndexToC","thumbs","focus","valuesBeforeSlideStartRef","updateValues","atIndex","commit","decimalCount","String","split","length","snapToStep","$faa2e61a3361514f$var$roundValue","rounder","Math","pow","round","nextValue","number_dist","u","prevValues","nextValues","$faa2e61a3361514f$var$getNextSortedValues","sort","a","$faa2e61a3361514f$var$hasMinStepsBetweenValues","minStepsBetweenValues","stepsBetweenValues","slice","map","index","actualMinStepsBetweenValues","indexOf","hasChanged","scope","__scopeSlider","Provider","Slot","esm_extends","undefined","onPointerDown","primitive_dist","M","onSlideStart","closestIndex","$faa2e61a3361514f$var$getClosestValueIndex","distances","abs","closestDistance","onSlideMove","onSlideEnd","prevValue","onHomeKeyDown","onEndKeyDown","onStepKeyDown","event","direction","stepDirection","isPageKey","includes","isSkipKey","shiftKey","stepInDirection","$faa2e61a3361514f$var$BubbleInput","$faa2e61a3361514f$var$SliderOrientationProvider","$faa2e61a3361514f$var$useSliderOrientationContext","startEdge","endEdge","size","dir","rectRef","react_direction_dist","gm","isDirectionLTR","isSlidingFromLeft","getValueFromPointer","pointerPosition","rect","getBoundingClientRect","input","width","$faa2e61a3361514f$var$linearScale","left","$faa2e61a3361514f$var$SliderImpl","style","clientX","isBackKey","sliderRef","isSlidingFromBottom","height","top","clientY","context","react_primitive_dist","WV","onKeyDown","preventDefault","concat","target","setPointerCapture","pointerId","has","onPointerMove","hasPointerCapture","onPointerUp","releasePointerCapture","$faa2e61a3361514f$export$105594979f116971","trackProps","$faa2e61a3361514f$var$RANGE_NAME","$faa2e61a3361514f$export$a5cf38a7a000fe77","rangeProps","valuesCount","percentages","$faa2e61a3361514f$var$convertValueToPercentage","offsetStart","offsetEnd","$faa2e61a3361514f$var$THUMB_NAME","$faa2e61a3361514f$export$2c1b491743890dec","getItems","thumb","setThumb","findIndex","item","$faa2e61a3361514f$var$SliderThumbImpl","totalValues","thumbProps","react_use_size_dist","t","percent","label","orientationSize","thumbInBoundsOffset","$faa2e61a3361514f$var$getThumbInBoundsOffset","halfWidth","offset","add","delete","transform","position","ItemSlot","role","tabIndex","display","onFocus","inputProps","react_use_previous_dist","D","inputProto","window","HTMLInputElement","prototype","descriptor","getOwnPropertyDescriptor","setValue","set","Event","bubbles","call","dispatchEvent","percentPerStep","output","ratio","Slider","cn","setDisplayName","SliderPrimitive","displayName","useOscillator","G","isEnabled","frequency","setFrequency","frequencyRef","axis","setAxis","axisRef","isOscillating","isEnabledRef","oscillate","oscTime","macroTime","floor","TARGET_OSC_TIME","beforeGcode","gcodeDuration","getLogger","error","toast","description","Error","message","macroRecordingMutationOptions","onError","variables","psd","Analysis","router","useRouter","setAdxl","macros","trpc","analysis","getMacros","useSuspenseQuery","limit","mutateRecordingAsync","saveRecording","useMutation","isRecording","setIsRecording","isMacroRunning","setIsMacroRunning","runMacro","macro","MacroIcon","DotFilledIcon","Spinner","noMargin","PuzzlePieceIcon","buildMacro","macroRunId","uuid","mutations","sequences","sequence","startTs","recording","capturePSD","startAccumulation","stopAccumulation","macroRecordingRunId","macroId","sequenceId","startTimeStamp","endTimeStamp","recordingHardwareName","reduce","p","f","macroRunToast","loading","success","action","onClick","useTopMenu","Fragment","Menu","MenubarMenu","MenubarTrigger","MicrophoneIcon","MenubarContent","onCloseAutoFocus","MenubarItem","onSelect","MenubarSeparator","MenubarSub","MenubarSubTrigger","MenubarSubContent","MenubarRadioGroup","MenubarRadioItem","val","Input","type","onKeyUp","stopPropagation","toFixed","parseFloat","asChild","Link","href","Skeleton","Loading","Page","NoSSR","MenubarPrimitive","MenubarGroup","MenubarPortal","Menubar","inset","children","ChevronRightIcon","align","alignOffset","sideOffset","MenubarCheckboxItem","checked","CheckIcon","MenubarLabel","MenubarShortcut","displayname","MenuBarContext","createContext","registerMenu","unregisterMenu","changed","useMenuBarProvider","menus","Map","menusChanged","useNewSignal","subscribers","eventOrListener","listener","renderFn","get","render","topMenuProps","providerProps","MenuBarProvider","renderReactCallback","useContext","TopMenu","sidebarOpen","setSidebarOpen","menu","setMenu","Array","from","unsubscribe","signal","mobileMenuButton","button","XMarkIcon","aria-hidden","Bars3Icon","motion","Image","src","logoWhite","alt","CircleHelp","rel","cardVariants","cva","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","xEndstopOptions","config","toolheadConfig","endstops","toolboard","PrinterAxis","defaultXEndstop","_len","arguments","inputs","_key","twMerge","clsx","Component","toolheadConfigs","PrinterToolheadsState","filter","ToolheadHelper","th","useToolheadConfiguration","toolOrAxis","errorIfNotExist","LoadablePrinterToolheadsState","toolheadConfigsRef","toolhead","find","getTool","getMotionAxis","getExtruderAxis","hasManuallySelectedThermistor","setHasManuallySelectedThermistor","setToolhead","useRecoilCallback","snapshot","helper","currentConfig","getPromise","PrinterToolheadState","getToolCommand","extruder","getExtruder","stepper","deserializeStepper","PrinterRailState","rail","maxPeakCurrent","xEndstop","partFan","endsWith","newFan","partFanOptions","shift","toolNumber","hotendFan","hotendFanOptions","thermistor","getThermistor","hotend","getHotend","BaseToolheadConfiguration","extend","ToolNumber","nullable","safeParse","__webpack_exports__","getRandomValues","randomUUID","crypto","esm_browser_native","rnds8","Uint8Array","byteToHex","esm_browser_v4","options","buf","rnds","random","rng","unsafeStringify","arr","$ae6933e535247d3d$export$7d15b64cf5a3a4c4","$010c2913dbd2fe3d$export$5cae361ad82dce8b","react__WEBPACK_IMPORTED_MODULE_0__","previous","_tagged_template_literal","strings","raw","freeze","defineProperties","falsyToString","cx","n","r","isArray","base","variants","class","defaultVariants","getVariantClassNames","keys","variantProp","variant","defaultVariantProp","variantKey","propsWithoutUndefined","entries","acc","getCompoundVariantClassNames","compoundVariants","param1","cvClass","cvClassName","compoundVariantOptions","every"],"sourceRoot":""}