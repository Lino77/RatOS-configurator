{"version":3,"file":"static/chunks/app/analysis/macros/[id]/edit/page-6552e49a08f37b9f.js","mappings":"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","sources":["webpack://_N_E/ignored|/home/runner/work/RatOS-configurator/RatOS-configurator/src/node_modules/.pnpm/object-inspect@1.13.1/node_modules/object-inspect|./util.inspect","webpack://_N_E/?e1d4","webpack://_N_E/./helpers/logger.ts","webpack://_N_E/./zods/util.tsx","webpack://_N_E/./app/_helpers/logger.ts","webpack://_N_E/./app/analysis/macros/[id]/edit/edit.tsx","webpack://_N_E/./components/ui/button.tsx","webpack://_N_E/./components/ui/alert-dialog.tsx","webpack://_N_E/./helpers/trpc.ts","webpack://_N_E/./helpers/util.ts","webpack://_N_E/./moonraker/migrations.ts","webpack://_N_E/./moonraker/hooks.tsx","webpack://_N_E/./utils/trpc.ts","webpack://_N_E/./node_modules/.pnpm/@radix-ui+react-alert-dialog@1.0.5_@types+react-dom@18.0.11_@types+react@18.2.21_react-dom@18_qfnsdliex5jwekilq76e2fyamu/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","webpack://_N_E/<anon>"],"sourcesContent":["/* (ignored) */","import(/* webpackMode: \"eager\" */ \"/home/runner/work/RatOS-configurator/RatOS-configurator/src/app/analysis/macros/[id]/edit/edit.tsx\");\nimport(/* webpackMode: \"eager\" */ \"/home/runner/work/RatOS-configurator/RatOS-configurator/src/components/common/no-ssr.tsx\")","import { LoggerOptions } from 'pino';\n\nexport const globalPinoOpts: LoggerOptions = {\n\ttimestamp: true,\n\tlevel: process.env.NODE_ENV === 'development' ? 'debug' : 'info',\n};\n","import { z } from 'zod';\n\nexport const PinoLogLevel = z.enum(['trace', 'debug', 'info', 'warn', 'error', 'fatal']);\n\nexport const PinoLogEvent = z.object({\n\tts: z.number(),\n\tmessages: z.array(z.any()),\n\tbindings: z.array(z.record(z.string(), z.any())),\n\tlevel: z.object({\n\t\tlabel: PinoLogLevel,\n\t\tvalue: z.number(),\n\t}),\n});\n","import pino from 'pino';\nimport { globalPinoOpts } from '@/helpers/logger';\nimport { trpcClient } from '@/helpers/trpc';\nimport { PinoLogEvent } from '@/zods/util';\nimport { prettyFactory, write } from 'pino-pretty-browser';\n\nconst send = async function (level: pino.Level, logEvent: pino.LogEvent) {\n\ttrpcClient.clientLog.mutate({ level, logEvent: PinoLogEvent.parse(logEvent) });\n};\n\nlet logger: pino.Logger | null = null;\nexport const getLogger = () => {\n\tif (logger != null) {\n\t\treturn logger;\n\t}\n\tlogger = pino({\n\t\t...globalPinoOpts,\n\t\tbrowser: {\n\t\t\ttransmit: {\n\t\t\t\tsend,\n\t\t\t},\n\t\t},\n\t});\n\treturn logger;\n};\n","'use client';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { createMacroSchema } from '@/zods/analysis';\nimport { z } from 'zod';\nimport { trpc } from '@/utils/trpc';\nimport { MacroForm } from '@/app/analysis/macros/components/macro-form';\nimport { useForm } from 'react-hook-form';\nimport React, { useCallback, useState } from 'react';\nimport {\n\tAlertDialog,\n\tAlertDialogHeader,\n\tAlertDialogFooter,\n\tAlertDialogContent,\n\tAlertDialogTitle,\n\tAlertDialogDescription,\n\tAlertDialogCancel,\n\tAlertDialogAction,\n} from '@/components/ui/alert-dialog';\nimport { toast } from 'sonner';\nimport { getLogger } from '@/app/_helpers/logger';\nimport { ChevronLeft } from 'lucide-react';\nimport { Form } from '@/components/ui/form';\nimport Link from 'next/link';\nimport { useTopMenu } from '@/app/topmenu';\n\ninterface EditMacroProps {\n\tid: string;\n}\n\nexport const EditMacro: React.FC<EditMacroProps> = ({ id }) => {\n\tconst [isAlertVisible, setIsAlertVisible] = useState(false);\n\tconst [hasConfirmedRecordDeletion, setHasConfirmedRecordDeletion] = useState(false);\n\tconst [macro] = trpc.analysis.findMacro.useSuspenseQuery({ id: id });\n\tconst form = useForm<z.input<typeof createMacroSchema>>({\n\t\tdefaultValues: macro,\n\t\tresolver: zodResolver(createMacroSchema),\n\t});\n\tconst saveMacro = trpc.analysis.updateMacro.useMutation();\n\tconst submit = form.handleSubmit(async (data) => {\n\t\tconst result = await saveMacro.mutateAsync(data);\n\t\tif (result.result == null) {\n\t\t\tgetLogger().error('Failed to save macro', data);\n\t\t\ttoast.error('Failed to save macro', {\n\t\t\t\tdescription:\n\t\t\t\t\t\"An unknown error occurred and the macro seem to have disappeared from the database. This shouldn't happen. Please contact support.\",\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\ttoast.success('Macro updated!', {\n\t\t\tdescription: 'The changes to the macro was succesfully saved.',\n\t\t});\n\t\tform.reset(result.result);\n\t});\n\n\tuseTopMenu(\n\t\t'Analysis',\n\t\tuseCallback((Menu) => {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<Menu.MenubarMenu>\n\t\t\t\t\t\t<Menu.MenubarTrigger className=\"cursor-pointer\" asChild>\n\t\t\t\t\t\t\t<span onClick={() => window.history.back()}>\n\t\t\t\t\t\t\t\t<Menu.MenubarIcon Icon={ChevronLeft} />\n\t\t\t\t\t\t\t\t<span className=\"hidden lg:inline\">Cancel</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Menu.MenubarTrigger>\n\t\t\t\t\t\t<Menu.MenubarContent className=\"hidden\" />\n\t\t\t\t\t</Menu.MenubarMenu>\n\t\t\t\t</>\n\t\t\t);\n\t\t}, []),\n\t);\n\n\treturn (\n\t\t<Form {...form}>\n\t\t\t<MacroForm form={form} submit={hasConfirmedRecordDeletion ? submit : async () => setIsAlertVisible(true)} />\n\t\t\t<AlertDialog open={isAlertVisible}>\n\t\t\t\t<AlertDialogContent>\n\t\t\t\t\t<AlertDialogHeader>\n\t\t\t\t\t\t<AlertDialogTitle>Are you sure?</AlertDialogTitle>\n\t\t\t\t\t\t<AlertDialogDescription>\n\t\t\t\t\t\t\tThis action cannot be undone. This will permanently delete your previous recordings for this macro.\n\t\t\t\t\t\t</AlertDialogDescription>\n\t\t\t\t\t</AlertDialogHeader>\n\t\t\t\t\t<AlertDialogFooter>\n\t\t\t\t\t\t<AlertDialogCancel onClick={() => setIsAlertVisible(false)}>Cancel</AlertDialogCancel>\n\t\t\t\t\t\t<AlertDialogAction\n\t\t\t\t\t\t\tvariant=\"danger\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetHasConfirmedRecordDeletion(true);\n\t\t\t\t\t\t\t\tsetIsAlertVisible(false);\n\t\t\t\t\t\t\t\tsubmit();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tContinue\n\t\t\t\t\t\t</AlertDialogAction>\n\t\t\t\t\t</AlertDialogFooter>\n\t\t\t\t</AlertDialogContent>\n\t\t\t</AlertDialog>\n\t\t</Form>\n\t);\n};\n","import { Button, buttonVariants } from '@/components/common/button';\nimport { setDisplayName } from '@/helpers/utils';\n\nsetDisplayName(Button, 'Button');\n\nexport { Button, buttonVariants };\n","'use client';\n\nimport * as React from 'react';\nimport * as AlertDialogPrimitive from '@radix-ui/react-alert-dialog';\n\nimport { cn, setDisplayName } from '@/helpers/utils';\nimport { buttonVariants } from '@/components/ui/button';\nimport { ButtonProps, ButtonVariantProps } from '@/components/common/button';\n\nconst AlertDialog = AlertDialogPrimitive.Root;\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger;\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal;\n\nconst AlertDialogOverlay = React.forwardRef<\n\tReact.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n\tReact.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n\t<AlertDialogPrimitive.Overlay\n\t\tclassName={cn(\n\t\t\t'fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t\tref={ref}\n\t/>\n));\nsetDisplayName(AlertDialogOverlay, AlertDialogPrimitive.Overlay.displayName);\n\nconst AlertDialogContent = React.forwardRef<\n\tReact.ElementRef<typeof AlertDialogPrimitive.Content>,\n\tReact.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n\t<AlertDialogPortal>\n\t\t<AlertDialogOverlay />\n\t\t<AlertDialogPrimitive.Content\n\t\t\tref={ref}\n\t\t\tclassName={cn(\n\t\t\t\t'fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\t{...props}\n\t\t/>\n\t</AlertDialogPortal>\n));\nsetDisplayName(AlertDialogContent, AlertDialogPrimitive.Content.displayName);\n\nconst AlertDialogHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n\t<div className={cn('flex flex-col space-y-2 text-center sm:text-left', className)} {...props} />\n);\nAlertDialogHeader.displayName = 'AlertDialogHeader';\n\nconst AlertDialogFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n\t<div className={cn('flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2', className)} {...props} />\n);\nAlertDialogFooter.displayName = 'AlertDialogFooter';\n\nconst AlertDialogTitle = React.forwardRef<\n\tReact.ElementRef<typeof AlertDialogPrimitive.Title>,\n\tReact.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n\t<AlertDialogPrimitive.Title ref={ref} className={cn('text-lg font-semibold', className)} {...props} />\n));\nsetDisplayName(AlertDialogTitle, AlertDialogPrimitive.Title.displayName);\n\nconst AlertDialogDescription = React.forwardRef<\n\tReact.ElementRef<typeof AlertDialogPrimitive.Description>,\n\tReact.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n\t<AlertDialogPrimitive.Description ref={ref} className={cn('text-sm text-muted-foreground', className)} {...props} />\n));\nsetDisplayName(AlertDialogDescription, AlertDialogPrimitive.Description.displayName);\n\nconst AlertDialogAction = React.forwardRef(function AlertDialogActionComponent<T extends string>(\n\t{ className, ...props }: React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action> & ButtonVariantProps,\n\tref: React.ForwardedRef<HTMLButtonElement>,\n) {\n\treturn <AlertDialogPrimitive.Action ref={ref} className={cn(buttonVariants(props), className)} {...props} />;\n});\nsetDisplayName(AlertDialogAction, AlertDialogPrimitive.Action.displayName);\n\nconst AlertDialogCancel = React.forwardRef<\n\tReact.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n\tReact.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n\t<AlertDialogPrimitive.Cancel\n\t\tref={ref}\n\t\tclassName={cn(buttonVariants({ variant: 'outline' }), 'mt-2 sm:mt-0', className)}\n\t\t{...props}\n\t/>\n));\nsetDisplayName(AlertDialogCancel, AlertDialogPrimitive.Cancel.displayName);\n\nexport {\n\tAlertDialog,\n\tAlertDialogPortal,\n\tAlertDialogOverlay,\n\tAlertDialogTrigger,\n\tAlertDialogContent,\n\tAlertDialogHeader,\n\tAlertDialogFooter,\n\tAlertDialogTitle,\n\tAlertDialogDescription,\n\tAlertDialogAction,\n\tAlertDialogCancel,\n};\n","import { proxyClient, trpc } from '@/utils/trpc';\nexport { trpc, proxyClient as trpcClient };\n","'use client';\nexport const getHost = () => {\n\treturn process.env.NEXT_PUBLIC_KLIPPER_HOSTNAME != null && process.env.NEXT_PUBLIC_KLIPPER_HOSTNAME.trim() != ''\n\t\t? process.env.NEXT_PUBLIC_KLIPPER_HOSTNAME\n\t\t: typeof window !== 'undefined' && window.location?.hostname != null\n\t\t\t? window.location.hostname\n\t\t\t: null;\n};\n","/* eslint-disable no-console */\nimport { getHost } from '@/helpers/util';\nimport { MoonrakerDBItemResponse } from '@/moonraker/types';\n\ninterface Migration {\n\tversion: number;\n\tdescription: string;\n\tup: () => Promise<{ result: string }>;\n\tdown: () => Promise<{ result: string }>;\n}\n\nexport const migrations: Migration[] = [\n\t{\n\t\tversion: 1,\n\t\tdescription: \"Undo double JSON encoding of RatOS's data\",\n\t\tup: async () => {\n\t\t\tconst res = await window.fetch(`http://${getHost()}/server/database/item?namespace=RatOS`);\n\t\t\tif (res.ok) {\n\t\t\t\tconst data = (await res.json()) as\n\t\t\t\t\t| { result: MoonrakerDBItemResponse<{ [key: string]: unknown }> }\n\t\t\t\t\t| { error: { message: string } };\n\t\t\t\tif ('error' in data) {\n\t\t\t\t\tthrow new Error(data.error.message);\n\t\t\t\t}\n\t\t\t\tconst result: string[] = [];\n\t\t\t\tif (data.result.value == null) {\n\t\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t\t}\n\t\t\t\tfor await (const [key, value] of Object.entries(data.result.value)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst parsed = JSON.parse(value as any);\n\t\t\t\t\t\tconsole.log('Migrating', key, 'from', value, 'to', parsed);\n\t\t\t\t\t\tawait window.fetch(`http://${getHost()}/server/database/item`, {\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\tnamespace: 'RatOS',\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tvalue: parsed,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('Error migrating', key, value, 'clearing key');\n\t\t\t\t\t\tawait window.fetch(\n\t\t\t\t\t\t\t`http://${getHost()}/server/database/item?namespace=RatOS&key=${encodeURIComponent(key)}`,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmethod: 'DELETE',\n\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\t\tnamespace: 'RatOS',\n\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn { result: `Succesfully decoded ${result.length} keys.\\n${result.join('\\n')}` };\n\t\t\t} else {\n\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t}\n\t\t},\n\t\tdown: async () => {\n\t\t\t// drop table\n\t\t\tconst res = await window.fetch(`http://${getHost()}/server/database/item?namespace=RatOS`);\n\t\t\tif (res.ok) {\n\t\t\t\tconst data = (await res.json()) as\n\t\t\t\t\t| { result: MoonrakerDBItemResponse<{ [key: string]: unknown }> }\n\t\t\t\t\t| { error: { message: string } };\n\t\t\t\tif ('error' in data) {\n\t\t\t\t\tthrow new Error(data.error.message);\n\t\t\t\t}\n\t\t\t\tif (data.result.value == null) {\n\t\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t\t}\n\t\t\t\tconst result: string[] = [];\n\t\t\t\tfor await (const [key, value] of Object.entries(data.result.value)) {\n\t\t\t\t\tconst encoded = JSON.stringify(value as any);\n\t\t\t\t\tawait window.fetch(`http://${getHost()}/server/database/item`, {\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\tnamespace: 'RatOS',\n\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\tvalue: encoded,\n\t\t\t\t\t\t}),\n\t\t\t\t\t});\n\t\t\t\t\tresult.push(`Re-encoded ${key}`);\n\t\t\t\t}\n\t\t\t\treturn { result: `Succesfully re-encoded ${result.length} keys.\\n${result.join('\\n')}` };\n\t\t\t}\n\t\t\treturn { result: 'Nothing to migrate' };\n\t\t},\n\t},\n\t{\n\t\tversion: 2,\n\t\tdescription: 'Change caramba printers to v-core-4 / v-chonk',\n\t\tup: async () => {\n\t\t\tconst res = await window.fetch(`http://${getHost()}/server/database/item?namespace=RatOS`);\n\t\t\tif (res.ok) {\n\t\t\t\tconst data = (await res.json()) as\n\t\t\t\t\t| { result: MoonrakerDBItemResponse<{ [key: string]: unknown }> }\n\t\t\t\t\t| { error: { message: string } };\n\t\t\t\tif ('error' in data) {\n\t\t\t\t\tthrow new Error(data.error.message);\n\t\t\t\t}\n\t\t\t\tconst result: string[] = [];\n\t\t\t\tif (data.result.value == null) {\n\t\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t\t}\n\t\t\t\tfor await (const [key, value] of Object.entries(data.result.value)) {\n\t\t\t\t\tif (key === 'Printer' && typeof value === 'string') {\n\t\t\t\t\t\tconst migratedValue = value.replace(/caramba-chonk/g, 'v-chonk').replace(/caramba/g, 'v-core-4');\n\t\t\t\t\t\tif (migratedValue === value) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait window.fetch(`http://${getHost()}/server/database/item`, {\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\tnamespace: 'RatOS',\n\t\t\t\t\t\t\t\tkey: 'Printer',\n\t\t\t\t\t\t\t\tvalue: migratedValue,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresult.push(`Migrated ${value} to ${migratedValue}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn { result: `Succesfully migrated ${result.length} keys.\\n${result.join('\\n')}` };\n\t\t\t} else {\n\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t}\n\t\t},\n\t\tdown: async () => {\n\t\t\tconst res = await window.fetch(`http://${getHost()}/server/database/item?namespace=RatOS`);\n\t\t\tif (res.ok) {\n\t\t\t\tconst data = (await res.json()) as\n\t\t\t\t\t| { result: MoonrakerDBItemResponse<{ [key: string]: unknown }> }\n\t\t\t\t\t| { error: { message: string } };\n\t\t\t\tif ('error' in data) {\n\t\t\t\t\tthrow new Error(data.error.message);\n\t\t\t\t}\n\t\t\t\tconst result: string[] = [];\n\t\t\t\tif (data.result.value == null) {\n\t\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t\t}\n\t\t\t\tfor await (const [key, value] of Object.entries(data.result.value)) {\n\t\t\t\t\tif (key === 'Printer' && typeof value === 'string') {\n\t\t\t\t\t\tconst migratedValue = value.replace(/v-chonk/g, 'caramba-chonk').replace(/v-core-4/g, 'caramba');\n\t\t\t\t\t\tif (migratedValue === value) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait window.fetch(`http://${getHost()}/server/database/item`, {\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\tnamespace: 'RatOS',\n\t\t\t\t\t\t\t\tkey: 'Printer',\n\t\t\t\t\t\t\t\tvalue: migratedValue,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresult.push(`Migrated ${value} to ${migratedValue}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn { result: `Succesfully migrated ${result.length} keys.\\n${result.join('\\n')}` };\n\t\t\t} else {\n\t\t\t\treturn { result: 'Nothing to migrate' };\n\t\t\t}\n\t\t},\n\t},\n];\n\nexport const getCurrentVersion = async (): Promise<number> => {\n\tconst res = await window.fetch(`http://${getHost()}/server/database/item?namespace=RatOS&key=__db_version`);\n\tif (res.ok) {\n\t\tconst data = (await res.json()) as { result: MoonrakerDBItemResponse<number> } | { error: { message: string } };\n\t\tif ('error' in data) {\n\t\t\treturn 0;\n\t\t}\n\t\treturn data.result.value as number;\n\t}\n\treturn 0;\n};\n\nexport const setCurrentVersion = async (version: number) => {\n\tawait window.fetch(`http://${getHost()}/server/database/item`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tnamespace: 'RatOS',\n\t\t\tkey: '__db_version',\n\t\t\tvalue: version,\n\t\t}),\n\t});\n};\n\nlet isMigrating = false;\nexport const migrate = async (from: number, to: number) => {\n\tif (isMigrating) {\n\t\treturn console.log('Already migrating, ignoring..');\n\t}\n\tif (from === to) {\n\t\treturn console.log('Already at target version');\n\t}\n\tisMigrating = true;\n\ttry {\n\t\tconst migrationsToRun = migrations\n\t\t\t.filter((m) => m.version > from && m.version <= to)\n\t\t\t.sort((a, b) => (from <= to ? a.version - b.version : b.version - a.version));\n\t\tfor await (const migration of migrationsToRun) {\n\t\t\tconst result = await (from < to ? migration.up() : migration.down());\n\t\t\tconsole.log(`Migrated to version ${migration.version}: ${result.result}`);\n\t\t}\n\t\tawait setCurrentVersion(to);\n\t} finally {\n\t\tisMigrating = false;\n\t}\n};\n\nlet isMigrated = false;\nexport const migrateToLatest = async () => {\n\tif (isMigrated) {\n\t\treturn console.log('Already migrated, ignoring..');\n\t}\n\tconst currentVersion = await getCurrentVersion();\n\tconst latestVersion = Math.max(...migrations.map((m) => m.version));\n\tif (currentVersion === latestVersion) {\n\t\tconsole.log('Already at latest version');\n\t\treturn;\n\t}\n\tif (isMigrating) {\n\t\tconsole.log('Already migrating, ignoring..');\n\t\treturn;\n\t}\n\tconsole.log('Migrating to latest version...', currentVersion, latestVersion);\n\tawait migrate(currentVersion, latestVersion);\n\tisMigrated = true;\n\tconsole.log('Migration complete.');\n};\n","'use client';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { UseMutationOptions, UseQueryOptions, useMutation, useQuery } from '@tanstack/react-query';\nimport useWebSocket from 'react-use-websocket';\nimport { migrateToLatest } from '@/moonraker/migrations';\nimport type {\n\tInFlightRequestCallbacks,\n\tInFlightRequestTimeouts,\n\tJSONRPCResponse,\n\tMoonrakerStatus,\n\tMoonrakerSaveItemFn,\n\tMoonrakerNamespaces,\n\tMoonrakerDBItemResponse,\n\tMoonrakerGetItemFn,\n\tMoonrakerNamespaceKeys,\n\tMoonrakerDBValue,\n\tMoonrakerQueryFn,\n\tMoonrakerQueryKeys,\n\tMoonrakerQueryParams,\n\tMoonrakerQueryResult,\n\tMoonrakerMutationKeys,\n\tMoonrakerMutationParams,\n\tMoonrakerMutationResult,\n\tMoonrakerMutationFn,\n\tPrinterObjectKeys,\n\tPrinterObjectsMoonrakerQueryParams,\n\tPrinterObjectResult,\n\tJSONRPCResponseSuccess,\n} from '@/moonraker/types';\nimport { getHost } from '@/helpers/util';\nimport { merge } from 'ts-deepmerge';\nimport deepEqual from 'deep-equal';\nimport { getLogger } from '@/app/_helpers/logger';\n\nlet REQ_ID = 0;\n\nconst getWsURL = () => {\n\tconst host = getHost();\n\tif (host == null || host.trim() == '') {\n\t\treturn null;\n\t}\n\treturn `ws://${host}/websocket`;\n};\n\nconst subscriptions: { [key: number]: Partial<PrinterObjectsMoonrakerQueryParams> } = {};\n\ntype MoonrakerStatusUpdate = { [key in PrinterObjectKeys]: PrinterObjectResult<PrinterObjectKeys> };\n\ninterface MoonrakerHookOptions {\n\tonStatusUpdate?: (status: MoonrakerStatusUpdate) => void;\n\tpassThroughUpdateMethods?: string[];\n}\n\nexport const useMoonraker = (options?: MoonrakerHookOptions) => {\n\tconst inFlightRequests = useRef<InFlightRequestCallbacks>({});\n\tconst inFlightRequestTimeouts = useRef<InFlightRequestTimeouts>({});\n\tconst localSubscriptions = useRef<number[]>([]);\n\tconst onReadyCallbacks = useRef<{ resolve: () => void; reject: () => void }[]>([]);\n\tconst [wsUrl, setWsUrl] = useState(getWsURL());\n\tuseEffect(() => {\n\t\tsetWsUrl(getWsURL());\n\t}, []);\n\n\tconst containsSubscriptionUpdate = useCallback(\n\t\t(jsonMessage: JSONRPCResponse): jsonMessage is JSONRPCResponseSuccess => {\n\t\t\tif ('error' in jsonMessage) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (jsonMessage.method === 'notify_status_update' && jsonMessage.params != null) {\n\t\t\t\tconst res = jsonMessage.params[0] as MoonrakerStatusUpdate;\n\t\t\t\tif (res != null) {\n\t\t\t\t\tfor (const sub of localSubscriptions.current) {\n\t\t\t\t\t\tconst objects = subscriptions[sub];\n\t\t\t\t\t\tif (objects != null) {\n\t\t\t\t\t\t\tfor (const key in objects) {\n\t\t\t\t\t\t\t\tif (res[key as PrinterObjectKeys] != null) {\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t[],\n\t);\n\n\tconst { lastJsonMessage, sendJsonMessage, readyState } = useWebSocket<JSONRPCResponse>(wsUrl, {\n\t\tfilter: (message) => {\n\t\t\tif (moonrakerStatus !== 'connected') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tconst parsed = JSON.parse(message.data) as JSONRPCResponse;\n\t\t\t\tif (inFlightRequests.current[parsed.id] != null) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\toptions?.passThroughUpdateMethods?.length &&\n\t\t\t\t\t'method' in parsed &&\n\t\t\t\t\toptions.passThroughUpdateMethods.includes(parsed.method)\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t} catch (e) {\n\t\t\t\tgetLogger().warn({ e, messageData: message.data }, 'Filter: Failed to parse message');\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tonMessage: (message) => {\n\t\t\tif (options?.onStatusUpdate) {\n\t\t\t\ttry {\n\t\t\t\t\tconst parsed = JSON.parse(message.data) as JSONRPCResponse;\n\t\t\t\t\tif (containsSubscriptionUpdate(parsed)) {\n\t\t\t\t\t\tconst res = parsed.params[0] as MoonrakerStatusUpdate;\n\t\t\t\t\t\toptions.onStatusUpdate?.(res);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tgetLogger().warn({ e, messageData: message.data }, 'OnMessage: Failed to parse message');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tshouldReconnect: (closeEvent) => {\n\t\t\treturn true;\n\t\t},\n\t\treconnectAttempts: Infinity,\n\t\treconnectInterval: 3000,\n\t\tshare: true,\n\t});\n\tconst readyStateRef = useRef(readyState);\n\treadyStateRef.current = readyState;\n\tconst [moonrakerStatus, setMoonrakerStatus] = useState<null | MoonrakerStatus>(\n\t\treadyState === 1 ? 'connected' : 'connecting',\n\t);\n\n\tconst whenReady = useCallback((resolve: () => void, reject: () => void) => {\n\t\tif (readyStateRef.current === 1) {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tonReadyCallbacks.current.push({ resolve, reject });\n\t\t}\n\t}, []);\n\n\tconst isReady = useCallback(\n\t\t() =>\n\t\t\tnew Promise<void>((resolve, reject) => {\n\t\t\t\twhenReady(resolve, reject);\n\t\t\t}),\n\t\t[whenReady],\n\t);\n\tconst moonrakerQuery: MoonrakerQueryFn & MoonrakerMutationFn = useCallback(\n\t\tasync <Response = any,>(method: string, params: any = {}) => {\n\t\t\tconst id = ++REQ_ID;\n\t\t\tawait isReady();\n\t\t\treturn new Promise<Response>((resolve, reject) => {\n\t\t\t\tinFlightRequests.current[id] = (err, result) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn reject(err);\n\t\t\t\t\t}\n\t\t\t\t\tif (result && typeof result === 'object' && 'error' in result && result.error) {\n\t\t\t\t\t\treturn reject(result.error);\n\t\t\t\t\t}\n\t\t\t\t\tif (result == null) {\n\t\t\t\t\t\treturn reject(new Error('No result. Unknown response format.'));\n\t\t\t\t\t}\n\t\t\t\t\tresolve(result as Response);\n\t\t\t\t};\n\t\t\t\tlet timeout = 10 * 1000;\n\t\t\t\tif (method === 'printer.gcode.script') {\n\t\t\t\t\t// Allow 10 minutes for gcode macros.\n\t\t\t\t\ttimeout = 10 * 60 * 1000;\n\t\t\t\t}\n\t\t\t\tinFlightRequestTimeouts.current[id] = window.setTimeout(() => {\n\t\t\t\t\tinFlightRequests.current[id]?.(new Error('Request timed out'), null);\n\t\t\t\t\tdelete inFlightRequests.current[id];\n\t\t\t\t\tdelete inFlightRequestTimeouts.current[id];\n\t\t\t\t}, timeout); // 10 second timeout.\n\t\t\t\tsendJsonMessage({\n\t\t\t\t\tjsonrpc: '2.0',\n\t\t\t\t\tmethod,\n\t\t\t\t\tparams,\n\t\t\t\t\tid: id,\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t[isReady, sendJsonMessage],\n\t);\n\n\tconst subscribeToObject = useCallback(\n\t\tasync <TArgs extends [PrinterObjectKeys, ...PrinterObjectKeys[]]>(...args: TArgs) => {\n\t\t\tconst objects = Object.fromEntries(args.map((key) => [key, null])) as PrinterObjectsMoonrakerQueryParams;\n\t\t\tconst allSubscribedObjects = Object.assign(\n\t\t\t\t{},\n\t\t\t\tobjects,\n\t\t\t\t...Object.values(subscriptions).filter((v) => v != null),\n\t\t\t) as PrinterObjectsMoonrakerQueryParams;\n\t\t\tconst q = moonrakerQuery('printer.objects.subscribe' as 'printer.objects.query', {\n\t\t\t\tobjects: allSubscribedObjects,\n\t\t\t});\n\t\t\t// Capture request id we just generated;\n\t\t\tconst reqId = REQ_ID;\n\t\t\tsubscriptions[reqId] = objects;\n\t\t\tlocalSubscriptions.current.push(reqId);\n\n\t\t\tconst res = (await q).status as {\n\t\t\t\t[K in TArgs[number]]: PrinterObjectResult<K>;\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tres,\n\t\t\t\tunsuscribe: async () => {\n\t\t\t\t\tlocalSubscriptions.current = localSubscriptions.current.filter((v) => v !== reqId);\n\t\t\t\t\tif (subscriptions[reqId] == null) {\n\t\t\t\t\t\tdelete subscriptions[reqId];\n\t\t\t\t\t\tconst allSubscribedObjects = Object.assign(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\t...Object.values(subscriptions).filter((v) => v != null),\n\t\t\t\t\t\t) as PrinterObjectsMoonrakerQueryParams;\n\t\t\t\t\t\tawait moonrakerQuery('printer.objects.subscribe' as 'printer.objects.query', {\n\t\t\t\t\t\t\tobjects: allSubscribedObjects,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\t[moonrakerQuery],\n\t);\n\n\tconst saveItem = useCallback<MoonrakerSaveItemFn>(\n\t\tasync <Data,>(namespace: MoonrakerNamespaces, key: unknown, value: unknown) => {\n\t\t\tawait isReady();\n\t\t\treturn (await moonrakerQuery('server.database.post_item', {\n\t\t\t\tnamespace: namespace,\n\t\t\t\tkey,\n\t\t\t\tvalue: value,\n\t\t\t})) as Data;\n\t\t},\n\t\t[moonrakerQuery, isReady],\n\t);\n\n\tconst getItem = useCallback<MoonrakerGetItemFn>(\n\t\tasync <Data,>(namespace: MoonrakerNamespaces, key: unknown): Promise<Data | null> => {\n\t\t\tawait isReady();\n\t\t\ttry {\n\t\t\t\tconst result = await moonrakerQuery('server.database.get_item', {\n\t\t\t\t\tnamespace: namespace,\n\t\t\t\t\tkey,\n\t\t\t\t});\n\t\t\t\treturn (result?.value ?? null) as Data;\n\t\t\t} catch (e) {\n\t\t\t\tgetLogger().warn(e);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\t[moonrakerQuery, isReady],\n\t);\n\n\tuseEffect(() => {\n\t\tif (readyState === 1) {\n\t\t\t(async () => {\n\t\t\t\tawait migrateToLatest();\n\t\t\t\tonReadyCallbacks.current.forEach((cb) => cb.resolve());\n\t\t\t\tonReadyCallbacks.current = [];\n\t\t\t\tsetMoonrakerStatus('connected');\n\t\t\t})();\n\t\t} else {\n\t\t\tsetMoonrakerStatus('connecting');\n\t\t}\n\t}, [readyState]);\n\n\tuseEffect(() => {\n\t\tif (lastJsonMessage?.id && inFlightRequests.current[lastJsonMessage.id]) {\n\t\t\twindow.clearTimeout(inFlightRequestTimeouts.current[lastJsonMessage.id]);\n\t\t\tif ('error' in lastJsonMessage) {\n\t\t\t\tinFlightRequests.current[lastJsonMessage.id](new Error(lastJsonMessage.error.message), null);\n\t\t\t} else {\n\t\t\t\tinFlightRequests.current[lastJsonMessage.id](null, lastJsonMessage.result);\n\t\t\t}\n\t\t\tdelete inFlightRequestTimeouts.current[lastJsonMessage.id];\n\t\t\tdelete inFlightRequests.current[lastJsonMessage.id];\n\t\t}\n\t}, [lastJsonMessage]);\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tfor (const reqId in inFlightRequestTimeouts.current) {\n\t\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t\t\tdelete inFlightRequestTimeouts.current[reqId];\n\t\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t\t\tdelete inFlightRequests.current[reqId];\n\t\t\t}\n\t\t\tif (localSubscriptions.current.length > 0) {\n\t\t\t\tlocalSubscriptions.current.forEach((sub) => {\n\t\t\t\t\tdelete subscriptions[sub];\n\t\t\t\t});\n\t\t\t\tlocalSubscriptions.current = [];\n\t\t\t\tconst allSubscribedObjects = Object.assign(\n\t\t\t\t\t{},\n\t\t\t\t\t...Object.values(subscriptions).filter((v) => v != null),\n\t\t\t\t) as PrinterObjectsMoonrakerQueryParams;\n\t\t\t\tmoonrakerQuery('printer.objects.subscribe' as 'printer.objects.query', {\n\t\t\t\t\tobjects: Object.keys(allSubscribedObjects).length > 0 ? allSubscribedObjects : null,\n\t\t\t\t}).catch((e) => {\n\t\t\t\t\t// ignore\n\t\t\t\t});\n\t\t\t}\n\t\t\tonReadyCallbacks.current.forEach((cb) => cb.reject());\n\t\t\tonReadyCallbacks.current = [];\n\t\t};\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\treturn {\n\t\tquery: moonrakerQuery,\n\t\tsaveItem,\n\t\tgetItem,\n\t\tsubscribeToObject,\n\t\tstatus: moonrakerStatus,\n\t\tlastMessage: lastJsonMessage,\n\t\tisReady: readyState === 1,\n\t};\n};\n\nexport const useNamespacedItemQuery = <\n\tN extends MoonrakerNamespaces,\n\tK extends MoonrakerNamespaceKeys<N>,\n\tV extends MoonrakerDBValue<N, K>,\n>(\n\tnamespace: N,\n\tkey: K,\n\toptions?: Omit<UseQueryOptions<V, unknown, V, N[]>, 'queryKey' | 'queryFn'>,\n) => {\n\tconst { getItem } = useMoonraker();\n\treturn useQuery({\n\t\t...options,\n\t\tqueryKey: [namespace, key],\n\t\tqueryFn: async () => {\n\t\t\treturn getItem(namespace, key) as Promise<V>;\n\t\t},\n\t});\n};\n\nexport const useMoonrakerQuery = <\n\tK extends MoonrakerQueryKeys = MoonrakerQueryKeys,\n\tP extends MoonrakerQueryParams<K> = MoonrakerQueryParams<K>,\n\tO extends Omit<\n\t\tUseQueryOptions<MoonrakerQueryResult<K>, unknown, MoonrakerQueryResult<K>, K[]>,\n\t\t'queryKey' | 'queryFn'\n\t> = Omit<UseQueryOptions<MoonrakerQueryResult<K>, unknown, MoonrakerQueryResult<K>, K[]>, 'queryKey' | 'queryFn'>,\n>(\n\t...args: P extends void ? [K, O?] : [K, P, O?]\n) => {\n\tconst { query } = useMoonraker();\n\tconst options = args.length === 3 ? (args[2] as O) : (args[1] as O);\n\tconst params = args.length === 3 ? args[1] : undefined;\n\tconst key = args[0];\n\tconst passed = (args.length === 3 ? [key, params] : [key]) as P extends void ? [K] : [K, P];\n\treturn useQuery({\n\t\t...(options ?? {}),\n\t\tqueryKey: [args[0]],\n\t\tqueryFn: async () => {\n\t\t\treturn query(...passed) as Promise<MoonrakerQueryResult<K>>;\n\t\t},\n\t});\n};\n\nexport const useMoonrakerMutation = <\n\tK extends MoonrakerMutationKeys = MoonrakerMutationKeys,\n\tP extends MoonrakerMutationParams<K> = MoonrakerMutationParams<K>,\n\tO extends Omit<UseMutationOptions<MoonrakerMutationResult<K>, unknown, P, K[]>, 'mutationKey' | 'mutationFn'> = Omit<\n\t\tUseMutationOptions<MoonrakerMutationResult<K>, unknown, P, K[]>,\n\t\t'mutationKey' | 'mutationFn'\n\t>,\n>(\n\t...args: [K, O?]\n) => {\n\tconst { query } = useMoonraker();\n\tconst options = args[1];\n\tconst key = args[0];\n\treturn useMutation({\n\t\t...options,\n\t\tmutationKey: [args[0]],\n\t\tmutationFn: async (params: P) => {\n\t\t\tconst passed = (params ? [key, params] : [key]) as P extends void ? [K] : [K, P];\n\t\t\treturn query(...passed) as Promise<MoonrakerMutationResult<K>>;\n\t\t},\n\t});\n};\n\nexport const usePrinterObjectQuery = <TArgs extends [PrinterObjectKeys, ...PrinterObjectKeys[]]>(...args: TArgs) => {\n\tconst { query } = useMoonraker();\n\treturn useQuery({\n\t\tqueryKey: args,\n\t\tqueryFn: async () => {\n\t\t\tconst objects = Object.fromEntries(args.map((key) => [key, null])) as PrinterObjectsMoonrakerQueryParams;\n\t\t\treturn (await query('printer.objects.query', { objects })).status as {\n\t\t\t\t[K in TArgs[number]]: PrinterObjectResult<K>;\n\t\t\t};\n\t\t},\n\t});\n};\n\nexport const usePrinterObjectSubscription = <\n\tTArgs extends [PrinterObjectKeys, ...PrinterObjectKeys[]],\n\tR extends object = { [K in TArgs[number]]: PrinterObjectResult<K> },\n>(\n\tselect: null | ((res: { [K in TArgs[number]]: PrinterObjectResult<K> }) => R),\n\t...args: TArgs\n) => {\n\tconst [state, setState] = useState<R | null>(null);\n\tconst stateRef = useRef(state);\n\tstateRef.current = state;\n\tconst selectRef = useRef(select);\n\tselectRef.current = select;\n\n\tconst _select = useCallback((res: { [K in TArgs[number]]: PrinterObjectResult<K> }) => {\n\t\tif (selectRef.current == null) {\n\t\t\treturn res as R;\n\t\t}\n\t\treturn selectRef.current?.(res);\n\t}, []);\n\n\tconst keys = useMemo(\n\t\t() => Object.fromEntries(args.map((key) => [key, null])) as PrinterObjectsMoonrakerQueryParams,\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[JSON.stringify(args.sort())],\n\t);\n\n\tconst { subscribeToObject } = useMoonraker({\n\t\tonStatusUpdate: useCallback(\n\t\t\t(res: MoonrakerStatusUpdate) => {\n\t\t\t\tconst changed = {} as typeof res;\n\t\t\t\tfor (const key in keys) {\n\t\t\t\t\tif (res[key as keyof typeof res] != null) {\n\t\t\t\t\t\tchanged[key as keyof typeof res] = res[key as keyof typeof res];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst changeSelection = _select(changed);\n\t\t\t\tif (changeSelection == null || typeof changeSelection !== 'object') {\n\t\t\t\t\tthrow new Error('Invalid selection function, must return object, got ' + typeof changeSelection);\n\t\t\t\t}\n\t\t\t\tif (Object.keys(changed).length > 0 && deepEqual(changeSelection, stateRef.current) === false) {\n\t\t\t\t\tsetState((prev) => {\n\t\t\t\t\t\treturn merge(prev ?? {}, changeSelection) as R;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t[_select, keys],\n\t\t),\n\t});\n\n\tuseEffect(() => {\n\t\tconst subscription = subscribeToObject(...(Object.keys(keys) as TArgs));\n\t\tsubscription\n\t\t\t.then((sub) => {\n\t\t\t\tsetState(_select(sub.res));\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tif (e instanceof Error) {\n\t\t\t\t\tgetLogger().error(e);\n\t\t\t\t}\n\t\t\t});\n\t\treturn () => {\n\t\t\tsubscription\n\t\t\t\t.then((sub) => sub.unsuscribe())\n\t\t\t\t.catch((e) => {\n\t\t\t\t\tif (e instanceof Error) {\n\t\t\t\t\t\tgetLogger().error(e);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t};\n\t}, [_select, keys, subscribeToObject]);\n\n\treturn state;\n};\n\nexport const useNamespacedItemMutation = <\n\tN extends MoonrakerNamespaces,\n\tK extends MoonrakerNamespaceKeys<N>,\n\tV extends MoonrakerDBValue<N, K>,\n>(\n\tnamespace: N,\n\tkey: K,\n\toptions?: Omit<UseMutationOptions<MoonrakerDBItemResponse<V>, unknown, V>, 'mutationKey' | 'mutationFn'>,\n) => {\n\tconst { saveItem } = useMoonraker();\n\treturn useMutation<MoonrakerDBItemResponse<V>, unknown, V>({\n\t\t...options,\n\t\tmutationKey: [namespace, key],\n\t\tmutationFn: (value: V) => saveItem(namespace, key, value) as Promise<MoonrakerDBItemResponse<V>>,\n\t});\n};\n\nexport const useMoonrakerState = <\n\tN extends MoonrakerNamespaces,\n\tK extends MoonrakerNamespaceKeys<N>,\n\tV extends MoonrakerDBValue<N, K>,\n\tVal extends NonNullable<V> | null,\n>(\n\tnamespace: N,\n\tkey: K,\n\tinitialValue: Val = null as Val,\n) => {\n\tconst query = useNamespacedItemQuery(namespace, key, { initialData: initialValue });\n\tconst mutation = useNamespacedItemMutation<N, K, V>(namespace, key);\n\tconst mutate = useCallback(\n\t\tasync (value: V | ((prev: NonNullable<V> | Val) => NonNullable<V> | Val)) => {\n\t\t\tconst newValue =\n\t\t\t\ttypeof value === 'function' ? (value as (prev: NonNullable<V> | Val) => V)(query.data ?? initialValue) : value;\n\t\t\tawait mutation.mutateAsync(newValue, {\n\t\t\t\tonSuccess: () => {\n\t\t\t\t\t// Todo, implement optimistic updates\n\t\t\t\t\tquery.refetch();\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\t[initialValue, mutation, query],\n\t);\n\treturn [query.data ?? initialValue, mutate, query, mutation] as const;\n};\n","'use client';\nimport { createTRPCProxyClient, httpBatchLink } from '@trpc/client';\nimport { createTRPCNext } from '@trpc/next';\nimport type { AppRouter } from '@/server/routers/index';\nexport type {\n\tPrinterRouterLike,\n\tDropdownQuery,\n\tDropdownQueryKeys,\n\tDropdownQueryInput,\n\tDropdownQueryOutput,\n} from '@/server/routers/printer';\n\nexport function getBaseUrl() {\n\tif (typeof window !== 'undefined')\n\t\t// browser should use relative path\n\t\treturn '/configure';\n\tif (process.env.RENDER_INTERNAL_HOSTNAME)\n\t\t// reference for render.com\n\t\treturn `http://${process.env.RENDER_INTERNAL_HOSTNAME}:${process.env.PORT}/configure`;\n\t// assume localhost\n\treturn `http://127.0.0.1:${process.env.PORT ?? 3000}/configure`;\n}\nexport const trpc = createTRPCNext<AppRouter>({\n\tconfig() {\n\t\treturn {\n\t\t\tlinks: [\n\t\t\t\thttpBatchLink({\n\t\t\t\t\t/**\n\t\t\t\t\t * @link https://trpc.io/docs/ssr\n\t\t\t\t\t **/\n\t\t\t\t\turl: `${getBaseUrl()}/api/trpc`,\n\t\t\t\t\tmaxURLLength: 2083, // a suitable size\n\t\t\t\t}),\n\t\t\t],\n\t\t};\n\t},\n\toverrides: {\n\t\tuseMutation: {\n\t\t\t/**\n\t\t\t * This function is called whenever a `.useMutation` succeeds\n\t\t\t **/\n\t\t\tasync onSuccess(opts) {\n\t\t\t\t/**\n\t\t\t\t * @note that order here matters:\n\t\t\t\t * The order here allows route changes in `onSuccess` without\n\t\t\t\t * having a flash of content change whilst redirecting.\n\t\t\t\t **/\n\t\t\t\t// Calls the `onSuccess` defined in the `useQuery()`-options:\n\t\t\t\tawait opts.originalFn();\n\t\t\t\t// Invalidate all queries in the react-query cache:\n\t\t\t\tawait opts.queryClient.invalidateQueries();\n\t\t\t},\n\t\t},\n\t},\n\t/**\n\t * @link https://trpc.io/docs/ssr\n\t **/\n\tssr: false,\n});\nexport const proxyClient = createTRPCProxyClient<AppRouter>({\n\tlinks: [\n\t\thttpBatchLink({\n\t\t\t/**\n\t\t\t * @link https://trpc.io/docs/ssr\n\t\t\t **/\n\t\t\turl: `${getBaseUrl()}/api/trpc`,\n\t\t\tmaxURLLength: 2083, // a suitable size\n\t\t}),\n\t],\n});\n","import $4k4D0$babelruntimehelpersesmextends from \"@babel/runtime/helpers/esm/extends\";\nimport {createElement as $4k4D0$createElement, forwardRef as $4k4D0$forwardRef, useRef as $4k4D0$useRef, useEffect as $4k4D0$useEffect} from \"react\";\nimport {createContextScope as $4k4D0$createContextScope} from \"@radix-ui/react-context\";\nimport {useComposedRefs as $4k4D0$useComposedRefs} from \"@radix-ui/react-compose-refs\";\nimport {createDialogScope as $4k4D0$createDialogScope, Root as $4k4D0$Root, Trigger as $4k4D0$Trigger, Portal as $4k4D0$Portal, Overlay as $4k4D0$Overlay, WarningProvider as $4k4D0$WarningProvider, Content as $4k4D0$Content, Title as $4k4D0$Title, Description as $4k4D0$Description, Close as $4k4D0$Close} from \"@radix-ui/react-dialog\";\nimport {composeEventHandlers as $4k4D0$composeEventHandlers} from \"@radix-ui/primitive\";\nimport {Slottable as $4k4D0$Slottable} from \"@radix-ui/react-slot\";\n\n\n\n\n\n\n\n\n\n/* -------------------------------------------------------------------------------------------------\n * AlertDialog\n * -----------------------------------------------------------------------------------------------*/ const $905f4ae918aab1aa$var$ROOT_NAME = 'AlertDialog';\nconst [$905f4ae918aab1aa$var$createAlertDialogContext, $905f4ae918aab1aa$export$b8891880751c2c5b] = $4k4D0$createContextScope($905f4ae918aab1aa$var$ROOT_NAME, [\n    $4k4D0$createDialogScope\n]);\nconst $905f4ae918aab1aa$var$useDialogScope = $4k4D0$createDialogScope();\nconst $905f4ae918aab1aa$export$de466dd8317b0b75 = (props)=>{\n    const { __scopeAlertDialog: __scopeAlertDialog , ...alertDialogProps } = props;\n    const dialogScope = $905f4ae918aab1aa$var$useDialogScope(__scopeAlertDialog);\n    return /*#__PURE__*/ $4k4D0$createElement($4k4D0$Root, $4k4D0$babelruntimehelpersesmextends({}, dialogScope, alertDialogProps, {\n        modal: true\n    }));\n};\n/*#__PURE__*/ Object.assign($905f4ae918aab1aa$export$de466dd8317b0b75, {\n    displayName: $905f4ae918aab1aa$var$ROOT_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogTrigger\n * -----------------------------------------------------------------------------------------------*/ const $905f4ae918aab1aa$var$TRIGGER_NAME = 'AlertDialogTrigger';\nconst $905f4ae918aab1aa$export$6edd7a623ef0f40b = /*#__PURE__*/ $4k4D0$forwardRef((props, forwardedRef)=>{\n    const { __scopeAlertDialog: __scopeAlertDialog , ...triggerProps } = props;\n    const dialogScope = $905f4ae918aab1aa$var$useDialogScope(__scopeAlertDialog);\n    return /*#__PURE__*/ $4k4D0$createElement($4k4D0$Trigger, $4k4D0$babelruntimehelpersesmextends({}, dialogScope, triggerProps, {\n        ref: forwardedRef\n    }));\n});\n/*#__PURE__*/ Object.assign($905f4ae918aab1aa$export$6edd7a623ef0f40b, {\n    displayName: $905f4ae918aab1aa$var$TRIGGER_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogPortal\n * -----------------------------------------------------------------------------------------------*/ const $905f4ae918aab1aa$var$PORTAL_NAME = 'AlertDialogPortal';\nconst $905f4ae918aab1aa$export$660f2bfdb986706c = (props)=>{\n    const { __scopeAlertDialog: __scopeAlertDialog , ...portalProps } = props;\n    const dialogScope = $905f4ae918aab1aa$var$useDialogScope(__scopeAlertDialog);\n    return /*#__PURE__*/ $4k4D0$createElement($4k4D0$Portal, $4k4D0$babelruntimehelpersesmextends({}, dialogScope, portalProps));\n};\n/*#__PURE__*/ Object.assign($905f4ae918aab1aa$export$660f2bfdb986706c, {\n    displayName: $905f4ae918aab1aa$var$PORTAL_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogOverlay\n * -----------------------------------------------------------------------------------------------*/ const $905f4ae918aab1aa$var$OVERLAY_NAME = 'AlertDialogOverlay';\nconst $905f4ae918aab1aa$export$a707a4895ce23256 = /*#__PURE__*/ $4k4D0$forwardRef((props, forwardedRef)=>{\n    const { __scopeAlertDialog: __scopeAlertDialog , ...overlayProps } = props;\n    const dialogScope = $905f4ae918aab1aa$var$useDialogScope(__scopeAlertDialog);\n    return /*#__PURE__*/ $4k4D0$createElement($4k4D0$Overlay, $4k4D0$babelruntimehelpersesmextends({}, dialogScope, overlayProps, {\n        ref: forwardedRef\n    }));\n});\n/*#__PURE__*/ Object.assign($905f4ae918aab1aa$export$a707a4895ce23256, {\n    displayName: $905f4ae918aab1aa$var$OVERLAY_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogContent\n * -----------------------------------------------------------------------------------------------*/ const $905f4ae918aab1aa$var$CONTENT_NAME = 'AlertDialogContent';\nconst [$905f4ae918aab1aa$var$AlertDialogContentProvider, $905f4ae918aab1aa$var$useAlertDialogContentContext] = $905f4ae918aab1aa$var$createAlertDialogContext($905f4ae918aab1aa$var$CONTENT_NAME);\nconst $905f4ae918aab1aa$export$94e6af45f0af4efd = /*#__PURE__*/ $4k4D0$forwardRef((props, forwardedRef)=>{\n    const { __scopeAlertDialog: __scopeAlertDialog , children: children , ...contentProps } = props;\n    const dialogScope = $905f4ae918aab1aa$var$useDialogScope(__scopeAlertDialog);\n    const contentRef = $4k4D0$useRef(null);\n    const composedRefs = $4k4D0$useComposedRefs(forwardedRef, contentRef);\n    const cancelRef = $4k4D0$useRef(null);\n    return /*#__PURE__*/ $4k4D0$createElement($4k4D0$WarningProvider, {\n        contentName: $905f4ae918aab1aa$var$CONTENT_NAME,\n        titleName: $905f4ae918aab1aa$var$TITLE_NAME,\n        docsSlug: \"alert-dialog\"\n    }, /*#__PURE__*/ $4k4D0$createElement($905f4ae918aab1aa$var$AlertDialogContentProvider, {\n        scope: __scopeAlertDialog,\n        cancelRef: cancelRef\n    }, /*#__PURE__*/ $4k4D0$createElement($4k4D0$Content, $4k4D0$babelruntimehelpersesmextends({\n        role: \"alertdialog\"\n    }, dialogScope, contentProps, {\n        ref: composedRefs,\n        onOpenAutoFocus: $4k4D0$composeEventHandlers(contentProps.onOpenAutoFocus, (event)=>{\n            var _cancelRef$current;\n            event.preventDefault();\n            (_cancelRef$current = cancelRef.current) === null || _cancelRef$current === void 0 || _cancelRef$current.focus({\n                preventScroll: true\n            });\n        }),\n        onPointerDownOutside: (event)=>event.preventDefault()\n        ,\n        onInteractOutside: (event)=>event.preventDefault()\n    }), /*#__PURE__*/ $4k4D0$createElement($4k4D0$Slottable, null, children), false)));\n});\n/*#__PURE__*/ Object.assign($905f4ae918aab1aa$export$94e6af45f0af4efd, {\n    displayName: $905f4ae918aab1aa$var$CONTENT_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogTitle\n * -----------------------------------------------------------------------------------------------*/ const $905f4ae918aab1aa$var$TITLE_NAME = 'AlertDialogTitle';\nconst $905f4ae918aab1aa$export$225e0da62d314b7 = /*#__PURE__*/ $4k4D0$forwardRef((props, forwardedRef)=>{\n    const { __scopeAlertDialog: __scopeAlertDialog , ...titleProps } = props;\n    const dialogScope = $905f4ae918aab1aa$var$useDialogScope(__scopeAlertDialog);\n    return /*#__PURE__*/ $4k4D0$createElement($4k4D0$Title, $4k4D0$babelruntimehelpersesmextends({}, dialogScope, titleProps, {\n        ref: forwardedRef\n    }));\n});\n/*#__PURE__*/ Object.assign($905f4ae918aab1aa$export$225e0da62d314b7, {\n    displayName: $905f4ae918aab1aa$var$TITLE_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogDescription\n * -----------------------------------------------------------------------------------------------*/ const $905f4ae918aab1aa$var$DESCRIPTION_NAME = 'AlertDialogDescription';\nconst $905f4ae918aab1aa$export$a23b55cde55ad9a5 = /*#__PURE__*/ $4k4D0$forwardRef((props, forwardedRef)=>{\n    const { __scopeAlertDialog: __scopeAlertDialog , ...descriptionProps } = props;\n    const dialogScope = $905f4ae918aab1aa$var$useDialogScope(__scopeAlertDialog);\n    return /*#__PURE__*/ $4k4D0$createElement($4k4D0$Description, $4k4D0$babelruntimehelpersesmextends({}, dialogScope, descriptionProps, {\n        ref: forwardedRef\n    }));\n});\n/*#__PURE__*/ Object.assign($905f4ae918aab1aa$export$a23b55cde55ad9a5, {\n    displayName: $905f4ae918aab1aa$var$DESCRIPTION_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogAction\n * -----------------------------------------------------------------------------------------------*/ const $905f4ae918aab1aa$var$ACTION_NAME = 'AlertDialogAction';\nconst $905f4ae918aab1aa$export$b454f818c58ee85d = /*#__PURE__*/ $4k4D0$forwardRef((props, forwardedRef)=>{\n    const { __scopeAlertDialog: __scopeAlertDialog , ...actionProps } = props;\n    const dialogScope = $905f4ae918aab1aa$var$useDialogScope(__scopeAlertDialog);\n    return /*#__PURE__*/ $4k4D0$createElement($4k4D0$Close, $4k4D0$babelruntimehelpersesmextends({}, dialogScope, actionProps, {\n        ref: forwardedRef\n    }));\n});\n/*#__PURE__*/ Object.assign($905f4ae918aab1aa$export$b454f818c58ee85d, {\n    displayName: $905f4ae918aab1aa$var$ACTION_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogCancel\n * -----------------------------------------------------------------------------------------------*/ const $905f4ae918aab1aa$var$CANCEL_NAME = 'AlertDialogCancel';\nconst $905f4ae918aab1aa$export$2f67a923571aaea0 = /*#__PURE__*/ $4k4D0$forwardRef((props, forwardedRef)=>{\n    const { __scopeAlertDialog: __scopeAlertDialog , ...cancelProps } = props;\n    const { cancelRef: cancelRef  } = $905f4ae918aab1aa$var$useAlertDialogContentContext($905f4ae918aab1aa$var$CANCEL_NAME, __scopeAlertDialog);\n    const dialogScope = $905f4ae918aab1aa$var$useDialogScope(__scopeAlertDialog);\n    const ref = $4k4D0$useComposedRefs(forwardedRef, cancelRef);\n    return /*#__PURE__*/ $4k4D0$createElement($4k4D0$Close, $4k4D0$babelruntimehelpersesmextends({}, dialogScope, cancelProps, {\n        ref: ref\n    }));\n});\n/*#__PURE__*/ Object.assign($905f4ae918aab1aa$export$2f67a923571aaea0, {\n    displayName: $905f4ae918aab1aa$var$CANCEL_NAME\n});\n/* ---------------------------------------------------------------------------------------------- */ const $905f4ae918aab1aa$var$DescriptionWarning = ({ contentRef: contentRef  })=>{\n    const MESSAGE = `\\`${$905f4ae918aab1aa$var$CONTENT_NAME}\\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \\`${$905f4ae918aab1aa$var$CONTENT_NAME}\\` by passing a \\`${$905f4ae918aab1aa$var$DESCRIPTION_NAME}\\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \\`id\\` and passing the same value to the \\`aria-describedby\\` prop in \\`${$905f4ae918aab1aa$var$CONTENT_NAME}\\`. If the description is confusing or duplicative for sighted users, you can use the \\`@radix-ui/react-visually-hidden\\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;\n    $4k4D0$useEffect(()=>{\n        var _contentRef$current;\n        const hasDescription = document.getElementById((_contentRef$current = contentRef.current) === null || _contentRef$current === void 0 ? void 0 : _contentRef$current.getAttribute('aria-describedby'));\n        if (!hasDescription) console.warn(MESSAGE);\n    }, [\n        MESSAGE,\n        contentRef\n    ]);\n    return null;\n};\nconst $905f4ae918aab1aa$export$be92b6f5f03c0fe9 = $905f4ae918aab1aa$export$de466dd8317b0b75;\nconst $905f4ae918aab1aa$export$41fb9f06171c75f4 = $905f4ae918aab1aa$export$6edd7a623ef0f40b;\nconst $905f4ae918aab1aa$export$602eac185826482c = $905f4ae918aab1aa$export$660f2bfdb986706c;\nconst $905f4ae918aab1aa$export$c6fdb837b070b4ff = $905f4ae918aab1aa$export$a707a4895ce23256;\nconst $905f4ae918aab1aa$export$7c6e2c02157bb7d2 = $905f4ae918aab1aa$export$94e6af45f0af4efd;\nconst $905f4ae918aab1aa$export$e19cd5f9376f8cee = $905f4ae918aab1aa$export$b454f818c58ee85d;\nconst $905f4ae918aab1aa$export$848c9b7ead0df967 = $905f4ae918aab1aa$export$2f67a923571aaea0;\nconst $905f4ae918aab1aa$export$f99233281efd08a0 = $905f4ae918aab1aa$export$225e0da62d314b7;\nconst $905f4ae918aab1aa$export$393edc798c47379d = $905f4ae918aab1aa$export$a23b55cde55ad9a5;\n\n\n\n\nexport {$905f4ae918aab1aa$export$b8891880751c2c5b as createAlertDialogScope, $905f4ae918aab1aa$export$de466dd8317b0b75 as AlertDialog, $905f4ae918aab1aa$export$6edd7a623ef0f40b as AlertDialogTrigger, $905f4ae918aab1aa$export$660f2bfdb986706c as AlertDialogPortal, $905f4ae918aab1aa$export$a707a4895ce23256 as AlertDialogOverlay, $905f4ae918aab1aa$export$94e6af45f0af4efd as AlertDialogContent, $905f4ae918aab1aa$export$b454f818c58ee85d as AlertDialogAction, $905f4ae918aab1aa$export$2f67a923571aaea0 as AlertDialogCancel, $905f4ae918aab1aa$export$225e0da62d314b7 as AlertDialogTitle, $905f4ae918aab1aa$export$a23b55cde55ad9a5 as AlertDialogDescription, $905f4ae918aab1aa$export$be92b6f5f03c0fe9 as Root, $905f4ae918aab1aa$export$41fb9f06171c75f4 as Trigger, $905f4ae918aab1aa$export$602eac185826482c as Portal, $905f4ae918aab1aa$export$c6fdb837b070b4ff as Overlay, $905f4ae918aab1aa$export$7c6e2c02157bb7d2 as Content, $905f4ae918aab1aa$export$e19cd5f9376f8cee as Action, $905f4ae918aab1aa$export$848c9b7ead0df967 as Cancel, $905f4ae918aab1aa$export$f99233281efd08a0 as Title, $905f4ae918aab1aa$export$393edc798c47379d as Description};\n//# sourceMappingURL=index.mjs.map\n"],"names":["Promise","resolve","then","__webpack_require__","bind","globalPinoOpts","timestamp","level","PinoLogLevel","z","enum","PinoLogEvent","object","ts","number","messages","array","any","bindings","record","string","label","value","send","logEvent","trpcClient","clientLog","mutate","parse","logger","getLogger","pino","browser","transmit","EditMacro","id","param","isAlertVisible","setIsAlertVisible","useState","hasConfirmedRecordDeletion","setHasConfirmedRecordDeletion","macro","trpc","analysis","findMacro","useSuspenseQuery","form","useForm","defaultValues","resolver","zodResolver","createMacroSchema","saveMacro","updateMacro","useMutation","submit","handleSubmit","data","result","mutateAsync","error","toast","description","success","reset","useTopMenu","useCallback","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","Fragment","jsxs","Menu","MenubarMenu","MenubarTrigger","className","asChild","span","onClick","window","history","back","MenubarIcon","Icon","ChevronLeft","MenubarContent","Form","MacroForm","AlertDialog","open","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","variant","setDisplayName","Button","AlertDialogPrimitive","AlertDialogPortal","AlertDialogOverlay","React","ref","props","jsx_runtime","cn","displayName","div","buttonVariants","getHost","process","trim","location","hostname","migrations","version","up","res","fetch","concat","ok","json","message","key","Object","entries","parsed","JSON","console","log","method","headers","body","stringify","namespace","e","encodeURIComponent","length","join","down","encoded","push","migratedValue","replace","getCurrentVersion","setCurrentVersion","isMigrating","migrate","from","to","migrationsToRun","filter","m","sort","a","b","migration","isMigrated","migrateToLatest","currentVersion","latestVersion","Math","max","map","REQ_ID","getWsURL","host","subscriptions","useMoonraker","inFlightRequests","useRef","inFlightRequestTimeouts","localSubscriptions","onReadyCallbacks","wsUrl","setWsUrl","useEffect","containsSubscriptionUpdate","jsonMessage","params","sub","current","objects","lastJsonMessage","sendJsonMessage","readyState","useWebSocket","moonrakerStatus","options","passThroughUpdateMethods","includes","warn","messageData","onMessage","onStatusUpdate","shouldReconnect","reconnectAttempts","Infinity","reconnectInterval","share","readyStateRef","setMoonrakerStatus","whenReady","reject","isReady","moonrakerQuery","err","timeout","setTimeout","jsonrpc","subscribeToObject","args","fromEntries","allSubscribedObjects","assign","values","v","q","reqId","status","unsuscribe","saveItem","getItem","forEach","cb","clearTimeout","keys","catch","query","lastMessage","useNamespacedItemQuery","useQuery","queryKey","queryFn","useMoonrakerQuery","undefined","passed","useMoonrakerMutation","mutationKey","mutationFn","usePrinterObjectQuery","usePrinterObjectSubscription","select","state","setState","stateRef","selectRef","_select","useMemo","changed","changeSelection","deepEqual","merge","prev","subscription","Error","useNamespacedItemMutation","useMoonrakerState","initialValue","initialData","mutation","newValue","onSuccess","refetch","getBaseUrl","createTRPCNext","config","links","httpBatchLink","url","maxURLLength","overrides","opts","originalFn","queryClient","invalidateQueries","ssr","proxyClient","createTRPCProxyClient","$905f4ae918aab1aa$var$createAlertDialogContext","$905f4ae918aab1aa$export$b8891880751c2c5b","_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_1__","_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__","p8","$905f4ae918aab1aa$var$useDialogScope","$905f4ae918aab1aa$export$6edd7a623ef0f40b","react__WEBPACK_IMPORTED_MODULE_0__","forwardRef","forwardedRef","__scopeAlertDialog","triggerProps","dialogScope","createElement","xz","_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_3__","Z","$905f4ae918aab1aa$export$a707a4895ce23256","overlayProps","aV","$905f4ae918aab1aa$var$CONTENT_NAME","$905f4ae918aab1aa$var$AlertDialogContentProvider","$905f4ae918aab1aa$var$useAlertDialogContentContext","$905f4ae918aab1aa$export$94e6af45f0af4efd","children","contentProps","contentRef","composedRefs","_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_4__","cancelRef","jm","contentName","titleName","$905f4ae918aab1aa$var$TITLE_NAME","docsSlug","scope","VY","role","onOpenAutoFocus","_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_5__","M","_cancelRef$current","event","preventDefault","focus","preventScroll","onPointerDownOutside","onInteractOutside","_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_6__","A4","$905f4ae918aab1aa$export$225e0da62d314b7","titleProps","Dx","$905f4ae918aab1aa$export$a23b55cde55ad9a5","descriptionProps","dk","$905f4ae918aab1aa$export$b454f818c58ee85d","actionProps","x8","$905f4ae918aab1aa$export$2f67a923571aaea0","cancelProps","$905f4ae918aab1aa$export$be92b6f5f03c0fe9","alertDialogProps","fC","modal","$905f4ae918aab1aa$export$41fb9f06171c75f4","$905f4ae918aab1aa$export$602eac185826482c","portalProps","h_","$905f4ae918aab1aa$export$c6fdb837b070b4ff","$905f4ae918aab1aa$export$7c6e2c02157bb7d2","$905f4ae918aab1aa$export$e19cd5f9376f8cee","$905f4ae918aab1aa$export$848c9b7ead0df967","$905f4ae918aab1aa$export$f99233281efd08a0","$905f4ae918aab1aa$export$393edc798c47379d"],"sourceRoot":""}