(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2601],{74755:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(24360);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},79162:function(e,n,t){Promise.resolve().then(t.bind(t,91954)),Promise.resolve().then(t.bind(t,56445))},91954:function(e,n,t){"use strict";t.r(n),t.d(n,{MacroRun:function(){return MacroRun}});var r=t(72612),i=t(29817),o=t(30742),s=t(39164),a=t(97134),l=t(43955),u=t(69590),c=t(86736),d=t.n(c);a.SciChartSurface.configure({wasmUrl:"/configure/scichart2d.wasm",dataUrl:"/configure/scichart2d.data"});let MacroRunChart=e=>{let{recordings:n,sequences:t}=e,c=n.map(e=>{var n;let r=t.find(n=>n.id===e.sequenceId);return(null==r?void 0:r.recording)?{color:null==r?void 0:null===(n=r.recording)||void 0===n?void 0:n.color,name:e.name,psd:e.psd.total}:null}).filter(Boolean),f=(0,s.useRef)(c),p=(0,s.useCallback)(e=>{let n=!1;if(2===c.length){n=!0;for(let e=0;e<c[0].psd.frequencies.length;e++)Math.abs(c[0].psd.frequencies[e]-c[1].psd.frequencies[e])>1&&(n=!1)}if(n){var t,r,o,s,u,d;let n=new a.FastBandRenderableSeries(e.webAssemblyContext2D,{dataSeries:new a.XyyDataSeries(e.webAssemblyContext2D,{containsNaN:!1,isSorted:!0,xValues:c[0].psd.frequencies,yValues:c[0].psd.estimates,y1Values:c[1].psd.estimates}),fill:l.DN[null!==(t=c[1].color)&&void 0!==t?t:"sky"][600]+22,fillY1:l.DN[null!==(r=c[0].color)&&void 0!==r?r:"rose"][600]+22,stroke:l.DN[null!==(o=c[0].color)&&void 0!==o?o:"rose"][400],strokeY1:l.DN[null!==(s=c[1].color)&&void 0!==s?s:"sky"][400],strokeThickness:3,yAxisId:i.ck});n.rolloverModifierProps.tooltipColor=null!==(u=c[0].color)&&void 0!==u?u:"zinc",n.rolloverModifierProps.tooltipTitle=c[0].name+" Power",n.rolloverModifierProps1.tooltipColor=null!==(d=c[1].color)&&void 0!==d?d:"zinc",n.rolloverModifierProps1.tooltipTitle=c[1].name+" Power",n.animation=new a.WaveAnimation({duration:500,pointDurationFraction:1}),e.renderableSeries.add(n)}else c.forEach(n=>{var t,r;let o=new a.FastLineRenderableSeries(e.webAssemblyContext2D,{dataSeries:new a.XyDataSeries(e.webAssemblyContext2D,{containsNaN:!1,isSorted:!0,xValues:n.psd.frequencies,yValues:n.psd.estimates}),stroke:l.DN[null!==(t=n.color)&&void 0!==t?t:"brand"][400],strokeThickness:3,yAxisId:i.ck});o.rolloverModifierProps.tooltipColor=null!==(r=n.color)&&void 0!==r?r:"zinc",o.rolloverModifierProps.tooltipTitle=n.name+" Power",o.animation=new a.WaveAnimation({duration:500,pointDurationFraction:1}),e.renderableSeries.add(o)});let f=e.yAxes.getById(i.ck);f&&(f.visibleRange=new a.NumberRange(Math.min(...c.map(e=>e.psd.powerRange.min)),Math.max(...c.map(e=>e.psd.powerRange.max))).growBy(new a.NumberRange(0,.2)),f.autoRange=a.EAutoRange.Always,f.autoRangeAnimation.duration=500,f.autoRangeAnimation.easing=a.easing.inOutCirc),e.chartModifiers.add(new a.RolloverModifier({showRolloverLine:!0,showTooltip:!1,yAxisId:i.ck})),e.chartModifiers.add(new a.CursorModifier({crosshairStroke:l.DN.sky[400],crosshairStrokeThickness:1,showXLine:!0,showYLine:!0,tooltipLegendTemplate:i.to,tooltipLegendOffsetX:16,tooltipLegendOffsetY:16,yAxisId:i.ck,showTooltip:!1,axisLabelFill:l.DN.zinc[900],axisLabelStroke:l.DN.zinc[100]}))},[c]),y=(0,o.Q8)(i.OH,p),m=(0,s.useCallback)(e=>{if(null!=y.surface.current){if(0===f.current.length){p(y.surface.current);return}if(e.length===f.current.length){e.forEach((n,t)=>{var r,o,s,u,c;let d=null===(r=y.surface.current)||void 0===r?void 0:r.renderableSeries.get(t);if(d){if(null==y.surface.current)throw Error("Missing chart surface");let r=d.dataSeries.count();if((0,i.jh)(d.dataSeries)){let i=e[t+1];if(r>n.psd.frequencies.length){let e=Array(r-n.psd.frequencies.length).fill(0),t=Array(r-n.psd.estimates.length).fill(0);n.psd.frequencies.unshift(...e),n.psd.estimates.unshift(...t),i.psd.frequencies.unshift(...e),i.psd.estimates.unshift(...t)}r<n.psd.frequencies.length&&(n.psd.frequencies=n.psd.frequencies.slice(0,r),n.psd.estimates=n.psd.estimates.slice(0,r),i.psd.frequencies=i.psd.frequencies.slice(0,r),i.psd.estimates=i.psd.estimates.slice(0,r));let l=new a.XyyDataSeries(y.surface.current.webAssemblyContext2D,{containsNaN:!1,isSorted:!0});l.appendRange(n.psd.frequencies,n.psd.estimates,i.psd.estimates),y.surface.current.addDeletable(l),d.rolloverModifierProps.tooltipColor=null!==(o=n.color)&&void 0!==o?o:"zinc",d.rolloverModifierProps.tooltipTitle=n.name+" Power",d.rolloverModifierProps1.tooltipColor=null!==(s=i.color)&&void 0!==s?s:"zinc",d.rolloverModifierProps1.tooltipTitle=i.name+" Power",d.runAnimation(new a.BandAnimation({duration:500,ease:a.easing.inOutCirc,dataSeries:l}))}if((0,i.Mg)(d.dataSeries)){if(r>n.psd.frequencies.length){let e=Array(r-n.psd.frequencies.length).fill(0),t=Array(r-n.psd.estimates.length).fill(0);n.psd.frequencies.unshift(...e),n.psd.estimates.unshift(...t)}r<n.psd.frequencies.length&&(n.psd.frequencies=n.psd.frequencies.slice(0,r),n.psd.estimates=n.psd.estimates.slice(0,r));let e=new a.XyDataSeries(y.surface.current.webAssemblyContext2D,{containsNaN:!1,isSorted:!0});e.appendRange(n.psd.frequencies,n.psd.estimates),y.surface.current.addDeletable(e),d.rolloverModifierProps.tooltipColor=null!==(u=n.color)&&void 0!==u?u:"zinc",d.rolloverModifierProps.tooltipTitle=n.name+" Power",d.runAnimation(new a.LineAnimation({duration:500,ease:a.easing.inOutCirc,dataSeries:e,styles:{stroke:l.DN[null!==(c=n.color)&&void 0!==c?c:"brand"][400]}}))}}});return}if(e.length!==f.current.length){f.current.forEach((e,n)=>{var t,r;let o=null===(t=y.surface.current)||void 0===t?void 0:t.renderableSeries.get(n);if(o){if(null==y.surface.current)throw Error("Missing chart surface");let t=o.dataSeries.count();if((0,i.jh)(o.dataSeries)){let e=new a.XyyDataSeries(y.surface.current.webAssemblyContext2D,{containsNaN:!1,isSorted:!0});e.appendRange(f.current[n].psd.frequencies,Array(t).fill(0),Array(t).fill(0)),y.surface.current.addDeletable(e),o.runAnimation(new a.BandAnimation({duration:500,ease:a.easing.inOutCirc,dataSeries:e}))}if((0,i.Mg)(o.dataSeries)){let i=new a.XyDataSeries(y.surface.current.webAssemblyContext2D,{containsNaN:!1,isSorted:!0});i.appendRange(f.current[n].psd.frequencies,Array(t).fill(0)),y.surface.current.addDeletable(i),o.runAnimation(new a.LineAnimation({duration:500,ease:a.easing.inOutCirc,dataSeries:i,styles:{stroke:l.DN[null!==(r=e.color)&&void 0!==r?r:"brand"][400]}}))}}}),setTimeout(()=>{if(y.surface.current){var e,n;null===(e=y.surface.current)||void 0===e||e.renderableSeries.clear(),null===(n=y.surface.current)||void 0===n||n.chartModifiers.clear(),p(y.surface.current),y.surface.current.invalidateElement()}},500);return}}},[y.surface,p]);return(0,s.useEffect)(()=>{0!=c.length&&!1===d()(c,f.current)&&(y.surface.current&&m(c),f.current=c)},[y.surface,c,p,m]),(0,r.jsx)(u.iB,{...y.forwardProps,className:"flex-1 bg-zinc-900/50"})};var f=t(20936),p=t(79293),y=t(74755),m=t(24360);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,m.Z)("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),v=(0,m.Z)("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var g=["shift","alt","meta","mod","ctrl"],b={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function mapKey(e){return(b[e]||e).trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function parseKeysHookInput(e,n){return void 0===n&&(n=","),e.split(n)}function parseHotkey(e,n,t){void 0===n&&(n="+");var r=e.toLocaleLowerCase().split(n).map(function(e){return mapKey(e)}),i={alt:r.includes("alt"),ctrl:r.includes("ctrl")||r.includes("control"),shift:r.includes("shift"),meta:r.includes("meta"),mod:r.includes("mod")},o=r.filter(function(e){return!g.includes(e)});return _extends({},i,{keys:o,description:t})}"undefined"!=typeof document&&(document.addEventListener("keydown",function(e){void 0!==e.key&&pushToCurrentlyPressedKeys([mapKey(e.key),mapKey(e.code)])}),document.addEventListener("keyup",function(e){void 0!==e.key&&removeFromCurrentlyPressedKeys([mapKey(e.key),mapKey(e.code)])})),"undefined"!=typeof window&&window.addEventListener("blur",function(){k.clear()});var k=new Set;function isReadonlyArray(e){return Array.isArray(e)}function pushToCurrentlyPressedKeys(e){var n=Array.isArray(e)?e:[e];k.has("meta")&&k.forEach(function(e){return!g.includes(e)&&k.delete(e.toLowerCase())}),n.forEach(function(e){return k.add(e.toLowerCase())})}function removeFromCurrentlyPressedKeys(e){var n=Array.isArray(e)?e:[e];"meta"===e?k.clear():n.forEach(function(e){return k.delete(e.toLowerCase())})}function isHotkeyEnabledOnTag(e,n){var t=e.target;void 0===n&&(n=!1);var r=t&&t.tagName;return isReadonlyArray(n)?!!(r&&n&&n.some(function(e){return e.toLowerCase()===r.toLowerCase()})):!!(r&&n&&!0===n)}var isHotkeyMatchingKeyboardEvent=function(e,n,t){void 0===t&&(t=!1);var r,i=n.alt,o=n.meta,s=n.mod,a=n.shift,l=n.ctrl,u=n.keys,c=e.key,d=e.code,f=e.ctrlKey,p=e.metaKey,y=e.shiftKey,m=e.altKey,h=mapKey(d),v=c.toLowerCase();if(!(null!=u&&u.includes(h))&&!(null!=u&&u.includes(v))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(h))return!1;if(!t){if(!m===i&&"alt"!==v||!y===a&&"shift"!==v)return!1;if(s){if(!p&&!f)return!1}else if(!p===o&&"meta"!==v&&"os"!==v||!f===l&&"ctrl"!==v&&"control"!==v)return!1}return!!(u&&1===u.length&&(u.includes(v)||u.includes(h)))||(u?(void 0===r&&(r=","),(isReadonlyArray(u)?u:u.split(r)).every(function(e){return k.has(e.trim().toLowerCase())})):!u)},w=(0,s.createContext)(void 0),x=(0,s.createContext)({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),stopPropagation=function(e){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},S="undefined"!=typeof window?s.useLayoutEffect:s.useEffect;function useHotkeys(e,n,t,r){var i,o=(0,s.useRef)(null),a=(0,s.useRef)(!1),l=t instanceof Array?r instanceof Array?void 0:r:t,u=isReadonlyArray(e)?e.join(null==l?void 0:l.splitKey):e,c=t instanceof Array?t:r instanceof Array?r:void 0,d=(0,s.useCallback)(n,null!=c?c:[]),f=(0,s.useRef)(d);c?f.current=d:f.current=n;var p=(!function deepEqual(e,n){return e&&n&&"object"==typeof e&&"object"==typeof n?Object.keys(e).length===Object.keys(n).length&&Object.keys(e).reduce(function(t,r){return t&&deepEqual(e[r],n[r])},!0):e===n}((i=(0,s.useRef)(void 0)).current,l)&&(i.current=l),i.current),y=(0,s.useContext)(x).enabledScopes,m=(0,s.useContext)(w);return S(function(){if((null==p?void 0:p.enabled)!==!1&&(e=null==p?void 0:p.scopes,0===y.length&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):!!(!e||y.some(function(n){return e.includes(n)})||y.includes("*")))){var e,listener=function(e,n){var t;if(void 0===n&&(n=!1),!isHotkeyEnabledOnTag(e,["input","textarea","select"])||isHotkeyEnabledOnTag(e,null==p?void 0:p.enableOnFormTags)){if(null!==o.current){var r=o.current.getRootNode();if((r instanceof Document||r instanceof ShadowRoot)&&r.activeElement!==o.current&&!o.current.contains(r.activeElement)){stopPropagation(e);return}}(null==(t=e.target)||!t.isContentEditable||null!=p&&p.enableOnContentEditable)&&parseKeysHookInput(u,null==p?void 0:p.splitKey).forEach(function(t){var r,i,o,s=parseHotkey(t,null==p?void 0:p.combinationKey);if(isHotkeyMatchingKeyboardEvent(e,s,null==p?void 0:p.ignoreModifiers)||null!=(o=s.keys)&&o.includes("*")){if(null!=p&&null!=p.ignoreEventWhen&&p.ignoreEventWhen(e)||n&&a.current)return;if(("function"==typeof(r=null==p?void 0:p.preventDefault)&&r(e,s)||!0===r)&&e.preventDefault(),"function"==typeof(i=null==p?void 0:p.enabled)?!i(e,s):!0!==i&&void 0!==i){stopPropagation(e);return}f.current(e,s),n||(a.current=!0)}})}},handleKeyDown=function(e){void 0!==e.key&&(pushToCurrentlyPressedKeys(mapKey(e.code)),((null==p?void 0:p.keydown)===void 0&&(null==p?void 0:p.keyup)!==!0||null!=p&&p.keydown)&&listener(e))},handleKeyUp=function(e){void 0!==e.key&&(removeFromCurrentlyPressedKeys(mapKey(e.code)),a.current=!1,null!=p&&p.keyup&&listener(e,!0))},n=o.current||(null==l?void 0:l.document)||document;return n.addEventListener("keyup",handleKeyUp),n.addEventListener("keydown",handleKeyDown),m&&parseKeysHookInput(u,null==p?void 0:p.splitKey).forEach(function(e){return m.addHotkey(parseHotkey(e,null==p?void 0:p.combinationKey,null==p?void 0:p.description))}),function(){n.removeEventListener("keyup",handleKeyUp),n.removeEventListener("keydown",handleKeyDown),m&&parseKeysHookInput(u,null==p?void 0:p.splitKey).forEach(function(e){return m.removeHotkey(parseHotkey(e,null==p?void 0:p.combinationKey,null==p?void 0:p.description))})}}},[u,p,y]),o}var C=t(41087);C.Zr.defaultLocale="en-GB";let M=C.ou.local().locale,MacroRun=e=>{let{id:n,runId:t}=e,[i,o]=(0,s.useState)(t),[a]=p.SX.analysis.findMacro.useSuspenseQuery({id:n}),[l]=p.SX.analysis.getRunRecordings.useSuspenseQuery({runId:i,macroId:n},{keepPreviousData:!0}),[{next:u,previous:c}]=p.SX.analysis.getNextAndPreviousRunRecordingIds.useSuspenseQuery({macroId:n,runId:i},{keepPreviousData:!0});useHotkeys("left",()=>{null!=c&&o(c)},[c]),useHotkeys("right",()=>{null!=u&&o(u)},[u]);let d=(0,s.useMemo)(()=>{let e=C.ou.fromMillis(l.result[0].startTimeStamp),n=C.ou.fromMillis(l.result[l.result.length-1].endTimeStamp),t=e.equals(n)?e.toFormat("yyyy-MM-dd HH:mm"):"".concat(e.toFormat("yyyy-MM-dd HH:mm")," - ").concat(n.toFormat("HH:mm")),i=C.ou.fromMillis(l.result[0].startTimeStamp).setLocale(M).toLocaleString({dateStyle:"long",timeStyle:"short"}),o=C.nL.fromMillis(l.result[l.result.length-1].endTimeStamp-l.result[0].startTimeStamp).shiftTo("minutes","seconds").toHuman({unitDisplay:"short",maximumSignificantDigits:2});return(0,r.jsxs)("span",{title:t,className:"min-w-0 truncate",children:[i," (",o,")"]})},[l]);return(0,f.Ty)("Analysis",(0,s.useCallback)(e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.MenubarMenu,{children:[(0,r.jsx)(e.MenubarTrigger,{className:"cursor-pointer",asChild:!0,children:(0,r.jsxs)("span",{onClick:()=>window.history.back(),children:[(0,r.jsx)(e.MenubarIcon,{Icon:y.Z}),(0,r.jsx)("span",{className:"hidden lg:inline",children:"Back"})]})}),(0,r.jsx)(e.MenubarContent,{className:"hidden"})]}),(0,r.jsxs)(e.MenubarMenu,{children:[(0,r.jsx)(e.MenubarTrigger,{asChild:!0,disabled:null==c,children:(0,r.jsxs)("span",{onClick:()=>null!=c&&o(c),children:[(0,r.jsx)(e.MenubarIcon,{Icon:h}),(0,r.jsx)("span",{className:"hidden lg:inline",children:"Previous recording"})]})}),(0,r.jsx)(e.MenubarContent,{className:"hidden"})]}),(0,r.jsxs)(e.MenubarMenu,{children:[(0,r.jsx)(e.MenubarTrigger,{asChild:!0,disabled:null==u,children:(0,r.jsxs)("span",{onClick:()=>null!=u&&o(u),children:[(0,r.jsx)(e.MenubarIcon,{Icon:v}),(0,r.jsx)("span",{className:"hidden lg:inline",children:"Next recording"})]})}),(0,r.jsx)(e.MenubarContent,{className:"hidden"})]})]}),[u,c])),(0,r.jsxs)("div",{className:"flex flex-1",children:[(0,r.jsx)(MacroRunChart,{sequences:a.sequences,recordings:l.result}),(0,r.jsxs)("div",{className:"absolute left-1/2 top-4 -translate-x-1/2 text-center",children:[(0,r.jsx)("h2",{className:"bg-gradient-to-b from-white/80 to-white/30 bg-clip-text text-2xl font-bold !leading-snug tracking-tight text-transparent transition-all lg:text-4xl xl:text-5xl 2xl:text-6xl",children:a.name}),(0,r.jsx)("div",{className:"text-sm font-medium text-white/40 transition-all lg:text-lg xl:text-xl 2xl:text-2xl",children:d})]})]})}}},function(e){e.O(0,[6545,9996,1691,6357,4971,9806,3154,7443,5325,103,453,8,4728,9535,2959,7815,9707,6195,1087,3469,7682,936,6840,9321,8458,1744],function(){return e(e.s=79162)}),_N_E=e.O()}]);
//# sourceMappingURL=page-0febfc753f62785d.js.map