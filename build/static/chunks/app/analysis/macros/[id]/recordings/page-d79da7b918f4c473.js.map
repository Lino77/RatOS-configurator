{"version":3,"file":"static/chunks/app/analysis/macros/[id]/recordings/page-d79da7b918f4c473.js","mappings":"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","sources":["webpack://_N_E/./node_modules/.pnpm/lucide-react@0.363.0_react@18.2.0/node_modules/lucide-react/dist/esm/icons/area-chart.js","webpack://_N_E/?b64b","webpack://_N_E/./app/analysis/macros/[id]/recordings/recording-row-actions.tsx","webpack://_N_E/./app/analysis/macros/[id]/recordings/columns.tsx","webpack://_N_E/./app/analysis/macros/[id]/recordings/recordings.tsx","webpack://_N_E/<anon>"],"sourcesContent":["/**\n * @license lucide-react v0.363.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AreaChart = createLucideIcon(\"AreaChart\", [\n  [\"path\", { d: \"M3 3v18h18\", key: \"1s2lah\" }],\n  [\"path\", { d: \"M7 12v5h12V8l-5 5-4-4Z\", key: \"zxz28u\" }]\n]);\n\nexport { AreaChart as default };\n//# sourceMappingURL=area-chart.js.map\n","import(/* webpackMode: \"eager\" */ \"/home/runner/work/RatOS-configurator/RatOS-configurator/src/app/analysis/macros/[id]/recordings/recordings.tsx\");\nimport(/* webpackMode: \"eager\" */ \"/home/runner/work/RatOS-configurator/RatOS-configurator/src/components/common/no-ssr.tsx\")","'use client';\n\nimport { DotsHorizontalIcon } from '@radix-ui/react-icons';\nimport { Row } from '@tanstack/react-table';\n\nimport { Button } from '@/components/common/button';\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { macroRecordingSchemaWithoutSourcePSDs, macroSchema } from '@/zods/analysis';\nimport { z } from 'zod';\nimport React from 'react';\nimport { AreaChart } from 'lucide-react';\n\ninterface DataTableRowActionsProps<\n\tTData extends z.infer<typeof macroRecordingSchemaWithoutSourcePSDs> = z.infer<\n\t\ttypeof macroRecordingSchemaWithoutSourcePSDs\n\t>,\n> {\n\trow: Row<TData>;\n}\n\nexport function MacroRecordingDataTableRowActions<\n\tTData extends z.infer<typeof macroRecordingSchemaWithoutSourcePSDs> = z.infer<\n\t\ttypeof macroRecordingSchemaWithoutSourcePSDs\n\t>,\n>({ row }: DataTableRowActionsProps<TData>) {\n\treturn (\n\t\t<Button\n\t\t\tvariant=\"indeterminate\"\n\t\t\tsize=\"sm\"\n\t\t\tclassName=\"flex-grow-0 data-[state=open]:bg-muted\"\n\t\t\thref={`/analysis/macros/${row.original.macroId}/recordings/${row.original.macroRecordingRunId}`}\n\t\t>\n\t\t\t<AreaChart className=\"h-4 w-4\" />\n\t\t\tView Graph\n\t\t</Button>\n\t);\n}\n","'use client';\n\nimport { ColumnDef } from '@tanstack/react-table';\n\nimport { Checkbox } from '@/components/ui/checkbox';\n\nimport { DataTableColumnHeader } from '@/app/analysis/macros/components/data-table-column-header';\nimport { MacroRecordingWithoutSourcePSDs } from '@/zods/analysis';\nimport { Badge, BadgeProps } from '@/components/common/badge';\nimport React from 'react';\nimport { ColumnCapabilities } from '@/app/analysis/macros/components/data-table-toolbar';\nimport * as luxon from 'luxon';\nimport { MacroRecordingDataTableRowActions } from '@/app/analysis/macros/[id]/recordings/recording-row-actions';\nimport { ArrowDownToDot, Cpu, Server } from 'lucide-react';\nluxon.Settings.defaultLocale = 'en-GB';\n\nexport const columns: (ColumnDef<MacroRecordingWithoutSourcePSDs> & ColumnCapabilities)[] = [\n\t{\n\t\tid: 'select',\n\t\theader: ({ table }) => (\n\t\t\t<Checkbox\n\t\t\t\tchecked={table.getIsAllPageRowsSelected() || (table.getIsSomePageRowsSelected() && 'indeterminate')}\n\t\t\t\tonCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}\n\t\t\t\taria-label=\"Select all\"\n\t\t\t/>\n\t\t),\n\t\tcell: ({ row }) => (\n\t\t\t<Checkbox\n\t\t\t\tchecked={row.getIsSelected()}\n\t\t\t\tonCheckedChange={(value) => row.toggleSelected(!!value)}\n\t\t\t\taria-label=\"Select row\"\n\t\t\t/>\n\t\t),\n\t\tenableSorting: false,\n\t\tenableHiding: false,\n\t},\n\t{\n\t\taccessorKey: 'macroRecordingRunId',\n\t\tenableGrouping: true,\n\t\tenableHiding: false,\n\t\tenableSorting: false,\n\t},\n\t{\n\t\tid: 'date',\n\t\taccessorKey: 'startTimeStamp',\n\t\theader: ({ column }) => <DataTableColumnHeader column={column} title=\"Date\" />,\n\t\tcell: ({ row }) => {\n\t\t\tconst start = luxon.DateTime.fromMillis(row.original.startTimeStamp);\n\t\t\tconst end = luxon.DateTime.fromMillis(row.original.endTimeStamp);\n\t\t\tconst date = start.equals(end)\n\t\t\t\t? start.toFormat('yyyy-MM-dd HH:mm')\n\t\t\t\t: `${start.toFormat('yyyy-MM-dd HH:mm')} - ${end.toFormat('HH:mm')}`;\n\t\t\tconst human = luxon.DateTime.fromMillis(row.original.startTimeStamp).toRelative();\n\t\t\tconst duration = luxon.Duration.fromMillis(row.original.endTimeStamp - row.original.startTimeStamp).toFormat(\n\t\t\t\t'hh:mm:ss',\n\t\t\t);\n\t\t\treturn (\n\t\t\t\t<div className=\"flex\">\n\t\t\t\t\t<span title={date}>\n\t\t\t\t\t\t{human} ({duration})\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t);\n\t\t},\n\t\tenableSorting: true,\n\t\tsortingFn: (a, b) => a.original.startTimeStamp - b.original.startTimeStamp,\n\t\tsortDescFirst: true,\n\t},\n\t{\n\t\taccessorKey: 'name',\n\t\theader: ({ column }) => <DataTableColumnHeader column={column} title=\"Recording\" />,\n\t\tcell: ({ row }) => {\n\t\t\tlet labels: { label: string; color: BadgeProps['color']; icon: React.ComponentType }[] = [];\n\t\t\tswitch (row.original.accelerometer) {\n\t\t\t\tcase 'controlboard':\n\t\t\t\t\tlabels.push({ label: 'Control Board', color: 'plain', icon: Cpu });\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'rpi':\n\t\t\t\t\tlabels.push({ label: 'Host', color: 'plain', icon: Server });\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'toolboard_t0':\n\t\t\t\t\tlabels.push({ label: 'Tool Board T0', color: 'plain', icon: ArrowDownToDot });\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'toolboard_t1':\n\t\t\t\t\tlabels.push({ label: 'Tool Board T1', color: 'plain', icon: ArrowDownToDot });\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className=\"flex space-x-2\">\n\t\t\t\t\t{labels.map((l) => (\n\t\t\t\t\t\t<Badge color={l.color} key={l.label}>\n\t\t\t\t\t\t\t{l.label}\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t))}\n\t\t\t\t\t<span className=\"max-w-[500px] truncate font-medium\">{row.getValue('name')}</span>\n\t\t\t\t</div>\n\t\t\t);\n\t\t},\n\t\tgetFacetedOptions: () => {\n\t\t\treturn [\n\t\t\t\t{ label: 'Control Board', value: 'controlboard', icon: Cpu },\n\t\t\t\t{ label: 'Host', value: 'rpi', icon: Server },\n\t\t\t\t{ label: 'Tool Board T0', value: 'toolboard_t0', icon: ArrowDownToDot },\n\t\t\t\t{ label: 'Tool Board T1', value: 'toolboard_t1', icon: ArrowDownToDot },\n\t\t\t];\n\t\t},\n\t},\n\t{\n\t\tid: 'actions',\n\t\theader: ({ column }) => <DataTableColumnHeader column={column} title=\"Actions\" />,\n\t\tcell: ({ row }) => <MacroRecordingDataTableRowActions row={row} />,\n\t},\n];\n","'use client';\nimport { Metadata } from 'next';\n\nimport { columns } from '@/app/analysis/macros/[id]/recordings/columns';\nimport { DataTable } from '@/app/analysis/macros/components/data-table';\nimport { trpc } from '@/utils/trpc';\n\nexport const metadata: Metadata = {\n\ttitle: 'Macros',\n\tdescription: 'User-modifiable macros for resonance analysis',\n};\n\nexport default function MacroRecordings({ id }: { id: string }) {\n\tconst [macroRecordingsQuery] = trpc.analysis.getRecordings.useSuspenseQuery({ macroId: id });\n\tconst [macro] = trpc.analysis.findMacro.useSuspenseQuery({ id: id });\n\n\treturn (\n\t\t<div className=\"hidden h-full flex-1 flex-col space-y-8 p-8 md:flex\">\n\t\t\t<div className=\"flex items-center justify-between space-y-2\">\n\t\t\t\t<div>\n\t\t\t\t\t<h2 className=\"text-xl font-semibold leading-none tracking-tight\">Recordings for {macro.name}</h2>\n\t\t\t\t\t<p className=\"text-base font-medium text-muted-foreground\">\n\t\t\t\t\t\tYou have recorded {macroRecordingsQuery.total} sequence(s) for this macro so far.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<DataTable\n\t\t\t\tdata={macroRecordingsQuery.result ?? []}\n\t\t\t\tcolumns={columns}\n\t\t\t\tinitialGrouping={['macroRecordingRunId']}\n\t\t\t\tinitialColumnVisibility={{ macroRecordingRunId: false }}\n\t\t\t\tinitialSorting={[{ desc: true, id: 'date' }]}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n"],"names":["AreaChart","_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__","Z","d","key","Promise","resolve","then","__webpack_require__","bind","MacroRecordingDataTableRowActions","param","row","jsx_runtime","jsxs","Button","variant","size","className","href","original","macroId","concat","macroRecordingRunId","jsx","luxon","defaultLocale","columns","id","header","table","Checkbox","checked","getIsAllPageRowsSelected","getIsSomePageRowsSelected","onCheckedChange","toggleAllPageRowsSelected","value","aria-label","cell","getIsSelected","toggleSelected","enableSorting","enableHiding","accessorKey","enableGrouping","column","DataTableColumnHeader","title","start","fromMillis","startTimeStamp","end","endTimeStamp","date","equals","toFormat","human","toRelative","duration","div","span","sortingFn","a","b","sortDescFirst","labels","accelerometer","push","label","color","icon","Cpu","Server","ArrowDownToDot","map","Badge","l","getValue","getFacetedOptions","metadata","description","MacroRecordings","macroRecordingsQuery","trpc","analysis","getRecordings","useSuspenseQuery","macro","findMacro","h2","name","p","total","DataTable","data","result","initialGrouping","initialColumnVisibility","initialSorting","desc"],"sourceRoot":""}