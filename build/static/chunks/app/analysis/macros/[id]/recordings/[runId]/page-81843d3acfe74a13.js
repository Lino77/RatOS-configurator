(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2601],{96737:function(e,o,r){Promise.resolve().then(r.bind(r,9102)),Promise.resolve().then(r.bind(r,69009))},9102:function(e,o,r){"use strict";r.r(o),r.d(o,{MacroRun:function(){return MacroRun}});var t=r(26248),n=r(61518),l=r(72579),i=r(49738),s=r(97134),a=r(93637),d=r(69590),u=r(86736),c=r.n(u);s.SciChartSurface.configure({wasmUrl:"/configure/scichart2d.wasm",dataUrl:"/configure/scichart2d.data"});let MacroRunChart=e=>{let{recordings:o,sequences:r}=e,u=o.map(e=>{var o;let t=r.find(o=>o.id===e.sequenceId);return(null==t?void 0:t.recording)?{color:null==t?void 0:null===(o=t.recording)||void 0===o?void 0:o.color,name:e.name,psd:e.psd.total}:null}).filter(Boolean),f=(0,i.useRef)(u),p=(0,i.useCallback)(e=>{let o=!1;if(2===u.length){o=!0;for(let e=0;e<u[0].psd.frequencies.length;e++)Math.abs(u[0].psd.frequencies[e]-u[1].psd.frequencies[e])>1&&(o=!1)}if(o){var r,t,l,i,d,c;let o=new s.FastBandRenderableSeries(e.webAssemblyContext2D,{dataSeries:new s.XyyDataSeries(e.webAssemblyContext2D,{containsNaN:!1,isSorted:!0,xValues:u[0].psd.frequencies,yValues:u[0].psd.estimates,y1Values:u[1].psd.estimates}),fill:a.DN[null!==(r=u[1].color)&&void 0!==r?r:"sky"][600]+22,fillY1:a.DN[null!==(t=u[0].color)&&void 0!==t?t:"rose"][600]+22,stroke:a.DN[null!==(l=u[0].color)&&void 0!==l?l:"rose"][400],strokeY1:a.DN[null!==(i=u[1].color)&&void 0!==i?i:"sky"][400],strokeThickness:3,yAxisId:n.ck});o.rolloverModifierProps.tooltipColor=null!==(d=u[0].color)&&void 0!==d?d:"zinc",o.rolloverModifierProps.tooltipTitle=u[0].name+" Power",o.rolloverModifierProps1.tooltipColor=null!==(c=u[1].color)&&void 0!==c?c:"zinc",o.rolloverModifierProps1.tooltipTitle=u[1].name+" Power",o.animation=new s.WaveAnimation({duration:500}),e.renderableSeries.add(o)}else u.forEach(o=>{var r,t;let l=new s.FastLineRenderableSeries(e.webAssemblyContext2D,{dataSeries:new s.XyDataSeries(e.webAssemblyContext2D,{containsNaN:!1,isSorted:!0,xValues:o.psd.frequencies,yValues:o.psd.estimates}),stroke:a.DN[null!==(r=o.color)&&void 0!==r?r:"brand"][400],strokeThickness:3,yAxisId:n.ck});l.rolloverModifierProps.tooltipColor=null!==(t=o.color)&&void 0!==t?t:"zinc",l.rolloverModifierProps.tooltipTitle=o.name+" Power",l.animation=new s.WaveAnimation({duration:500}),e.renderableSeries.add(l)});let f=e.yAxes.getById(n.ck);f&&(f.visibleRange=new s.NumberRange(Math.min(...u.map(e=>e.psd.powerRange.min)),Math.max(...u.map(e=>e.psd.powerRange.max))).growBy(new s.NumberRange(0,.1))),e.chartModifiers.add(new s.RolloverModifier({showRolloverLine:!0,showTooltip:!1,yAxisId:n.ck})),e.chartModifiers.add(new s.CursorModifier({crosshairStroke:a.DN.sky[400],crosshairStrokeThickness:1,showXLine:!0,showYLine:!0,tooltipLegendTemplate:n.to,tooltipLegendOffsetX:16,tooltipLegendOffsetY:16,yAxisId:n.ck,showTooltip:!1,axisLabelFill:a.DN.zinc[900],axisLabelStroke:a.DN.zinc[100]}))},[u]),h=(0,l.Q8)(n.GB,p);return(0,i.useEffect)(()=>{if(0!=u.length&&!1===c()(u,f.current)){if(h.surface.current){var e,o;null===(e=h.surface.current)||void 0===e||e.renderableSeries.clear(),null===(o=h.surface.current)||void 0===o||o.chartModifiers.clear(),p(h.surface.current),h.surface.current.invalidateElement()}f.current=u}},[h.surface,u,p]),(0,t.jsx)(d.iB,{...h.forwardProps,className:"flex-1 bg-zinc-900/50"})};var f=r(64918);let MacroRun=e=>{let{id:o,runId:r}=e,[n]=f.SX.analysis.findMacro.useSuspenseQuery({id:o}),[l]=f.SX.analysis.getRunRecordings.useSuspenseQuery({runId:r,macroId:o});return(0,t.jsx)(MacroRunChart,{sequences:n.sequences,recordings:l})}},81503:function(e,o,r){"use strict";r.d(o,{$:function(){return Spinner}});var t=r(26248),n=r(44838);let Spinner=e=>(0,t.jsxs)("svg",{className:(0,n.m)("h-5 w-5 animate-spin text-black dark:text-white",e.noMargin?"":"-ml-1 mr-3",e.className),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},24740:function(e,o,r){"use strict";r.d(o,{Jt:function(){return n},uo:function(){return xEndstopOptions}});var t=r(78185);let xEndstopOptions=(e,o)=>{let r=[];if((null==o?void 0:o.toolboard)!=null&&r.push({id:"endstop-toolboard",title:"Physical Endstop",badge:[{color:"sky",children:"".concat(o.toolboard.name," T").concat(o.toolNumber)}]}),(null==o?void 0:o.axis)===t.po.x){var n,l,i,s;r.push({id:"endstop",title:"Physical Endstop",badge:[{color:"purple",children:null!==(i=null==e?void 0:null===(n=e.controlboard)||void 0===n?void 0:n.name)&&void 0!==i?i:"Control Board"}]}),r.push({id:"sensorless",title:"Sensorless Homing",badge:[{color:"purple",children:null!==(s=null==e?void 0:null===(l=e.controlboard)||void 0===l?void 0:l.name)&&void 0!==s?s:"Control Board"}]})}return r},n={id:"endstop",title:"Physical Endstop",badge:[{color:"purple",children:"Control Board"}]}},17533:function(e,o,r){"use strict";r.d(o,{O:function(){return useIsClient}});var t=r(49738);let useIsClient=()=>{let[e,o]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{o(!0)},[]),e}},33334:function(e,o,r){"use strict";r.d(o,{YC:function(){return useToolheads},yk:function(){return useToolheadConfiguration}});var t=r(51758),n=r(97370),l=r(55797),i=r(49738),s=r(48418),a=r(57674),d=r(89553),u=r(24740),c=r(17710);let useToolheads=()=>{let e=(0,l.sJ)(a.$T),o=(0,i.useMemo)(()=>null==e?void 0:e.filter(Boolean).map(e=>new t.D(e)),[e]);return o},useToolheadConfiguration=function(e){let o=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=(0,l.sJ)(a.wm),f=(0,i.useRef)(r);f.current!==r&&r.length>0&&(f.current=r.slice());let p=(0,i.useMemo)(()=>{var r;let n=null===(r=f.current)||void 0===r?void 0:r.filter(Boolean).map(e=>new t.D(e)),l=null==n?void 0:n.find(o=>o.getTool()===e||o.getMotionAxis()===e||o.getExtruderAxis()===e);if(null==l&&o)throw Error("Toolhead with number or axis ".concat(e," not found"));return null!=l?l:null},[o,e,f.current]),[h,v]=(0,i.useState)(!1),m=(0,l._8)(e=>{let{set:o,snapshot:r}=e;return async e=>{var l,i,f,p;let m=new t.D(e),b=await r.getPromise((0,a.AF)(m.getTool()));if(null==b)throw Error("Toolhead ".concat(m.getToolCommand()," not found"));let g=new t.D(b);if(e.extruder.id!=g.getExtruder().id&&null!=e.extruder.stepper){let r=(0,n.WZ)(e.extruder.stepper);null!=r&&o((0,s.ew)(m.getExtruderAxis()),o=>{var t;return null==o?null:{...o,stepper:r.id,current:null!==(t=e.extruder.current)&&void 0!==t?t:.71*r.maxPeakCurrent}})}if((null===(l=e.toolboard)||void 0===l?void 0:l.id)!==(null===(i=g.getToolboard())||void 0===i?void 0:i.id)){if(null==e.toolboard&&"endstop-toolboard"===e.xEndstop.id&&(e.xEndstop=u.Jt),null===(f=e.partFan)||void 0===f?void 0:f.id.endsWith("-toolboard")){let o=(0,c.gL)(null,e).shift();if(null==o)throw Error("No part fan options available for current T".concat(e.toolNumber," configuration"));e.partFan=o}if(null===(p=e.hotendFan)||void 0===p?void 0:p.id.endsWith("-toolboard")){let o=(0,c.Yo)(null,e).shift();if(null==o)throw Error("No hotend fan options available for current T".concat(e.toolNumber," configuration"));e.hotendFan=o}}e.thermistor!==g.getThermistor()&&e.thermistor!==e.hotend.thermistor?v(!0):e.hotend.id==g.getHotend().id||h||(e.thermistor=e.hotend.thermistor);let w=d.PY.extend({toolNumber:d.Qr}).nullable().safeParse({...e,toolNumber:g.getTool()});return w.success&&o((0,a.AF)(g.getTool()),w.data),w}},[h]);return{toolhead:p,setToolhead:m}}}},function(e){e.O(0,[4565,1691,6357,4962,9806,4998,6006,5325,5956,253,8227,8055,9607,5670,7705,7370,7399,8625,1744],function(){return e(e.s=96737)}),_N_E=e.O()}]);
//# sourceMappingURL=page-81843d3acfe74a13.js.map