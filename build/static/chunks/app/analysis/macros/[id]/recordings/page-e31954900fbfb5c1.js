(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5795],{32232:function(e,a,r){"use strict";r.d(a,{Z:function(){return i}});var n=r(24360);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n.Z)("AreaChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M7 12v5h12V8l-5 5-4-4Z",key:"zxz28u"}]])},53522:function(e,a,r){Promise.resolve().then(r.bind(r,74640)),Promise.resolve().then(r.bind(r,69009))},74640:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return MacroRecordings},metadata:function(){return N}});var n=r(26248),i=r(7053),l=r(33202),t=r(73323),o=r(49738),c=r(41087),s=r(95505),d=r(32232);function MacroRecordingDataTableRowActions(e){let{row:a}=e;return(0,n.jsxs)(s.z,{variant:"indeterminate",size:"sm",className:"flex-grow-0 data-[state=open]:bg-muted",href:"/analysis/macros/".concat(a.original.macroId,"/recordings/").concat(a.original.macroRecordingRunId),children:[(0,n.jsx)(d.Z,{className:"h-4 w-4"}),"View Graph"]})}var m=r(16195),u=r(65523),g=r(8058);c.Zr.defaultLocale="en-GB";let h=c.ou.local().locale,f=[{id:"select",size:30,minSize:30,header:e=>{let{table:a}=e;return(0,n.jsx)(i.X,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:e=>a.toggleAllPageRowsSelected(!!e),"aria-label":"Select all"})},cell:e=>{let{row:a}=e;return(0,n.jsx)(i.X,{checked:a.getIsSelected(),onCheckedChange:e=>a.toggleSelected(!!e),"aria-label":"Select row"})},enableSorting:!1,enableHiding:!1},{accessorKey:"macroRecordingRunId",enableGrouping:!0,enableHiding:!1,enableSorting:!1},{id:"date",size:200,accessorKey:"startTimeStamp",header:e=>{let{column:a}=e;return(0,n.jsx)(l.p,{column:a,title:"Date"})},cell:e=>{let{row:a}=e,r=a.getLeafRows(),i=c.ou.fromMillis(r[0].original.startTimeStamp),l=c.ou.fromMillis(r[r.length-1].original.endTimeStamp),t=i.equals(l)?i.toFormat("yyyy-MM-dd HH:mm"):"".concat(i.toFormat("yyyy-MM-dd HH:mm")," - ").concat(l.toFormat("HH:mm")),o=c.ou.fromMillis(a.original.startTimeStamp).setLocale(h).toLocaleString({dateStyle:"long",timeStyle:"short"});return(0,n.jsx)("div",{className:"flex min-w-0",children:(0,n.jsx)("span",{title:t,className:"min-w-0 truncate",children:o})})},enableSorting:!0,sortingFn:(e,a)=>e.original.startTimeStamp-a.original.startTimeStamp,sortDescFirst:!0},{accessorKey:"name",size:600,header:e=>{let{column:a}=e;return(0,n.jsx)(l.p,{column:a,title:"Recording"})},cell:e=>{let{row:a}=e,r=[],i=[];return a.getLeafRows().forEach(e=>{if(i.push(e.original.name),!r.find(a=>a.accel===e.original.accelerometer))switch(e.original.accelerometer){case"controlboard":r.push({accel:e.original.accelerometer,label:e.original.recordingHardwareName,color:"purple",icon:m.Z});break;case"rpi":r.push({accel:e.original.accelerometer,label:e.original.recordingHardwareName,color:"gray",icon:u.Z});break;case"toolboard_t0":r.push({accel:e.original.accelerometer,label:"".concat(e.original.recordingHardwareName," T0"),color:"sky",icon:g.Z});break;case"toolboard_t1":r.push({accel:e.original.accelerometer,label:"".concat(e.original.recordingHardwareName," T1"),color:"blue",icon:g.Z})}}),(0,n.jsxs)("div",{className:"flex min-w-0 max-w-fit items-center gap-2 truncate font-medium",children:[r.map(e=>(0,n.jsx)(t.Ct,{color:e.color,children:e.label},e.label)),i.length>1?i.slice(0,-1).join(", ")+" & "+i.slice(-1):i[0]]})},filterFn:(e,a,r)=>{let n="".concat(e.original.name," ").concat(e.original.accelerometer," ").concat(e.original.recordingHardwareName);return console.log(n,r),Array.isArray(r)&&r.flat().some(e=>n.includes(e))},getFacetedOptions:()=>[{label:"Control Board",value:"controlboard",icon:m.Z},{label:"Host",value:"rpi",icon:u.Z},{label:"Tool Board T0",value:"toolboard_t0",icon:g.Z},{label:"Tool Board T1",value:"toolboard_t1",icon:g.Z}]},{id:"duration",size:200,header:e=>{let{column:a}=e;return(0,n.jsx)(l.p,{column:a,title:"Duration"})},cell:e=>{let{row:a}=e,r=a.getLeafRows(),i=c.nL.fromMillis(r[r.length-1].original.endTimeStamp-r[0].original.startTimeStamp).shiftTo("minutes","seconds").toHuman({unitDisplay:"short",maximumSignificantDigits:2});return(0,n.jsx)("div",{className:"flex min-w-0",children:(0,n.jsx)("span",{className:"min-w-0 truncate",children:i})})}},{id:"actions",size:150,header:e=>{let{column:a}=e;return(0,n.jsx)(l.p,{column:a,title:"Actions"})},cell:e=>{let{row:a}=e;return(0,n.jsx)(MacroRecordingDataTableRowActions,{row:a})}}];var b=r(24253),p=r(64918),x=r(79008),j=r(74755),y=r(24360);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let w=(0,y.Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var S=r(11590),M=r.n(S);let N={title:"Macros",description:"User-modifiable macros for resonance analysis"};function MacroRecordings(e){var a;let{id:r}=e,[i]=p.SX.analysis.getRecordings.useSuspenseQuery({macroId:r}),[l]=p.SX.analysis.findMacro.useSuspenseQuery({id:r});return(0,x.Ty)("Analysis Recordings",(0,o.useCallback)(e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.MenubarMenu,{children:[(0,n.jsx)(e.MenubarTrigger,{className:"cursor-pointer",asChild:!0,children:(0,n.jsxs)("span",{onClick:()=>window.history.back(),children:[(0,n.jsx)(e.MenubarIcon,{Icon:j.Z}),(0,n.jsx)("span",{className:"hidden lg:inline",children:"Back"})]})}),(0,n.jsx)(e.MenubarContent,{className:"hidden"})]}),(0,n.jsxs)(e.MenubarMenu,{children:[(0,n.jsx)(e.MenubarTrigger,{asChild:!0,className:"cursor-pointer",children:(0,n.jsxs)(M(),{href:"/analysis/macros/".concat(r,"/edit"),children:[(0,n.jsx)(e.MenubarIcon,{Icon:w}),(0,n.jsx)("span",{className:"hidden lg:inline",children:"Edit"})]})}),(0,n.jsx)(e.MenubarContent,{className:"hidden"})]})]}),[r])),(0,n.jsxs)("div",{className:"flex h-full flex-1 flex-col space-y-8 p-8",children:[(0,n.jsx)("div",{className:"flex items-center justify-between space-y-2",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("h2",{className:"text-xl font-semibold leading-none tracking-tight",children:["Recordings for ",l.name]}),(0,n.jsxs)("p",{className:"text-base font-medium text-muted-foreground",children:["You have recorded ",i.total||i.result.length," sequence(s) for this macro so far."]})]})}),(0,n.jsx)(b.w,{data:null!==(a=i.result)&&void 0!==a?a:[],columns:f,initialGrouping:["macroRecordingRunId"],initialColumnVisibility:{macroRecordingRunId:!1},initialSorting:[{desc:!0,id:"date"}]})]})}}},function(e){e.O(0,[6545,6006,7190,1526,3655,9157,3857,6032,1160,9247,4289,1087,9776,9008,2981,4675,7399,8625,1744],function(){return e(e.s=53522)}),_N_E=e.O()}]);
//# sourceMappingURL=page-e31954900fbfb5c1.js.map