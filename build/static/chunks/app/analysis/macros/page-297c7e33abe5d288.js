(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5757],{16347:function(){},21734:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(24360);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},94926:function(e,t,r){Promise.resolve().then(r.bind(r,67802)),Promise.resolve().then(r.bind(r,69009))},87155:function(e,t,r){"use strict";r.d(t,{j:function(){return getLogger}});var a=r(74958),l=r.n(a);let n={timestamp:!0};var o=r(29565),s=r(94594);let c=s.z.enum(["trace","debug","info","warn","error","fatal"]),i=s.z.object({ts:s.z.number(),messages:s.z.array(s.z.any()),bindings:s.z.array(s.z.record(s.z.string(),s.z.any())),level:s.z.object({label:c,value:s.z.number()})});var d=r(82189);let send=async function(e,t){o.u.clientLog.mutate({level:e,logEvent:i.parse(t)})},u=null,getLogger=()=>null!=u?u:u=l()({...n,browser:{asObject:!0,serialize:!0,transmit:{send},write:d.write}})},67802:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return AnalysisMacrosTable}});var a=r(26248),l=r(7053),n=r(33202),o=r(90077),s=r(95505),c=r(72185),i=r(11590),d=r.n(i),u=r(64918),m=r(23234),f=r(49738),g=r(98055),p=r(87155);function DataTableRowActions(e){let{row:t,onUpdate:r}=e,[l,n]=(0,f.useState)(!1),i=u.SX.analysis.deleteMacro.useMutation();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.h_,{children:[(0,a.jsx)(c.$F,{asChild:!0,children:(0,a.jsxs)(s.z,{variant:"plain",size:"sm",className:"flex data-[state=open]:bg-muted",children:[(0,a.jsx)(o.nWS,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,a.jsxs)(c.AW,{align:"end",className:"w-[160px]",children:[(0,a.jsx)(c.Xi,{asChild:!0,children:(0,a.jsx)(d(),{href:"/analysis/macros/".concat(t.original.id,"/recordings"),children:"View Recordings"})}),(0,a.jsx)(c.Xi,{asChild:!0,children:(0,a.jsx)(d(),{href:"/analysis/macros/".concat(t.original.id,"/edit"),children:"Edit"})}),(0,a.jsx)(c.VD,{}),(0,a.jsx)(c.Xi,{onClick:()=>n(!0),children:"Delete"})]})]}),(0,a.jsx)(m.aR,{open:l,children:(0,a.jsxs)(m._T,{children:[(0,a.jsxs)(m.fY,{children:[(0,a.jsx)(m.f$,{children:"Are you sure?"}),(0,a.jsx)(m.yT,{children:"This action cannot be undone. This will permanently delete this macro and all associated recordings."})]}),(0,a.jsxs)(m.xo,{children:[(0,a.jsx)(m.le,{onClick:()=>n(!1),children:"Cancel"}),(0,a.jsx)(m.OL,{variant:"danger",onClick:async()=>{n(!1);try{let e=await i.mutateAsync(t.original.id);if(null==e.result){(0,p.j)().error("Failed to delete macro",t.original.id),g.A.error("Failed to delete macro",{description:"An unknown error occurred and the macro seem to have disappeared from the database. This shouldn't happen. Please contact support."});return}g.A.success("Macro deleted!",{description:"The macro and ".concat(e.totalRecordingsRemoved," recording(s) were successfully deleted.")})}catch(e){(0,p.j)().error({id:t.original.id,error:e},"Failed to delete macro"),g.A.error("Failed to delete macro",{description:'\n											<div>\n												<p>An error occurred while delete the macro.</p>\n												<pre class="text-wrap mt-4 text-rose-400 font-medium whitespace-pre-wrap">'.concat(e instanceof Error?e.message:e instanceof String?e:"Unknown error","</pre>\n											</div>\n										")})}null==r||r()},children:"Continue"})]})]})})]})}var x=r(73323),h=r(16195),j=r(65523),v=r(8058),y=r(21734);let b=[{id:"select",header:e=>{let{table:t}=e;return(0,a.jsx)(l.X,{checked:t.getIsAllPageRowsSelected()||t.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:e=>t.toggleAllPageRowsSelected(!!e),"aria-label":"Select all"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(l.X,{checked:t.getIsSelected(),onCheckedChange:e=>t.toggleSelected(!!e),"aria-label":"Select row"})},enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:e=>{let{column:t}=e;return(0,a.jsx)(n.p,{column:t,title:"Name"})},cell:e=>{let{row:t}=e,r=[];return t.original.sequences.map(e=>{var t;switch(null===(t=e.recording)||void 0===t?void 0:t.accelerometer){case"controlboard":r.push({label:"Control Board",color:"lime",icon:h.Z});break;case"rpi":r.push({label:"Host",color:"yellow",icon:j.Z});break;case"toolboard_t0":r.push({label:"Tool Board T0",color:"sky",icon:v.Z});break;case"toolboard_t1":r.push({label:"Tool Board T1",color:"pink",icon:v.Z})}}),r=r.filter((e,t,r)=>r.findIndex(t=>t.label===e.label)===t),(0,a.jsxs)("div",{className:"flex space-x-2",children:[r.map(e=>(0,a.jsx)(x.Ct,{color:e.color,children:e.label},e.label)),(0,a.jsx)("span",{className:"max-w-[500px] truncate font-medium",children:t.getValue("name")})]})},getUniqueValues:e=>e.sequences.map(e=>{var t;return null===(t=e.recording)||void 0===t?void 0:t.accelerometer}).concat([e.name]),getFacetedOptions:()=>[{label:"Control Board",value:"controlboard",icon:h.Z},{label:"Host",value:"rpi",icon:j.Z},{label:"Tool Board T0",value:"toolboard_t0",icon:v.Z},{label:"Tool Board T1",value:"toolboard_t1",icon:v.Z}],filterFn:(e,t,r)=>{let a=e.original.sequences.map(e=>{var t;return null===(t=e.recording)||void 0===t?void 0:t.accelerometer});return(Array.isArray(r)?r:[r]).some(t=>a.includes(t)||e.original.name.includes(t))}},{accessorKey:"sequences",header:e=>{let{column:t}=e;return(0,a.jsx)(n.p,{column:t,title:"Sequences"})},cell:e=>{let{row:t}=e,r=t.original.sequences.filter(e=>{var t;return!(null===(t=e.recording)||void 0===t?void 0:t.capturePSD)}).length,l=t.original.sequences.filter(e=>{var t;return null===(t=e.recording)||void 0===t?void 0:t.capturePSD}).length;return(0,a.jsxs)("div",{className:"flex w-[100px] items-center space-x-3",children:[r>0&&(0,a.jsxs)(x.Ct,{className:"flex gap-1.5",color:"gray",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 text-foreground"})," ",r]}),l>0&&(0,a.jsxs)(x.Ct,{className:"flex gap-1.5",color:"gray",children:[(0,a.jsx)(o.jXb,{className:"h-4 w-4 scale-[250%] text-rose-400"})," ",l]})]})}},{id:"actions",header:e=>{let{column:t}=e;return(0,a.jsx)(n.p,{column:t,title:"Actions"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(DataTableRowActions,{row:t})}}];var w=r(27985),A=r(29565),N=r(24360);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let D=(0,N.Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);function AnalysisMacrosTable(){var e,t;let r=A.S.analysis.getMacros.useQuery({});return(0,a.jsxs)("div",{className:"flex h-full flex-1 flex-col space-y-8 p-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Resonance analysis macros"}),(0,a.jsx)("p",{className:"font-medium text-muted-foreground",children:"Here's a list of your macro's ready for analysis!"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)(s.z,{href:"/analysis/macros/new",variant:"primary",children:[(0,a.jsx)(D,{className:"size-4"}),(0,a.jsx)("span",{children:"New Macro"})]})})]}),(0,a.jsx)(w.w,{data:null!==(t=null===(e=r.data)||void 0===e?void 0:e.result)&&void 0!==t?t:[],columns:b})]})}},23234:function(e,t,r){"use strict";r.d(t,{aR:function(){return AlertDialog},OL:function(){return z},le:function(){return S},_T:function(){return k},yT:function(){return C},xo:function(){return AlertDialogFooter},fY:function(){return AlertDialogHeader},f$:function(){return R}});var a=r(26248),l=r(49738),n=r(36577),o=r(74706),s=r(50320),c=r(23546),i=r(91036),d=r(21137);let[u,m]=(0,o.b)("AlertDialog",[c.p8]),f=(0,c.p8)(),g=(0,l.forwardRef)((e,t)=>{let{__scopeAlertDialog:r,...a}=e,o=f(r);return(0,l.createElement)(c.aV,(0,n.Z)({},o,a,{ref:t}))}),p="AlertDialogContent",[x,h]=u(p),j=(0,l.forwardRef)((e,t)=>{let{__scopeAlertDialog:r,children:a,...o}=e,u=f(r),m=(0,l.useRef)(null),g=(0,s.e)(t,m),h=(0,l.useRef)(null);return(0,l.createElement)(c.jm,{contentName:p,titleName:v,docsSlug:"alert-dialog"},(0,l.createElement)(x,{scope:r,cancelRef:h},(0,l.createElement)(c.VY,(0,n.Z)({role:"alertdialog"},u,o,{ref:g,onOpenAutoFocus:(0,i.M)(o.onOpenAutoFocus,e=>{var t;e.preventDefault(),null===(t=h.current)||void 0===t||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault()}),(0,l.createElement)(d.A4,null,a),!1)))}),v="AlertDialogTitle",y=(0,l.forwardRef)((e,t)=>{let{__scopeAlertDialog:r,...a}=e,o=f(r);return(0,l.createElement)(c.Dx,(0,n.Z)({},o,a,{ref:t}))}),b=(0,l.forwardRef)((e,t)=>{let{__scopeAlertDialog:r,...a}=e,o=f(r);return(0,l.createElement)(c.dk,(0,n.Z)({},o,a,{ref:t}))}),w=(0,l.forwardRef)((e,t)=>{let{__scopeAlertDialog:r,...a}=e,o=f(r);return(0,l.createElement)(c.x8,(0,n.Z)({},o,a,{ref:t}))}),A=(0,l.forwardRef)((e,t)=>{let{__scopeAlertDialog:r,...a}=e,{cancelRef:o}=h("AlertDialogCancel",r),i=f(r),d=(0,s.e)(t,o);return(0,l.createElement)(c.x8,(0,n.Z)({},i,a,{ref:d}))});var N=r(40514),D=r(95505);(0,N.h)(D.z,"Button");let AlertDialog=e=>{let{__scopeAlertDialog:t,...r}=e,a=f(t);return(0,l.createElement)(c.fC,(0,n.Z)({},a,r,{modal:!0}))},AlertDialogPortal=e=>{let{__scopeAlertDialog:t,...r}=e,a=f(t);return(0,l.createElement)(c.h_,(0,n.Z)({},a,r))},_=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(g,{className:(0,N.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...l,ref:t})});(0,N.h)(_,g.displayName);let k=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsxs)(AlertDialogPortal,{children:[(0,a.jsx)(_,{}),(0,a.jsx)(j,{ref:t,className:(0,N.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...l})]})});(0,N.h)(k,j.displayName);let AlertDialogHeader=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,N.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};AlertDialogHeader.displayName="AlertDialogHeader";let AlertDialogFooter=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,N.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};AlertDialogFooter.displayName="AlertDialogFooter";let R=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(y,{ref:t,className:(0,N.cn)("text-lg font-semibold",r),...l})});(0,N.h)(R,y.displayName);let C=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(b,{ref:t,className:(0,N.cn)("text-sm text-muted-foreground",r),...l})});(0,N.h)(C,b.displayName);let z=l.forwardRef(function(e,t){let{className:r,...l}=e;return(0,a.jsx)(w,{ref:t,className:(0,N.cn)((0,D.d)(l),r),...l})});(0,N.h)(z,w.displayName);let S=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(A,{ref:t,className:(0,N.cn)((0,D.d)({variant:"outline"}),"mt-2 sm:mt-0",r),...l})});(0,N.h)(S,A.displayName)},29565:function(e,t,r){"use strict";r.d(t,{S:function(){return a.SX},u:function(){return a.uF}});var a=r(64918)}},function(e){e.O(0,[6545,2584,4838,1441,9302,6173,95,8055,2145,5557,4791,3546,8503,6669,2307,7399,8625,1744],function(){return e(e.s=94926)}),_N_E=e.O()}]);
//# sourceMappingURL=page-297c7e33abe5d288.js.map