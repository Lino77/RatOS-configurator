{"version":3,"file":"static/chunks/app/analysis/macros/new/page-f885c2c904bec80c.js","mappings":"sFAAAA,QAAAC,OAAA,GAAAC,IAAA,CAAAC,EAAAC,IAAA,CAAAD,EAAA,QACAH,QAAAC,OAAA,GAAAC,IAAA,CAAAC,EAAAC,IAAA,CAAAD,EAAA,2QCeO,IAAME,YAAc,KAC1B,IAAMC,EAASC,CAAAA,EAAAA,EAAAA,OAAAA,EACd,IAAO,EACNC,cAAe,CACdC,GAAIC,EAAAA,CAAO,EACZ,EACAC,SAAUC,CAAAA,EAAAA,EAAAA,CAAAA,EAAYC,EAAAA,EAAiBA,CACxC,GACA,EAAE,EAEGC,EAASC,CAAAA,EAAAA,EAAAA,SAAAA,IACTC,EAAOC,CAAAA,EAAAA,EAAAA,EAAAA,EAA2CX,GAClDY,EAAYC,EAAAA,EAAIA,CAACC,QAAQ,CAACC,WAAW,CAACC,WAAW,GACjDC,EAASP,EAAKQ,YAAY,CAAC,MAAOC,IACvC,GAAI,CACH,MAAMP,EAAUQ,WAAW,CAACD,GAC5BE,EAAAA,CAAKA,CAACC,OAAO,CAAC,iBAAkB,CAC/BC,YAAa,cAAwBC,MAAA,CAAVL,EAAKM,IAAI,CAAC,mCACtC,GACAjB,EAAOkB,IAAI,CAAE,mBACd,CAAE,MAAOC,EAAG,CACXN,EAAAA,CAAKA,CAACO,KAAK,CAAC,yBAA0B,CACrCL,YAAa,yJAG4IC,MAAA,CAA3EG,aAAaE,MAAQF,EAAEG,OAAO,CAAGH,aAAaI,OAASJ,EAAI,gBAAgB,4BAG1J,EACD,CACD,GAqBA,MAnBAK,CAAAA,EAAAA,EAAAA,EAAAA,EACC,WACAC,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,GAEV,GAAAC,EAAAC,GAAA,EAAAD,EAAAE,QAAA,WACC,GAAAF,EAAAG,IAAA,EAACC,EAAKC,WAAW,YAChB,GAAAL,EAAAC,GAAA,EAACG,EAAKE,cAAc,EAACC,UAAU,iBAAiBC,QAAO,YACtD,GAAAR,EAAAG,IAAA,EAACM,IAAIA,CAACC,KAAO,6BACZ,GAAAV,EAAAC,GAAA,EAACG,EAAKO,WAAW,EAACC,KAAMC,EAAAA,CAAWA,GACnC,GAAAb,EAAAC,GAAA,EAACa,OAAAA,CAAKP,UAAU,4BAAmB,gBAGrC,GAAAP,EAAAC,GAAA,EAACG,EAAKW,cAAc,EAACR,UAAU,gBAIhC,EAAE,GAIL,GAAAP,EAAAC,GAAA,EAACe,EAAAA,EAAIA,CAAAA,CAAE,GAAGxC,CAAI,UACb,GAAAwB,EAAAC,GAAA,EAACgB,EAAAA,CAASA,CAAAA,CAACzC,KAAMA,EAAMO,OAAQA,EAAQmC,MAAO,MAGjD,yBCxEAC,EAAAC,OAAA,CAAAzD,EAAA","sources":["webpack://_N_E/?1a63","webpack://_N_E/./app/analysis/macros/new/create.tsx","webpack://_N_E/./node_modules/.pnpm/next@13.5.6_@babel+core@7.21.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/next/navigation.js","webpack://_N_E/<anon>"],"sourcesContent":["import(/* webpackMode: \"eager\" */ \"/home/runner/work/RatOS-configurator/RatOS-configurator/src/app/analysis/macros/new/create.tsx\");\nimport(/* webpackMode: \"eager\" */ \"/home/runner/work/RatOS-configurator/RatOS-configurator/src/components/common/no-ssr.tsx\")","'use client';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { createMacroSchema } from '@/zods/analysis';\nimport { z } from 'zod';\nimport * as uuid from 'uuid';\nimport { trpc } from '@/utils/trpc';\nimport { MacroForm } from '@/app/analysis/macros/components/macro-form';\nimport { useForm } from 'react-hook-form';\nimport { useCallback, useMemo } from 'react';\nimport { Form } from '@/components/ui/form';\nimport { ChevronLeft } from 'lucide-react';\nimport Link from 'next/link';\nimport { useTopMenu } from '@/app/topmenu';\nimport { toast } from 'sonner';\nimport { useRouter } from 'next/navigation';\n\nexport const CreateMacro = () => {\n\tconst memoed = useMemo(\n\t\t() => ({\n\t\t\tdefaultValues: {\n\t\t\t\tid: uuid.v4(),\n\t\t\t},\n\t\t\tresolver: zodResolver(createMacroSchema),\n\t\t}),\n\t\t[],\n\t);\n\tconst router = useRouter();\n\tconst form = useForm<z.input<typeof createMacroSchema>>(memoed);\n\tconst saveMacro = trpc.analysis.createMacro.useMutation();\n\tconst submit = form.handleSubmit(async (data) => {\n\t\ttry {\n\t\t\tawait saveMacro.mutateAsync(data);\n\t\t\ttoast.success('Macro created!', {\n\t\t\t\tdescription: `The macro \"${data.name}\" has been created successfully.`,\n\t\t\t});\n\t\t\trouter.push(`/analysis/macros`);\n\t\t} catch (e) {\n\t\t\ttoast.error('Failed to create macro', {\n\t\t\t\tdescription: `\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p>An error occurred while saving the macro.</p>\n\t\t\t\t\t\t<pre class=\"text-wrap mt-4 text-rose-400 font-medium whitespace-pre-wrap\">${e instanceof Error ? e.message : e instanceof String ? e : 'Unknown error'}</pre>\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t});\n\t\t}\n\t});\n\n\tuseTopMenu(\n\t\t'Analysis',\n\t\tuseCallback((Menu) => {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<Menu.MenubarMenu>\n\t\t\t\t\t\t<Menu.MenubarTrigger className=\"cursor-pointer\" asChild>\n\t\t\t\t\t\t\t<Link href={`/analysis/macros`}>\n\t\t\t\t\t\t\t\t<Menu.MenubarIcon Icon={ChevronLeft} />\n\t\t\t\t\t\t\t\t<span className=\"hidden lg:inline\">Cancel</span>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Menu.MenubarTrigger>\n\t\t\t\t\t\t<Menu.MenubarContent className=\"hidden\" />\n\t\t\t\t\t</Menu.MenubarMenu>\n\t\t\t\t</>\n\t\t\t);\n\t\t}, []),\n\t);\n\n\treturn (\n\t\t<Form {...form}>\n\t\t\t<MacroForm form={form} submit={submit} isNew={true} />\n\t\t</Form>\n\t);\n};\n","module.exports = require('./dist/client/components/navigation')\n"],"names":["Promise","resolve","then","__webpack_require__","bind","CreateMacro","memoed","useMemo","defaultValues","id","uuid","resolver","zodResolver","createMacroSchema","router","useRouter","form","useForm","saveMacro","trpc","analysis","createMacro","useMutation","submit","handleSubmit","data","mutateAsync","toast","success","description","concat","name","push","e","error","Error","message","String","useTopMenu","useCallback","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","Fragment","jsxs","Menu","MenubarMenu","MenubarTrigger","className","asChild","Link","href","MenubarIcon","Icon","ChevronLeft","span","MenubarContent","Form","MacroForm","isNew","module","exports"],"sourceRoot":""}