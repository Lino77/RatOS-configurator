(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5757],{16347:function(){},21734:function(e,r,a){"use strict";a.d(r,{Z:function(){return l}});var t=a(24360);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t.Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},94926:function(e,r,a){Promise.resolve().then(a.bind(a,8971)),Promise.resolve().then(a.bind(a,69009))},87155:function(e,r,a){"use strict";a.d(r,{j:function(){return getLogger}});var t=a(74958),l=a.n(t);let n={timestamp:!0};var s=a(29565),o=a(94594);let i=o.z.enum(["trace","debug","info","warn","error","fatal"]),c=o.z.object({ts:o.z.number(),messages:o.z.array(o.z.any()),bindings:o.z.array(o.z.record(o.z.string(),o.z.any())),level:o.z.object({label:i,value:o.z.number()})});var d=a(82189);let send=async function(e,r){s.u.clientLog.mutate({level:e,logEvent:c.parse(r)})},u=null,getLogger=()=>null!=u?u:u=l()({...n,browser:{asObject:!0,serialize:!0,transmit:{send},write:d.write}})},8971:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return AnalysisMacrosTable}});var t=a(26248),l=a(7053),n=a(33202),s=a(90077),o=a(95505),i=a(72185),c=a(11590),d=a.n(c),u=a(64918),m=a(23234),f=a(49738),h=a(98055),x=a(87155);function DataTableRowActions(e){let{row:r,onUpdate:a}=e,[l,n]=(0,f.useState)(!1),c=u.SX.analysis.deleteMacro.useMutation();return(0,t.jsxs)("div",{className:"flex justify-end",children:[(0,t.jsxs)(i.h_,{children:[(0,t.jsx)(i.$F,{asChild:!0,children:(0,t.jsxs)(o.z,{variant:"plain",size:"sm",className:"flex data-[state=open]:bg-muted",children:[(0,t.jsx)(s.AjK,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,t.jsxs)(i.AW,{align:"end",className:"w-[160px]",children:[(0,t.jsx)(i.Xi,{asChild:!0,children:(0,t.jsx)(d(),{href:"/analysis/macros/".concat(r.original.id,"/recordings"),children:"View Recordings"})}),(0,t.jsx)(i.Xi,{asChild:!0,children:(0,t.jsx)(d(),{href:"/analysis/macros/".concat(r.original.id,"/edit"),children:"Edit"})}),(0,t.jsx)(i.VD,{}),(0,t.jsx)(i.Xi,{onClick:()=>n(!0),children:"Delete"})]})]}),(0,t.jsx)(m.aR,{open:l,children:(0,t.jsxs)(m._T,{children:[(0,t.jsxs)(m.fY,{children:[(0,t.jsx)(m.f$,{children:"Are you sure?"}),(0,t.jsx)(m.yT,{children:"This action cannot be undone. This will permanently delete this macro and all associated recordings."})]}),(0,t.jsxs)(m.xo,{children:[(0,t.jsx)(m.le,{onClick:()=>n(!1),children:"Cancel"}),(0,t.jsx)(m.OL,{variant:"danger",onClick:async()=>{n(!1);try{let e=await c.mutateAsync(r.original.id);if(null==e.result){(0,x.j)().error(r.original.id,"Failed to delete macro"),h.A.error("Failed to delete macro",{description:"An unknown error occurred and the macro seem to have disappeared from the database. This shouldn't happen. Please contact support."});return}h.A.success("Macro deleted!",{description:"The macro and ".concat(e.totalRecordingsRemoved," recording(s) were successfully deleted.")})}catch(e){(0,x.j)().error({id:r.original.id,error:e},"Failed to delete macro"),h.A.error("Failed to delete macro",{description:'\n											<div>\n												<p>An error occurred while delete the macro.</p>\n												<pre class="text-wrap mt-4 text-rose-400 font-medium whitespace-pre-wrap">'.concat(e instanceof Error?e.message:e instanceof String?e:"Unknown error","</pre>\n											</div>\n										")})}null==a||a()},children:"Continue"})]})]})})]})}var p=a(73323),g=a(16195),j=a(65523),y=a(8058),v=a(21734);function DataTableBulkActions(e){let{selection:r,onUpdate:a}=e,[l,n]=(0,f.useState)(!1),c=u.SX.analysis.deleteMacros.useMutation();return(0,t.jsxs)("div",{className:"flex justify-end",children:[(0,t.jsxs)(i.h_,{children:[(0,t.jsx)(i.$F,{asChild:!0,children:(0,t.jsxs)(o.z,{variant:"plain",size:"sm",className:"flex data-[state=open]:bg-muted",children:[(0,t.jsx)(s.AjK,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,t.jsx)(i.AW,{align:"end",className:"w-[160px]",children:(0,t.jsxs)(i.Xi,{onClick:()=>n(!0),disabled:0===r.rows.length,children:["Delete ",r.rows.length>0?r.rows.length:""," ",1===r.rows.length?"Macro":"Macros"]})})]}),(0,t.jsx)(m.aR,{open:l,children:(0,t.jsxs)(m._T,{children:[(0,t.jsxs)(m.fY,{children:[(0,t.jsx)(m.f$,{children:"Are you sure?"}),(0,t.jsx)(m.yT,{children:"This action cannot be undone. This will permanently delete the selected macros and all associated recordings."})]}),(0,t.jsxs)(m.xo,{children:[(0,t.jsx)(m.le,{onClick:()=>n(!1),children:"Cancel"}),(0,t.jsx)(m.OL,{variant:"danger",onClick:async()=>{n(!1);try{let e=await c.mutateAsync(r.rows.map(e=>e.original.id)),a=e.result.filter(e=>!e.success);a.length>0&&((0,x.j)().error(a,"Failed to delete one or more macros"),h.A.error("Failed to delete one or more macros",{description:"An unknown error occurred and some of the macros you marked for deletion seem to have disappeared from the database. This shouldn't happen. Please contact support."})),h.A.success("Macros deleted!",{description:"".concat(e.macrosRemoved," out of ").concat(e.result.length," macro(s) and ").concat(e.result.reduce((e,r)=>e+r.totalRecordingsRemoved,0)," recording(s) were successfully deleted.")})}catch(e){(0,x.j)().error({ids:r.rows.map(e=>e.original.id),error:e},"Failed to delete macros"),h.A.error("Failed to delete macros",{description:'\n											<div>\n												<p>An error occurred while delete the macro.</p>\n												<pre class="text-wrap mt-4 text-rose-400 font-medium whitespace-pre-wrap">'.concat(e instanceof Error?e.message:e instanceof String?e:"Unknown error","</pre>\n											</div>\n										")})}null==a||a()},children:"Continue"})]})]})})]})}let w=[{id:"select",size:30,minSize:30,header:e=>{let{table:r}=e;return(0,t.jsx)(l.X,{checked:r.getIsAllPageRowsSelected()||r.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:e=>r.toggleAllPageRowsSelected(!!e),"aria-label":"Select all"})},cell:e=>{let{row:r}=e;return(0,t.jsx)(l.X,{checked:r.getIsSelected(),onCheckedChange:e=>r.toggleSelected(!!e),"aria-label":"Select row"})},enableSorting:!1,enableHiding:!1},{accessorKey:"name",size:1e3,header:e=>{let{column:r}=e;return(0,t.jsx)(n.p,{column:r,title:"Name"})},cell:e=>{let{row:r}=e,a=[];return r.original.sequences.map(e=>{var r;switch(null===(r=e.recording)||void 0===r?void 0:r.accelerometer){case"controlboard":a.push({label:"Control Board",color:"lime",icon:g.Z});break;case"rpi":a.push({label:"Host",color:"yellow",icon:j.Z});break;case"toolboard_t0":a.push({label:"Tool Board T0",color:"sky",icon:y.Z});break;case"toolboard_t1":a.push({label:"Tool Board T1",color:"pink",icon:y.Z})}}),a=a.filter((e,r,a)=>a.findIndex(r=>r.label===e.label)===r),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[a.map(e=>(0,t.jsx)(p.Ct,{color:e.color,children:e.label},e.label)),(0,t.jsx)(d(),{href:"/analysis/macros/".concat(r.original.id,"/recordings"),className:"max-w-[500px] truncate font-medium hover:text-brand-400",children:r.getValue("name")})]})},getUniqueValues:e=>e.sequences.map(e=>{var r;return null===(r=e.recording)||void 0===r?void 0:r.accelerometer}).concat([e.name]),getFacetedOptions:()=>[{label:"Control Board",value:"controlboard",icon:g.Z},{label:"Host",value:"rpi",icon:j.Z},{label:"Tool Board T0",value:"toolboard_t0",icon:y.Z},{label:"Tool Board T1",value:"toolboard_t1",icon:y.Z}],filterFn:(e,r,a)=>{let t=e.original.sequences.map(e=>{var r;return null===(r=e.recording)||void 0===r?void 0:r.accelerometer});return(Array.isArray(a)?a:[a]).some(r=>t.includes(r)||e.original.name.includes(r))}},{accessorKey:"sequences",size:100,header:e=>{let{column:r}=e;return(0,t.jsx)(n.p,{column:r,title:"Sequences"})},cell:e=>{let{row:r}=e,a=r.original.sequences.filter(e=>{var r;return!(null===(r=e.recording)||void 0===r?void 0:r.capturePSD)}).length,l=r.original.sequences.filter(e=>{var r;return null===(r=e.recording)||void 0===r?void 0:r.capturePSD}).length;return(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[a>0&&(0,t.jsxs)(p.Ct,{className:"flex gap-1.5",color:"gray",children:[(0,t.jsx)(v.Z,{className:"h-4 w-4 text-foreground"})," ",a]}),l>0&&(0,t.jsxs)(p.Ct,{className:"flex gap-1.5",color:"gray",children:[(0,t.jsx)(s.jXb,{className:"h-4 w-4 scale-[250%] text-rose-400"})," ",l]})]})}},{id:"actions",size:16,minSize:16,maxSize:16,header:e=>{let{table:r}=e;return(0,t.jsx)(DataTableBulkActions,{selection:r.getSelectedRowModel()})},cell:e=>{let{row:r}=e;return(0,t.jsx)(DataTableRowActions,{row:r})}}];var b=a(24253),A=a(29565),N=a(74755),D=a(24360);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let k=(0,D.Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var C=a(79008);function AnalysisMacrosTable(){var e,r;let a=A.S.analysis.getMacros.useQuery({});return(0,C.Ty)("Analysis",(0,f.useCallback)(e=>(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(e.MenubarMenu,{children:[(0,t.jsx)(e.MenubarTrigger,{className:"cursor-pointer",asChild:!0,children:(0,t.jsxs)(d(),{href:"/analysis",children:[(0,t.jsx)(e.MenubarIcon,{Icon:N.Z}),(0,t.jsx)("span",{className:"hidden lg:inline",children:"Back"})]})}),(0,t.jsx)(e.MenubarContent,{className:"hidden"})]})}),[])),(0,t.jsxs)("div",{className:"flex h-full flex-1 flex-col space-y-8 p-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Resonance analysis macros"}),(0,t.jsx)("p",{className:"font-medium text-muted-foreground",children:"Here's a list of your macro's ready for analysis!"})]}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsxs)(o.z,{href:"/analysis/macros/new",variant:"primary",children:[(0,t.jsx)(k,{className:"size-4"}),(0,t.jsx)("span",{children:"New Macro"})]})})]}),(0,t.jsx)(b.w,{data:null!==(r=null===(e=a.data)||void 0===e?void 0:e.result)&&void 0!==r?r:[],columns:w})]})}},23234:function(e,r,a){"use strict";a.d(r,{aR:function(){return AlertDialog},OL:function(){return z},le:function(){return T},_T:function(){return C},yT:function(){return _},xo:function(){return AlertDialogFooter},fY:function(){return AlertDialogHeader},f$:function(){return R}});var t=a(26248),l=a(49738),n=a(36577),s=a(74706),o=a(50320),i=a(23546),c=a(91036),d=a(21137);let[u,m]=(0,s.b)("AlertDialog",[i.p8]),f=(0,i.p8)(),h=(0,l.forwardRef)((e,r)=>{let{__scopeAlertDialog:a,...t}=e,s=f(a);return(0,l.createElement)(i.aV,(0,n.Z)({},s,t,{ref:r}))}),x="AlertDialogContent",[p,g]=u(x),j=(0,l.forwardRef)((e,r)=>{let{__scopeAlertDialog:a,children:t,...s}=e,u=f(a),m=(0,l.useRef)(null),h=(0,o.e)(r,m),g=(0,l.useRef)(null);return(0,l.createElement)(i.jm,{contentName:x,titleName:y,docsSlug:"alert-dialog"},(0,l.createElement)(p,{scope:a,cancelRef:g},(0,l.createElement)(i.VY,(0,n.Z)({role:"alertdialog"},u,s,{ref:h,onOpenAutoFocus:(0,c.M)(s.onOpenAutoFocus,e=>{var r;e.preventDefault(),null===(r=g.current)||void 0===r||r.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault()}),(0,l.createElement)(d.A4,null,t),!1)))}),y="AlertDialogTitle",v=(0,l.forwardRef)((e,r)=>{let{__scopeAlertDialog:a,...t}=e,s=f(a);return(0,l.createElement)(i.Dx,(0,n.Z)({},s,t,{ref:r}))}),w=(0,l.forwardRef)((e,r)=>{let{__scopeAlertDialog:a,...t}=e,s=f(a);return(0,l.createElement)(i.dk,(0,n.Z)({},s,t,{ref:r}))}),b=(0,l.forwardRef)((e,r)=>{let{__scopeAlertDialog:a,...t}=e,s=f(a);return(0,l.createElement)(i.x8,(0,n.Z)({},s,t,{ref:r}))}),A=(0,l.forwardRef)((e,r)=>{let{__scopeAlertDialog:a,...t}=e,{cancelRef:s}=g("AlertDialogCancel",a),c=f(a),d=(0,o.e)(r,s);return(0,l.createElement)(i.x8,(0,n.Z)({},c,t,{ref:d}))});var N=a(40514),D=a(95505);(0,N.h)(D.z,"Button");let AlertDialog=e=>{let{__scopeAlertDialog:r,...a}=e,t=f(r);return(0,l.createElement)(i.fC,(0,n.Z)({},t,a,{modal:!0}))},AlertDialogPortal=e=>{let{__scopeAlertDialog:r,...a}=e,t=f(r);return(0,l.createElement)(i.h_,(0,n.Z)({},t,a))},k=l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,t.jsx)(h,{className:(0,N.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l,ref:r})});(0,N.h)(k,h.displayName);let C=l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,t.jsxs)(AlertDialogPortal,{children:[(0,t.jsx)(k,{}),(0,t.jsx)(j,{ref:r,className:(0,N.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l})]})});(0,N.h)(C,j.displayName);let AlertDialogHeader=e=>{let{className:r,...a}=e;return(0,t.jsx)("div",{className:(0,N.cn)("flex flex-col space-y-2 text-center sm:text-left",r),...a})};AlertDialogHeader.displayName="AlertDialogHeader";let AlertDialogFooter=e=>{let{className:r,...a}=e;return(0,t.jsx)("div",{className:(0,N.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...a})};AlertDialogFooter.displayName="AlertDialogFooter";let R=l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,t.jsx)(v,{ref:r,className:(0,N.cn)("text-lg font-semibold",a),...l})});(0,N.h)(R,v.displayName);let _=l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,t.jsx)(w,{ref:r,className:(0,N.cn)("text-sm text-muted-foreground",a),...l})});(0,N.h)(_,w.displayName);let z=l.forwardRef(function(e,r){let{className:a,...l}=e;return(0,t.jsx)(b,{ref:r,className:(0,N.cn)((0,D.d)(l),a),...l})});(0,N.h)(z,b.displayName);let T=l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,t.jsx)(A,{ref:r,className:(0,N.cn)((0,D.d)({variant:"outline"}),"mt-2 sm:mt-0",a),...l})});(0,N.h)(T,A.displayName)}},function(e){e.O(0,[6545,6006,5325,7190,1526,3655,9157,3857,8055,6032,1160,9247,4289,9776,9008,2981,4675,7399,8625,1744],function(){return e(e.s=94926)}),_N_E=e.O()}]);
//# sourceMappingURL=page-5348b0fc4652b86e.js.map