(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7370],{17799:function(){},57582:function(){},26158:function(e,t,r){"use strict";r.d(t,{DN:function(){return h},NI:function(){return m}});var n=r(85232),a=r.n(n),o=r(46175),i=r.n(o),l=r(41877),s=r(85982),u=r.n(s),c=r(33619),d=r.n(c),p={darkMode:"class",content:["./pages/**/*.{js,ts,jsx,tsx}","./components/**/*.{js,ts,jsx,tsx}","./helpers/**/*.{js,ts,jsx,tsx}","./app/**/*.{js,ts,jsx,tsx}","./data/**/*.{js,ts,jsx,tsx}"],theme:{container:{center:!0,padding:"2rem",screens:{"2xl":"1400px"}},extend:{fontFamily:{sans:["var(--inter-font)",...i().fontFamily.sans]},keyframes:{ping:{"0%":{opacity:"100"},"75%, 100%":{transform:"scale(2)",opacity:"0"}},"accordion-down":{from:{height:"0"},to:{height:"var(--radix-accordion-content-height)"}},"accordion-up":{from:{height:"var(--radix-accordion-content-height)"},to:{height:"0"}}},animation:{"spin-fast":"spin 0.5s linear infinite","accordion-down":"accordion-down 0.2s ease-out","accordion-up":"accordion-up 0.2s ease-out"},colors:{brand:{50:"#f2ffe1",100:"#deffcc",200:"#bdff99",300:"#9cff66",400:"#7bff33",500:"#5aff00",600:"#48cc00",700:"#369900",800:"#246600",900:"#123300"},border:"hsl(var(--border))",input:"hsl(var(--input))",ring:"hsl(var(--ring))",background:"hsl(var(--background))",foreground:"hsl(var(--foreground))",primary:{DEFAULT:"hsl(var(--brand-400) / 50%)",foreground:"hsl(var(--white))"},secondary:{DEFAULT:"hsl(var(--secondary))",foreground:"hsl(var(--white))"},destructive:{DEFAULT:"hsl(var(--red-400))",foreground:"hsl(var(--black))"},muted:{DEFAULT:"hsl(var(--muted))",foreground:"hsl(var(--muted-foreground))"},accent:{DEFAULT:"hsl(var(--accent))",foreground:"hsl(var(--white))"},popover:{DEFAULT:"hsl(var(--popover))",foreground:"hsl(var(--popover-foreground))"},card:{DEFAULT:"hsl(var(--card))",foreground:"hsl(var(--card-foreground))"}},borderRadius:{lg:"var(--radius)",md:"calc(var(--radius) - 2px)",sm:"calc(var(--radius) - 4px)"},fontSize:{"2xs":"0.6rem",s:"0.8125rem"},containers:{"screen-sm":"640px","screen-md":"768px","screen-lg":"1024px","screen-xl":"1280px","screen-2xl":"1536px"}}},plugins:[r(79608),r(53094),r(49513),r(64037)({nocompatible:!0}),function(e){let{addBase:t,theme:r}=e;t({":root":Object.fromEntries(Object.entries((0,l.default)(r("colors"))).map(e=>{let[t,r]=e,n=u().hex.hsl(r);return["--".concat(t),r.startsWith("#")?"".concat(n[0]," ").concat(n[1],"% ").concat(n[2],"%"):r]}))})},function(e){let{matchUtilities:t,theme:r}=e;t({"bg-grid":e=>({backgroundImage:'url("'.concat(d()('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32" fill="none" stroke="'.concat(e,'"><path d="M0 .5H31.5V32"/></svg>')),'")')}),"bg-grid-small":e=>({backgroundImage:'url("'.concat(d()('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="8" height="8" fill="none" stroke="'.concat(e,'"><path d="M0 .5H31.5V32"/></svg>')),'")')}),"bg-dot":e=>({backgroundImage:'url("'.concat(d()('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="16" height="16" fill="none"><circle fill="'.concat(e,'" id="pattern-circle" cx="10" cy="10" r="1.6257413380501518"></circle></svg>')),'")')})},{values:(0,l.default)(r("backgroundColor")),type:"color"})}]};let f=a()(p),m=f.theme.colors,h=Object.fromEntries(Object.keys(m).filter(e=>{let t=m[e];return null!=t&&"string"!=typeof t&&!("DEFAULT"in t)}).map(e=>[e,m[e]]))},98814:function(e,t,r){"use strict";r.d(t,{b:function(){return ChartTheme}});var n=r(97134);let ChartTheme=class ChartTheme extends n.SciChartJSDarkv2Theme{constructor(){super(),this.sciChartBackground="transparent",this.loadingAnimationBackground="transparent",this.axisBandsFill="#20212333",this.majorGridLineBrush="#AAAAAA37",this.minorGridLineBrush="#77777719",this.strokePalette=["#F48420","#AE408E","#209FD9","#264B93"],this.fillPalette=["#F4842077","#AE408E77","#209FD977","#264B9377"],this.isLightBackground=!1}}},61518:function(e,t,r){"use strict";r.d(t,{LM:function(){return h},Mg:function(){return isXyDataSeries},OH:function(){return x},QR:function(){return useADXLSignalChart},ZA:function(){return usePSDChart},as:function(){return y},ck:function(){return g},jh:function(){return isXyyDataSeries},to:function(){return getPSDTooltipLegendTemplate},wx:function(){return c}});var n=r(97134),a=r(72579),o=r(98814),i=r(73047),l=r.n(i),s=r(26158),u=r(49738);let c=128;n.SciChartSurface.configure({wasmUrl:"/configure/scichart2d.wasm",dataUrl:"/configure/scichart2d.data"}),n.SciChartSurface.UseCommunityLicense();let d=new o.b,p="signal",f="history",m="amplitude",h=131,isXyyDataSeries=e=>e.type===n.EDataSeriesType.Xyy,isXyDataSeries=e=>e.type===n.EDataSeriesType.Xy,getAxisColorName=e=>{switch(e){case"x":return"yellow";case"y":return"sky";case"z":return"rose";default:return"brand"}},getAxisColor=e=>s.NI[getAxisColorName(e)];new n.NumberRange(-1e4,1e4);let useADXLSignalChart=e=>(0,a.Q8)(null,(0,u.useCallback)(t=>{let r=getAxisColor(e),a=new n.CategoryAxis(t.webAssemblyContext2D,{id:p+e,autoRange:n.EAutoRange.Always,maxAutoTicks:c,drawLabels:!1,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1,drawMinorGridLines:!1,drawMajorGridLines:!1});t.xAxes.add(a);let o=new n.CategoryAxis(t.webAssemblyContext2D,{id:f+e,autoRange:n.EAutoRange.Always,drawLabels:!1,drawMinorGridLines:!1,drawMajorTickLines:!1});t.xAxes.add(o);let i=new n.NumericAxis(t.webAssemblyContext2D,{autoRange:n.EAutoRange.Never,visibleRange:new n.NumberRange(-1e3,1e3),drawLabels:!1,id:m+e,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1,drawMinorGridLines:!1,drawMajorGridLines:!1,axisAlignment:n.EAxisAlignment.Left});t.yAxes.add(i);let l=new n.XyDataSeries(t.webAssemblyContext2D,{fifoCapacity:c,containsNaN:!1,isSorted:!0,dataSeriesName:e.toLocaleUpperCase(),dataIsSortedInX:!0,xValues:Array(c).fill(0).map((e,t)=>t),yValues:Array(c).fill(0)}),s=new n.FastLineRenderableSeries(t.webAssemblyContext2D,{xAxisId:p+e,yAxisId:m+e,stroke:r[400],strokeThickness:2,dataSeries:l,effect:new n.GlowEffect(t.webAssemblyContext2D,{intensity:1,range:1})});t.renderableSeries.add(s);let u=new n.XyDataSeries(t.webAssemblyContext2D,{fifoCapacity:200*c,containsNaN:!1,isSorted:!0,dataSeriesName:e.toLocaleUpperCase()+" History",dataIsSortedInX:!0,xValues:Array(200*c).fill(0).map((e,t)=>t),yValues:Array(200*c).fill(0)}),d=new n.FastLineRenderableSeries(t.webAssemblyContext2D,{stroke:r[500]+"22",strokeThickness:1,opacity:.6,yAxisId:m+e,xAxisId:f+e,dataSeries:u});return t.renderableSeries.add(d),s.animation=new n.WaveAnimation({duration:500}),d.animation=new n.WaveAnimation({duration:500}),{signalData:l,signalSeries:s,historyData:u,historySeries:d,xAxis:a,xHistoryAxis:o,yAxis:i}},[e])),g="amplitude",y=new n.NumberRange(0,1500),x={surface:{theme:d,padding:n.Thickness.fromNumber(0)},xAxes:[{type:n.EAxisType.NumericAxis,options:{visibleRange:new n.NumberRange(0,200),labelStyle:{...l().style,fontSize:13,fontWeight:"600",padding:new n.Thickness(15,15,15,15)},labelPostfix:"Hz",drawMinorGridLines:!0,minorsPerMajor:10,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1}}],yAxes:[{type:n.EAxisType.NumericAxis,options:{id:g,axisAlignment:n.EAxisAlignment.Left,growBy:new n.NumberRange(0,.1),visibleRange:y,labelFormat:n.ENumericFormat.Exponential,labelStyle:{...l().style,fontSize:13,fontWeight:"600",padding:new n.Thickness(15,15,15,15)},autoRangeAnimation:{duration:140,animateInitialRanging:!1,animateSubsequentRanging:!0,easing:n.easing.inOutCubic},drawMinorGridLines:!0,drawMinorTickLines:!1,drawMajorTickLines:!1,drawMajorBands:!1,axisTitleStyle:{fontSize:10}}}]},w={...x,series:[{type:n.ESeriesType.MountainSeries,options:{id:"total",yAxisId:g,strokeThickness:3,fill:s.NI.brand[500]+"22",stroke:s.NI.brand[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(h).fill(0).map((e,t)=>Math.floor(t/h*200)),yValues:Array(h).fill(0).map((e,t)=>0)}},{type:n.ESeriesType.LineSeries,options:{id:"z",yAxisId:g,strokeThickness:3,stroke:getAxisColor("z")[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(h).fill(0).map((e,t)=>Math.floor(t/h*200)),yValues:Array(h).fill(0).map((e,t)=>0)}},{type:n.ESeriesType.LineSeries,options:{id:"y",yAxisId:g,strokeThickness:3,stroke:getAxisColor("y")[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(h).fill(0).map((e,t)=>Math.floor(t/h*200)),yValues:Array(h).fill(0).map((e,t)=>0)}},{type:n.ESeriesType.LineSeries,options:{id:"x",yAxisId:g,strokeThickness:3,stroke:getAxisColor("x")[400]},xyData:{containsNaN:!1,isSorted:!0,xValues:Array(h).fill(0).map((e,t)=>Math.floor(t/h*200)),yValues:Array(h).fill(0).map((e,t)=>0)}}]},getPSDTooltipLegendTemplate=(e,t)=>{let r="",a=32,o=[];e.forEach((e,t)=>{let i=e.renderableSeries.rolloverModifierProps.tooltipColor;if(o.push("".concat(e.renderableSeries.rolloverModifierProps.tooltipTitle).concat(":"," ").concat((e.yValue/1e3).toFixed(2)," g^2/Hz @ ").concat(e.formattedXValue)),r+='<text x="'.concat(16,'" y="').concat(a,'" class="text-sm text-medium font-sans" fill="').concat(s.DN[i][400],'">\n		<tspan class="font-bold">').concat(e.renderableSeries.rolloverModifierProps.tooltipTitle,"</tspan>").concat(":"," ").concat((e.yValue/1e3).toFixed(2),' g<tspan y="').concat(a-4,'" class="sup">2</tspan><tspan y=').concat(a,">/Hz</tspan>@ ").concat(e.formattedXValue,"\n		</text>"),a+=20,e.dataSeriesType===n.EDataSeriesType.Xyy){let t=e.renderableSeries.rolloverModifierProps1.tooltipColor;o.push("".concat(e.renderableSeries.rolloverModifierProps1.tooltipTitle).concat(":"," ").concat((e.y1Value/1e3).toFixed(2)," g^2/Hz @ ").concat(e.formattedXValue)),r+='<text x="'.concat(16,'" y="').concat(a,'" class="text-sm text-medium font-sans" fill="').concat(s.DN[t][400],'">\n				<tspan class="font-bold">').concat(e.renderableSeries.rolloverModifierProps1.tooltipTitle,"</tspan>").concat(":"," ").concat((e.y1Value/1e3).toFixed(2),' g<tspan y="').concat(a-4,'" class="sup">2</tspan><tspan y=').concat(a,">/Hz</tspan> @ ").concat(e.formattedXValue,"\n			</text>"),a+=20,r+='<text x="'.concat(16,'" y="').concat(a,'" class="text-sm text-medium font-sans" fill="').concat(s.DN.zinc[400],'">\n				<tspan class="font-bold">Amplitude Difference</tspan>').concat(":"," ").concat(Math.abs((e.y1Value-e.yValue)/1e3).toFixed(2),' g<tspan y="').concat(a-4,'" class="sup">2</tspan><tspan y=').concat(a,">/Hz</tspan>\n			</text>"),a+=20}});let i=0===e.length?0:16+1.7*calcTooltipWidth(o.reduce(function(e,t){return t.length>e?t.length:e},0)),l=0===e.length?0:a;return'<svg width="'.concat(i,'" height="').concat(l,'">\n				<rect rx="8" ry="8" width="100%" height="100%" class="stroke-zinc-400/10 fill-zinc-900/70 stroke-1" />\n                ').concat(r,"\n            </svg>")},psdRolloverTooltipTemplate=(e,t,r)=>{let a="",o=r.tooltipProps,i=o.tooltipTitle,l=o.tooltipColor,u=s.NI[l][100],c=(0,n.parseColorToTArgb)(s.NI[l][400]),d=(0,n.parseColorToTArgb)(s.NI[l][600]),p=o.tooltipLabelX,f=o.tooltipLabelY,m=s.NI[l][900];c.opacity=Math.round(204),d.opacity=Math.round(51);let h=null!==(b=r.tooltipProps.tooltipDataTemplate)&&void 0!==b?b:r.tooltipProps.rolloverModifier.tooltipDataTemplate,g=h(t,i,p,f),y=null!==(v=o.width)&&void 0!==v?v:calcTooltipWidth(g.reduce(function(e,t){return t.length>e?t.length:e},0)),x=null!==(S=o.height)&&void 0!==S?S:calcTooltipHeight(g.length);r.updateSize(y,x),g.forEach(function(e,t){a+='<tspan x="8" dy="1.2em">'.concat(e,"</tspan>")});let w='<feGaussianBlur result="blurOut" in="offOut" stdDeviation="3" />';if(void 0!==m){var b,v,S,A=(0,n.parseColorToTArgb)(m);w='\n			<feColorMatrix result="matrixOut" in="offOut" type="matrix"\n				values="0 0 0 0 \n				'.concat(A.red/255,"\n				0 0 0 0\n				").concat(A.green/255,"\n				0 0 0 0\n				").concat(A.blue/255,"\n				0 0 0 \n				").concat(A.opacity/255,'\n				0 0" \n			/>\n			<feGaussianBlur result="blurOut" in="matrixOut" stdDeviation="3" />')}return'\n		<svg class="scichart__rollover-tooltip transition-all" width="'.concat(y,'" height="').concat(x,'">\n			<defs>\n				<filter id="').concat(e,'" x="0" y="0" width="200%" height="200%">\n					<feOffset result="offOut" in="SourceAlpha" dx="3" dy="3" />\n						\n						').concat(w,'\n					<feBlend in="SourceGraphic" in2="blurOut" mode="normal" />\n				</filter>\n			</defs>\n			<rect rx="8" ry="8" width="100%" height="100%" fill="').concat((0,n.parseTArgbToHtmlColor)(d),'" stroke="').concat((0,n.parseTArgbToHtmlColor)(c),'" stroke-width="2"  filter="url(#').concat(e,'" />\n			<svg width="100%">\n				<text x="8" y="3" class="text-sm font-sans font-semibold" dy="0" fill="').concat(u,'">\n				').concat(a,"\n				</text>\n			</svg>\n		</svg>")},getTooltipDataTemplate=(e,t,r,n)=>{let a=[];return a.push(t),a.push('<tspan class="opacity-70 font-medium">'.concat(e.formattedYValue," @ ").concat(e.formattedXValue,"</tspan>")),a},usePSDChart=()=>(0,a.Q8)(w,(0,u.useCallback)(e=>{let t=new n.XyDataSeries(e.webAssemblyContext2D,{id:"xAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});e.addDeletable(t);let r=new n.XyDataSeries(e.webAssemblyContext2D,{id:"yAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});e.addDeletable(r);let a=new n.XyDataSeries(e.webAssemblyContext2D,{id:"zAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});e.addDeletable(a);let o=new n.XyDataSeries(e.webAssemblyContext2D,{id:"totalAnimationSeries",containsNaN:!1,isSorted:!0,dataIsSortedInX:!0});return e.addDeletable(o),e.renderableSeries.asArray().forEach(t=>{"total"===t.id&&(t.paletteProvider=n.PaletteFactory.createGradient(e.webAssemblyContext2D,new n.GradientParams(new n.Point(0,0),new n.Point(1,1),[{offset:0,color:s.NI.brand[400]},{offset:.8,color:s.NI.brand[600]}]),{enableStroke:!0,enableFill:!0,fillOpacity:.17,pointMarkerOpacity:.5})),t.rolloverModifierProps.tooltipColor=getAxisColorName(t.id),t.rolloverModifierProps.tooltipTemplate=psdRolloverTooltipTemplate,t.rolloverModifierProps.tooltipTitle=t.id.substring(0,1).toUpperCase()+t.id.substring(1)+" Power Spectral Density",t.animation=new n.WaveAnimation({duration:500})}),e.chartModifiers.add(new n.RolloverModifier({showRolloverLine:!0,showTooltip:!1,yAxisId:g,tooltipDataTemplate:getTooltipDataTemplate})),e.chartModifiers.add(new n.CursorModifier({crosshairStroke:s.NI.sky[400],crosshairStrokeThickness:1,showXLine:!0,showYLine:!0,showTooltip:!1,yAxisId:g,axisLabelFill:s.NI.zinc[900],axisLabelStroke:s.NI.zinc[100]})),{animationSeries:{x:t,y:r,z:a,total:o}}},[]));var calcTooltipWidth=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e*t+20},calcTooltipHeight=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return t*e+16}},72579:function(e,t,r){"use strict";r.d(t,{Dv:function(){return useADXLFifoTensor},Gs:function(){return useBufferedPSD},O3:function(){return useBufferedADXLSignal},Q8:function(){return useChart},Tv:function(){return useDynamicAxisRange},ag:function(){return useAccumulatedPSD},kP:function(){return useTicker},xc:function(){return useRealtimeSensor}});var n=r(26248),a=r(43790),o=r(26989),i=r(49738),l=r(87155),s=r(68705),u=r(97134),c=r(92427);r(39615);var d=r(44343),p=r(61518),f=r(98814),m=r(6363),h=r(50962),g=r(57812),y=r(98055),x=r(21899),w=r(55797),b=r(48418),v=r(33334);let getWsURL=()=>{let e=(0,o.X)();return null==e||""==e.trim()?null:"ws://".concat(e,":7125/klippysocket")},S=0,isSuccessResponse=e=>!("error"in e),useAccelerometerWithType=e=>{let t=(0,w.sJ)(b.OS),r=(0,v.YC)(),n="adxl345";if("controlboard"===e&&((null==t?void 0:t.ADXL345SPI)!=null&&(n="adxl345"),(null==t?void 0:t.LIS2DW)!=null&&(n="lis2dw")),"toolboard_t0"===e||"toolboard_t1"===e){var a;let t=null===(a=r.find(t=>t.getToolboardName()===e))||void 0===a?void 0:a.getToolboard();if(null==t)throw Error("No toolboard found for T0");null!=t.ADXL345SPI&&(n="adxl345"),null!=t.LIS2DW&&(n="lis2dw")}return"beacon"===e&&(n="beacon"),(0,i.useMemo)(()=>x.U9.parse({name:e,type:n}),[e,n])},useRealtimeSensor=e=>{let[t,r]=(0,i.useState)(getWsURL()),n=(0,i.useRef)({}),o=(0,i.useRef)({}),[u,c]=(0,i.useState)(!1),{onSubscriptionFailure:d,onDataUpdate:p,sensor:f,enabled:h,onSubscriptionSuccess:g}=e,x=useAccelerometerWithType(f),w=(0,i.useRef)(u);w.current=u;let b=(0,s.n)();(0,i.useEffect)(()=>{r(getWsURL())},[]);let{lastJsonMessage:v,sendJsonMessage:A,readyState:T}=(0,a.ZP)(!1===h?null:t,{shouldReconnect:e=>!0,onMessage:e=>{if(p&&w.current)try{let t=JSON.parse(e.data);if(isSuccessResponse(t)&&null!=t.params&&"data"in t.params){let e=m.o5.parse(t.params);null==p||p(e)}else isSuccessResponse(t)||(0,l.j)().error("Error in response from klipper socket",t)}catch(t){console.warn("OnMessage: Failed to parse message",t,e.data)}},reconnectAttempts:1/0,reconnectInterval:3e3,share:!1}),k=(0,i.useCallback)(async()=>{let e=++S;return new Promise((t,r)=>{n.current[e]=(e,n)=>e?r(e):n&&"object"==typeof n&&"error"in n&&n.error?r(n.error):null==n?r(Error("No result. Unknown response format.")):void t(n),o.current[e]=window.setTimeout(()=>{var t,r;null===(t=(r=n.current)[e])||void 0===t||t.call(r,Error("Request timed out"),null),delete n.current[e],delete o.current[e]},1e4),A({jsonrpc:"2.0",method:"lis2dw"===x.type?"lis2dw/dump_lis2dw":"beacon"===x.type?"beacon/dump_accel":"adxl345/dump_adxl345",params:{sensor:x.name,response_template:{}},id:e})})},[A,x]);return(0,i.useEffect)(()=>{1!==T||"ready"!==b||w.current?w.current&&c(!1):k().then(e=>{let t=m.NI.parse(e);(0,l.j)().info(t,"Subscribed to ADXL345"),c(!0),null==g||g(t.header)}).catch(e=>{(0,l.j)().error(e),c(!1),d?d(e):y.A.error("Failed to start accelerometer stream",{description:e.message})})},[b,T,k,d,g]),(0,i.useEffect)(()=>{(null==v?void 0:v.id)&&n.current[v.id]&&(window.clearTimeout(o.current[v.id]),isSuccessResponse(v)?n.current[v.id](null,v.result):n.current[v.id](Error(v.error.message),null),delete o.current[v.id],delete n.current[v.id])},[v]),(0,i.useEffect)(()=>()=>{for(let e in w.current=!1,o.current)delete o.current[e],delete n.current[e]},[]),{isSubscribed:u}},A=new f.b,useChart=function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=(0,i.useRef)(null),[o,l]=(0,i.useState)(!1),s=(0,i.useRef)(null);return(0,i.useMemo)(()=>({forwardProps:{initChart:async n=>{let o=null;if(null!=e){var i,l,c,d,p;let t=null===(i=e.surface)||void 0===i?void 0:i.padding,a={...e,surface:{...e.surface,padding:new u.Thickness(null!==(l=null==t?void 0:t.top)&&void 0!==l?l:0,null!==(c=null==t?void 0:t.right)&&void 0!==c?c:0,null!==(d=null==t?void 0:t.bottom)&&void 0!==d?d:0,(null!==(p=null==t?void 0:t.left)&&void 0!==p?p:0)+(r?300:0))}};o=await (0,u.build2DChart)(n,a)}else o=await u.SciChartSurface.create(n,{theme:A,padding:new u.Thickness(0,0,0,r?300:0)});return o.sciChartSurface.watermarkPosition=u.EWatermarkPosition.BottomLeft,o.sciChartSurface.watermarkRelativeToCanvas=!0,a.current=o.sciChartSurface,t&&(s.current=t(o.sciChartSurface)),{sciChartSurface:o.sciChartSurface}},onInit:()=>l(!0),style:{marginLeft:r?-300:0},fallback:(0,n.jsx)(g.I,{className:(0,h.d)(r&&"ml-[150px]","bg-zinc-900")})},surface:a,isInitialized:o,data:s}),[r,o,e,t])},T=["time","x_acceleration","y_acceleration","z_acceleration"],useADXLFifoTensor=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8192,r=(0,i.useRef)(null),n=(0,i.useRef)(0),[a,o]=(0,i.useState)(0),l=(0,i.useCallback)(e=>{if(null==r.current)return null;let t=Math.min(e,r.current.shape[0]),[n,a]=(0,c.Vl2)(r.current,[t,r.current.shape[0]-t],0);return r.current.dispose(),r.current=a,n},[]),s=(0,i.useMemo)(()=>[e.findIndex(e=>e.startsWith("time")),e.findIndex(e=>e.startsWith("x_acceleration")),e.findIndex(e=>e.startsWith("y_acceleration")),e.findIndex(e=>e.startsWith("z_acceleration"))],[e]),u=(0,i.useCallback)(e=>{var a,i;let u=(0,c.Iqj)(e.data,s,1),d=r.current?(0,c.Izb)([r.current,u],0):u;if(d!==u&&u.dispose(),null===(a=r.current)||void 0===a||a.dispose(),r.current=d,n.current=e.data.length/(e.data[e.data.length-1][0]-e.data[0][0]),r.current.shape[0]>t){console.debug("Fifo capacity exceeded, dropping frames",r.current.shape[0]);let e=r.current.shape[0]-t;null===(i=l(e))||void 0===i||i.dispose(),o(t=>t+e)}},[s,t,l]);return(0,i.useEffect)(()=>()=>{var e;null===(e=r.current)||void 0===e||e.dispose(),r.current=null},[]),{onData:u,take:l,buffer:r,dropped:a,sampleRate:n}},useBufferedADXLSignal=(e,t)=>{let r=(0,i.useRef)(new Date().getTime()),n=(0,i.useRef)(t);n.current=t;let a=(0,i.useCallback)(async()=>{var t;if(new Date().getTime(),r.current,null==e.buffer.current||e.buffer.current.shape[0]<p.wx/2)return;let a=p.wx/2;e.buffer.current.shape[0]>12*p.wx&&(a+=p.wx);let o=e.take(a);if(null==o)return;let[i,l,s,u]=(0,c.Vl2)(o,4,1);null===(t=n.current)||void 0===t||t.call(n,(0,c.XLQ)(i,[i.shape[0]]),(0,c.XLQ)(l,[l.shape[0]]),(0,c.XLQ)(s,[s.shape[0]]),(0,c.XLQ)(u,[u.shape[0]])),i.dispose(),o.dispose(),l.dispose(),s.dispose(),u.dispose()},[e]);return a},useBufferedPSD=(e,t)=>{let r=(0,i.useRef)((0,c.RRF)([])),n=(0,i.useRef)((0,c.RRF)([])),a=(0,i.useRef)((0,c.RRF)([])),o=(0,i.useRef)(t);o.current=t;let l=(0,i.useCallback)(async(t,i,l,s,u)=>{let p=e.current,f=(0,c.zoF)([i,r.current]),m=(0,c.zoF)([l,n.current]),h=(0,c.zoF)([s,a.current]);if(i.dispose(),l.dispose(),s.dispose(),t.dispose(),r.current.dispose(),n.current.dispose(),a.current.dispose(),r.current=f,n.current=m,a.current=h,r.current.shape[0]>p){var g;let e=r.current.clone(),t=n.current.clone(),i=a.current.clone(),l=(0,c.QBD)([e,t,i]);r.current.dispose(),n.current.dispose(),a.current.dispose(),r.current=(0,c.RRF)([]),n.current=(0,c.RRF)([]),a.current=(0,c.RRF)([]);let[s,f,m]=await Promise.all([(0,d.i2)(e,p,{isDetrended:u}),(0,d.i2)(t,p,{isDetrended:u}),(0,d.i2)(i,p,{isDetrended:u})]),h=(0,d.L)([s,f,m]);e.dispose(),t.dispose(),i.dispose(),l.dispose(),null===(g=o.current)||void 0===g||g.call(o,s,f,m,h)}},[e]);return l},useAccumulatedPSD=e=>{let[t,r]=(0,i.useState)(!1),n=(0,i.useRef)({x:[],y:[],z:[],total:[]}),a=(0,i.useRef)(e);a.current=e;let o=(0,i.useCallback)(async()=>{n.current={x:[],y:[],z:[],total:[]},r(!0)},[]),l=(0,i.useCallback)(async()=>{let e=n.current,[t,a,o,i]=await Promise.all([(0,d.r5)(e.x),(0,d.r5)(e.y),(0,d.r5)(e.z),(0,d.r5)(e.total)]);return n.current={x:[],y:[],z:[],total:[]},r(!1),{x:t,y:a,z:o,total:i,source:e}},[]),s=(0,i.useCallback)(async(e,r,o,i)=>{var l,s;if(!t){let t={x:e,y:r,z:o,total:i,source:{x:[e],y:[r],z:[o],total:[i]}};return null===(s=a.current)||void 0===s||s.call(a,t),t}n.current.x.push(e),n.current.y.push(r),n.current.z.push(o),n.current.total.push(i);let[u,c,p,f]=await Promise.all([(0,d.r5)(n.current.x),(0,d.r5)(n.current.y),(0,d.r5)(n.current.z),(0,d.r5)(n.current.total)]),m={x:u,y:c,z:p,total:f,source:n.current};return null===(l=a.current)||void 0===l||l.call(a,m),m},[t]);return(0,i.useMemo)(()=>({startAccumulation:o,stopAccumulation:l,onData:s,isAccumulating:t}),[t,s,o,l])};function useTicker(e,t){if("function"==typeof e&&(t=e),null==t)throw Error("Tick function is required");let r=(0,i.useRef)(t);r.current=t;let n=Math.floor(1e3/("function"==typeof e?50:e));(0,i.useEffect)(()=>{let e=0,update=async()=>{await r.current(),e=window.setTimeout(update,n)};return e=window.setTimeout(update,n),()=>{window.clearTimeout(e)}},[n])}let maximumRangeUnion=e=>Array.isArray(e)?e.reduce((e,t)=>{if(null==t)return e;let r=t.getMaximumRange();return e.union(r)},new u.NumberRange):e.getMaximumRange(),visibleRangeUnion=e=>Array.isArray(e)?e.reduce((e,t)=>{if(null==t)return e;let r=t.visibleRange;return e.union(r)},new u.NumberRange):e.visibleRange,growByUnion=e=>Array.isArray(e)?e.reduce((e,t)=>{var r;if(null==t)return e;let n=null!==(r=t.growBy)&&void 0!==r?r:new u.NumberRange;return e.union(n)},new u.NumberRange):e.growBy;function useDynamicAxisRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new u.NumberRange(0,0),r=(0,i.useRef)(e?maximumRangeUnion(e):null),n=(0,i.useRef)(new Date().getTime()),a=(0,i.useRef)(new Date().getTime()),o=(0,i.useCallback)(function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;if(null==e)return;let i=Array.isArray(e)?e:[e];null==r.current&&(r.current=visibleRangeUnion(e));let l=new Date().getTime()-n.current,s=new Date().getTime()-a.current;n.current=new Date().getTime();let c=maximumRangeUnion(e);o&&(c=c.union(o));let d=growByUnion(e);d&&c.growBy(d);let p=null,f=null;if(c.max>r.current.max&&(p=c.max),c.min<r.current.min&&(f=c.min),null!=p||null!=f){i.forEach(e=>{null!=r.current&&null!=e&&e.animateVisibleRange(new u.NumberRange(Math.min(null!=f?f:r.current.min,t.min),Math.max(null!=p?p:r.current.max,t.max)),l,u.easing.inOutCirc)}),a.current=new Date().getTime();return}if(s>3*l&&(c.max<r.current.max&&(p=r.current.max-(r.current.max-c.max)),c.min>r.current.min&&(f=r.current.min+(c.min-r.current.min)),null!=p||null!=f)){i.forEach(e=>{null!=r.current&&null!=e&&e.animateVisibleRange(new u.NumberRange(Math.min(null!=f?f:r.current.min,t.min),Math.max(null!=p?p:r.current.max,t.max)),l/2,u.easing.inOutCirc)}),a.current=new Date().getTime();return}},[e,t]);return o}},44343:function(e,t,r){"use strict";r.d(t,{L:function(){return sumPSDs},i2:function(){return powerSpectralDensity},iQ:function(){return detrendSignal},r5:function(){return welch}});var n=r(92427);r(39615);var a=r(97134);let detrendSignal=e=>(0,n.lub)(()=>(0,n.luU)(e,(0,n.J69)(e,0,!0)));async function powerSpectralDensity(e,t,r){let{fftSize:o,_scaling:i}=Object.assign({fftSize:1<<Math.ceil(Math.log2(Math.abs(.5*t-1))),_scaling:"psd"},r);if("psd"!=i&&"none"!=i)throw Error("Unknown scaling");let l="none"===i?1:2,s=n.tdS.hannWindow(o),u=await (0,n.lub)(()=>(0,n.hiC)((0,n.hiC)(1,(0,n.Smz)((0,n.sQ3)(s,2))),t)).array(),c=(null==r?void 0:r.isDetrended)?e:detrendSignal(e),d=n.tdS.stft(c,o,Math.floor(o/2),o,n.tdS.hannWindow),p=await d.array();return d.dispose(),c.dispose(),s.dispose(),welch(p.map(e=>{let r=[],n=[],s=0,c=0;for(var d=0;d<e.length-1;d+=2){let a=(0===d?0:d/2)*(t/o);if(a>200)continue;let p=(d+2)/2*(t/o),f=e[d]**2+e[d+1]**2;f*=u,"psd"==i&&d>0&&p<200&&(f*=l),f>s&&(s=f),f<c&&(c=f),r.push(f),n.push(a)}return{estimates:r,frequencies:n,powerRange:new a.NumberRange(c,s)}}))}let welch=async e=>{if(0==e.length)throw Error("Unable to calculate any PSD estimates");if(1==e.length)return console.warn("Not enough data to compute more than one segment, returning single modified periodogram."),e[0];let t=e[0].estimates.length,r=Array(t).fill(0);for(let n=0;n<e.length;n++)for(let a=0;a<t;a++)r[a]+=e[n].estimates[a];let n=0,o=0;for(let a=0;a<t;a++)r[a]=r[a]/e.length,r[a]>n&&(n=r[a]),r[a]<o&&(o=r[a]);return{estimates:r,frequencies:e[0].frequencies,powerRange:new a.NumberRange(o,n)}},sumPSDs=e=>{let t=e[0].estimates.length,r=Array(t).fill(0);for(let n=0;n<e.length;n++)for(let a=0;a<t;a++)r[a]+=e[n].estimates[a];let{minPower:n,maxPower:o}=e.reduce((e,t)=>(t.powerRange.min<e.minPower&&(e.minPower=t.powerRange.min),t.powerRange.max>e.maxPower&&(e.maxPower=t.powerRange.max),e),{minPower:0,maxPower:0});return{estimates:r,frequencies:e[0].frequencies,powerRange:new a.NumberRange(n,o)}}},57812:function(e,t,r){"use strict";r.d(t,{I:function(){return FullLoadScreen}});var n=r(26248),a=r(81503),o=r(50962);let FullLoadScreen=e=>(0,n.jsx)("div",{className:(0,o.d)("flex h-full w-full flex-1 items-center justify-center",e.className),children:(0,n.jsx)(a.$,{className:"h-8 w-8"})})},69009:function(e,t,r){"use strict";r.r(t),r.d(t,{NoSSR:function(){return NoSSR}});var n=r(26248),a=r(17533),o=r(49738),i=r(57812);let NoSSR=e=>{var t;let r=(0,a.O)();return r?(0,n.jsx)(l,{children:e.children}):null!==(t=e.fallback)&&void 0!==t?t:(0,n.jsx)(i.I,{})},l=(0,o.lazy)(()=>Promise.resolve({default:e=>(0,n.jsx)(n.Fragment,{children:e.children})}))},81503:function(e,t,r){"use strict";r.d(t,{$:function(){return Spinner}});var n=r(26248),a=r(44838);let Spinner=e=>(0,n.jsxs)("svg",{className:(0,a.m)("h-5 w-5 animate-spin text-black dark:text-white",e.noMargin?"":"-ml-1 mr-3",e.className),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},24740:function(e,t,r){"use strict";r.d(t,{Jt:function(){return a},uo:function(){return xEndstopOptions}});var n=r(78185);let xEndstopOptions=(e,t)=>{let r=[];if((null==t?void 0:t.toolboard)!=null&&r.push({id:"endstop-toolboard",title:"Physical Endstop",badge:[{color:"sky",children:"".concat(t.toolboard.name," T").concat(t.toolNumber)}]}),(null==t?void 0:t.axis)===n.po.x){var a,o,i,l;r.push({id:"endstop",title:"Physical Endstop",badge:[{color:"purple",children:null!==(i=null==e?void 0:null===(a=e.controlboard)||void 0===a?void 0:a.name)&&void 0!==i?i:"Control Board"}]}),r.push({id:"sensorless",title:"Sensorless Homing",badge:[{color:"purple",children:null!==(l=null==e?void 0:null===(o=e.controlboard)||void 0===o?void 0:o.name)&&void 0!==l?l:"Control Board"}]})}return r},a={id:"endstop",title:"Physical Endstop",badge:[{color:"purple",children:"Control Board"}]}},17533:function(e,t,r){"use strict";r.d(t,{O:function(){return useIsClient}});var n=r(49738);let useIsClient=()=>{let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{t(!0)},[]),e}},68705:function(e,t,r){"use strict";r.d(t,{n:function(){return useKlippyStateHandler}});var n=r(49738),a=r(61352);let useKlippyStateHandler=()=>{let{query:e,lastMessage:t}=(0,a.oK)({passThroughUpdateMethods:["notify_klippy_ready","notify_klippy_shutdown","notify_klippy_disconnected"]}),[r,o]=(0,n.useState)("unknown"),i=(0,n.useCallback)(async()=>{if(null!=e)try{let t=await e("server.info");if((null==t?void 0:t.klippy_state)==null)return;let r=t.klippy_state;o(r),"startup"===r&&setTimeout(()=>{i()},2e3)}catch(e){o("unknown")}},[e,o]);return(0,n.useEffect)(()=>{null!=e&&i()},[e,i]),(0,n.useEffect)(()=>{t&&"method"in t&&"notify_klippy_ready"===t.method&&o("ready"),t&&"method"in t&&"notify_klippy_shutdown"===t.method&&o("shutdown"),t&&"method"in t&&"notify_klippy_disconnected"===t.method&&(o("unknown"),i())},[t,i,o]),r}},33334:function(e,t,r){"use strict";r.d(t,{YC:function(){return useToolheads},yk:function(){return useToolheadConfiguration}});var n=r(51758),a=r(97370),o=r(55797),i=r(49738),l=r(48418),s=r(57674),u=r(89553),c=r(24740),d=r(17710);let useToolheads=()=>{let e=(0,o.sJ)(s.$T),t=(0,i.useMemo)(()=>null==e?void 0:e.filter(Boolean).map(e=>new n.D(e)),[e]);return t},useToolheadConfiguration=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=(0,o.sJ)(s.wm),p=(0,i.useRef)(r);p.current!==r&&r.length>0&&(p.current=r.slice());let f=(0,i.useMemo)(()=>{var r;let a=null===(r=p.current)||void 0===r?void 0:r.filter(Boolean).map(e=>new n.D(e)),o=null==a?void 0:a.find(t=>t.getTool()===e||t.getMotionAxis()===e||t.getExtruderAxis()===e);if(null==o&&t)throw Error("Toolhead with number or axis ".concat(e," not found"));return null!=o?o:null},[t,e,p.current]),[m,h]=(0,i.useState)(!1),g=(0,o._8)(e=>{let{set:t,snapshot:r}=e;return async e=>{var o,i,p,f;let g=new n.D(e),y=await r.getPromise((0,s.AF)(g.getTool()));if(null==y)throw Error("Toolhead ".concat(g.getToolCommand()," not found"));let x=new n.D(y);if(e.extruder.id!=x.getExtruder().id&&null!=e.extruder.stepper){let r=(0,a.WZ)(e.extruder.stepper);null!=r&&t((0,l.ew)(g.getExtruderAxis()),t=>{var n;return null==t?null:{...t,stepper:r.id,current:null!==(n=e.extruder.current)&&void 0!==n?n:.71*r.maxPeakCurrent}})}if((null===(o=e.toolboard)||void 0===o?void 0:o.id)!==(null===(i=x.getToolboard())||void 0===i?void 0:i.id)){if(null==e.toolboard&&"endstop-toolboard"===e.xEndstop.id&&(e.xEndstop=c.Jt),null===(p=e.partFan)||void 0===p?void 0:p.id.endsWith("-toolboard")){let t=(0,d.gL)(null,e).shift();if(null==t)throw Error("No part fan options available for current T".concat(e.toolNumber," configuration"));e.partFan=t}if(null===(f=e.hotendFan)||void 0===f?void 0:f.id.endsWith("-toolboard")){let t=(0,d.Yo)(null,e).shift();if(null==t)throw Error("No hotend fan options available for current T".concat(e.toolNumber," configuration"));e.hotendFan=t}}e.thermistor!==x.getThermistor()&&e.thermistor!==e.hotend.thermistor?h(!0):e.hotend.id==x.getHotend().id||m||(e.thermistor=e.hotend.thermistor);let w=u.PY.extend({toolNumber:u.Qr}).nullable().safeParse({...e,toolNumber:x.getTool()});return w.success&&t((0,s.AF)(x.getTool()),w.data),w}},[m]);return{toolhead:f,setToolhead:g}}},6363:function(e,t,r){"use strict";r.d(t,{NI:function(){return i},Xz:function(){return x},o5:function(){return l}});var n=r(94594),a=r(21899);let o=n.z.union([n.z.literal("time"),n.z.literal("x_acceleration"),n.z.literal("y_acceleration"),n.z.literal("z_acceleration")]),i=n.z.object({header:n.z.tuple([o,o,o,o])}),l=n.z.object({data:n.z.array(n.z.tuple([n.z.number(),n.z.number(),n.z.number(),n.z.number()])),overflows:n.z.number().optional()}),s=n.z.object({frequencies:n.z.array(n.z.number()),estimates:n.z.array(n.z.number()),powerRange:n.z.object({max:n.z.number(),min:n.z.number()})}),u=n.z.object({x:s,y:s,z:s,total:s,source:n.z.object({x:n.z.array(s),y:n.z.array(s),z:n.z.array(s),total:n.z.array(s)})}),c=n.z.string().brand("MacroID"),d=n.z.string().brand("MacroSequenceID"),p=n.z.string().brand("MacroRecordingID"),f=n.z.string().brand("MacroRecordingRunID"),m=n.z.object({capturePSD:n.z.boolean().default(!1),accelerometer:a.Yx.optional(),color:n.z.string().optional()}).superRefine((e,t)=>(e.capturePSD&&null==e.accelerometer&&t.addIssue({code:n.z.ZodIssueCode.custom,message:"Required when recording resonance data",path:["accelerometer"]}),e)),h=n.z.object({id:p,macroRecordingRunId:f,macroId:c,sequenceId:d,startTimeStamp:n.z.number(),endTimeStamp:n.z.number(),accelerometer:a.Yx,recordingHardwareName:n.z.string(),psd:u,name:n.z.string()});h.extend({psd:u.omit({source:!0})});let g=n.z.object({id:d,name:n.z.string(),recording:m.nullable(),gcode:n.z.string().min(2)}),y=n.z.object({id:c,name:n.z.string(),description:n.z.string(),createdAtTimeStamp:n.z.number(),updatedAtTimeStamp:n.z.number().nullable(),recordingCount:n.z.record(d,n.z.number()),sequences:n.z.array(g)}),x=y.omit({recordingCount:!0,createdAtTimeStamp:!0,updatedAtTimeStamp:!0})}}]);
//# sourceMappingURL=7370-17e017421e62d3ef.js.map