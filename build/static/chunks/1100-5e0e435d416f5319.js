"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1100],{97060:function(e,r,t){t.d(r,{N:function(){return useDebounce}});var n=t(39164);let useDebounce=function(e,r){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,n.useRef)(),l=(0,n.useRef)([]);return(0,n.useEffect)(()=>()=>{o.current&&clearTimeout(o.current)},[]),(0,n.useCallback)(function(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];if(l.current=i,o.current){if(!t)return;clearTimeout(o.current),o.current=void 0}o.current=setTimeout(()=>{e(...l.current),o.current=void 0},r)},[r,t,e])}},34709:function(e,r,t){t.d(r,{i:function(){return AnimatedContainer}});var n=t(72612),o=t(97060),l=t(99699),i=t(73790),a=t(39164),d=t(63278);let AnimatedContainer=e=>{let[r,t]=(0,a.useState)(0),s=(0,a.useRef)(r);s.current=r;let[c,u]=(0,a.useState)(!1),h=(0,a.useRef)(c);h.current=c;let p=(0,a.useRef)(null);(0,l.Z)(p,e=>{e.contentRect.height!==s.current&&t(e.contentRect.height)});let f=(0,o.N)((0,a.useCallback)(()=>{u(!0)},[]),200,!0),m=(0,o.N)((0,a.useCallback)(()=>{u(!1)},[]),200,!0);return(0,n.jsx)(i.E.div,{className:(0,d.m6)(c?"overflow-visible":"overflow-hidden",e.containerClassName),style:{height:r},onAnimationComplete:f,onAnimationStart:m,animate:{height:r},children:(0,n.jsx)("div",{ref:p,className:e.className,children:e.children})})}},34471:function(e,r,t){t.d(r,{j:function(){return Banner}});var n=t(72612);t(39164);var o=t(39634),l=t(63278),i=t(73918);let a=(0,i.j)("rounded-md p-4 border",{variants:{color:{red:[(0,o.xU)({color:"red"}),(0,o.iA)({color:"red"}),(0,o._1)({color:"red"})],yellow:[(0,o.xU)({color:"yellow"}),(0,o.iA)({color:"yellow"}),(0,o._1)({color:"yellow"})],orange:[(0,o.xU)({color:"orange"}),(0,o.iA)({color:"orange"}),(0,o._1)({color:"orange"})],green:[(0,o.xU)({color:"green"}),(0,o.iA)({color:"green"}),(0,o._1)({color:"green"})],lime:[(0,o.xU)({color:"lime"}),(0,o.iA)({color:"lime"}),(0,o._1)({color:"lime"})],blue:[(0,o.xU)({color:"blue"}),(0,o.iA)({color:"blue"}),(0,o._1)({color:"blue"})],sky:[(0,o.xU)({color:"sky"}),(0,o.iA)({color:"sky"}),(0,o._1)({color:"sky"})],indigo:[(0,o.xU)({color:"indigo"}),(0,o.iA)({color:"indigo"}),(0,o._1)({color:"indigo"})],purple:[(0,o.xU)({color:"purple"}),(0,o.iA)({color:"purple"}),(0,o._1)({color:"purple"})],pink:[(0,o.xU)({color:"pink"}),(0,o.iA)({color:"pink"}),(0,o._1)({color:"pink"})],brand:[(0,o.xU)({color:"brand"}),(0,o.iA)({color:"brand"}),(0,o._1)({color:"brand"})],gray:[(0,o.xU)({color:"gray"}),(0,o.iA)({color:"gray"}),(0,o._1)({color:"gray"})]}},defaultVariants:{color:"gray"}}),Banner=e=>{let{Icon:r,className:t,title:o}=e;return(0,n.jsx)("div",{className:(0,l.m6)(a({color:e.color}),e.className),children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)(r,{className:(0,l.dV)("h-5 w-5"),"aria-hidden":"true"})}),(0,n.jsxs)("div",{className:"ml-3 flex-1",children:[(0,n.jsx)("h3",{className:(0,l.dV)("text-sm font-bold"),children:e.title}),(0,n.jsx)("div",{className:"mt-2 text-sm",children:(0,n.jsx)("div",{children:e.children})})]})]})})}},34640:function(e,r,t){t.d(r,{LV:function(){return DropdownWithPrinterQuery},Lt:function(){return Dropdown}});var n=t(72612),o=t(39164),l=t(53614),i=t(63278),a=t(39634),d=t(79293),s=t(98130),c=t(37652),u=t(88116),h=t(81455),p=t(90077),f=t(94809),m=t(89610),x=t(66940),g=t(64929),v=t(59291),b=t(34709),y=t(84481);let OnDropdownOpened=e=>{let{open:r,onShown:t}=e;return(0,o.useEffect)(()=>{r&&t()},[r,t]),null},useDropdownPrinterQueryState=(e,r,t,n)=>{var l;let[i,a]=(0,o.useState)(!1),s=(0,c.useSerializedPrinterConfiguration)(),u=null!=r?r:t?{}:void 0;u&&null!=t&&(u[t]=s);let h=d.SX.printer[e].useQuery(u,{enabled:i||n,keepPreviousData:!0});return{options:null!==(l=h.data)&&void 0!==l?l:[],onShown:()=>a(!0),isFetching:h.isFetching}},DropdownWithPrinterQuery=e=>{let{query:r,vars:t,serializedPrinterConfiguration:l,...i}=e,{value:a}=i,d=(null==a?void 0:a.badge)!=null,s=useDropdownPrinterQueryState(r,t,l,d),c=s.options.find(e=>e.id===(null==a?void 0:a.id)),u=null!=c?c:a;return(0,n.jsx)(o.Suspense,{children:(0,n.jsx)(Dropdown,{...i,...s,value:u})})},badgeDescription=e=>e?Array.isArray(e)?e.map(e=>e.children).join(", "):e.children:"",Dropdown=e=>{var r;let{onSelect:t,value:d}=e,[c,j]=o.useState(!1),k=(0,o.useCallback)(r=>{let n=e.options.find(e=>e.id===r);n&&(null==t||t(n))},[t,e.options]),C=!1==e.sort?e.options:e.options.slice(0).sort((e,r)=>e.title.localeCompare(r.title)),N=(0,i.dV)(e.error&&"ring-red-500 ring-2 text-red-900 placeholder-red-300 dark:text-red-400 dark:placeholder-red-700"),[w]=(0,u.u)(),S=(Array.isArray(null==d?void 0:d.badge)?d.badge:(null==d?void 0:d.badge)?[d.badge]:[]).concat(Array.isArray(e.badge)?e.badge:e.badge?[e.badge]:[]),P=e.help?(0,n.jsx)("div",{className:"mb-2 whitespace-pre-line text-sm text-sky-200/50 opacity-70",id:"email-description",children:e.help}):null;return(0,n.jsxs)(h.J2,{open:c,onOpenChange:j,children:[(0,n.jsx)(m._,{className:(0,i.m6)("block text-sm font-semibold leading-6 text-zinc-700 dark:text-zinc-300",e.error&&"text-red-600 dark:text-red-400"),children:e.label}),P,e.onShown&&(0,n.jsx)(OnDropdownOpened,{open:c,onShown:e.onShown}),(0,n.jsx)(h.xo,{asChild:!0,children:(0,n.jsxs)(f.z,{variant:"outline",role:"combobox","aria-expanded":c,className:(0,i.dV)("w-full justify-between bg-zinc-800 px-2",N),children:[(0,n.jsxs)("span",{className:"flex min-w-0 flex-1 items-center justify-start gap-2 text-left",children:[(0,n.jsx)("span",{className:"min-w-0 flex-1 items-center truncate",children:null!==(r=null==d?void 0:d.title)&&void 0!==r?r:"Pick from the list..."}),e.canClear&&!e.disabled&&(0,n.jsx)("span",{onClick:r=>{r.preventDefault(),r.stopPropagation(),!0===e.canClear&&(null==t||t(null))},className:(0,i.dV)(null==S||0===S.length?"-mr-3":"mr-0","flex h-4 w-4 items-center space-x-1 text-zinc-400"),children:(0,n.jsx)(y.Z,{})}),(0,n.jsx)("span",{className:(0,i.dV)("flex items-center space-x-1",!e.disabled&&"-mr-2"),children:S&&S.map((r,t)=>{var n;return(0,o.createElement)(a.Ct,{...r,key:t,color:null!==(n=r.color)&&void 0!==n?n:e.disabled?"plain":r.color,size:"sm"})})})]}),!e.disabled&&(0,n.jsx)(p.jnn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,n.jsx)("div",{ref:w,children:e.error&&(0,n.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:e.error})}),(0,n.jsxs)(h.yk,{className:"min-w-[var(--radix-popover-trigger-width)] p-0",children:[(0,n.jsxs)(x.mY,{children:[(0,n.jsx)(x.sZ,{placeholder:"Search for option...",className:"h-9"}),(0,n.jsxs)(x.e8,{children:[(0,n.jsx)(x.rb,{children:"No option found."}),(0,n.jsx)(x.fu,{children:C.map(e=>(0,n.jsxs)(x.di,{value:e.title+badgeDescription(e.badge)+e.id,onSelect:()=>{k(e.id),j(!1)},className:(0,i.dV)("gap-2",(null==d?void 0:d.id)===e.id&&"text-brand-400 aria-selected:text-brand-400 hover:text-brand-400"),children:[e.badge&&(Array.isArray(e.badge)?e.badge.map((e,r)=>(0,o.createElement)(a.Ct,{...e,color:e.color,size:"sm",key:r})):(0,n.jsx)(a.Ct,{...e.badge,color:e.badge.color,size:"sm"})),e.title,(0,n.jsx)(l,{className:(0,g.cn)("ml-auto h-4 w-4 text-brand-400",(null==d?void 0:d.id)===e.id?"opacity-100":"opacity-0")})]},e.id))})]})]}),(0,n.jsx)(b.i,{children:e.isFetching&&(0,n.jsx)(v.U5,{className:"flex justify-center px-3 py-2 text-sm text-zinc-400 dark:text-zinc-500",children:(0,n.jsx)(s.$,{})})})]})]})}},57137:function(e,r,t){t.d(r,{o:function(){return TextInput}});var n=t(72612),o=t(96148),l=t(6181),i=t(33964),a=t(53093),d=t(32836),s=t.n(d),c=t(39164),u=t(63278),h=t(69047);let TextInput=e=>{let r=(0,c.useRef)(s()(e)),{onChange:t}=e,[d,p]=(0,c.useState)(!1);(0,u.dV)("h-5 w-5",(e.error,"text-red-500"));let f=e.error?(0,n.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:(0,n.jsx)(i,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})}):null,m=(0,u.dV)(e.error&&"border-red-300 text-red-900 placeholder-red-300 ring-red-500 dark:ring-red-500 dark:text-red-400 dark:placeholder-red-700"),x=e.error?(0,n.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",id:r.current+"-error",children:e.error}):null,g=e.help?(0,n.jsx)("p",{className:"mt-2 text-sm text-zinc-500",id:"email-description",children:e.help}):null,v=(0,c.useCallback)(r=>{null==t||t("number"===e.type?parseFloat(r.currentTarget.value):r.currentTarget.value)},[t,e.type]),b=(0,c.useCallback)(()=>{p(e=>!e)},[]),y="password"===e.type?(0,n.jsx)("div",{onClick:b,className:"absolute inset-y-0 ".concat(null!=f?"right-6":"right-0"," flex cursor-pointer items-center pr-3"),children:d?(0,n.jsx)(o,{className:"h-5 w-5 text-zinc-400"}):(0,n.jsx)(l,{className:"h-5 w-5 text-zinc-400"})}):null;return(0,n.jsxs)("div",{children:[(0,n.jsx)(a._,{className:"block text-sm font-semibold leading-6 text-zinc-700 dark:text-zinc-300",children:e.label}),(0,n.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,n.jsx)(h.I,{...e,type:d?"text":e.type,className:m,placeholder:e.placeholder,defaultValue:e.defaultValue,value:e.value,onChange:v,variant:e.error?"error":"default","aria-invalid":!!e.error,"aria-describedby":e.error?r.current+"-error":void 0}),f,y]}),null!=x?x:g]})}},89610:function(e,r,t){t.d(r,{_:function(){return s}});var n=t(72612),o=t(39164),l=t(53093),i=t(73918),a=t(64929);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),s=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)(l.f,{ref:r,className:(0,a.cn)(d(),t),...o})});(0,a.h)(s,l.f.displayName)},61946:function(e,r,t){t.d(r,{Jt:function(){return o},uo:function(){return xEndstopOptions}});var n=t(1314);let xEndstopOptions=(e,r)=>{let t=[];if((null==r?void 0:r.toolboard)!=null&&t.push({id:"endstop-toolboard",title:"Physical Endstop",badge:[{color:"sky",children:"".concat(r.toolboard.name).concat(null!=r.toolNumber&&" T".concat(r.toolNumber))}]}),(null==r?void 0:r.axis)===n.po.x){var o,l,i,a;t.push({id:"endstop",title:"Physical Endstop",badge:[{color:"purple",children:null!==(i=null==e?void 0:null===(o=e.controlboard)||void 0===o?void 0:o.name)&&void 0!==i?i:"Control Board"}]}),t.push({id:"sensorless",title:"Sensorless Homing",badge:[{color:"purple",children:null!==(a=null==e?void 0:null===(l=e.controlboard)||void 0===l?void 0:l.name)&&void 0!==a?a:"Control Board"}]})}return t},o={id:"endstop",title:"Physical Endstop",badge:[{color:"purple",children:"Control Board"}]}},37652:function(e,r,t){t.r(r),t.d(r,{ControllerFanState:function(){return b},LoadablePrinterConfigurationState:function(){return j},PerformanceModeState:function(){return x},PrinterConfigurationState:function(){return y},StandstillStealthState:function(){return v},StealthchopState:function(){return g},serializePartialPrinterConfiguration:function(){return serializePartialPrinterConfiguration},serializePrinterConfiguration:function(){return serializePrinterConfiguration},usePrinterConfiguration:function(){return usePrinterConfiguration},useSerializedPrinterConfiguration:function(){return useSerializedPrinterConfiguration}});var n=t(96588),o=t(94594),l=t(18954),i=t(61968),a=t(79535),d=t(79807),s=t(39164),c=t(21264),u=t(32342),h=t(65667),p=t(4840),f=t(54939),m=t(98948);let x=(0,n.cn)({key:"PerformanceMode",default:!1,effects:[(0,f.rR)(),(0,a.ok)({refine:(0,d.getRefineCheckerForZodSchema)(o.z.boolean().optional().nullable())})]}),g=(0,n.cn)({key:"Stealchop",default:!1,effects:[(0,f.rR)(),(0,a.ok)({refine:(0,d.getRefineCheckerForZodSchema)(o.z.boolean().optional().nullable())})]}),v=(0,n.cn)({key:"StandstillStealth",default:!1,effects:[(0,f.rR)(),(0,a.ok)({refine:(0,d.getRefineCheckerForZodSchema)(o.z.boolean().optional().nullable())})]}),b=(0,n.cn)({key:"ControllerFan",default:p.z2,effects:[(0,f.rR)(),(0,a.ok)({refine:(0,d.getRefineCheckerForZodSchema)(l.XG.nullable())})]}),y=(0,n.nZ)({key:"PrinterConfiguration",get:async e=>{let{get:r}=e,{printer:t,printerSize:o,performanceMode:l,stealthchop:a,standstillStealth:d,rails:s,controlboard:p,controllerFan:f,toolheads:y}=r((0,n.k9)({printer:u.H6,printerSize:u.hq,performanceMode:x,stealthchop:g,standstillStealth:v,rails:u.q7,controlboard:u.OS,controllerFan:b,toolheads:h.$T})),j=i.jz.safeParse({printer:null==t?null:{...t,defaults:{...t.defaults,toolheads:null==t?void 0:t.defaults.toolheads.map(e=>(0,c.m6)(e))}},size:o,performanceMode:l,stealthchop:a,standstillStealth:d,rails:s,controlboard:p,controllerFan:f,toolheads:y});return!1===j.success&&(0,m.j)().error(j.error.flatten().fieldErrors,"Couldn't parse printer configuration"),j.success?j.data:null}}),j=(0,n.nZ)({key:"LoadablePrinterConfigurationState",get:async e=>{let{get:r}=e,t=r((0,n.Qv)(y));return({hasValue:()=>t.contents,hasError:()=>null,loading:()=>null})[t.state]()}}),serializePrinterConfiguration=e=>{let r={printer:e.printer.id,toolheads:e.toolheads.map(e=>(0,c.m6)(e)),size:e.size,controlboard:e.controlboard.id,controllerFan:e.controllerFan.id,performanceMode:e.performanceMode,stealthchop:e.stealthchop,standstillStealth:e.standstillStealth,rails:e.rails.map(e=>(0,c.Yz)(e))};return i.q_.parse(r)},serializePartialPrinterConfiguration=e=>{var r,t,n,o;let l=null==e?void 0:null===(r=e.toolheads)||void 0===r?void 0:r.map(e=>(0,c.od)(e)),a={printer:null==e?void 0:null===(t=e.printer)||void 0===t?void 0:t.id,toolheads:l,size:null==e?void 0:e.size,controlboard:null==e?void 0:null===(n=e.controlboard)||void 0===n?void 0:n.id,controllerFan:null==e?void 0:null===(o=e.controllerFan)||void 0===o?void 0:o.id,performanceMode:null==e?void 0:e.performanceMode,stealthchop:null==e?void 0:e.stealthchop,standstillStealth:null==e?void 0:e.standstillStealth};return i.NN.parse(a)},useSerializedPrinterConfiguration=()=>{let e=(0,n.sJ)(y),r=(0,s.useMemo)(()=>serializePartialPrinterConfiguration(null!=e?e:{}),[e]);return r},usePrinterConfiguration=()=>{let[e,r]=(0,n.FV)(u.H6),[t,o]=(0,n.FV)(u.hq),[l,a]=(0,n.FV)(u.OS),[d,s]=(0,n.FV)(x),[c,h]=(0,n.FV)(g),[p,f]=(0,n.FV)(v),[m,j]=(0,n.FV)(b),k=(0,n.sJ)(u.q7),C=(0,n.sJ)(y),N=useSerializedPrinterConfiguration(),w=i.dl.safeParse(C);return{selectedPrinter:e,setSelectedPrinter:r,selectedPrinterOption:t,setSelectedPrinterOption:o,selectedBoard:l,setSelectedBoard:a,performanceMode:d,setPerformanceMode:s,stealthchop:c,setStealthchop:h,standstillStealth:p,setStandstillStealth:f,selectedPrinterRails:k,selectedControllerFan:m,setSelectedControllerFan:j,partialPrinterConfiguration:C,serializedPrinterConfiguration:N,parsedPrinterConfiguration:w}}},80461:function(e,r,t){t.d(r,{YC:function(){return useToolheads},yk:function(){return useToolheadConfiguration}});var n=t(11974),o=t(21264),l=t(96588),i=t(39164),a=t(32342),d=t(65667),s=t(22595),c=t(61946),u=t(4840);let useToolheads=()=>{let e=(0,l.sJ)(d.$T),r=(0,i.useMemo)(()=>null==e?void 0:e.filter(Boolean).map(e=>new n.D(e)),[e]);return r},useToolheadConfiguration=function(e){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=(0,l.sJ)(d.wm),h=(0,i.useRef)(t);h.current!==t&&t.length>0&&(h.current=t.slice());let p=(0,i.useMemo)(()=>{var t;let o=null===(t=h.current)||void 0===t?void 0:t.filter(Boolean).map(e=>new n.D(e)),l=null==o?void 0:o.find(r=>r.getTool()===e||r.getMotionAxis()===e||r.getExtruderAxis()===e);if(null==l&&r)throw Error("Toolhead with number or axis ".concat(e," not found"));return null!=l?l:null},[r,e,h.current]),[f,m]=(0,i.useState)(!1),x=(0,l._8)(e=>{let{set:r,snapshot:t}=e;return async e=>{var l,i,h,p;let x=new n.D(e),g=await t.getPromise((0,d.AF)(x.getTool()));if(null==g)throw Error("Toolhead ".concat(x.getToolCommand()," not found"));let v=new n.D(g);if(e.extruder.id!=v.getExtruder().id&&null!=e.extruder.stepper){let t=(0,o.WZ)(e.extruder.stepper);null!=t&&r((0,a.ew)(x.getExtruderAxis()),r=>{var n;return null==r?null:{...r,stepper:t.id,current:null!==(n=e.extruder.current)&&void 0!==n?n:.71*t.maxPeakCurrent}})}if((null===(l=e.toolboard)||void 0===l?void 0:l.id)!==(null===(i=v.getToolboard())||void 0===i?void 0:i.id)){if(null==e.toolboard&&"endstop-toolboard"===e.xEndstop.id&&(e.xEndstop=c.Jt),null===(h=e.partFan)||void 0===h?void 0:h.id.endsWith("-toolboard")){let r=(0,u.gL)(null,e).shift();if(null==r)throw Error("No part fan options available for current T".concat(e.toolNumber," configuration"));e.partFan=r}if(null===(p=e.hotendFan)||void 0===p?void 0:p.id.endsWith("-toolboard")){let r=(0,u.Yo)(null,e).shift();if(null==r)throw Error("No hotend fan options available for current T".concat(e.toolNumber," configuration"));e.hotendFan=r}}e.thermistor!==v.getThermistor()&&e.thermistor!==e.hotend.thermistor?m(!0):e.hotend.id==v.getHotend().id||f||(e.thermistor=e.hotend.thermistor);let b=s.PY.extend({toolNumber:s.Qr}).nullable().safeParse({...e,toolNumber:v.getTool()});return b.success&&r((0,d.AF)(v.getTool()),b.data),b}},[f]);return{toolhead:p,setToolhead:x}}}}]);
//# sourceMappingURL=1100-5e0e435d416f5319.js.map