"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2383],{73323:function(e,r,n){n.d(r,{Ct:function(){return Badge},_1:function(){return i},iA:function(){return d},xU:function(){return a}});var o=n(26248),t=n(73918),l=n(44838);let i=(0,t.j)("",{variants:{color:{rose:"text-rose-700 dark:text-rose-400",red:"text-red-700 dark:text-red-400",yellow:"text-yellow-800 dark:text-yellow-500",orange:"text-orange-800 dark:text-orange-500",green:"text-green-700 dark:text-green-400",lime:"text-lime-700 dark:text-lime-400",blue:"text-blue-700 dark:text-blue-400",sky:"text-sky-700 dark:text-sky-400",indigo:"text-indigo-700 dark:text-indigo-400",purple:"text-purple-700 dark:text-purple-400",pink:"text-pink-700 dark:text-pink-400",brand:"text-brand-700 dark:text-brand-400",gray:"text-zinc-600 dark:text-zinc-400",plain:"text-zinc-900 dark:text-zinc-100"}}}),a=(0,t.j)("",{variants:{color:{rose:"bg-rose-50 dark:bg-rose-400/10",red:"bg-red-50 dark:bg-red-400/10",yellow:"bg-yellow-50 dark:bg-yellow-400/10",orange:"bg-orange-50 dark:bg-orange-400/10",green:"bg-green-50 dark:bg-green-500/10",lime:"bg-lime-50 dark:bg-lime-500/10",blue:"bg-blue-50 dark:bg-blue-400/10",sky:"bg-sky-50 dark:bg-sky-400/10",indigo:"bg-indigo-50 dark:bg-indigo-400/10",purple:"bg-purple-50 dark:bg-purple-400/10",pink:"bg-pink-50 dark:bg-pink-400/10",brand:"bg-brand-100 dark:bg-brand-400/10",gray:"bg-zinc-50 dark:bg-zinc-400/10",plain:"bg-zinc-900/10 dark:bg-zinc-100/10"}}}),d=(0,t.j)("",{variants:{color:{rose:"border-rose-600/10 dark:border-rose-400/20 ring-rose-600/10 dark:ring-rose-400/20",red:"border-red-600/10 dark:border-red-400/20 ring-red-600/10 dark:ring-red-400/20",yellow:"border-yellow-600/20 dark:border-yellow-400/20 ring-yellow-600/20 dark:ring-yellow-400/20",orange:"border-orange-600/20 dark:border-orange-400/20 ring-orange-600/20 dark:ring-orange-400/20",green:"border-green-600/20 dark:border-green-500/20 ring-green-600/20 dark:ring-green-500/20",lime:"border-lime-600/20 dark:border-lime-500/20 ring-lime-600/20 dark:ring-lime-500/20",blue:"border-blue-700/10 dark:border-blue-400/30 ring-blue-700/10 dark:ring-blue-400/30",sky:"border-sky-700/10 dark:border-sky-400/30 ring-sky-700/10 dark:ring-sky-400/30",indigo:"border-indigo-700/10 dark:border-indigo-400/30 ring-indigo-700/10 dark:ring-indigo-400/30",purple:"border-purple-700/10 dark:border-purple-400/30 ring-purple-700/10 dark:ring-purple-400/30",pink:"border-pink-700/10 dark:border-pink-400/20 ring-pink-700/10 dark:ring-pink-400/20",brand:"border-brand-600/40 dark:border-brand-400/30 ring-brand-600/40 dark:ring-brand-400/30",gray:"border-zinc-500/10 dark:border-zinc-400/20 ring-zinc-500/10 dark:ring-zinc-400/20",plain:"border-zinc-900 dark:border-zinc-100 ring-zinc-900 dark:ring-zinc-100"}}}),s=(0,t.j)("flex-0 inline-flex w-auto items-center rounded-md font-medium ring-1 ring-inset",{variants:{size:{sm:"px-1.5 py-1 text-2xs leading-3",md:"px-2 py-1 text-xs leading-4",lg:"px-2 py-1 text-xs leading-6"},color:{rose:[a({color:"rose"}),d({color:"rose"}),i({color:"rose"})],red:[a({color:"red"}),d({color:"red"}),i({color:"red"})],yellow:[a({color:"yellow"}),d({color:"yellow"}),i({color:"yellow"})],orange:[a({color:"orange"}),d({color:"orange"}),i({color:"orange"})],green:[a({color:"green"}),d({color:"green"}),i({color:"green"})],lime:[a({color:"lime"}),d({color:"lime"}),i({color:"lime"})],blue:[a({color:"blue"}),d({color:"blue"}),i({color:"blue"})],sky:[a({color:"sky"}),d({color:"sky"}),i({color:"sky"})],indigo:[a({color:"indigo"}),d({color:"indigo"}),i({color:"indigo"})],purple:[a({color:"purple"}),d({color:"purple"}),i({color:"purple"})],pink:[a({color:"pink"}),d({color:"pink"}),i({color:"pink"})],brand:[a({color:"brand"}),d({color:"brand"}),i({color:"brand"})],gray:[a({color:"gray"}),d({color:"gray"}),i({color:"gray"})],plain:[a({color:"plain"}),d({color:"plain"}),i({color:"plain"})]}},defaultVariants:{size:"md",color:"gray"}}),Badge=e=>{let{size:r,color:n,className:t,children:i,...a}=e;return(0,o.jsx)("span",{className:(0,l.m)(s({size:r,color:n}),t),...a,children:i})}},26418:function(e,r,n){n.d(r,{j:function(){return Banner}});var o=n(26248);n(49738);var t=n(73323),l=n(44838),i=n(50962),a=n(73918);let d=(0,a.j)("rounded-md p-4 border",{variants:{color:{red:[(0,t.xU)({color:"red"}),(0,t.iA)({color:"red"}),(0,t._1)({color:"red"})],yellow:[(0,t.xU)({color:"yellow"}),(0,t.iA)({color:"yellow"}),(0,t._1)({color:"yellow"})],orange:[(0,t.xU)({color:"orange"}),(0,t.iA)({color:"orange"}),(0,t._1)({color:"orange"})],green:[(0,t.xU)({color:"green"}),(0,t.iA)({color:"green"}),(0,t._1)({color:"green"})],lime:[(0,t.xU)({color:"lime"}),(0,t.iA)({color:"lime"}),(0,t._1)({color:"lime"})],blue:[(0,t.xU)({color:"blue"}),(0,t.iA)({color:"blue"}),(0,t._1)({color:"blue"})],sky:[(0,t.xU)({color:"sky"}),(0,t.iA)({color:"sky"}),(0,t._1)({color:"sky"})],indigo:[(0,t.xU)({color:"indigo"}),(0,t.iA)({color:"indigo"}),(0,t._1)({color:"indigo"})],purple:[(0,t.xU)({color:"purple"}),(0,t.iA)({color:"purple"}),(0,t._1)({color:"purple"})],pink:[(0,t.xU)({color:"pink"}),(0,t.iA)({color:"pink"}),(0,t._1)({color:"pink"})],brand:[(0,t.xU)({color:"brand"}),(0,t.iA)({color:"brand"}),(0,t._1)({color:"brand"})],gray:[(0,t.xU)({color:"gray"}),(0,t.iA)({color:"gray"}),(0,t._1)({color:"gray"})]}},defaultVariants:{color:"gray"}}),Banner=e=>{let{Icon:r,className:n,title:t}=e;return(0,o.jsx)("div",{className:(0,l.m)(d({color:e.color}),e.className),children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)(r,{className:(0,i.d)("h-5 w-5"),"aria-hidden":"true"})}),(0,o.jsxs)("div",{className:"ml-3 flex-1",children:[(0,o.jsx)("h3",{className:(0,i.d)("text-sm font-bold"),children:e.title}),(0,o.jsx)("div",{className:"mt-2 text-sm",children:(0,o.jsx)("div",{children:e.children})})]})]})})}},81503:function(e,r,n){n.d(r,{$:function(){return Spinner}});var o=n(26248),t=n(44838);let Spinner=e=>(0,o.jsxs)("svg",{className:(0,t.m)("h-5 w-5 animate-spin text-black dark:text-white",e.noMargin?"":"-ml-1 mr-3",e.className),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},23709:function(e,r,n){n.d(r,{LV:function(){return DropdownWithPrinterQuery},Lt:function(){return Dropdown}});var o=n(26248),t=n(49738),l=n(63337),i=n(14501),a=n(7060),d=n(53614),s=n(44838),c=n(50962),u=n(73323),g=n(64918),p=n(81503),x=n(80434),b=n(88116);let OnDropdownOpened=e=>{let{open:r,onShown:n}=e;return(0,t.useEffect)(()=>{r&&n()},[r,n]),null},useDropdownPrinterQueryState=(e,r,n)=>{var o;let[l,i]=(0,t.useState)(!1),a=(0,x.useSerializedPrinterConfiguration)(),d=null!=r?r:n?{}:void 0;d&&null!=n&&(d[n]=a);let s=g.SX.printer[e].useQuery(d,{enabled:l,keepPreviousData:!0});return{options:null!==(o=s.data)&&void 0!==o?o:[],onShown:()=>i(!0),isFetching:s.isFetching}},DropdownWithPrinterQuery=e=>{let{query:r,vars:n,serializedPrinterConfiguration:l,...i}=e,a=useDropdownPrinterQueryState(r,n,l);return(0,o.jsx)(t.Suspense,{children:(0,o.jsx)(Dropdown,{...i,...a})})},Dropdown=e=>{var r;let{onSelect:n,value:g}=e,x=(0,t.useCallback)(r=>{let o=e.options.find(e=>e.id===r);o&&(null==n||n(o))},[n,e.options]),m=!1==e.sort?e.options:e.options.slice(0).sort((e,r)=>e.title.localeCompare(r.title)),h=(0,s.m)("relative flex w-full cursor-default items-center justify-between rounded-md bg-white py-1.5 pl-3 pr-3 text-left text-zinc-900 shadow-sm ring-1 ring-inset ring-zinc-300 focus:outline-none focus:ring-2 focus:ring-brand-600 dark:bg-zinc-800 dark:text-zinc-300 dark:ring-zinc-700 dark:focus:ring-brand-400 sm:text-sm sm:leading-6",e.error?"ring-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 dark:ring-red-500 dark:text-red-400 dark:placeholder-red-700":"ring-zinc-300 text-zinc-900 placeholder-zinc-300 focus:ring-brand-600 dark:ring-zinc-700 dark:text-zinc-100 dark:placeholder-zinc-700 dark:focus:ring-brand-400 "),[f]=(0,b.u)();return(0,o.jsx)(l.R,{value:(null!==(r=null==g?void 0:g.id)&&void 0!==r?r:null===g)?null:void 0,onChange:x,disabled:e.disabled,children:r=>{var n;let{open:x}=r;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.R.Label,{className:(0,s.m)("block text-sm font-semibold leading-6 text-zinc-700 dark:text-zinc-300",e.error&&"text-red-600 dark:text-red-400"),children:e.label}),e.onShown&&(0,o.jsx)(OnDropdownOpened,{open:x,onShown:e.onShown}),(0,o.jsxs)("div",{className:"relative mt-1",children:[(0,o.jsxs)(l.R.Button,{className:h,disabled:e.disabled,title:null==g?void 0:g.title,children:[(0,o.jsx)("span",{className:"flex-1 truncate",children:null!==(n=null==g?void 0:g.title)&&void 0!==n?n:"Pick from the list..."}),(0,o.jsx)("span",{className:(0,c.d)("flex items-center space-x-1",e.disabled&&"-mr-1.5"),children:e.badge&&(Array.isArray(e.badge)?e.badge:[e.badge]).map((r,n)=>{var o;return(0,t.createElement)(u.Ct,{...r,key:n,color:null!==(o=r.color)&&void 0!==o?o:e.disabled?"plain":r.color,size:"sm"})})}),!e.disabled&&(0,o.jsx)("span",{className:"pointer-events-none -mr-4 flex items-center pr-2",children:(0,o.jsx)(a,{className:"h-5 w-5 text-zinc-400","aria-hidden":"true"})})]}),(0,o.jsx)("div",{ref:f,children:e.error&&(0,o.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:e.error})}),(0,o.jsx)(i.u,{show:x,as:t.Fragment,enter:"transition duration-150 ease-out",enterFrom:"transform translate-y-1 opacity-0",enterTo:"transform translate-y-0 opacity-100",leave:"transition duration-200 ease-out",leaveFrom:"transform translate-y-0 opacity-100",leaveTo:"transform translate-y-1 opacity-0",children:(0,o.jsxs)(l.R.Options,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 scrollbar-thin scrollbar-track-transparent scrollbar-thumb-zinc-400 scrollbar-thumb-rounded-md focus:outline-none dark:bg-zinc-800 dark:scrollbar-thumb-zinc-600 sm:text-sm",children:[m.map(e=>(0,o.jsx)(l.R.Option,{className:e=>{let{active:r,disabled:n}=e;return(0,s.m)(r?"dark bg-brand-600 text-white":"text-zinc-900 dark:text-zinc-300",n&&"text-zinc-400 dark:text-zinc-500","relative cursor-default select-none py-2 pl-3 pr-9")},disabled:e.disabled,value:e.id,children:r=>{let{selected:n,active:l}=r;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("span",{className:(0,c.d)(n?"font-semibold":"font-normal","flex items-center space-x-2 truncate"),children:[(0,o.jsx)("span",{children:e.title})," ",e.badge&&(Array.isArray(e.badge)?e.badge.map((e,r)=>(0,t.createElement)(u.Ct,{...e,color:l?"plain":e.color,size:"sm",key:r})):(0,o.jsx)(u.Ct,{...e.badge,color:l?"plain":e.badge.color,size:"sm"}))]}),n?(0,o.jsx)("span",{className:(0,c.d)(l?"text-white":"text-brand-600","absolute inset-y-0 right-0 flex items-center pr-4"),children:(0,o.jsx)(d,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},e.id)),e.isFetching&&(0,o.jsx)("div",{className:"flex justify-center px-3 py-2 text-sm text-zinc-400 dark:text-zinc-500",children:(0,o.jsx)(p.$,{})}),!e.isFetching&&0===m.length&&(0,o.jsx)("div",{className:"px-3 py-2 text-center text-sm text-zinc-400 dark:text-zinc-500",children:"No options available"})]})})]})]})}})}},48542:function(e,r,n){n.d(r,{o:function(){return TextInput}});var o=n(26248),t=n(96148),l=n(6181),i=n(33964),a=n(32836),d=n.n(a),s=n(49738),c=n(50962);let TextInput=e=>{let r=(0,s.useRef)(d()(e)),{onChange:n}=e,[a,u]=(0,s.useState)(!1);(0,c.d)("h-5 w-5",(e.error,"text-red-500"));let g=e.error?(0,o.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:(0,o.jsx)(i,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})}):null,p=(0,c.d)(e.error?"ring-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 dark:ring-red-500 dark:text-red-400 dark:placeholder-red-700":"ring-zinc-300 text-zinc-900 placeholder-zinc-300 focus:ring-brand-600 dark:ring-zinc-700 dark:text-zinc-100 dark:placeholder-zinc-700 dark:focus:ring-brand-400 ","block w-full rounded-md bg-white py-1.5 pl-3 pr-3 text-leftshadow-sm ring-1 ring-inset focus:outline-none dark:bg-zinc-800 sm:text-sm sm:leading-6 border-0"),x=e.error?(0,o.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",id:r.current+"-error",children:e.error}):null,b=e.help?(0,o.jsx)("p",{className:"mt-2 text-sm text-zinc-500",id:"email-description",children:e.help}):null,m=(0,s.useCallback)(r=>{null==n||n("number"===e.type?parseFloat(r.currentTarget.value):r.currentTarget.value)},[n,e.type]),h=(0,s.useCallback)(()=>{u(e=>!e)},[]),f="password"===e.type?(0,o.jsx)("div",{onClick:h,className:"absolute inset-y-0 ".concat(null!=g?"right-6":"right-0"," flex cursor-pointer items-center pr-3"),children:a?(0,o.jsx)(t,{className:"h-5 w-5 text-zinc-400"}):(0,o.jsx)(l,{className:"h-5 w-5 text-zinc-400"})}):null;return(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-semibold leading-6 text-zinc-700 dark:text-zinc-300",children:e.label}),(0,o.jsxs)("div",{className:"relative mt-1 rounded-md shadow-sm",children:[(0,o.jsx)("input",{...e,type:a?"text":e.type,className:p,placeholder:e.placeholder,defaultValue:e.defaultValue,value:e.value,onChange:m,"aria-invalid":!!e.error,"aria-describedby":e.error?r.current+"-error":void 0}),g,f]}),null!=x?x:b]})}},24740:function(e,r,n){n.d(r,{Jt:function(){return t},uo:function(){return xEndstopOptions}});var o=n(78185);let xEndstopOptions=(e,r)=>{let n=[];return(null==r?void 0:r.toolboard)!=null&&n.push({id:"endstop-toolboard",title:"Physical Endstop (toolboard)"}),(null==r?void 0:r.axis)===o.po.x&&(n.push({id:"endstop",title:"Physical Endstop"}),n.push({id:"sensorless",title:"Sensorless Homing"})),n},t={id:"endstop",title:"Physical Endstop"}},17533:function(e,r,n){n.d(r,{O:function(){return useIsClient}});var o=n(49738);let useIsClient=()=>{let[e,r]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{r(!0)},[]),e}},80434:function(e,r,n){n.r(r),n.d(r,{ControllerFanState:function(){return f},LoadablePrinterConfigurationState:function(){return y},PerformanceModeState:function(){return b},PrinterConfigurationState:function(){return k},StandstillStealthState:function(){return h},StealthchopState:function(){return m},serializePartialPrinterConfiguration:function(){return serializePartialPrinterConfiguration},serializePrinterConfiguration:function(){return serializePrinterConfiguration},usePrinterConfiguration:function(){return usePrinterConfiguration},useSerializedPrinterConfiguration:function(){return useSerializedPrinterConfiguration}});var o=n(55797),t=n(94594),l=n(21899),i=n(24948),a=n(83587),d=n(85582),s=n(49738),c=n(97370),u=n(48418),g=n(57674),p=n(31667),x=n(72931);let b=(0,o.cn)({key:"PerformanceMode",default:!1,effects:[(0,x.rR)(),(0,a.ok)({refine:(0,d.getRefineCheckerForZodSchema)(t.z.boolean().optional().nullable())})]}),m=(0,o.cn)({key:"Stealchop",default:!1,effects:[(0,x.rR)(),(0,a.ok)({refine:(0,d.getRefineCheckerForZodSchema)(t.z.boolean().optional().nullable())})]}),h=(0,o.cn)({key:"StandstillStealth",default:!1,effects:[(0,x.rR)(),(0,a.ok)({refine:(0,d.getRefineCheckerForZodSchema)(t.z.boolean().optional().nullable())})]}),f=(0,o.cn)({key:"ControllerFan",default:p.z2,effects:[(0,x.rR)(),(0,a.ok)({refine:(0,d.getRefineCheckerForZodSchema)(l.XG.nullable())})]}),k=(0,o.nZ)({key:"PrinterConfiguration",get:async e=>{let{get:r}=e,{printer:n,printerSize:t,performanceMode:l,stealthchop:a,standstillStealth:d,rails:s,controlboard:p,controllerFan:x,toolheads:k}=r((0,o.k9)({printer:u.H6,printerSize:u.hq,performanceMode:b,stealthchop:m,standstillStealth:h,rails:u.q7,controlboard:u.OS,controllerFan:f,toolheads:g.$T})),y=i.jz.safeParse({printer:null==n?null:{...n,defaults:{...n.defaults,toolheads:null==n?void 0:n.defaults.toolheads.map(e=>(0,c.m6)(e))}},size:t,performanceMode:l,stealthchop:a,standstillStealth:d,rails:s,controlboard:p,controllerFan:x,toolheads:k});return!1===y.success&&console.error(y.error.flatten().fieldErrors),y.success?y.data:null}}),y=(0,o.nZ)({key:"LoadablePrinterConfigurationState",get:async e=>{let{get:r}=e,n=r((0,o.Qv)(k));return({hasValue:()=>n.contents,hasError:()=>null,loading:()=>null})[n.state]()}}),serializePrinterConfiguration=e=>{let r={printer:e.printer.id,toolheads:e.toolheads.map(e=>(0,c.m6)(e)),size:e.size,controlboard:e.controlboard.id,controllerFan:e.controllerFan.id,performanceMode:e.performanceMode,stealthchop:e.stealthchop,standstillStealth:e.standstillStealth,rails:e.rails.map(e=>(0,c.Yz)(e))};return i.q_.parse(r)},serializePartialPrinterConfiguration=e=>{var r,n,o,t;let l=null==e?void 0:null===(r=e.toolheads)||void 0===r?void 0:r.map(e=>(0,c.od)(e)),a={printer:null==e?void 0:null===(n=e.printer)||void 0===n?void 0:n.id,toolheads:l,size:null==e?void 0:e.size,controlboard:null==e?void 0:null===(o=e.controlboard)||void 0===o?void 0:o.id,controllerFan:null==e?void 0:null===(t=e.controllerFan)||void 0===t?void 0:t.id,performanceMode:null==e?void 0:e.performanceMode,stealthchop:null==e?void 0:e.stealthchop,standstillStealth:null==e?void 0:e.standstillStealth};return i.NN.parse(a)},useSerializedPrinterConfiguration=()=>{let e=(0,o.sJ)(k),r=(0,s.useMemo)(()=>serializePartialPrinterConfiguration(null!=e?e:{}),[e]);return r},usePrinterConfiguration=()=>{let[e,r]=(0,o.FV)(u.H6),[n,t]=(0,o.FV)(u.hq),[l,a]=(0,o.FV)(u.OS),[d,s]=(0,o.FV)(b),[c,g]=(0,o.FV)(m),[p,x]=(0,o.FV)(h),[y,v]=(0,o.FV)(f),z=(0,o.sJ)(u.q7),w=(0,o.sJ)(k),j=useSerializedPrinterConfiguration(),C=i.dl.safeParse(w);return{selectedPrinter:e,setSelectedPrinter:r,selectedPrinterOption:n,setSelectedPrinterOption:t,selectedBoard:l,setSelectedBoard:a,performanceMode:d,setPerformanceMode:s,stealthchop:c,setStealthchop:g,standstillStealth:p,setStandstillStealth:x,selectedPrinterRails:z,selectedControllerFan:y,setSelectedControllerFan:v,partialPrinterConfiguration:w,serializedPrinterConfiguration:j,parsedPrinterConfiguration:C}}},33334:function(e,r,n){n.d(r,{YC:function(){return useToolheads},yk:function(){return useToolheadConfiguration}});var o=n(51758),t=n(97370),l=n(55797),i=n(49738),a=n(48418),d=n(57674),s=n(89553),c=n(24740),u=n(31667);let useToolheads=()=>{let e=(0,l.sJ)(d.$T),r=(0,i.useMemo)(()=>null==e?void 0:e.filter(Boolean).map(e=>new o.D(e)),[e]);return r},useToolheadConfiguration=function(e){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=(0,l.sJ)(d.wm),g=(0,i.useRef)(n);g.current!==n&&n.length>0&&(g.current=n.slice());let p=(0,i.useMemo)(()=>{var n;let t=null===(n=g.current)||void 0===n?void 0:n.filter(Boolean).map(e=>new o.D(e)),l=null==t?void 0:t.find(r=>r.getTool()===e||r.getMotionAxis()===e||r.getExtruderAxis()===e);if(null==l&&r)throw Error("Toolhead with number or axis ".concat(e," not found"));return null!=l?l:null},[r,e,g.current]),[x,b]=(0,i.useState)(!1),m=(0,l._8)(e=>{let{set:r,snapshot:n}=e;return async e=>{var l,i,g,p;let m=new o.D(e),h=await n.getPromise((0,d.AF)(m.getTool()));if(null==h)throw Error("Toolhead ".concat(m.getToolCommand()," not found"));let f=new o.D(h);if(e.extruder.id!=f.getExtruder().id&&null!=e.extruder.stepper){let n=(0,t.WZ)(e.extruder.stepper);null!=n&&r((0,a.ew)(m.getExtruderAxis()),r=>{var o;return null==r?null:{...r,stepper:n.id,current:null!==(o=e.extruder.current)&&void 0!==o?o:.71*n.maxPeakCurrent}})}if((null===(l=e.toolboard)||void 0===l?void 0:l.id)!==(null===(i=f.getToolboard())||void 0===i?void 0:i.id)){if(null==e.toolboard&&"endstop-toolboard"===e.xEndstop.id&&(e.xEndstop=c.Jt),null===(g=e.partFan)||void 0===g?void 0:g.id.endsWith("-toolboard")){let r=(0,u.gL)(null,e).shift();if(null==r)throw Error("No part fan options available for current T".concat(e.toolNumber," configuration"));e.partFan=r}if(null===(p=e.hotendFan)||void 0===p?void 0:p.id.endsWith("-toolboard")){let r=(0,u.Yo)(null,e).shift();if(null==r)throw Error("No hotend fan options available for current T".concat(e.toolNumber," configuration"));e.hotendFan=r}}e.thermistor!==f.getThermistor()&&e.thermistor!==e.hotend.thermistor?b(!0):e.hotend.id==f.getHotend().id||x||(e.thermistor=e.hotend.thermistor);let k=s.PY.extend({toolNumber:s.Qr}).nullable().safeParse({...e,toolNumber:f.getTool()});return k.success&&r((0,d.AF)(f.getTool()),k.data),k}},[x]);return{toolhead:p,setToolhead:m}}}}]);
//# sourceMappingURL=2383-e5c9bcede6a99e8d.js.map